webpackJsonp([28],{"+CGn":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),i=a.n(l),n={data:function(){var e=function(e,t,a){if(""===t)a(new Error("请输入EC账号"));else{/^[1][3,4,5,6,7,8][0-9]{9}$/.test(t)?a():a(new Error("请输入正确的EC账号"))}};return{basicActiveName:"first",apiSetData:{state:1,CorpId:"284***",AppId:"55615460*********",AppSecret:"lIF43HlF0**********",ec:"15011307051",type:[],ip1:"101.201.77.126",ip2:"47.100.195.99"},typeCheckOp:[{value:1,label:"A"},{value:2,label:"B"},{value:3,label:"A"},{value:4,label:"C"},{value:5,label:"D"},{value:6,label:"E"},{value:7,label:"F"}],showApiSet:!1,apiSetForm:{state:1,CorpId:"284***",AppId:"55615460*********",AppSecret:"lIF43HlF0**********",ec:"15011307051"},apiSetRules:{CorpId:[{required:!0,message:"请输入CorpId",trigger:"blur"}],AppId:[{required:!0,message:"请输入AppId",trigger:"blur"}],AppSecret:[{required:!0,message:"请输入AppSecret",trigger:"blur"}],ec:[{required:!0,validator:e,trigger:"blur"}]},delVisible:!1,showBindAccount:!1,bindAddTitle:"绑定新账号",multipleSelection:[],searchBindAccount:"",bindAccountTableData:[{id:1,account:"940107600@qq.com",name:"shay1",ec:"18211103898"},{id:2,account:"940107600@qq.com",name:"shay2",ec:"18211103898"},{id:3,account:"940107600@qq.com",name:"shay3",ec:"18211103898"}],bindAccountForm:{account:"",name:"",ec:""},bindAccountRules:{account:[{required:!0,message:"请选择子账号",trigger:"change"}],name:[{required:!0,message:"请输入账户姓名",trigger:"blur"}],ec:[{required:!0,validator:e,trigger:"blur"}]},accountOp:[{value:1,label:"shay1"},{value:2,label:"shay2"},{value:3,label:"shay3"}],bindAccountTotal:150,bindAccountCurrentPage:2,bindAccountPageSize:100,searchSyncLog:{name:"",type:"",date:"",content:""},syncNameOp:[{value:1,label:"shay"},{value:2,label:"刘欣雨"},{value:3,label:"刘"}],syncTypeOp:[{value:1,label:"消息"},{value:2,label:"测试"},{value:3,label:"shay"}],syncLogTableData:[{id:1,name:"shay",type:"消息",content:"新EC客户标签（18210217178,B）",date:"2018-12-24 18:18:18"},{id:2,name:"shay",type:"消息",content:"新EC客户标签（18210217178,B）",date:"2018-12-24 18:18:18"},{id:3,name:"shay",type:"消息",content:"新EC客户标签（18210217178,B）",date:"2018-12-24 18:18:18"}],syncLogTotal:150,syncLogCurrentPage:2,syncLogPageSize:100}},methods:{handleClickBasic:function(e,t){},submitCustomerType:function(){this.$message.success("设置成功")},clickApiSet:function(){this.showApiSet=!0,this.apiSetForm=JSON.parse(i()(this.apiSetData))},closeGatewayModal:function(e){this.showApiSet=!1,this.$refs[e].resetFields()},submitApiSetBtn:function(){var e=JSON.parse(i()(this.apiSetForm));this.apiSetData=e,this.$message.success("设置成功"),this.closeGatewayModal("apiSetForm")},searchBind:function(){},handleSelectBind:function(e){this.multipleSelection=e},clickDelCheckBind:function(){if(this.multipleSelection.length>0){var e=[];this.multipleSelection.forEach(function(t,a){e.push(t.id)}),this.delBindAxios(e)}else this.$message.error("请先选择需要删除的账号")},clickDelBindAccount:function(e,t){var a=t.id;this.delBindAxios(a,e)},delBindAxios:function(e,t){var a=this;"number"==typeof e?void 0!==t?this.bindAccountTableData.splice(t,1):this.showRightMember():(this.bindAccountTableData=this.bindAccountTableData.filter(function(e){return-1===a.multipleSelection.indexOf(e)}),this.$refs.bindAccountTable.clearSelection()),this.$message.success("删除成功")},clickshowBindAccount:function(e,t){"add"===e?(this.bindAddTitle="绑定新账号",this.bindAccountForm={account:"",name:"",ec:""}):"edit"===e&&(this.bindAddTitle="编辑绑定账号",this.bindAccountForm=JSON.parse(i()(t))),this.showBindAccount=!0},submitBindBtn:function(){var e=this;this.$refs.bindAccountForm.validate(function(t){if(t){var a=JSON.parse(i()(e.bindAccountForm));"绑定新账号"===e.bindAddTitle?(e.bindAccountTableData.push(a),e.$message.success("编辑绑定账号")):(e.bindAccountTableData.forEach(function(t,l){a.id===t.id&&e.$set(e.bindAccountTableData,l,a)}),e.$message.success("修改成功")),e.closeMouldModal("bindAccountForm")}})},closeMouldModal:function(e){this.showBindAccount=!1,this.$refs[e].resetFields()},bindAccountHandleSizeChange:function(e){},bindAccountHandleCurrentChange:function(e){},changeOperator:function(e){this.searchSyncLog.content=""},changeType:function(e){this.searchSyncLog.content=""},changeLogDate:function(e){this.searchSyncLog.content=""},searchLog:function(){var e=JSON.parse(i()(this.searchSyncLog.content));this.searchSyncLog={name:"",type:"",date:"",content:e}},syncLogHandleSizeChange:function(e){},syncLogHandleCurrentChange:function(e){},delPopover:a("NZyr").d}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"apiEc haigui-section"},[a("el-tabs",{on:{"tab-click":e.handleClickBasic},model:{value:e.basicActiveName,callback:function(t){e.basicActiveName=t},expression:"basicActiveName"}},[a("el-tab-pane",{staticClass:"apiSet",attrs:{label:"对接设置",name:"first"}},[a("h3",[e._v("接口设置")]),e._v(" "),a("el-form",{ref:"apiSetData",attrs:{model:e.apiSetData,"label-width":"125px"}},[a("el-form-item",{attrs:{label:"启用接口",prop:"state"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.apiSetData.state,callback:function(t){e.$set(e.apiSetData,"state",t)},expression:"apiSetData.state"}},[a("el-radio",{attrs:{label:1}},[e._v("开启")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("关闭")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"CorpId",prop:"CorpId"}},[a("el-input",{attrs:{disabled:""},model:{value:e.apiSetData.CorpId,callback:function(t){e.$set(e.apiSetData,"CorpId",t)},expression:"apiSetData.CorpId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"AppId",prop:"AppId"}},[a("el-input",{attrs:{disabled:""},model:{value:e.apiSetData.AppId,callback:function(t){e.$set(e.apiSetData,"AppId",t)},expression:"apiSetData.AppId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"AppSecret",prop:"AppSecret"}},[a("el-input",{attrs:{disabled:""},model:{value:e.apiSetData.AppSecret,callback:function(t){e.$set(e.apiSetData,"AppSecret",t)},expression:"apiSetData.AppSecret"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"默认EC账号",prop:"ec"}},[a("el-input",{attrs:{disabled:""},model:{value:e.apiSetData.ec,callback:function(t){e.$set(e.apiSetData,"ec",t)},expression:"apiSetData.ec"}}),e._v(" "),a("p",[e._v("通常为手机号，默认会同步客户到EC该账号下")])],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{on:{click:e.clickApiSet}},[e._v("修改接口信息")])],1),e._v(" "),a("el-form-item",{attrs:{label:"需要同步客户类型",prop:"type"}},[a("el-checkbox-group",{model:{value:e.apiSetData.type,callback:function(t){e.$set(e.apiSetData,"type",t)},expression:"apiSetData.type"}},[e._l(e.typeCheckOp,function(t,l){return a("el-checkbox",{key:l,attrs:{label:t.value}},[e._v(e._s(t.label))])}),e._v(" "),a("p",[e._v("设置完成后请添加可信任IP："+e._s(e.apiSetData.ip1)+"    "+e._s(e.apiSetData.ip2))])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitCustomerType}},[e._v("保存")])],1)],1)],1),e._v(" "),a("el-tab-pane",{staticClass:"bindAccount",attrs:{label:"子账号绑定",name:"second"}},[a("div",{staticClass:"apiEc-search"},[a("el-input",{attrs:{placeholder:"搜索账号或姓名","suffix-icon":"el-icon-search"},on:{input:e.searchBind},model:{value:e.searchBindAccount,callback:function(t){e.searchBindAccount=t},expression:"searchBindAccount"}}),e._v(" "),a("div",{staticClass:"apiEc-btn",staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.clickshowBindAccount("add")}}},[e._v("绑定新账号")]),e._v(" "),a("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.delVisible,callback:function(t){e.delVisible=t},expression:"delVisible"}},[a("p",[e._v("是否删除选中的账号？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.delVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.delVisible=!1,e.clickDelCheckBind()}}},[e._v("确定")])],1),e._v(" "),a("el-button",{staticStyle:{padding:"9px","margin-left":"10px"},attrs:{slot:"reference",type:"primary",icon:"el-icon-delete"},on:{click:function(t){e.delVisible=!e.delVisible}},slot:"reference"},[e._v("删除")])],1)],1)],1),e._v(" "),a("el-table",{ref:"bindAccountTable",staticStyle:{width:"100%"},attrs:{data:e.bindAccountTableData},on:{"selection-change":e.handleSelectBind}},[a("el-table-column",{attrs:{width:"20"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"子账号","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ec",label:"绑定EC账号","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.clickshowBindAccount("edit",t.row)}}},[e._v("编辑")]),e._v(" "),a("el-popover",{attrs:{"popper-class":"bindAccountPopover"+t.row.id,placement:"top",width:"160"},model:{value:t.row.visible,callback:function(a){e.$set(t.row,"visible",a)},expression:"scope.row.visible"}},[a("p",[e._v("确定删除此账号吗？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.row.visible=!1,e.clickDelBindAccount(t.$index,t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},on:{click:function(a){a.stopPropagation(),t.row.visible=!t.row.visible,e.delPopover("bindAccount",t.row.id)}},slot:"reference"},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.bindAccountCurrentPage,"page-sizes":[100,200,300,400],"page-size":e.bindAccountPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.bindAccountTotal},on:{"size-change":e.bindAccountHandleSizeChange,"current-change":e.bindAccountHandleCurrentChange}})],1),e._v(" "),a("el-tab-pane",{staticClass:"syncLog",attrs:{label:"同步日志",name:"third"}},[a("div",{staticClass:"apiEc-search"},[a("el-select",{attrs:{placeholder:"请选择操作人",clearable:""},on:{change:e.changeOperator},model:{value:e.searchSyncLog.name,callback:function(t){e.$set(e.searchSyncLog,"name",t)},expression:"searchSyncLog.name"}},e._l(e.syncNameOp,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-select",{attrs:{placeholder:"请选择操作类型",clearable:""},on:{change:e.changeType},model:{value:e.searchSyncLog.type,callback:function(t){e.$set(e.searchSyncLog,"type",t)},expression:"searchSyncLog.type"}},e._l(e.syncTypeOp,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeLogDate},model:{value:e.searchSyncLog.date,callback:function(t){e.$set(e.searchSyncLog,"date",t)},expression:"searchSyncLog.date"}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入日志内容","suffix-icon":"el-icon-search"},on:{input:e.searchLog},model:{value:e.searchSyncLog.content,callback:function(t){e.$set(e.searchSyncLog,"content",t)},expression:"searchSyncLog.content"}})],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.syncLogTableData}},[a("el-table-column",{attrs:{width:"20"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"登录人","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"内容","show-overflow-tooltip":"","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"操作时间","min-width":"180"}})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.syncLogCurrentPage,"page-sizes":[100,200,300,400],"page-size":e.syncLogPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.syncLogTotal},on:{"size-change":e.syncLogHandleSizeChange,"current-change":e.syncLogHandleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"500px",title:"接口设置",visible:e.showApiSet},on:{"update:visible":function(t){e.showApiSet=t},close:function(t){e.closeGatewayModal("apiSetForm")}}},[a("el-form",{ref:"apiSetForm",attrs:{model:e.apiSetForm,rules:e.apiSetRules,"label-width":"125px"}},[a("el-form-item",{attrs:{label:"启用接口",prop:"state"}},[a("el-radio-group",{model:{value:e.apiSetForm.state,callback:function(t){e.$set(e.apiSetForm,"state",t)},expression:"apiSetForm.state"}},[a("el-radio",{attrs:{label:1}},[e._v("开启")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("关闭")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"CorpId",prop:"CorpId"}},[a("el-input",{model:{value:e.apiSetForm.CorpId,callback:function(t){e.$set(e.apiSetForm,"CorpId",t)},expression:"apiSetForm.CorpId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"AppId",prop:"AppId"}},[a("el-input",{model:{value:e.apiSetForm.AppId,callback:function(t){e.$set(e.apiSetForm,"AppId",t)},expression:"apiSetForm.AppId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"AppSecret",prop:"AppSecret"}},[a("el-input",{model:{value:e.apiSetForm.AppSecret,callback:function(t){e.$set(e.apiSetForm,"AppSecret",t)},expression:"apiSetForm.AppSecret"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"默认EC账号",prop:"ec"}},[a("el-input",{model:{value:e.apiSetForm.ec,callback:function(t){e.$set(e.apiSetForm,"ec",t)},expression:"apiSetForm.ec"}}),e._v(" "),a("p",[e._v("通常为手机号，默认会同步客户到EC该账号下")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.closeGatewayModal("apiSetForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitApiSetBtn}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"400px",title:e.bindAddTitle,visible:e.showBindAccount},on:{"update:visible":function(t){e.showBindAccount=t},close:function(t){e.closeMouldModal("bindAccountForm")}}},[a("el-form",{ref:"bindAccountForm",attrs:{model:e.bindAccountForm,rules:e.bindAccountRules,"label-width":"115px"}},[a("el-form-item",{attrs:{label:"子账号",prop:"account"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择子账号"},model:{value:e.bindAccountForm.account,callback:function(t){e.$set(e.bindAccountForm,"account",t)},expression:"bindAccountForm.account"}},e._l(e.accountOp,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.bindAccountForm.name,callback:function(t){e.$set(e.bindAccountForm,"name",t)},expression:"bindAccountForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"默认EC账号",prop:"ec"}},[a("el-input",{model:{value:e.bindAccountForm.ec,callback:function(t){e.$set(e.bindAccountForm,"ec",t)},expression:"bindAccountForm.ec"}}),e._v(" "),a("p",[e._v("通常为手机号，默认会同步客户到EC该账号下")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.closeMouldModal("bindAccountForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitBindBtn}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(n,c,!1,function(e){a("Yd5x")},null,null);t.default=o.exports},Yd5x:function(e,t){}});