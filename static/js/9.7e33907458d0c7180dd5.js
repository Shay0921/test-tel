webpackJsonp([9],{ABJv:function(e,t,s){"use strict";var a=s("mvHQ"),o=s.n(a),l=s("gEXf"),i=s("8VoQ"),r=s("6daL"),n=s("DyVN"),c={props:["page","tableData"],data:function(){return{showOverlay:!1,delVisible:!1,showAIModal:!1,showEmailModal:!1,showMessageModal:!1,showConfirmSea:!1,showConfirmDownload:!1,showTransferModal:!1,setCustomerAIForm:{ai:""},setCustomerAIRules:{ai:[{required:!0,message:"请选择AI任务",trigger:"change"}]},setCustomerEmailForm:{email:""},setCustomerEmailRules:{email:[{required:!0,message:"请选择邮件模板",trigger:"change"}]},setCustomerMessageForm:{message:""},setCustomerMessageRules:{message:[{required:!0,message:"请选择短信模板",trigger:"change"}]},transferModalForm:{tab:"first",checkId:[],checkFirstNode:[],checkIdShow:[],checkSecondNode:[],firstTotal:"",firstFactTotal:"",secondTotal:""},showRemindModal:!1,setCustomerRemind:{type:"set",companyText:"",companyId:[],remindDate:"",remindContent:"",remindClass:"",remindRangeKey:[],remindRangeNode:[]},filterAITaskOp:[{label:"任务1",value:"1"},{label:"任务2",value:"2"}],filterEmailOp:[{label:"邮件1",value:"1"},{label:"邮件2",value:"2"}],filterMessageOp:[{label:"短信1",value:"1"},{label:"短信2",value:"2"}],multipleSelection:[],checkId:[],customerTableData:this.tableData,CRMCustomerTotal:1500,CRMCustomerCurrentPage:2,CRMCustomerPageSize:100,showSlider:!1,clickSliderObj:{id:"",index:""}}},mounted:function(){},watch:{tableData:function(e){this.customerTableData=e},multipleSelection:function(e){var t=this;this.checkId=[],this.multipleSelection.forEach(function(e,s){t.checkId.push(e.id)})},"transferModalForm.checkFirstNode":function(e,t){var s=e.filter(function(e){return-1===t.indexOf(e)});s.forEach(function(e,t){e.count=0}),this.changeTransferNumber()}},computed:{callPhone:{get:function(){return this.$store.getters.callPhone},set:function(e){this.$store.getters.callPhone=e}},CRMCustomerPage:function(){return Math.ceil(this.CRMCustomerTotal/this.CRMCustomerPageSize)},averageNumber:function(){var e={allot:0,quotient:0};if(this.showTransferModal){var t=0,s=this.checkId.length;e=this.transferModalForm.checkSecondNode&&(t=this.transferModalForm.checkSecondNode.length)>0?{allot:s%t,quotient:parseInt(s/t)}:{allot:0,quotient:0}}return e}},methods:{refreshBtn:function(){this.$message.success("刷新成功"),this.$refs.customerTable.clearSelection(),this.$emit("refresh","")},clickDelCheckCustomer:function(){var e=this;if(this.multipleSelection.length>0){var t=[];this.multipleSelection.forEach(function(e,s){t.push(e.id)});var s=this.customerTableData.filter(function(t){return-1===e.multipleSelection.indexOf(t)});this.$emit("update:tableData",s),this.$refs.customerTable.clearSelection(),this.$message.success("删除成功")}else this.$message.error("请先选择需要删除的客户")},handleSaleCommand:function(e){this.checkId.length>0?"ai"===e?this.showAIModal=!0:"email"===e?this.showEmailModal=!0:"message"===e&&(this.showMessageModal=!0):this.$message.error("请先选择需要操作的客户")},closeCustomerTopModal:function(e){var t=this;this.checkId=[],this.multipleSelection.forEach(function(e,s){t.checkId.push(e.id)}),this.showAIModal=!1,this.showEmailModal=!1,this.showMessageModal=!1,this.$refs[e].resetFields()},submitSetAI:function(){var e=this;this.$refs.setCustomerAIForm.validate(function(t){t&&(e.$message.success("设置成功"),e.closeCustomerTopModal("setCustomerAIForm"))})},submitSetEmail:function(){var e=this;this.$refs.setCustomerEmailForm.validate(function(t){t&&(e.$message.success("设置成功"),e.closeCustomerTopModal("setCustomerEmailForm"))})},submitSetMessage:function(){var e=this;this.$refs.setCustomerMessageForm.validate(function(t){t&&(e.$message.success("设置成功"),e.closeCustomerTopModal("setCustomerMessageForm"))})},handleMoreCommand:function(e){this.checkId.length>0?"transfer"===e?(this.transferModalForm={tab:"first",checkId:this.checkId,checkFirstNode:[],checkIdShow:[],checkSecondNode:[],firstTotal:this.checkId.length,firstFactTotal:this.checkId.length,secondTotal:this.checkId.length},this.showTransferModal=!0):"sea"===e?(this.showConfirmSea=!0,this.showOverlay=!0):"export"===e&&(this.showConfirmDownload=!0,this.showOverlay=!0):this.$message.error("请先选择需要操作的客户")},closeTransferModal:function(){this.showTransferModal=!1},handleClickTransferModalTab:function(e,t){},changeTransferNumber:function(){var e=this.transferModalForm,t=this.checkId.length,s=this.checkId.length;e.checkFirstNode.forEach(function(e,a){var o=e.count;void 0===o&&(o=0),s-=o,(t-=o)<=0&&(t=0)}),this.transferModalForm.firstTotal=t,this.transferModalForm.firstFactTotal=s},clickDelTrasferMember:function(e){var t=this.transferModalForm.checkFirstNode;t.forEach(function(s,a){s.id===e&&(s.count=0,t.splice(a,1))}),this.transferModalForm.checkIdShow=t,this.changeTransferNumber()},submitTransferModal:function(){var e=JSON.parse(o()(this.transferModalForm));"first"===e.tab?e.firstFactTotal===this.checkId.length?this.$message.error("请填写分配数量"):e.firstFactTotal<0?this.$message.error("填写数量已超过分配条数"):(this.$message.success("转移成功"),this.$emit("sendTransfer",e),this.closeTransferModal()):this.transferModalForm.checkSecondNode.length>0?this.averageNumber.quotient>0?(this.$message.success("转移成功"),this.$emit("sendTransfer",e),this.closeTransferModal()):this.$message.error("选中的人数超过需要分配的数量"):this.$message.error("请先选择需要分配的成员")},closeConfirmModal:function(){this.showOverlay=!1,this.showConfirmSea=!1,this.showConfirmDownload=!1},goBackSea:function(){var e=this,t=[];this.multipleSelection.forEach(function(e,s){t.push(e.id)});var s=this.customerTableData.filter(function(t){return-1===e.multipleSelection.indexOf(t)});this.$emit("update:tableData",s),this.$refs.customerTable.clearSelection(),this.$message.success("已退回公海"),this.closeConfirmModal()},downloadCustomer:function(){var e=document.createElement("a");e.download="导出客户",e.style.display="none",e.href="../../../static/image/批量导入模板.xlsx",document.body.appendChild(e),e.click(),document.body.removeChild(e),this.$message.success("导出成功"),this.closeConfirmModal()},clickShowRemindModal:function(){var e=this;this.checkId.length>0?(1===this.checkId.length?this.customerTableData.forEach(function(t,s){t.id===e.checkId[0]&&(e.setCustomerRemind.companyText=t.company)}):this.setCustomerRemind.companyText="已选中"+this.checkId.length+"个客户",this.setCustomerRemind.type="set",this.setCustomerRemind.companyId=JSON.parse(o()(this.checkId)),this.showRemindModal=!0):this.$message.error("请先选择需要操作的客户")},CRMCustomerChangeCurrent:function(e){"next"===e?++this.CRMCustomerCurrentPage:--this.CRMCustomerCurrentPage},handleSelectCustomer:function(e){this.multipleSelection=e},sortChangeCustomer:function(e,t,s){"ascending"===e.order?this.$message.success("升序"):"descending"===e.order?this.$message.success("降序"):this.$message.success("还原")},clickTableCallPhone:function(e){if(!this.callPhone.visible){var t={visible:!0,phone:e.phone,contact:e.name,company:e.company};this.$store.dispatch("setCallPhoneVuex",t)}},clickTableAITask:function(e){this.checkId=[e],this.showAIModal=!0},clickTableMessage:function(e){this.checkId=[e],this.showMessageModal=!0},clickTableEmail:function(e){this.checkId=[e],this.showEmailModal=!0},clickTableRemind:function(e){var t=JSON.parse(o()(e)),s=[t.id],a=t.remind;a.remindDate?this.setCustomerRemind={type:"edit",companyId:s,companyText:t.company,remindDate:new Date(a.remindDate),remindContent:a.remindContent,remindClass:a.remindClass,remindRangeNode:a.remindRangeNode,remindRangeKey:a.remindRangeKey}:(this.setCustomerRemind.type="set",this.setCustomerRemind.companyId=s,this.setCustomerRemind.companyText=t.company),this.showRemindModal=!0},CRMCustomerHandleSizeChange:function(e){},CRMCustomerHandleCurrentChange:function(e){this.CRMCustomerCurrentPage=e},clickTableItem:function(e){this.showSlider=!0,this.clickSliderObj={id:e.id,index:this.getRowData("customerTableData",e.id)}},getRowData:function(e,t){for(var s=0;s<this[e].length;s++){if(this[e][s].id===t)return s}},delIndexChild:function(e){this.customerTableData.splice(e,1)}},components:{"v-confirmModal":l.a,"v-memberCheckboxTree":i.a,"v-CRMRemindModal":r.a,"v-CRMSlider":n.a}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{},[s("div",{staticClass:"CRMCustomer-app"},[s("p",[e._v("共"+e._s(e.CRMCustomerTotal)+"人，已选择"+e._s(e.multipleSelection.length)+"人")]),e._v(" "),s("div",{staticClass:"CRMCustomer-app-btn"},[s("div",{},[s("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.delVisible,callback:function(t){e.delVisible=t},expression:"delVisible"}},[s("p",[e._v("是否删除选中的客户？")]),e._v(" "),s("div",{staticStyle:{"text-align":"right",margin:"0"}},[s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.delVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.delVisible=!1,e.clickDelCheckCustomer()}}},[e._v("确定")])],1),e._v(" "),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",icon:"el-icon-delete"},on:{click:function(t){e.delVisible=!e.delVisible}},slot:"reference"},[e._v("删除")])],1),e._v(" "),s("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.refreshBtn}},[e._v("刷新")]),e._v(" "),s("el-dropdown",{staticStyle:{width:"89px"},on:{command:e.handleSaleCommand}},[s("span",{staticClass:"el-dropdown-link"},[s("i",{staticClass:"el-icon-location"}),e._v("营销触达"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"ai"}},[e._v("AI外呼")]),e._v(" "),s("el-dropdown-item",{attrs:{command:"email"}},[e._v("邮件营销")]),e._v(" "),s("el-dropdown-item",{attrs:{command:"message"}},[e._v("短信营销")])],1)],1),e._v(" "),s("el-button",{attrs:{icon:"el-icon-bell"},on:{click:e.clickShowRemindModal}},[e._v("销售提醒")]),e._v(" "),s("el-dropdown",{on:{command:e.handleMoreCommand}},[s("span",{staticClass:"el-dropdown-link"},[e._v("更多"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"transfer"}},[e._v("转移给他人")]),e._v(" "),s("el-dropdown-item",{attrs:{command:"sea"}},[e._v("退回公海")]),e._v(" "),s("el-dropdown-item",{attrs:{command:"export"}},[e._v("导出客户")])],1)],1)],1),e._v(" "),s("div",{staticClass:"CRMCustomer-app-btn-right"},[s("el-button",{attrs:{icon:"el-icon-arrow-right",disabled:e.CRMCustomerCurrentPage===e.CRMCustomerPage},on:{click:function(t){e.CRMCustomerChangeCurrent("next")}}}),e._v(" "),s("el-button",{attrs:{icon:"el-icon-arrow-left",disabled:1===e.CRMCustomerCurrentPage},on:{click:function(t){e.CRMCustomerChangeCurrent("prev")}}}),e._v(" "),s("span",[e._v(e._s(e.CRMCustomerCurrentPage)+"/"+e._s(e.CRMCustomerPage))])],1)])]),e._v(" "),s("div",{staticClass:"CRMCustomer-table"},[s("el-table",{ref:"customerTable",staticStyle:{width:"100%"},attrs:{data:e.customerTableData},on:{"sort-change":e.sortChangeCustomer,"selection-change":e.handleSelectCustomer}},[s("el-table-column",{attrs:{width:"20"}}),e._v(" "),s("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{label:"客户名称","show-overflow-tooltip":"","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"clickCell",on:{click:function(s){e.clickTableItem(t.row)}}},[e._v(e._s(t.row.company))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"联系人","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{placement:"right",width:"230",trigger:"hover"}},[s("div",{staticClass:"customerTable-info"},[s("div",{},[s("img",{attrs:{src:t.row.avatar,alt:""}}),e._v(" "),s("div",{staticStyle:{float:"left"}},[s("p",{staticStyle:{"font-size":"14px"}},[e._v(e._s(t.row.name))]),e._v(" "),s("p",{staticStyle:{"font-size":"14px"}},[e._v(e._s(t.row.phone)),s("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"text"}},[e._v("添加")]),s("el-button",{attrs:{type:"text"}},[e._v("编辑")])],1)])]),e._v(" "),s("div",{staticClass:"customerTable-info-btn"},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"拨打电话",placement:"bottom"}},[s("i",{staticClass:"fa fa-plus"})]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"AI外呼",placement:"bottom"}},[s("i",{staticClass:"fa fa-plus",on:{click:function(s){e.clickTableAITask(t.row.id)}}})]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发送短信",placement:"bottom"}},[s("i",{staticClass:"fa fa-plus",on:{click:function(s){e.clickTableMessage(t.row.id)}}})]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发送邮件",placement:"bottom"}},[s("i",{staticClass:"fa fa-plus",on:{click:function(s){e.clickTableEmail(t.row.id)}}})]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"销售提醒",placement:"bottom"}},[s("i",{staticClass:"fa fa-plus",on:{click:function(s){e.clickTableRemind(t.row)}}})])],1)]),e._v(" "),s("p",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.row.name))])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"跟进阶段","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:"1"===t.row.stage?"success":"warning"},domProps:{textContent:e._s("1"===t.row.stage?"新入库":"有意向")}})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"跟进动态","show-overflow-tooltip":"",sortable:"custom","min-width":"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.update))]),e._v(" "),s("p",[e._v(e._s(t.row.updateContent))])]}}])}),e._v(" "),"CRMTeamList"===e.page?s("el-table-column",{attrs:{prop:"follower",label:"跟进人","min-width":"100"}}):e._e(),e._v(" "),s("el-table-column",{attrs:{prop:"date",label:"创建时间","min-width":"150"}}),e._v(" "),s("el-table-column",{attrs:{prop:"tag",label:"客户标签","show-overflow-tooltip":"","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.tag,function(t,a){return s("el-tag",{key:a,staticStyle:{color:"#fff","margin-right":"5px"},attrs:{color:t.color},domProps:{textContent:e._s(t.text)}})})}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"CRMCustomer-table-btn"},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"拨打电话",placement:"bottom"}},[s("i",{staticClass:"fa fa-plus",on:{click:function(s){e.clickTableCallPhone(t.row)}}})]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"AI外呼",placement:"bottom"}},[s("i",{staticClass:"fa fa-plus",on:{click:function(s){e.clickTableAITask(t.row.id)}}})]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发送短信",placement:"bottom"}},[s("i",{staticClass:"fa fa-plus",on:{click:function(s){e.clickTableMessage(t.row.id)}}})]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发送邮件",placement:"bottom"}},[s("i",{staticClass:"fa fa-plus",on:{click:function(s){e.clickTableEmail(t.row.id)}}})]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"销售提醒",placement:"bottom"}},[s("i",{staticClass:"fa fa-plus",on:{click:function(s){e.clickTableRemind(t.row)}}})])],1)]}}])})],1),e._v(" "),s("el-pagination",{attrs:{"current-page":e.CRMCustomerCurrentPage,"page-sizes":[100,200,300,400],"page-size":e.CRMCustomerPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.CRMCustomerTotal},on:{"size-change":e.CRMCustomerHandleSizeChange,"current-change":e.CRMCustomerHandleCurrentChange}})],1),e._v(" "),s("el-dialog",{attrs:{width:"400px",title:"AI外呼任务",visible:e.showAIModal},on:{"update:visible":function(t){e.showAIModal=t},close:function(t){e.closeCustomerTopModal("setCustomerAIForm")}}},[s("el-form",{ref:"setCustomerAIForm",attrs:{model:e.setCustomerAIForm,rules:e.setCustomerAIRules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"选择AI话术",prop:"ai"}},[s("el-select",{attrs:{placeholder:"选择AI话术"},model:{value:e.setCustomerAIForm.ai,callback:function(t){e.$set(e.setCustomerAIForm,"ai",t)},expression:"setCustomerAIForm.ai"}},e._l(e.filterAITaskOp,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.closeCustomerTopModal("setCustomerAIForm")}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitSetAI}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{width:"400px",title:"发送邮件",visible:e.showEmailModal},on:{"update:visible":function(t){e.showEmailModal=t},close:function(t){e.closeCustomerTopModal("setCustomerEmailForm")}}},[s("el-form",{ref:"setCustomerEmailForm",attrs:{model:e.setCustomerEmailForm,rules:e.setCustomerEmailRules,"label-width":"85px"}},[s("el-form-item",{attrs:{label:"邮件模板",prop:"email"}},[s("el-select",{attrs:{placeholder:"选择邮件模板"},model:{value:e.setCustomerEmailForm.email,callback:function(t){e.$set(e.setCustomerEmailForm,"email",t)},expression:"setCustomerEmailForm.email"}},e._l(e.filterEmailOp,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.closeCustomerTopModal("setCustomerEmailForm")}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitSetEmail}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{width:"400px",title:"发送短信",visible:e.showMessageModal},on:{"update:visible":function(t){e.showMessageModal=t},close:function(t){e.closeCustomerTopModal("setCustomerMessageForm")}}},[s("el-form",{ref:"setCustomerMessageForm",attrs:{model:e.setCustomerMessageForm,rules:e.setCustomerMessageRules,"label-width":"85px"}},[s("el-form-item",{attrs:{label:"短信模板",prop:"message"}},[s("el-select",{attrs:{placeholder:"选择短信模板"},model:{value:e.setCustomerMessageForm.message,callback:function(t){e.$set(e.setCustomerMessageForm,"message",t)},expression:"setCustomerMessageForm.message"}},e._l(e.filterMessageOp,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.closeCustomerTopModal("setCustomerMessageForm")}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitSetMessage}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{staticClass:"customerTransferModal",attrs:{width:"700px",title:"转移给他人",visible:e.showTransferModal},on:{"update:visible":function(t){e.showTransferModal=t},close:e.closeTransferModal}},[s("el-tabs",{on:{"tab-click":e.handleClickTransferModalTab},model:{value:e.transferModalForm.tab,callback:function(t){e.$set(e.transferModalForm,"tab",t)},expression:"transferModalForm.tab"}},[s("el-tab-pane",{attrs:{label:"直接分配",name:"first"}},[s("div",{staticClass:"left"},[s("h6",[e._v("组织架构")]),e._v(" "),s("v-memberCheckboxTree",{attrs:{show:e.showTransferModal,"check-node":e.transferModalForm.checkFirstNode,"check-show":e.transferModalForm.checkIdShow},on:{"update:checkNode":function(t){e.$set(e.transferModalForm,"checkFirstNode",t)},"update:checkShow":function(t){e.$set(e.transferModalForm,"checkIdShow",t)}}})],1),e._v(" "),s("div",{staticClass:"right"},[s("p",[e._v("待分配数据："),s("b",[e._v(e._s(e.transferModalForm.firstTotal))]),e._v("条")]),e._v(" "),s("div",{staticClass:"table scrollbar"},[s("div",{staticClass:"table-header"},[s("p",[e._v("姓名")]),e._v(" "),s("p",[e._v("电话")]),e._v(" "),s("p",[e._v("角色")]),e._v(" "),s("p",[e._v("分配数量")]),e._v(" "),s("p")]),e._v(" "),s("div",{staticClass:"table-body"},e._l(e.transferModalForm.checkFirstNode,function(t,a){return s("div",{staticClass:"table-tr"},[s("p",[e._v(e._s(t.label))]),e._v(" "),s("p",[e._v(e._s(t.phone))]),e._v(" "),s("p",[e._v(e._s(t.role))]),e._v(" "),s("p",[s("el-input-number",{attrs:{min:0,controls:!1,size:"mini"},on:{change:e.changeTransferNumber},model:{value:t.count,callback:function(s){e.$set(t,"count",s)},expression:"item.count"}})],1),e._v(" "),s("p",[s("i",{staticClass:"el-icon-delete",on:{click:function(s){e.clickDelTrasferMember(t.id)}}})])])}))])])]),e._v(" "),s("el-tab-pane",{attrs:{label:"平均分配",name:"second"}},[s("div",{staticClass:"left"},[s("h6",[e._v("组织架构")]),e._v(" "),s("v-memberCheckboxTree",{attrs:{show:e.showTransferModal,"check-node":e.transferModalForm.checkSecondNode},on:{"update:checkNode":function(t){e.$set(e.transferModalForm,"checkSecondNode",t)}}})],1),e._v(" "),s("div",{staticClass:"right"},[s("p",{staticStyle:{"padding-top":"60px","text-align":"center"}},[e._v("待分配数据："),s("b",[e._v(e._s(e.transferModalForm.secondTotal))]),e._v("条")]),e._v(" "),s("p",{staticStyle:{"padding-top":"40px","text-align":"center"}},[e._v("已选"),s("b",{domProps:{textContent:e._s(e.transferModalForm.checkSecondNode?e.transferModalForm.checkSecondNode.length:0)}}),e._v("人，每人分配"),s("b",[e._v(e._s(e.averageNumber.quotient))]),e._v("条，剩余"),s("b",[e._v(e._s(e.averageNumber.allot))]),e._v("条")])])])],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:e.closeTransferModal}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitTransferModal}},[e._v("确 定")])],1)],1),e._v(" "),e.showConfirmSea?s("v-confirmModal",{attrs:{titleMsg:"提示",contentMsg:"确认退回至公海吗？"},on:{close:e.closeConfirmModal,confirm:e.goBackSea}}):e._e(),e._v(" "),e.showConfirmDownload?s("v-confirmModal",{attrs:{titleMsg:"提示",contentMsg:"确认导出客户吗？"},on:{close:e.closeConfirmModal,confirm:e.downloadCustomer}}):e._e(),e._v(" "),e.showOverlay?s("div",{staticClass:"overlay"}):e._e(),e._v(" "),s("v-CRMRemindModal",{attrs:{visible:e.showRemindModal,remindData:e.setCustomerRemind},on:{"update:visible":function(t){e.showRemindModal=t},"update:remindData":function(t){e.setCustomerRemind=t}}}),e._v(" "),s("v-CRMSlider",{attrs:{visible:e.showSlider,sliderObj:e.clickSliderObj,pageType:"edit"},on:{"update:visible":function(t){e.showSlider=t},sendIndex:e.delIndexChild}})],1)},staticRenderFns:[]};var d=s("VU/8")(c,m,!1,function(e){s("GdJi")},null,null);t.a=d.exports},C5SQ:function(e,t){},GdJi:function(e,t){},bRuC:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("sqkR"),o=s("ABJv"),l={data:function(){return{filterData:{},teamTableData:[]}},created:function(){this.renderTeamTable()},methods:{submitAddCustomer:function(e){this.teamTableData.push(e),this.$message.success("新建成功")},getFilterData:function(e){this.filterData=e},refreshChild:function(e){this.renderTeamTable()},remindChild:function(e){var t=this;e.companyId.forEach(function(s,a){for(var o=0;o<t.teamTableData.length;o++)if(s===t.teamTableData[o].id)return t.teamTableData[o].remind=e,!1})},transferChild:function(e){},renderTeamTable:function(){this.teamTableData=[{id:1,company:"北京海硅信息技术有限公司1",name:"刘欣雨1",avatar:"../../../static/image/avatar_gray.jpg",phone:"18211103898",stage:"1",follower:"刘欣雨",update:"2018-10-20 17:00",updateContent:"添加跟进记录： 意向客户 拜访 成交",date:"2018-10-20",tag:[{color:"#409EFF",text:"已拨通"},{color:"#F56C6C",text:"A类客户"}],remind:{remindDate:"2011-01-01 11:11:11",remindContent:"第一个",remindClass:"1",remindRangeKey:[11,77],remindRangeNode:[{id:11,label:"shay"},{id:77,label:"qq"}]}},{id:2,company:"北京海硅信息技术有限公司2",name:"刘欣雨2",avatar:"../../../static/image/avatar_gray.jpg",phone:"18211103898",stage:"2",follower:"刘欣雨",update:"2018-10-20 17:00",updateContent:"添加跟进记录： 意向客户 拜访 成交",date:"2018-10-20",tag:[{color:"#409EFF",text:"已拨通"},{color:"#F56C6C",text:"A类客户"}],remind:{remindDate:"2011-01-01 11:11:11",remindContent:"第一个",remindClass:"1",remindRangeKey:[22,77],remindRangeNode:[{id:22,label:"刘欣雨"},{id:77,label:"qq"}]}},{id:3,company:"北京海硅信息技术有限公司3",name:"刘欣雨3",avatar:"../../../static/image/avatar_gray.jpg",phone:"18211103898",stage:"3",follower:"刘欣雨",update:"2018-10-20 17:00",updateContent:"添加跟进记录： 意向客户 拜访 成交",date:"2018-10-20",tag:[{color:"#409EFF",text:"已拨通"},{color:"#F56C6C",text:"A类客户"}],remind:{remindDate:"2013-01-01 11:11:11",remindContent:"第一个",remindClass:"1",remindRangeKey:[33,44],remindRangeNode:[{id:33,label:"成员1"},{id:44,label:"成员2"}]}}]}},components:{"v-CRMComponent":a.a,"v-CRMCustomerTable":o.a}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"haigui-section CRMTeamList scrollbar"},[s("v-CRMComponent",{attrs:{page:"CRMTeamList"},on:{addCustomer:e.submitAddCustomer,sendFilter:e.getFilterData}}),e._v(" "),s("v-CRMCustomerTable",{attrs:{page:"CRMTeamList",tableData:e.teamTableData},on:{"update:tableData":function(t){e.teamTableData=t},refresh:e.refreshChild,sendRemind:e.remindChild,sendTransfer:e.transferChild}})],1)},staticRenderFns:[]};var r=s("VU/8")(l,i,!1,function(e){s("C5SQ")},null,null);t.default=r.exports}});