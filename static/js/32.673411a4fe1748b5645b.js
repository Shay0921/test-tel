webpackJsonp([32],{klWC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),s=a.n(l),o=a("7t+N"),r=a.n(o),i=a("NZyr"),n={data:function(){var e=this;return{visible:!1,showAddTask:!1,taskingCount:5e3,taskedCount:2e3,taskAllCount:2e3,chooseDate:"",chooseState:"",chooseSearch:"",chooseStateOp:[{value:1,label:"未开始"},{value:2,label:"进行中"},{value:3,label:"已完成"},{value:4,label:"调度中"}],multipleSelection:[],taskTableData:[{id:1,title:"网易企业邮箱",userName:"shay",date:"2018-11-16",progress:20,progressTotal:200,rate:30,state:"1"},{id:2,title:"网易企业邮箱",userName:"shay",date:"2018-11-16",progress:50,progressTotal:150,rate:30,state:"2"},{id:3,title:"网易企业邮箱",userName:"shay",date:"2018-11-16",progress:30,progressTotal:180,rate:30,state:"1"}],taskAddForm:{type:"1",title:"",mould:null,choose:"1",date:"",time:[new Date,new Date],noCall:!1,noCallTime:[new Date,new Date],remind:[],isMessage:!1,messageMould:null,level:[]},taskAddRules:{title:[{required:!0,message:"请输入任务名称",trigger:"blur"}],mould:[{required:!0,message:"请选择话术模板",trigger:"change"}],date:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],time:[{type:"array",required:!0,message:"请选择外呼时间段",trigger:"change"}],noCallTime:[{validator:function(t,a,l){e.$refs.taskNoCallTime.disabled?l():a?l():l(new Error("请选择不拨打时间段"))},required:!0,trigger:"change"}],messageMould:[{validator:function(t,a,l){e.$refs.taskMessageMould.disabled?l():a?l():l(new Error("请选择短信模板"))},trigger:"change"}]},mouldOp:[{label:"话术1",value:1},{label:"话术2",value:2},{label:"话术3",value:3}],messageMouldOp:[{label:"短信1",value:1},{label:"短信2",value:2},{label:"短信3",value:3}],taskTotal:150,taskCurrentPage:2,taskPageSize:100}},methods:{handleSelectionChange:function(e){this.multipleSelection=e},clickPauseTask:function(e,t){e.id;"1"===e.state?(e.state="2",this.$message.success("暂停成功")):(e.state="1",this.$message.success("启动成功"))},clickPauseAllTasks:function(){this.multipleSelection.length>0?(this.multipleSelection.forEach(function(e,t){e.state="2"}),this.$message.success("暂停成功"),this.$refs.taskTable.clearSelection()):this.$message.error("请先选择需要暂停的任务")},addTaskTab:function(e,t){var a="/AIOutboundItem/"+t;Object(i.c)(a,e,"")},closeTaskModal:function(){this.showAddTask=!1,this.$refs.taskAddForm.resetFields()},submitTaskBtn:function(){var e=this;this.$refs.taskAddForm.validate(function(t){if(t){var a=JSON.parse(s()(e.taskAddForm));a.date=Object(i.e)(new Date(a.date)),a.time=[Object(i.f)(new Date(a.time[0])),Object(i.f)(new Date(a.time[1]))],a.noCall?a.noCallTime=[Object(i.f)(new Date(a.noCallTime[0])),Object(i.f)(new Date(a.noCallTime[1]))]:a.noCallTime=[];e.taskTableData.push({id:1,title:"网易企业邮箱",userName:"shay",date:"2018-11-16",progress:20,progressTotal:200,rate:30,state:"1"}),e.$message.success("新建成功"),e.closeTaskModal()}})},taskHandleSizeChange:function(e){},taskHandleCurrentChange:function(e){},delPopover:i.d,restPopover:function(e){this.$nextTick(function(){var t=r()(".myPopover"+e);parseInt(r()(t[0]).css("z-index"))>parseInt(r()(t[1]).css("z-index"))?r()(t[0]).css("display","none"):r()(t[1]).css("display","none")})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outbound"},[a("div",{staticClass:"outbound-header"},[a("div",{staticClass:"outbound-header-item"},[a("i",{staticClass:"iconfont icon-chaxun"}),e._v(" "),a("div",{},[a("span",[e._v("进行中")]),e._v(" "),a("p",[a("b",[e._v(e._s(e.taskingCount))]),e._v("个任务")])])]),a("div",{staticClass:"outbound-header-item"},[a("i",{staticClass:"iconfont icon-chaxun"}),e._v(" "),a("div",{},[a("span",[e._v("已完成")]),e._v(" "),a("p",[a("b",[e._v(e._s(e.taskedCount))]),e._v("个任务")])])]),a("div",{staticClass:"outbound-header-item"},[a("i",{staticClass:"iconfont icon-chaxun"}),e._v(" "),a("div",{},[a("span",[e._v("总任务")]),e._v(" "),a("p",[a("b",[e._v(e._s(e.taskAllCount))]),e._v("个任务")])])])]),e._v(" "),a("div",{staticClass:"outbound-body"},[a("div",{staticClass:"outbound-body-header"},[a("div",{staticClass:"outbound-body-header__left"},[a("el-date-picker",{attrs:{type:"date",size:"small",placeholder:"选择日期"},model:{value:e.chooseDate,callback:function(t){e.chooseDate=t},expression:"chooseDate"}}),e._v(" "),a("el-select",{attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择任务状态"},model:{value:e.chooseState,callback:function(t){e.chooseState=t},expression:"chooseState"}},e._l(e.chooseStateOp,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-input",{staticClass:"chooseSearch",attrs:{placeholder:"搜索任务内容",size:"small","prefix-icon":"el-icon-search"},model:{value:e.chooseSearch,callback:function(t){e.chooseSearch=t},expression:"chooseSearch"}})],1),e._v(" "),a("div",{staticClass:"outbound-body-header__right"},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.showAddTask=!0}}},[e._v("新建任务")]),e._v(" "),a("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("p",[e._v("是否暂停选中的任务？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.visible=!1,e.clickPauseAllTasks()}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",size:"small"},on:{click:function(t){e.visible=!e.visible}},slot:"reference"},[e._v("暂停任务")])],1)],1)]),e._v(" "),a("el-table",{ref:"taskTable",staticStyle:{width:"100%"},attrs:{data:e.taskTableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"",width:"20"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"任务名称","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"创建用户","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"时间","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"进度","min-width":"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-progress",{attrs:{percentage:t.row.rate,"show-text":!1}}),e._v(" "),a("span",{staticStyle:{float:"left","line-height":"10px","margin-left":"10px"}},[e._v(e._s(t.row.progress)+"/"+e._s(t.row.progressTotal))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"接通率","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.rate)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"1"===t.row.state?"":"danger",size:"normal"},domProps:{textContent:e._s("1"===t.row.state?"进行中":"已暂停")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"text",size:"small"},on:{click:function(a){e.addTaskTab(t.row.title,t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-popover",{attrs:{"popper-class":"taskPopover"+t.row.id,placement:"top",width:"160"},model:{value:t.row.visible,callback:function(a){e.$set(t.row,"visible",a)},expression:"scope.row.visible"}},[a("p",{domProps:{textContent:e._s("1"===t.row.state?"是否确定暂停该任务？":"是否确定启动该任务？")}}),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.row.visible=!1,e.clickPauseTask(t.row,t.$index)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},domProps:{textContent:e._s("1"===t.row.state?"暂停任务":"启动任务")},on:{click:function(a){t.row.visible=!t.row.visible,e.delPopover("task",t.row.id)}},slot:"reference"})],1)]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.taskCurrentPage,"page-sizes":[100,200,300,400],"page-size":e.taskPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.taskTotal},on:{"size-change":e.taskHandleSizeChange,"current-change":e.taskHandleCurrentChange}})],1),e._v(" "),a("el-dialog",{staticClass:"addTaskModal",attrs:{width:"550px",title:"新建外呼任务",visible:e.showAddTask},on:{"update:visible":function(t){e.showAddTask=t},close:e.closeTaskModal}},[a("el-form",{ref:"taskAddForm",staticClass:"scrollbar",staticStyle:{"max-height":"400px","overflow-y":"scroll"},attrs:{model:e.taskAddForm,rules:e.taskAddRules,"label-width":"106px"}},[a("el-form-item",{attrs:{label:"任务类型",prop:"type"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.taskAddForm.type,callback:function(t){e.$set(e.taskAddForm,"type",t)},expression:"taskAddForm.type"}},[a("el-radio-button",{attrs:{label:1}},[e._v("AI外呼")]),e._v(" "),a("el-radio-button",{attrs:{label:2}},[e._v("人工外呼")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"任务名称",prop:"title"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{maxlength:30,placeholder:"请输入任务名称"},model:{value:e.taskAddForm.title,callback:function(t){e.$set(e.taskAddForm,"title",t)},expression:"taskAddForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"话术模板",prop:"mould"}},[a("el-select",{attrs:{placeholder:"请选择话术模板"},model:{value:e.taskAddForm.mould,callback:function(t){e.$set(e.taskAddForm,"mould",t)},expression:"taskAddForm.mould"}},e._l(e.mouldOp,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"选择话术",prop:"choose"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.taskAddForm.choose,callback:function(t){e.$set(e.taskAddForm,"choose",t)},expression:"taskAddForm.choose"}},[a("el-radio-button",{attrs:{label:1}},[e._v("立即外呼")]),e._v(" "),a("el-radio-button",{attrs:{label:2}},[e._v("定时外呼")])],1)],1),e._v(" "),2===e.taskAddForm.choose?a("el-form-item",{attrs:{label:"外呼开始日期",prop:"date"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.taskAddForm.date,callback:function(t){e.$set(e.taskAddForm,"date",t)},expression:"taskAddForm.date"}})],1):e._e(),e._v(" "),2===e.taskAddForm.choose?a("el-form-item",{attrs:{label:"外呼时间段",prop:"time"}},[a("el-time-picker",{attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.taskAddForm.time,callback:function(t){e.$set(e.taskAddForm,"time",t)},expression:"taskAddForm.time"}})],1):e._e(),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"",prop:"noCall"}},[a("el-checkbox",{model:{value:e.taskAddForm.noCall,callback:function(t){e.$set(e.taskAddForm,"noCall",t)},expression:"taskAddForm.noCall"}},[e._v("设置不拨打时间段")])],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"noCallTime"}},[a("el-time-picker",{ref:"taskNoCallTime",attrs:{disabled:!e.taskAddForm.noCall,"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.taskAddForm.noCallTime,callback:function(t){e.$set(e.taskAddForm,"noCallTime",t)},expression:"taskAddForm.noCallTime"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"微信提醒",prop:"remind"}},[a("el-checkbox-group",{model:{value:e.taskAddForm.remind,callback:function(t){e.$set(e.taskAddForm,"remind",t)},expression:"taskAddForm.remind"}},[a("el-checkbox",{attrs:{label:"1"}},[e._v("A级（明确有意向）")]),e._v(" "),a("el-checkbox",{attrs:{label:"2"}},[e._v("B级（可能意向）")])],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"是否挂机短信",prop:"isMessage"}},[a("el-switch",{model:{value:e.taskAddForm.isMessage,callback:function(t){e.$set(e.taskAddForm,"isMessage",t)},expression:"taskAddForm.isMessage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"messageMould"}},[a("el-select",{ref:"taskMessageMould",attrs:{placeholder:"请选择短信模板",disabled:!e.taskAddForm.isMessage},model:{value:e.taskAddForm.messageMould,callback:function(t){e.$set(e.taskAddForm,"messageMould",t)},expression:"taskAddForm.messageMould"}},e._l(e.messageMouldOp,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"",prop:"level"}},[a("span",[e._v("客户意向等级")]),e._v(" "),a("el-checkbox-group",{staticClass:"taskLevel",model:{value:e.taskAddForm.level,callback:function(t){e.$set(e.taskAddForm,"level",t)},expression:"taskAddForm.level"}},[a("el-checkbox",{attrs:{label:"1"}},[e._v("A级（明确有意向）")]),e._v(" "),a("el-checkbox",{attrs:{label:"2"}},[e._v("B级（可能意向）")]),e._v(" "),a("el-checkbox",{attrs:{label:"3"}},[e._v("C级（明确拒绝）")]),e._v(" "),a("el-checkbox",{attrs:{label:"4"}},[e._v("D级（用户忙）")]),e._v(" "),a("el-checkbox",{attrs:{label:"5"}},[e._v("E级(拨打失败)")]),e._v(" "),a("el-checkbox",{attrs:{label:"6"}},[e._v("F级(无效客户)")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeTaskModal}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitTaskBtn}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(n,d,!1,function(e){a("sjeF")},null,null);t.default=c.exports},sjeF:function(e,t){}});