webpackJsonp([5],{"1alW":function(t,e,i){var n=i("kM2E");n(n.S,"Number",{isInteger:i("AKgy")})},AKgy:function(t,e,i){var n=i("EqjI"),o=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&o(t)===t}},GS1X:function(t,e){},Pd1B:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("mvHQ"),o=i.n(n),r=i("bOdI"),a=i.n(r),s=i("RRo+"),l=i.n(s),h=i("Lokx"),u=i.n(h),c=i("7t+N"),f=i.n(c),d=i("tDXF");i("Vo7i");var p={props:["rulesFilterOp","val1","val2","val3"],data:function(){return{showSelect:!1,isFilter:!1,isText:!1,ruleType:"",condition_field:this.val1,is_sure:this.val2,data_id:this.val3,firstConOp:[{value:"invite",label:"是否邀约成功"},{value:"refuse",label:"客户最后是否拒绝"},{value:"problem",label:"命中业务问题"},{value:"sureCount",label:"肯定次数"},{value:"refuseCount",label:"拒绝次数"},{value:"talkCount",label:"客户讲话次数"},{value:"talkTime",label:"通话时长"},{value:"talkContent",label:"通话内容"},{value:"talkState",label:"通话状态"}],secondOp0:[{value:1,label:"="}],secondOp1:[{value:1,label:">="},{value:2,label:"<="}],secondOp2:[{value:1,label:"包含全部"},{value:2,label:"包含任一"}],secondConOp:[],thirdConOp:[],thirdCon1:[{value:1,label:"是"},{value:2,label:"否"}],options5:[{value:"HTML",label:"HTML"},{value:"CSS",label:"CSS"},{value:"JavaScript",label:"JavaScript"}],mountedLock:""}},mounted:function(){this.mountedLock="mounted",this.condition_field&&this.renderOp(this.condition_field)},methods:{clickChangeFirst:function(){this.$emit("first")},changeFirst:function(){this.showSelect=!0,this.is_sure=1,this.$emit("update:val1",this.condition_field),this.$emit("update:val2",this.is_sure),"invite"===this.condition_field||"refuse"===this.condition_field?(this.data_id=this.thirdCon1[0].value,this.$emit("update:val3",this.thirdCon1[0].value)):"talkContent"===this.condition_field?(this.data_id="",this.$emit("update:val3","")):"talkState"===this.condition_field?(this.data_id=[],this.$emit("update:val3",[])):(this.ruleType="number",this.data_id=1,this.$emit("update:val3",1)),this.mountedLock="changeFirst"},changeSecond:function(t){this.$emit("update:val2",this.is_sure)},changeThird:function(t){this.$emit("update:val3",this.data_id)},keyupThird:function(t){this.$emit("update:val3",this.data_id)},handleChange:function(t){this.$emit("update:val3",this.data_id)},delSelect:function(t){this.$emit("remove")},renderOp:function(t){this.secondConOp=[],this.secondConOp="invite"===t||"refuse"===t||"talkState"===t?this.secondOp0:"talkContent"===t?this.secondOp2:this.secondOp1,"invite"===t||"refuse"===t?(this.ruleType="select",this.thirdConOp=this.thirdCon1):"talkContent"===t?this.ruleType="input":"talkState"===t?(this.ruleType="inputSelect",this.thirdConOp=this.options5):this.ruleType="number","mounted"===this.mountedLock?this.showSelect=!0:"changeFirst"===this.mountedLock&&(this.data_id=null)}},watch:{val1:function(t){this.val1?(this.condition_field=this.val1,this.showSelect=!0):(this.condition_field="",this.showSelect=!1)},condition_field:function(t){this.renderOp(t),this.is_sure=this.val2,this.data_id=this.val3}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"addRuleList"},[i("el-select",{attrs:{size:"small",placeholder:"请选择"},on:{change:t.changeFirst,"visible-change":t.clickChangeFirst},model:{value:t.condition_field,callback:function(e){t.condition_field=e},expression:"condition_field"}},t._l(t.rulesFilterOp,function(t,e){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),t.showSelect?i("span",[i("el-select",{attrs:{size:"small",placeholder:"请选择"},on:{change:t.changeSecond},model:{value:t.is_sure,callback:function(e){t.is_sure=e},expression:"is_sure"}},t._l(t.secondConOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),"select"===t.ruleType?i("el-select",{attrs:{size:"small",placeholder:"请选择",filterable:t.isFilter},on:{change:t.changeThird},model:{value:t.data_id,callback:function(e){t.data_id=e},expression:"data_id"}},t._l(t.thirdConOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})):t._e(),t._v(" "),"input"===t.ruleType?i("el-input",{attrs:{size:"small",placeholder:"多个标签请使用逗号隔开",maxlength:300},nativeOn:{keyup:function(e){return t.keyupThird(e)}},model:{value:t.data_id,callback:function(e){t.data_id=e},expression:"data_id"}}):t._e(),t._v(" "),"number"===t.ruleType?i("b",[i("el-input-number",{attrs:{size:"small","controls-position":"right",min:0,max:1e3},on:{change:t.handleChange},model:{value:t.data_id,callback:function(e){t.data_id=e},expression:"data_id"}}),t._v("\n        "),i("span",{staticStyle:{"font-size":"14px"},domProps:{textContent:t._s("talkTime"===t.condition_field?"秒":"次")}})],1):t._e()],1):t._e(),t._v(" "),i("div",{staticStyle:{"padding-top":"5px"}},["inputSelect"===t.ruleType?i("el-select",{staticStyle:{width:"97%"},attrs:{size:"small",multiple:"",filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:t.data_id,callback:function(e){t.data_id=e},expression:"data_id"}},t._l(t.thirdConOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})):t._e()],1),t._v(" "),i("i",{staticClass:"far fa-trash-alt",on:{click:t.delSelect}})],1)},staticRenderFns:[]};var v=i("VU/8")(p,y,!1,function(t){i("GS1X")},"data-v-f0c5704a",null).exports,m=i("NZyr"),g={data:function(){var t,e=this,i=function(t,e,i){e||i(),l()(e)?i():i(new Error("请输入数字值"))},n=function(t,i,n){e.showAddLibrary?e.$refs.libraryMessage.disabled?n():i?n():n(new Error("请选择短信模板")):e.showAddStudy&&(e.$refs.studyMessage.disabled?n():i?n():n(new Error("请选择短信模板")))},o=function(t,i,n){e.showAddLibrary?e.$refs.libraryClient.disabled?n():i?n():n(new Error("请选择客户类型")):e.showAddStudy&&(e.$refs.studyClient.disabled?n():i?n():n(new Error("请选择客户类型")))};return t={fullLoading:!1,fullLoadingText:"",activeTab:"1",showOverlay:!1,showSliderMask:!1,showSliderLibrary:!1,showSliderDic:!1,messageOp:[{value:1,label:"模板一"},{value:2,label:"模板二"},{value:3,label:"模板三"}],mainFlowtOp:[{value:1,label:"项目"},{value:2,label:"开场白"},{value:3,label:"普通话术"},{value:4,label:"邀约话术"}],callGroupOp:[{value:1,label:"呼出组"}],clientOp:[{value:1,label:"A级(有明确意向)"},{value:2,label:"B级(可能有意向)"},{value:3,label:"C级(明确拒绝)"},{value:4,label:"D级(用户忙)"},{value:5,label:"E级(拨打失败)"},{value:6,label:"F级(无效客户)"}],wheelOp:[{value:1,label:"会话1"},{value:2,label:"会话2"},{value:3,label:"会话3"}],showAddMap:!1,showMapChangeTag:!1,showMapChangeNext:!1,showAddMapTag:!1,mapActiveIndex:11,addMapTitle:"新建流程",mapAddForm:{title:"",type:""},mapTypeOp:[{value:1,label:"开场白"},{value:2,label:"邀约"}],mapAddRules:{title:[{required:!0,message:"请输入流程名称",trigger:"blur"}],type:[{required:!0,message:"请选择流程类型",trigger:"change"}]},mapSortable:"",mapSortableId:"",mapTargetId:"",mapData:[{id:11,num:1,title:"开场白",type:1,visible:!1},{id:22,num:2,title:"邀约",type:2,visible:!1},{id:33,num:3,title:"测试",type:1,visible:!1},{id:44,num:1,title:"开场白",type:1,visible:!1},{id:55,num:2,title:"邀约",type:2,visible:!1},{id:66,num:3,title:"测试",type:1,visible:!1},{id:77,num:1,title:"开场白",type:1,visible:!1},{id:88,num:2,title:"邀约",type:2,visible:!1},{id:99,num:3,title:"测试",type:1,visible:!1}],mapDiagram:null,mapPalette:null,mapSelectNode:null,mapTextJson:'{ "class": "go.GraphLinksModel","linkFromPortIdProperty": "fromPort","linkToPortIdProperty": "toPort","nodeDataArray": [],"linkDataArray": []}',isIndeterminate:!0,mapNodeForm:{title:"普通话术",desp:"",mapNodeAll:!1,mapNodeCheck:[],isBreak:!1,isMessage:!1,messageModel:"",time:null},mapNodeRules:{title:[{required:!0,message:"请输入流程名称",trigger:"blur"}],desp:[{required:!0,message:"请选择节点话术内容",trigger:"blur"}],time:[{validator:i,trigger:"blur"}]},mapBasicsTags:[{value:"1",label:"肯定"},{value:"2",label:"否定"},{value:"3",label:"拒绝"},{value:"4",label:"未识别"}],mapOwnTags:[{value:"5",label:"感兴趣"},{value:"6",label:"多少钱"}],addMapTagForm:{title:"",keyword:[],answer:""},addMapTagRules:{title:[{required:!0,message:"请输入回答名称",trigger:"blur"}],answer:[{required:!0,message:"请输入回答",trigger:"blur"}]},mapNextForm:{title:"跳转话术",desp:"",nextVal:"",mainFlow:"",group:"",isMessage:!1,messageModel:""},mapNextRules:{title:[{required:!0,message:"请输入节点名称",trigger:"blur"}]},mapNextOp:[{value:1,label:"挂机"},{value:2,label:"下一主动流程"},{value:3,label:"指定主动流程"},{value:4,label:"跳转到坐席组"}],showAddLibrary:!1,librarySliberVisible:!1,addLibraryTitle:"新建问题",libraryAddForm:{type:1,title:"",wordInput:"",keyWord:[],question:"",answer:1,wheel:"",spanAnswer:[],isRandom:!1,isAI:!1,after:2,mainFlow:"",group:"",isBreak:!1,isMessage:!1,messageModel:"",isClient:!1,clientModel:"",time:null},libraryAddRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],question:[{required:!0,message:"请输入问法",trigger:"blur"}],wheel:[{required:!0,message:"选择多轮会话",trigger:"change"}],messageModel:[{validator:n,trigger:"change"}],clientModel:[{validator:o,trigger:"change"}],time:[{validator:i,trigger:"blur"}]},libraryAfterOp:[{value:1,label:"挂机"},{value:2,label:"等待用户应答"},{value:3,label:"跳转到指定主动流程"},{value:4,label:"转到坐席组"}],libraryState:{name:"待录音",type:2},libraryName:"刘欣雨",libraryTime:"2018-10-30 23:23:23",librarySearch:"",libraryTableData:[{id:1,visible:!1,type:1,title:"无法应答处理",keyWord:[],keyWordCount:"5",question:"AI_UNKNOWN",answer:1,wheel:"",spanAnswer:[],isRandom:!1,isAI:!1,after:2,mainFlow:"",group:"",isBreak:!1,isMessage:!1,messageModel:"",isClient:!1,clientModel:"",time:null,date:"2018-10-30"},{id:2,visible:!1,type:2,title:"无法应答",keyWord:[],keyWordCount:"10",question:"AI_UNKNOWNAI_UNKNOWNAI_UNKNOWNAI_UNKNOWNAI_UNKNOWN",answer:2,spanAnswer:[],isRandom:!1,isAI:!1,after:2,mainFlow:"",group:"",isBreak:!1,isMessage:!1,messageModel:"",isClient:!1,clientModel:"",time:null,date:"2018-10-30"}],librarySliderData:{id:1,visible:!1,type:"1",title:"无法应答处理",keyWord:[],keyWordCount:"5",question:"AI_UNKNOWN",answer:2,wheel:2,spanAnswer:[],isRandom:!1,isAI:!1,after:2,mainFlow:"",group:"",isBreak:!1,isMessage:!1,messageModel:"",isClient:!1,clientModel:"",time:null,date:"2018-10-30"},libraryTotal:150,libraryCurrentPage:2,libraryPageSize:100,showAddWheel:!1,showWheelChangeTag:!1,showWheelChangeNext:!1,showAddWheelTag:!1,wheelActiveIndex:1,addWheelTitle:"新建流程",wheelAddForm:{title:"",type:""},wheelTypeOp:[{value:1,label:"开场白"},{value:2,label:"邀约"}],wheelAddRules:{title:[{required:!0,message:"请输入流程名称",trigger:"blur"}],type:[{required:!0,message:"请选择流程类型",trigger:"change"}]},wheelData:[{id:1,num:1,title:"开场白",type:1,visible:!1},{id:2,num:2,title:"邀约",type:2,visible:!1},{id:3,num:3,title:"测试",type:1,visible:!1}],wheelDiagram:null,wheelPalette:null,wheelSelectNode:null},a()(t,"wheelDiagram",null),a()(t,"wheelPalette",null),a()(t,"wheelSelectNode",null),a()(t,"wheelTextJson",'{ "class": "go.GraphLinksModel","linkFromPortIdProperty": "fromPort","linkToPortIdProperty": "toPort","nodeDataArray": [],"linkDataArray": []}'),a()(t,"wheelNodeForm",{title:"普通话术",desp:"",wheelNodeAll:!1,wheelNodeCheck:[],isBreak:!1,isMessage:!1,messageModel:"",time:null}),a()(t,"wheelNodeRules",{title:[{required:!0,message:"请输入流程名称",trigger:"blur"}],desp:[{required:!0,message:"请选择节点话术内容",trigger:"blur"}],time:[{validator:i,trigger:"blur"}]}),a()(t,"wheelBasicsTags",[{value:"1",label:"肯定"},{value:"2",label:"否定"},{value:"3",label:"拒绝"},{value:"4",label:"未识别"}]),a()(t,"wheelOwnTags",[{value:"5",label:"感兴趣"},{value:"6",label:"多少钱"}]),a()(t,"addWheelTagForm",{title:"",keyword:[],answer:""}),a()(t,"addWheelTagRules",{title:[{required:!0,message:"请输入回答名称",trigger:"blur"}],answer:[{required:!0,message:"请输入回答",trigger:"blur"}]}),a()(t,"wheelNextForm",{title:"跳转话术",desp:"",nextVal:"",mainFlow:"",group:"",isMessage:!1,messageModel:""}),a()(t,"wheelNextRules",{title:[{required:!0,message:"请输入节点名称",trigger:"blur"}]}),a()(t,"wheelNextOp",[{value:1,label:"挂机"},{value:2,label:"下一主动流程"},{value:3,label:"指定主动流程"},{value:4,label:"跳转到坐席组"}]),a()(t,"hotTagsArr",["标签一","标签二","标签三"]),a()(t,"hotInputVisible",!1),a()(t,"hotInputValue",""),a()(t,"hotName","shay"),a()(t,"hotTime","2018-10-30 23:23：23"),a()(t,"hotCount","0"),a()(t,"showAddRule",!1),a()(t,"showEditRuleLevel",!1),a()(t,"ruleAddTitle","新建规则"),a()(t,"sortable",""),a()(t,"sortableId",""),a()(t,"targetId",""),a()(t,"ruleAddForm",{rules:[],client:null}),a()(t,"ruleAddRules",{client:[{required:!0,message:"选择意向等级",trigger:"change"}]}),a()(t,"ruleTableData",[{id:1,num:1,ruleTitle:"111是否邀约成功？",client:1,count:"2",date:"2018-10-30",rules:[{condition_field:"refuseCount",condition_type:1,condition_value:58},{condition_field:"sureCount",condition_type:1,condition_value:11}],visible:!1},{id:2,num:2,ruleTitle:"222是否邀约成功？",client:2,count:"2",date:"2018-10-30",rules:[],visible:!1},{id:3,num:3,ruleTitle:"333是否邀约成功？",client:3,count:"2",date:"2018-10-30",rules:[],visible:!1},{id:4,num:4,ruleTitle:"444是否邀约成功？",client:4,count:"2",date:"2018-10-30",rules:[],visible:!1},{id:5,num:5,ruleTitle:"555是否邀约成功？",client:5,count:"2",date:"2018-10-30",rules:[],visible:!1},{id:6,num:6,ruleTitle:"666是否邀约成功？",client:6,count:"2",date:"2018-10-30",rules:[],visible:!1},{id:7,num:7,ruleTitle:"777是否邀约成功？",client:1,count:"2",date:"2018-10-30",rules:[],visible:!1}]),a()(t,"ruleLevelForm",{client:null}),a()(t,"addRulesItem",[]),a()(t,"rulesAllOp",[{value:"invite",label:"是否邀约成功"},{value:"refuse",label:"客户最后是否拒绝"},{value:"problem",label:"命中业务问题"},{value:"sureCount",label:"肯定次数"},{value:"refuseCount",label:"拒绝次数"},{value:"talkCount",label:"客户讲话次数"},{value:"talkTime",label:"通话时长"},{value:"talkContent",label:"通话内容"},{value:"talkState",label:"通话状态"}]),a()(t,"rulesFilterOp",[]),a()(t,"ruleTotal",150),a()(t,"ruleCurrentPage",2),a()(t,"rulePageSize",100),a()(t,"trainChat",[{type:1,content:"您好，我这边是慧之声软件服务中心，您这边对财务软件，仓库进销存软件，办公软件等有需要吗？"},{type:2,content:"不需要"},{type:1,content:"再见"}]),a()(t,"showAddStudy",!1),a()(t,"studyTableData",[{visible:!1,id:1,title:"无法应答",source:"1",state:"1",date:"2018-10-30"},{visible:!1,id:2,title:"无法应答",source:"1",state:"2",date:"2018-10-30"},{visible:!1,id:3,title:"无法应答",source:"1",state:"3",date:"2018-10-30"},{visible:!1,id:4,title:"无法应答",source:"1",state:"1",date:"2018-10-30"},{visible:!1,id:5,title:"无法应答",source:"1",state:"2",date:"2018-10-30"}]),a()(t,"studyTab","1"),a()(t,"studySearch",""),a()(t,"studyNum","150"),a()(t,"studyAddForm",{state:1,quesTitle:"",type:1,title:"",wordInput:"",keyWord:[],question:"",answer:1,wheel:"",spanAnswer:[],isRandom:!1,isAI:!1,after:2,mainFlow:"",group:"",isBreak:!1,isMessage:!1,messageModel:"",isClient:!1,clientModel:"",time:null}),a()(t,"studyAddRules",{quesTitle:[{required:!0,message:"请选择问题",trigger:"change"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],question:[{required:!0,message:"请输入问法",trigger:"blur"}],wheel:[{required:!0,message:"选择多轮会话",trigger:"change"}],messageModel:[{validator:n,trigger:"change"}],clientModel:[{validator:o,trigger:"change"}],time:[{validator:i,trigger:"blur"}]}),a()(t,"studyAfterOp",[{value:1,label:"挂机"},{value:2,label:"等待用户应答"},{value:3,label:"跳转到指定主动流程"},{value:4,label:"转到坐席组"}]),a()(t,"quesOp",[{value:1,label:"问题1"},{value:2,label:"问题2"},{value:3,label:"问题3"}]),a()(t,"studyTotal",150),a()(t,"studyCurrentPage",2),a()(t,"studyPageSize",100),a()(t,"showAddDic",!1),a()(t,"showAddDicItem",!1),a()(t,"showUploadDic",!1),a()(t,"showDicSound",!1),a()(t,"clickDicId",""),a()(t,"dicAddTitle","新建词典"),a()(t,"dicItemAddTitle","新建词条"),a()(t,"dicAddForm",{title:""}),a()(t,"addDicRules",{title:[{required:!0,message:"请输入词典名",trigger:"blur"}]}),a()(t,"dicItemAddForm",{title:""}),a()(t,"addDicItemRules",{title:[{required:!0,message:"请输入词条名",trigger:"blur"}]}),a()(t,"dicSearch",""),a()(t,"dicSearchItem",""),a()(t,"dicTableData",[{id:1,title:"词典名",percent:20,founder:"shay",recordings:"luck",state:"1",date:"2018-10-30",visible:!1},{id:2,title:"词典名",percent:10,founder:"shay",recordings:"luck",state:"2",date:"2018-10-30",visible:!1},{id:3,title:"词典名",percent:100,founder:"shay",recordings:"luck",state:"2",date:"2018-10-30",visible:!1},{id:4,title:"词典名",percent:20,founder:"shay",recordings:"luck",state:"1",date:"2018-10-30",visible:!1}]),a()(t,"dicFileList",[]),a()(t,"dicSliderData",{id:2,title:"",list:[{id:1,title:"shay",date:"2018-10-30"},{id:2,title:"lucy",date:"2018-10-30"},{id:3,title:"ff",date:"2018-10-30"}]}),a()(t,"dicTotal",150),a()(t,"dicCurrentPage",2),a()(t,"dicPageSize",100),a()(t,"dicSliberTotal",150),a()(t,"dicSliberCurrentPage",2),a()(t,"dicSliberPageSize",100),a()(t,"showUploadNotice",!1),a()(t,"radioBatchFile",[]),a()(t,"radioTableData",[{id:1001,title:"开场白",content:"您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是",audio:{url:"../../../static/image/radio.mp3",preload:"auto"}},{id:1001,title:"开场白",content:"您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是",audio:{url:"../../../static/image/radio.mp3",preload:"auto"}},{id:1001,title:"开场白",content:"您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是您好！我们是",audio:{url:"../../../static/image/radio.mp3",preload:"auto"}}]),a()(t,"showRadioAudio",!1),a()(t,"radioModalAudioData",{url:"",preload:""}),a()(t,"radioTotal",150),a()(t,"radioCurrentPage",2),a()(t,"radioPageSize",100),a()(t,"releaseTableData",[{id:1,title:"网易企业邮箱",percent:"55",state:"2",name:"shay",date:"2018-10-30",visible:!1}]),a()(t,"logDate",""),a()(t,"logSearch",""),a()(t,"logTableData",[{user:"shay",action:"话术申请上线话术申请上线话术申请上线话术申请上线话术申请上线话术申请上线话术申请上线",text:"话术申请上线",date:"2018-10-30"},{user:"shay",action:"话术申请上线",text:"话术申请上线",date:"2018-10-30"},{user:"shay",action:"话术申请上线",text:"话术申请上线",date:"2018-10-30"},{user:"shay",action:"话术申请上线",text:"话术申请上线",date:"2018-10-30"},{user:"shay",action:"话术申请上线",text:"话术申请上线",date:"2018-10-30"},{user:"shay",action:"话术申请上线",text:"话术申请上线",date:"2018-10-30"}]),a()(t,"logTotal",150),a()(t,"logCurrentPage",2),a()(t,"logPageSize",100),t},computed:{multiTabs:{get:function(){return this.$store.getters.multiTabs},set:function(t){this.$store.getters.multiTabs=t}}},mounted:function(){var t=this;this.$nextTick(function(){t.mapGoInit(),t.mapDrag(),t.wheelDrag(),t.ruleDrag()})},watch:{"mapNodeForm.mapNodeCheck":function(t,e){var i=this.mapBasicsTags.length+this.mapOwnTags.length;this.mapNodeForm.mapNodeCheck.length===i?this.mapNodeForm.mapNodeAll=!0:this.mapNodeForm.mapNodeAll=!1},"wheelNodeForm.wheelNodeCheck":function(t,e){var i=this.wheelBasicsTags.length+this.wheelOwnTags.length;this.wheelNodeForm.wheelNodeCheck.length===i?this.wheelNodeForm.wheelNodeAll=!0:this.wheelNodeForm.wheelNodeAll=!1}},methods:{deleteRow:function(t,e){e.splice(t,1)},handleTabClick:function(t,e){switch(this.activeTab){case"1":case"2":break;case"3":null===this.wheelPalette&&this.wheelGoInit();break;case"4":this.hotCount=this.hotTagsArr.length}},copySpanText:function(t){var e=t.currentTarget,i=e.innerText.trim(),n=document.createElement("input");document.body.appendChild(n),n.setAttribute("value",i),n.select(),document.execCommand("copy")&&(document.execCommand("copy"),this.$message.success("复制成功")),document.body.removeChild(n)},clickLeftMap:function(t){this.mapActiveIndex=t;this.loadMap('{ "class": "go.GraphLinksModel","linkFromPortIdProperty": "fromPort","linkToPortIdProperty": "toPort","nodeDataArray": [],"linkDataArray": []}')},mapGoInit:function(){var t,e,i,n,r,s=this,l=d.GraphObject.make;this.mapDiagram=l(d.Diagram,"haiguiDiagramMapDiv",(t={initialContentAlignment:d.Spot.Center,"undoManager.isEnabled":!0,allowZoom:!1,allowDrop:!0,"commandHandler.copiesTree":!0,"commandHandler.deletesTree":!0,"draggingTool.dragsTree":!0},a()(t,"allowZoom",!0),a()(t,"validCycle",d.Diagram.CycleNotDirected),t)),this.mapDiagram.nodeTemplate=l(d.Node,"Spot",{locationSpot:d.Spot.Center},new d.Binding("location","loc",d.Point.parse).makeTwoWay(d.Point.stringify),l(d.Panel,"Auto",{name:"PANEL"},new d.Binding("desiredSize","size",d.Size.parse).makeTwoWay(d.Size.stringify),{doubleClick:function(t,e){s.mapSelectNode=e,"first"===e.part.data.category?(s.showMapChangeTag=!0,void 0===e.part.data.isMessage?s.mapNodeForm={title:"普通话术",desp:"",mapNodeAll:!1,mapNodeCheck:[],isBreak:!1,isMessage:!1,messageModel:"",time:null}:s.mapNodeForm=JSON.parse(o()(e.part.data))):"second"===e.part.data.category&&(s.showMapChangeNext=!0,void 0===e.part.data.isMessage?s.mapNextForm={title:"跳转话术",desp:"",nextVal:s.mapNextOp[1].value,mainFlow:"",group:"",isMessage:!1,messageModel:""}:s.mapNextForm=JSON.parse(o()(e.part.data)))}},l(d.Shape,"RoundedRectangle",{fill:"#F7F9FB",strokeWidth:1,stroke:"#E7E7E6",minSize:new d.Size(100,110)}),l(d.Shape,"RoundedRectangle",{fill:"#F7F9FB",margin:10,strokeWidth:0,minSize:new d.Size(100,100)}),l(d.Picture,{width:12,height:16,alignment:d.Spot.TopRight,alignmentFocus:d.Spot.TopRight,margin:new d.Margin(15,10,0,0)},new d.Binding("source","stateSource").makeTwoWay()),l(d.Panel,"Vertical",l(d.TextBlock,{font:"16px Helvetica, Arial, sans-serif",margin:new d.Margin(8,25,5,10),maxSize:new d.Size(400,NaN),alignment:d.Spot.Left},new d.Binding("text","title").makeTwoWay()),l(d.TextBlock,{font:"14px Helvetica, Arial, sans-serif",stroke:"#606266",margin:new d.Margin(8,0,0,10),maxSize:new d.Size(400,NaN),alignment:d.Spot.Left},new d.Binding("text","desp").makeTwoWay()),l(d.Panel,"Horizontal",new d.Binding("itemArray","next").makeTwoWay(),{itemTemplate:l(d.Panel,"Auto",l(d.Shape,"RoundedRectangle",{fill:"transparent",stroke:null}),l(d.TextBlock,{alignment:d.Spot.Left,margin:new d.Margin(8,25,0,8),font:"14px Helvetica, Arial, sans-serif"},new d.Binding("text","")))}),l(d.Panel,"Horizontal",{margin:new d.Margin(8,0,0,10)},new d.Binding("itemArray","items").makeTwoWay(),{itemTemplate:l(d.Panel,"Auto",{margin:new d.Margin(0,10,0,0)},l(d.Shape,"Rectangle",{fill:"#F0F6FE",stroke:"#409EFF",strokeWidth:1}),l(d.TextBlock,{font:"14px Helvetica, Arial, sans-serif",stroke:"#1F8CEC",height:30,textAlign:"center",verticalAlignment:d.Spot.Center,margin:new d.Margin(0,10),minSize:new d.Size(40,NaN),maxSize:new d.Size(100,NaN),overflow:d.TextBlock.OverflowEllipsis,portId:"1",fromLinkable:!0,toLinkable:!1,fromMaxLinks:1,cursor:"pointer"},new d.Binding("text","text"),new d.Binding("portId","portId")))}))),(e="T",i=d.Spot.Top,n=!1,r=!0,l(d.Shape,"Circle",{fill:null,stroke:null,desiredSize:new d.Size(7,7),alignment:i,alignmentFocus:i,portId:e,fromSpot:i,toSpot:i,fromLinkable:n,toLinkable:r,cursor:"pointer"}))),this.mapDiagram.linkTemplate=l(d.Link,{relinkableFrom:!0,relinkableTo:!0,reshapable:!0,resegmentable:!0},new d.Binding("points").makeTwoWay(),new d.Binding("routing","routing",d.Binding.parseEnum(d.Link,d.Link.AvoidsNodes)).makeTwoWay(d.Binding.toString),l(d.Shape,{isPanelMain:!0,strokeWidth:2,stroke:"#108EE9"}),l(d.Shape,{toArrow:"Standard",stroke:"#108EE9",strokeWidth:3,fill:"#108EE9"})),this.loadMap(this.mapTextJson),this.mapPalette=l(d.Palette,"haiguiPaletteMapDiv",{allowZoom:!1}),this.mapPalette.nodeTemplate=l(d.Node,"Spot",{locationSpot:d.Spot.Center},l(d.Panel,"Auto",{name:"PANEL"},l(d.Shape,"Rectangle",{fill:"#fff",strokeWidth:2,stroke:"#fff",minSize:new d.Size(100,110)}),l(d.Shape,"Rectangle",{fill:"#fff",margin:10,strokeWidth:0,minSize:new d.Size(100,100)}),l(d.Panel,"Vertical",l(d.TextBlock,{font:"16px Helvetica, Arial, sans-serif",margin:new d.Margin(8,0,0,10),maxSize:new d.Size(300,NaN),alignment:d.Spot.Left},new d.Binding("text","title").makeTwoWay()),l(d.TextBlock,{font:"14px Helvetica, Arial, sans-serif",margin:new d.Margin(8,0,0,10),maxSize:new d.Size(160,NaN),alignment:d.Spot.Left},new d.Binding("text","desp").makeTwoWay()),l(d.Panel,"Horizontal",new d.Binding("itemArray","next").makeTwoWay(),{itemTemplate:l(d.Panel,"Auto",l(d.Shape,"RoundedRectangle",{fill:"transparent",stroke:null}),l(d.TextBlock,{alignment:d.Spot.Left,margin:new d.Margin(8,8,0,8),font:"14px Helvetica, Arial, sans-serif"},new d.Binding("text","")))}),l(d.Panel,"Horizontal",{margin:new d.Margin(8,0,0,10)},new d.Binding("itemArray","items").makeTwoWay(),{itemTemplate:l(d.Panel,"Auto",{margin:new d.Margin(0,10,0,0)},l(d.Shape,"Rectangle",{fill:"#F0F6FE",strokeWidth:0}),l(d.TextBlock,{font:"14px Helvetica, Arial, sans-serif",stroke:"#1F8CEC",height:30,textAlign:"center",verticalAlignment:d.Spot.Center,margin:new d.Margin(0,10),minSize:new d.Size(40,NaN),maxSize:new d.Size(100,NaN),overflow:d.TextBlock.OverflowEllipsis,portId:"1",fromLinkable:!0,toLinkable:!1,fromMaxLinks:1,cursor:"pointer"},new d.Binding("text","text"),new d.Binding("portId","portId")))})))),this.mapPalette.model=new d.GraphLinksModel([{category:"first",title:"普通话术",desp:"内容",next:[],items:[],stateSource:""},{category:"second",title:"跳转话术",desp:"内容",next:["下一步：-"],items:[],stateSource:""}])},saveMap:function(){this.saveMapDiagram(),this.mapTextJson=this.mapDiagram.model.toJson()},saveMapDiagram:function(){this.mapDiagram.model.modelData.position=d.Point.stringify(this.mapDiagram.position)},loadMap:function(t){this.mapDiagram.model=d.Model.fromJson(t),this.loadMapDiagram()},loadMapDiagram:function(){var t=this.mapDiagram.model.modelData.position;t&&(this.mapDiagram.initialPosition=d.Point.parse(t))},clickShowMapAdd:function(){this.addMapTitle="新建流程",this.showAddMap=!0},submitMapAddBtn:function(){var t=this;this.$refs.mapAddForm.validate(function(e){if(e){if("新建流程"===t.addMapTitle){var i={id:5,num:5,title:(n=JSON.parse(o()(t.mapAddForm))).title,type:n.type};t.mapData.push(i),1===t.mapData.length&&(t.mapActiveIndex=t.mapData[0].id,t.mapDiagram.allowDrop=!0)}else if("编辑流程"===t.addMapTitle){var n=JSON.parse(o()(t.mapAddForm));t.mapData.forEach(function(e,i){n.id===e.id&&(t.mapData[i]=n)})}t.closeMapModal("mapAddForm")}})},clickShowMapEdit:function(t,e){this.addMapTitle="编辑流程",this.showAddMap=!0,this.mapAddForm=JSON.parse(o()(this.mapData[e]))},clickDelMap:function(t){this.mapData.splice(t,1),this.mapData.length>0?this.mapActiveIndex=this.mapData[0].id:(this.mapDiagram.clear(),this.mapDiagram.allowDrop=!1)},submitMapTagBtn:function(){var t=this;this.$refs.addMapTagForm.validate(function(e){if(e){var i=JSON.parse(o()(t.addMapTagForm)),n={value:i.title,label:i.title};t.mapOwnTags.push(n),t.closeAddMapTagModal()}})},closeAddMapTagModal:function(){this.showAddMapTag=!1,this.$refs.addMapTagForm.resetFields()},closeMapModal:function(t){this.showAddMap=!1,this.showMapChangeTag=!1,this.showMapChangeNext=!1,this.$refs[t].resetFields()},changeMapNodeAll:function(t){var e=this;this.mapNodeForm.mapNodeAll?(this.mapNodeForm.mapNodeCheck=[],this.mapBasicsTags.forEach(function(t,i){var n=t.value;e.mapNodeForm.mapNodeCheck.push(n)}),this.mapOwnTags.forEach(function(t,i){var n=t.value;e.mapNodeForm.mapNodeCheck.push(n)})):this.mapNodeForm.mapNodeCheck=[]},getMapTags:function(){var t=[],e=[];return this.mapBasicsTags.forEach(function(t,i){e.push(t)}),this.mapOwnTags.forEach(function(t,i){e.push(t)}),this.mapNodeForm.mapNodeCheck.forEach(function(i,n){for(var o=0;o<e.length;o++)if(i===e[o].value){var r={text:e[o].label,portId:e[o].value};return t.push(r),!1}}),t},submitMapNodeTagBtn:function(){var t=this;this.$refs.mapNodeForm.validate(function(e){if(e){var i=t.getMapTags(),n=JSON.parse(o()(t.mapNodeForm)),r=t.mapDiagram.model;t.mapDiagram.startTransaction("add tag"),r.setDataProperty(t.mapSelectNode.part.data,"items",i),r.setDataProperty(t.mapSelectNode.part.data,"title",n.title),r.setDataProperty(t.mapSelectNode.part.data,"desp",n.desp),r.setDataProperty(t.mapSelectNode.part.data,"isBreak",n.isBreak),r.setDataProperty(t.mapSelectNode.part.data,"isMessage",n.isMessage),r.setDataProperty(t.mapSelectNode.part.data,"messageModel",n.messageModel),r.setDataProperty(t.mapSelectNode.part.data,"time",n.time),r.setDataProperty(t.mapSelectNode.part.data,"mapNodeAll",n.mapNodeAll),r.setDataProperty(t.mapSelectNode.part.data,"mapNodeCheck",n.mapNodeCheck),n.desp?r.setDataProperty(t.mapSelectNode.part.data,"stateSource","https://crm.byrobot.cn/media/record_no.1799f300.svg"):r.setDataProperty(t.mapSelectNode.part.data,"stateSource","");var a=[],s=t.mapSelectNode.part.data.key;t.mapDiagram.findNodeForKey(s).findLinksConnected().each(function(t){for(var e=0;e<i.length;e++)if(i[e].portId===t.data.fromPort)return!1;e>=i.length&&t.data.from===s&&a.push(t.data)}),r.removeLinkDataCollection(a),t.mapDiagram.commitTransaction("add tag"),t.closeMapModal("mapNodeForm")}})},changeMapNext:function(t){3===t?this.mapNextForm.mainFlow=this.mainFlowtOp[0].value:4===t&&(this.mapNextForm.group=this.callGroupOp[0].value)},submitMapNextBtn:function(){var t=this;this.$refs.mapNextForm.validate(function(e){if(e){var i,n,r=JSON.parse(o()(t.mapNextForm)),a=t.mapDiagram.model;t.mapNextOp.forEach(function(t,e){t.value===r.nextVal&&(i="下一步："+t.label,n=[i])}),a.setDataProperty(t.mapSelectNode.part.data,"title",r.title),a.setDataProperty(t.mapSelectNode.part.data,"desp",r.desp),a.setDataProperty(t.mapSelectNode.part.data,"next",n),a.setDataProperty(t.mapSelectNode.part.data,"nextVal",r.nextVal),a.setDataProperty(t.mapSelectNode.part.data,"mainFlow",r.mainFlow),a.setDataProperty(t.mapSelectNode.part.data,"group",r.group),a.setDataProperty(t.mapSelectNode.part.data,"isMessage",r.isMessage),a.setDataProperty(t.mapSelectNode.part.data,"messageModel",r.messageModel),r.desp>0?a.setDataProperty(t.mapSelectNode.part.data,"stateSource","https://crm.byrobot.cn/media/record_no.1799f300.svg"):a.setDataProperty(t.mapSelectNode.part.data,"stateSource",""),t.mapDiagram.startTransaction("add next"),t.mapDiagram.commitTransaction("add next"),t.closeMapModal("mapNextForm")}})},mapDrag:function(){var t=this,e=document.querySelectorAll(".robottalkItem-map .map-arr")[0];this.mapSortable=u.a.create(e,{ghostClass:"sortable-ghost",onEnd:function(e){e.item;t.mapSortableId=t.mapData[e.oldIndex].id,t.maptargetId=t.mapData[e.newIndex].id;for(var i=f()(".map-arr .map-arrItem"),n=0;n<i.length;n++)f()(i[n]).find("s").text(n+1);t.$message({message:"顺序更新成功",type:"success"})}})},searchLibrary:function(){},clickShowLibraryAdd:function(){this.addLibraryTitle="新建问题",this.libraryAddForm={type:1,title:"",wordInput:"",keyWord:[],question:"",answer:1,spanAnswer:[],isRandom:!1,isAI:!1,after:2,mainFlow:"",group:"",isBreak:!1,isMessage:!1,messageModel:"",isClient:!1,clientModel:"",time:null},this.showAddLibrary=!0},clickDelLibrary:function(t,e){e.splice(t,1)},addAnswer:function(){this.libraryAddForm.spanAnswer.push({value:"",key:Date.now()})},removeAnswer:function(t){var e=this.libraryAddForm.spanAnswer.indexOf(t);-1!==e&&this.libraryAddForm.spanAnswer.splice(e,1)},changeLibraryAfter:function(t){3===t?this.libraryAddForm.mainFlow=this.mainFlowtOp[0].value:4===t&&(this.libraryAddForm.group=this.callGroupOp[0].value)},handleLibraryKey:function(){var t=JSON.parse(o()(this.libraryAddForm.wordInput));if(t=t.replace(/,/g,"")){if(!(this.libraryAddForm.keyWord.length>0))return this.libraryAddForm.keyWord.push(t),this.libraryAddForm.wordInput="",!1;for(var e=0,i=0;i<this.libraryAddForm.keyWord.length;i++){if(this.libraryAddForm.keyWord[i]===t)return this.libraryAddForm.wordInput="",!1;e++}this.libraryAddForm.keyWord.length===e&&(this.libraryAddForm.keyWord.push(t),this.libraryAddForm.wordInput="")}else this.libraryAddForm.wordInput=""},handleClose:function(t){this.libraryAddForm.keyWord.splice(this.libraryAddForm.keyWord.indexOf(t),1)},copyLibraryKey:function(){var t=this.libraryAddForm.keyWord.join(",");this.$refs.libraryKeyInput.value=t,this.$refs.libraryKeyInput.select(),document.execCommand("Copy"),this.$message({message:"复制成功",type:"success"})},closeLibraryModal:function(t){this.showAddLibrary=!1,this.$refs[t].resetFields()},clickShowLibraryEdit:function(t,e){this.addLibraryTitle="编辑问题",this.showAddLibrary=!0,this.libraryAddForm=JSON.parse(o()(this.libraryTableData[e]))},submitLibraryAddBtn:function(){var t=this;this.$refs.libraryAddForm.validate(function(e){if(e)if(1===t.libraryAddForm.answer&&t.libraryAddForm.spanAnswer.length<=0)t.$message({message:"回答方式不能为空，请添加该知识点的回答方式",type:"error"});else{var i=JSON.parse(o()(t.libraryAddForm));1===i.answer?i.wheel="":(i.spanAnswer=[],i.isRandom=!1,i.isAI=!1,i.after=2,i.mainFlow="",i.group="",i.isBreak=!1,i.isMessage=!1,i.messageModel="",i.isClient=!1,i.clientModel="",i.time=null),"新建问题"===t.addLibraryTitle?(t.libraryTableData.push(i),t.libraryTableData[t.libraryTableData.length-1].keyWordCount=t.libraryTableData[t.libraryTableData.length-1].keyWord.length,t.$message({message:"新建成功",type:"success"})):"编辑问题"===t.addLibraryTitle&&(t.libraryTableData.forEach(function(e,n){i.id===e.id&&(t.$set(t.libraryTableData,n,i),t.librarySliderData=i,t.libraryTableData[n].keyWordCount=t.libraryTableData[n].keyWord.length)}),t.$message({message:"修改成功",type:"success"})),t.closeLibraryModal("libraryAddForm")}})},clickLibraryItem:function(t,e){this.librarySliderData=t,this.showSliderMask=!0,this.showSliderLibrary=!0},clickHiddenMask:function(){this.showSliderMask=!1,this.showSliderLibrary=!1,this.showSliderDic=!1},clickEditLibrarySlider:function(t){var e=this;this.libraryTableData.forEach(function(i,n){t===i.id&&(e.libraryAddForm=JSON.parse(o()(i)))}),this.addLibraryTitle="编辑问题",this.showAddLibrary=!0},clickDelLibrarySlider:function(t){},libraryHandleSizeChange:function(t){},libraryHandleCurrentChange:function(t){},clickLeftWheel:function(t){this.wheelActiveIndex=t;this.loadWheel('{ "class": "go.GraphLinksModel","linkFromPortIdProperty": "fromPort","linkToPortIdProperty": "toPort","nodeDataArray": [],"linkDataArray": []}')},wheelGoInit:function(){var t,e,i,n,r,s=this,l=d.GraphObject.make;this.wheelDiagram=l(d.Diagram,"haiguiDiagramWheelDiv",(t={initialContentAlignment:d.Spot.Center,"undoManager.isEnabled":!0,allowZoom:!1,allowDrop:!0,"commandHandler.copiesTree":!0,"commandHandler.deletesTree":!0,"draggingTool.dragsTree":!0},a()(t,"allowZoom",!0),a()(t,"validCycle",d.Diagram.CycleNotDirected),t)),this.wheelDiagram.nodeTemplate=l(d.Node,"Spot",{locationSpot:d.Spot.Center},new d.Binding("location","loc",d.Point.parse).makeTwoWay(d.Point.stringify),l(d.Panel,"Auto",{name:"PANEL"},new d.Binding("desiredSize","size",d.Size.parse).makeTwoWay(d.Size.stringify),{doubleClick:function(t,e){s.wheelSelectNode=e,"first"===e.part.data.category?(s.showWheelChangeTag=!0,void 0===e.part.data.isMessage?s.wheelNodeForm={title:"普通话术",desp:"",wheelNodeAll:!1,wheelNodeCheck:[],isBreak:!1,isMessage:!1,messageModel:"",time:null}:s.wheelNodeForm=JSON.parse(o()(e.part.data))):"second"===e.part.data.category&&(s.showWheelChangeNext=!0,void 0===e.part.data.isMessage?s.wheelNextForm={title:"跳转话术",desp:"",nextVal:s.wheelNextOp[1].value,mainFlow:"",group:"",isMessage:!1,messageModel:""}:s.wheelNextForm=JSON.parse(o()(e.part.data)))}},l(d.Shape,"RoundedRectangle",{fill:"#F7F9FB",strokeWidth:1,stroke:"#E7E7E6",minSize:new d.Size(100,110)}),l(d.Shape,"RoundedRectangle",{fill:"#F7F9FB",margin:10,strokeWidth:0,minSize:new d.Size(100,100)}),l(d.Picture,{width:12,height:16,alignment:d.Spot.TopRight,alignmentFocus:d.Spot.TopRight,margin:new d.Margin(15,10,0,0)},new d.Binding("source","stateSource").makeTwoWay()),l(d.Panel,"Vertical",l(d.TextBlock,{font:"16px Helvetica, Arial, sans-serif",margin:new d.Margin(8,25,5,10),maxSize:new d.Size(400,NaN),alignment:d.Spot.Left},new d.Binding("text","title").makeTwoWay()),l(d.TextBlock,{font:"14px Helvetica, Arial, sans-serif",stroke:"#606266",margin:new d.Margin(8,0,0,10),maxSize:new d.Size(400,NaN),alignment:d.Spot.Left},new d.Binding("text","desp").makeTwoWay()),l(d.Panel,"Horizontal",new d.Binding("itemArray","next").makeTwoWay(),{itemTemplate:l(d.Panel,"Auto",l(d.Shape,"RoundedRectangle",{fill:"transparent",stroke:null}),l(d.TextBlock,{alignment:d.Spot.Left,margin:new d.Margin(8,25,0,8),font:"14px Helvetica, Arial, sans-serif"},new d.Binding("text","")))}),l(d.Panel,"Horizontal",{margin:new d.Margin(8,0,0,10)},new d.Binding("itemArray","items").makeTwoWay(),{itemTemplate:l(d.Panel,"Auto",{margin:new d.Margin(0,10,0,0)},l(d.Shape,"Rectangle",{fill:"#F0F6FE",stroke:"#409EFF",strokeWidth:1}),l(d.TextBlock,{font:"14px Helvetica, Arial, sans-serif",stroke:"#1F8CEC",height:30,textAlign:"center",verticalAlignment:d.Spot.Center,margin:new d.Margin(0,10),minSize:new d.Size(40,NaN),maxSize:new d.Size(100,NaN),overflow:d.TextBlock.OverflowEllipsis,portId:"1",fromLinkable:!0,toLinkable:!1,fromMaxLinks:1,cursor:"pointer"},new d.Binding("text","text"),new d.Binding("portId","portId")))}))),(e="T",i=d.Spot.Top,n=!1,r=!0,l(d.Shape,"Circle",{fill:null,stroke:null,desiredSize:new d.Size(7,7),alignment:i,alignmentFocus:i,portId:e,fromSpot:i,toSpot:i,fromLinkable:n,toLinkable:r,cursor:"pointer"}))),this.wheelDiagram.linkTemplate=l(d.Link,{relinkableFrom:!0,relinkableTo:!0,reshapable:!0,resegmentable:!0},new d.Binding("points").makeTwoWay(),new d.Binding("routing","routing",d.Binding.parseEnum(d.Link,d.Link.AvoidsNodes)).makeTwoWay(d.Binding.toString),l(d.Shape,{isPanelMain:!0,strokeWidth:2,stroke:"#108EE9"}),l(d.Shape,{toArrow:"Standard",stroke:"#108EE9",strokeWidth:3,fill:"#108EE9"})),this.loadWheel(this.wheelTextJson),this.wheelPalette=l(d.Palette,"haiguiPaletteWheelDiv",{allowZoom:!1}),this.wheelPalette.nodeTemplate=l(d.Node,"Spot",{locationSpot:d.Spot.Center},l(d.Panel,"Auto",{name:"PANEL"},l(d.Shape,"Rectangle",{fill:"#fff",strokeWidth:2,stroke:"#fff",minSize:new d.Size(100,110)}),l(d.Shape,"Rectangle",{fill:"#fff",margin:10,strokeWidth:0,minSize:new d.Size(100,100)}),l(d.Panel,"Vertical",l(d.TextBlock,{font:"16px Helvetica, Arial, sans-serif",margin:new d.Margin(8,0,0,10),maxSize:new d.Size(300,NaN),alignment:d.Spot.Left},new d.Binding("text","title").makeTwoWay()),l(d.TextBlock,{font:"14px Helvetica, Arial, sans-serif",margin:new d.Margin(8,0,0,10),maxSize:new d.Size(160,NaN),alignment:d.Spot.Left},new d.Binding("text","desp").makeTwoWay()),l(d.Panel,"Horizontal",new d.Binding("itemArray","next").makeTwoWay(),{itemTemplate:l(d.Panel,"Auto",l(d.Shape,"RoundedRectangle",{fill:"transparent",stroke:null}),l(d.TextBlock,{alignment:d.Spot.Left,margin:new d.Margin(8,8,0,8),font:"14px Helvetica, Arial, sans-serif"},new d.Binding("text","")))}),l(d.Panel,"Horizontal",{margin:new d.Margin(8,0,0,10)},new d.Binding("itemArray","items").makeTwoWay(),{itemTemplate:l(d.Panel,"Auto",{margin:new d.Margin(0,10,0,0)},l(d.Shape,"Rectangle",{fill:"#F0F6FE",strokeWidth:0}),l(d.TextBlock,{font:"14px Helvetica, Arial, sans-serif",stroke:"#1F8CEC",height:30,textAlign:"center",verticalAlignment:d.Spot.Center,margin:new d.Margin(0,10),minSize:new d.Size(40,NaN),maxSize:new d.Size(100,NaN),overflow:d.TextBlock.OverflowEllipsis,portId:"1",fromLinkable:!0,toLinkable:!1,fromMaxLinks:1,cursor:"pointer"},new d.Binding("text","text"),new d.Binding("portId","portId")))})))),this.wheelPalette.model=new d.GraphLinksModel([{category:"first",title:"普通话术",desp:"内容",next:[],items:[],stateSource:""},{category:"second",title:"跳转话术",desp:"内容",next:["下一步：-"],items:[],stateSource:""}])},saveWheel:function(){this.saveWheelDiagram(),this.wheelTextJson=this.wheelDiagram.model.toJson()},saveWheelDiagram:function(){this.wheelDiagram.model.modelData.position=d.Point.stringify(this.wheelDiagram.position)},loadWheel:function(t){this.wheelDiagram.model=d.Model.fromJson(t),this.loadWheelDiagram()},loadWheelDiagram:function(){var t=this.wheelDiagram.model.modelData.position;t&&(this.wheelDiagram.initialPosition=d.Point.parse(t))},clickShowWheelAdd:function(){this.addWheelTitle="新建流程",this.showAddWheel=!0},submitWheelAddBtn:function(){var t=this;this.$refs.wheelAddForm.validate(function(e){if(e){if("新建流程"===t.addWheelTitle){var i={id:5,num:5,title:(n=JSON.parse(o()(t.wheelAddForm))).title,type:n.type};t.wheelData.push(i),1===t.wheelData.length&&(t.wheelActiveIndex=t.wheelData[0].id,t.wheelDiagram.allowDrop=!0)}else if("编辑流程"===t.addWheelTitle){var n=JSON.parse(o()(t.wheelAddForm));t.wheelData.forEach(function(e,i){n.id===e.id&&(t.wheelData[i]=n)})}t.closeWheelModal("wheelAddForm")}})},clickShowWheelEdit:function(t,e){this.addWheelTitle="编辑流程",this.showAddWheel=!0,this.wheelAddForm=JSON.parse(o()(this.wheelData[e]))},clickDelWheel:function(t){this.wheelData.splice(t,1),this.wheelData.length>0?this.wheelActiveIndex=this.wheelData[0].id:(this.wheelDiagram.clear(),this.wheelDiagram.allowDrop=!1)},submitWheelTagBtn:function(){var t=this;this.$refs.addWheelTagForm.validate(function(e){if(e){var i=JSON.parse(o()(t.addWheelTagForm)),n={value:i.title,label:i.title};t.wheelOwnTags.push(n),t.closeAddWheelTagModal()}})},closeAddWheelTagModal:function(){this.showAddWheelTag=!1,this.$refs.addWheelTagForm.resetFields()},closeWheelModal:function(t){this.showAddWheel=!1,this.showWheelChangeTag=!1,this.showWheelChangeNext=!1,this.$refs[t].resetFields()},changeWheelNodeAll:function(){var t=this;this.wheelNodeForm.wheelNodeAll?(this.wheelNodeForm.wheelNodeCheck=[],this.wheelBasicsTags.forEach(function(e,i){var n=e.value;t.wheelNodeForm.wheelNodeCheck.push(n)}),this.wheelOwnTags.forEach(function(e,i){var n=e.value;t.wheelNodeForm.wheelNodeCheck.push(n)})):this.wheelNodeForm.wheelNodeCheck=[]},getWheelTags:function(){var t=[],e=[];return this.wheelBasicsTags.forEach(function(t,i){e.push(t)}),this.wheelOwnTags.forEach(function(t,i){e.push(t)}),this.wheelNodeForm.wheelNodeCheck.forEach(function(i,n){for(var o=0;o<e.length;o++)if(i===e[o].value){var r={text:e[o].label,portId:e[o].value};return t.push(r),!1}}),t},submitWheelNodeTagBtn:function(){var t=this;this.$refs.wheelNodeForm.validate(function(e){if(e){var i=t.getWheelTags(),n=JSON.parse(o()(t.wheelNodeForm)),r=t.wheelDiagram.model;t.wheelDiagram.startTransaction("add tag"),r.setDataProperty(t.wheelSelectNode.part.data,"items",i),r.setDataProperty(t.wheelSelectNode.part.data,"title",n.title),r.setDataProperty(t.wheelSelectNode.part.data,"desp",n.desp),r.setDataProperty(t.wheelSelectNode.part.data,"isBreak",n.isBreak),r.setDataProperty(t.wheelSelectNode.part.data,"isMessage",n.isMessage),r.setDataProperty(t.wheelSelectNode.part.data,"messageModel",n.messageModel),r.setDataProperty(t.wheelSelectNode.part.data,"time",n.time),r.setDataProperty(t.wheelSelectNode.part.data,"wheelNodeAll",n.wheelNodeAll),r.setDataProperty(t.wheelSelectNode.part.data,"wheelNodeCheck",n.wheelNodeCheck),n.desp?r.setDataProperty(t.wheelSelectNode.part.data,"stateSource","https://crm.byrobot.cn/media/record_no.1799f300.svg"):r.setDataProperty(t.wheelSelectNode.part.data,"stateSource","");var a=[],s=t.wheelSelectNode.part.data.key;t.wheelDiagram.findNodeForKey(s).findLinksConnected().each(function(t){for(var e=0;e<i.length;e++)if(i[e].portId===t.data.fromPort)return!1;e>=i.length&&t.data.from===s&&a.push(t.data)}),r.removeLinkDataCollection(a),t.wheelDiagram.commitTransaction("add tag"),t.closeWheelModal("wheelNodeForm")}})},changeWheelNext:function(t){3===t?this.wheelNextForm.mainFlow=this.mainFlowtOp[0].value:4===t&&(this.wheelNextForm.group=this.callGroupOp[0].value)},submitWheelNextBtn:function(){var t=this;this.$refs.wheelNextForm.validate(function(e){if(e){var i,n,r=JSON.parse(o()(t.wheelNextForm)),a=t.wheelDiagram.model;t.wheelNextOp.forEach(function(t,e){t.value===r.nextVal&&(i="下一步："+t.label,n=[i])}),a.setDataProperty(t.wheelSelectNode.part.data,"title",r.title),a.setDataProperty(t.wheelSelectNode.part.data,"desp",r.desp),a.setDataProperty(t.wheelSelectNode.part.data,"next",n),a.setDataProperty(t.wheelSelectNode.part.data,"nextVal",r.nextVal),a.setDataProperty(t.wheelSelectNode.part.data,"mainFlow",r.mainFlow),a.setDataProperty(t.wheelSelectNode.part.data,"group",r.group),a.setDataProperty(t.wheelSelectNode.part.data,"isMessage",r.isMessage),a.setDataProperty(t.wheelSelectNode.part.data,"messageModel",r.messageModel),r.desp>0?a.setDataProperty(t.wheelSelectNode.part.data,"stateSource","https://crm.byrobot.cn/media/record_no.1799f300.svg"):a.setDataProperty(t.wheelSelectNode.part.data,"stateSource",""),t.wheelDiagram.startTransaction("add next"),t.wheelDiagram.commitTransaction("add next"),t.closeWheelModal("wheelNextForm")}})},wheelDrag:function(){var t=this,e=document.querySelectorAll(".robottalkItem-wheel .wheel-arr")[0];this.wheelSortable=u.a.create(e,{ghostClass:"sortable-ghost",onEnd:function(e){e.item;t.wheelSortableId=t.wheelData[e.oldIndex].id,t.wheeltargetId=t.wheelData[e.newIndex].id;for(var i=f()(".wheel-arr .wheel-arrItem"),n=0;n<i.length;n++)f()(i[n]).find("s").text(n+1);t.$message({message:"顺序更新成功",type:"success"})}})},hotDel:function(t){this.hotTagsArr.splice(this.hotTagsArr.indexOf(t),1)},showHotInput:function(){var t=this;this.hotInputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleHotConfirm:function(){var t=this.hotInputValue;t&&this.hotTagsArr.push(t),this.hotInputVisible=!1,this.hotInputValue="",this.hotCount=this.hotTagsArr.length},clickSaveHot:function(){this.$message({message:"保存成功",type:"success"})},ruleDrag:function(){var t=this,e=document.querySelectorAll(".robottalkItem-rule .el-table__body-wrapper > table > tbody")[0];this.sortable=u.a.create(e,{ghostClass:"sortable-ghost",onEnd:function(e){e.item;t.sortableId=t.ruleTableData[e.oldIndex].id,t.targetId=t.ruleTableData[e.newIndex].id,t.$message({message:"顺序更新成功",type:"success"})}})},clickDelRule:function(t,e){e.splice(t,1)},clickEditRuleLevel:function(){this.showEditRuleLevel=!0},closeRuleLevelModal:function(t){this.showEditRuleLevel=!1,this.$refs[t].resetFields()},submitRuleLevelBtn:function(){this.$message({message:"修改成功",type:"success"}),this.closeRuleLevelModal("ruleLevelForm")},clickShowRuleModal:function(t,e){"add"===t?(this.ruleAddTitle="新建规则",this.ruleAddForm={rules:[],client:null},this.addRulesItem=this.ruleAddForm.rules):(this.ruleAddTitle="编辑规则",this.ruleAddForm=JSON.parse(o()(e)),this.addRulesItem=this.ruleAddForm.rules),this.rulesFilterOp=JSON.parse(o()(this.rulesAllOp)),this.showAddRule=!0},closeAddRuleModal:function(t){this.showAddRule=!1,this.$refs[t].resetFields()},clickChangeFirst:function(t,e){this.filterRulesOp(e)},filterRulesOp:function(t){for(var e=JSON.parse(o()(this.rulesAllOp)),i=0;i<this.addRulesItem.length;i++)for(var n=0;n<e.length;n++)this.addRulesItem[i].condition_field===e[n].value&&t.condition_field!==this.addRulesItem[i].condition_field&&e.splice(n,1);this.rulesFilterOp=e},addCon:function(t){this.addRulesItem.push({condition_field:"",condition_type:"",condition_value:null})},removeRuleItem:function(t,e){e.splice(t,1)},submitAddRuleBtn:function(){var t=this;this.$refs.ruleAddForm.validate(function(e){if(e)if(t.addRulesItem.length>0)for(var i=0;i<t.addRulesItem.length;i++){if(t.addRulesItem[i].condition_field){var n=JSON.parse(o()(t.ruleAddForm));return"新建规则"===t.ruleAddTitle?(t.ruleTableData.push(n),t.$message({message:"新建成功",type:"success"})):"编辑规则"===t.ruleAddTitle&&(t.ruleTableData.forEach(function(e,i){n.id===e.id&&t.$set(t.ruleTableData,i,n)}),t.$message({message:"修改成功",type:"success"})),t.closeAddRuleModal("ruleAddForm"),!1}t.$message({message:"请添加条件后提交",type:"error"})}else t.$message({message:"请添加条件后提交",type:"error"})})},ruleHandleSizeChange:function(t){},ruleHandleCurrentChange:function(t){},changeStudyTab:function(t){},searchStudy:function(){},clickStudy:function(t,e){this.showAddStudy=!0,this.studyAddForm={id:t,state:1,quesTitle:"",type:1,title:"",wordInput:"",keyWord:[],question:"",answer:1,wheel:"",spanAnswer:[],isRandom:!1,isAI:!1,after:2,mainFlow:"",group:"",isBreak:!1,isMessage:!1,messageModel:"",isClient:!1,clientModel:"",time:null}},addStudyAnswer:function(){this.studyAddForm.spanAnswer.push({value:"",key:Date.now()})},removeStudyAnswer:function(t){var e=this.studyAddForm.spanAnswer.indexOf(t);-1!==e&&this.studyAddForm.spanAnswer.splice(e,1)},changeStudyAfter:function(t){3===t?this.studyAddForm.mainFlow=this.mainFlowtOp[0].value:4===t&&(this.studyAddForm.group=this.callGroupOp[0].value)},handleStudyKey:function(){var t=JSON.parse(o()(this.studyAddForm.wordInput));if(t=t.replace(/,/g,"")){if(!(this.studyAddForm.keyWord.length>0))return this.studyAddForm.keyWord.push(t),this.studyAddForm.wordInput="",!1;for(var e=0,i=0;i<this.studyAddForm.keyWord.length;i++){if(this.studyAddForm.keyWord[i]===t)return this.studyAddForm.wordInput="",!1;e++}this.studyAddForm.keyWord.length===e&&(this.studyAddForm.keyWord.push(t),this.studyAddForm.wordInput="")}else this.studyAddForm.wordInput=""},handleStudyClose:function(t){this.studyAddForm.keyWord.splice(this.studyAddForm.keyWord.indexOf(t),1)},copyStudyKey:function(){var t=this.studyAddForm.keyWord.join(",");this.$refs.studyKeyInput.value=t,this.$refs.studyKeyInput.select(),document.execCommand("Copy"),this.$message({message:"复制成功",type:"success"})},closeStudyModal:function(t){this.showAddStudy=!1,this.$refs[t].resetFields()},submitStudyAddBtn:function(){var t=this;this.$refs.studyAddForm.validate(function(e){if(e)if(1===t.studyAddForm.answer&&t.studyAddForm.spanAnswer.length<=0)t.$message({message:"回答方式不能为空，请添加该知识点的回答方式",type:"error"});else{var i=JSON.parse(o()(t.studyAddForm));1===i.answer?i.wheel="":(i.spanAnswer=[],i.isRandom=!1,i.isAI=!1,i.after=2,i.mainFlow="",i.group="",i.isBreak=!1,i.isMessage=!1,i.messageModel="",i.isClient=!1,i.clientModel="",i.time=null),t.studyTableData.forEach(function(e,n){i.id===e.id&&(t.studyTableData[n].state="1")}),t.$message({message:"已学习",type:"success"}),t.closeStudyModal("studyAddForm")}})},clickIgnore:function(t,e){t.state="3"},studyHandleSizeChange:function(t){},studyHandleCurrentChange:function(t){},searchDic:function(){},clickDelDic:function(t,e){e.splice(t,1)},changeDicState:function(t){this.$message({message:"修改成功",type:"success"})},clickShowDicModal:function(t,e){"add"===t?(this.dicAddTitle="新建词典",this.dicAddForm={title:""}):(this.dicAddTitle="编辑词典",this.dicAddForm=JSON.parse(o()(e))),this.showAddDic=!0},closeDicModal:function(t){this.showAddDic=!1,this.showAddDicItem=!1,this.showDicSound=!1,t&&this.$refs[t].resetFields()},submitDicAddBtn:function(){var t=this;this.$refs.dicAddForm.validate(function(e){if(e){var i=JSON.parse(o()(t.dicAddForm));if("新建词典"===t.dicAddTitle){var n={id:5,title:i.title,percent:20,founder:"shay",recordings:"luck",state:"1",date:"2018-10-30",visible:!1};t.dicTableData.push(n),t.$message({message:"新建成功",type:"success"})}else"编辑词典"===t.dicAddTitle&&t.dicTableData.forEach(function(e,n){i.id===e.id&&t.$set(t.dicTableData,n,i),t.$message({message:"编辑成功",type:"success"})});t.closeDicModal("dicAddForm")}})},clickUploadDic:function(t){this.showUploadDic=!0,this.clickDicId=t},closeUploadDic:function(){this.showUploadDic=!1,this.dicFileList=[]},submitUploadDicBtn:function(){if(this.$refs.dicUpload.uploadFiles.length>0){var t=new FormData,e=this.$refs.dicUpload.uploadFiles[0].raw;t.append("dic",e),this.$message({message:"上传成功",type:"success"}),this.closeUploadDic()}},clickDicItem:function(t,e){this.showSliderMask=!0,this.showSliderDic=!0},searchDicItem:function(){},clickDelDicItem:function(t,e){e.splice(t,1)},clickAddDicSlider:function(t,e){"add"===t?(this.dicItemAddTitle="新建词条",this.dicItemAddForm={title:""}):(this.dicItemAddTitle="编辑词条",this.dicItemAddForm=JSON.parse(o()(e))),this.showAddDicItem=!0},submitDicItemAddBtn:function(){var t=this;this.$refs.dicItemAddForm.validate(function(e){if(e){var i=JSON.parse(o()(t.dicItemAddForm));if("新建词条"===t.dicItemAddTitle){var n={id:5,title:i.title,percent:20,founder:"shay",recordings:"luck",state:"1",date:"2018-10-30",visible:!1};t.dicSliderData.list.push(n),t.$message({message:"新建成功",type:"success"})}else"编辑词条"===t.dicItemAddTitle&&t.dicSliderData.list.forEach(function(e,n){i.id===e.id&&t.$set(t.dicSliderData.list,n,i),t.$message({message:"编辑成功",type:"success"})});t.closeDicModal("dicItemAddForm")}})},handleUploadDic:function(t,e){var i="text/plain"===t.raw.type,n=t.raw.size/1024/1024<.1;return i||(e.length>1?e.splice(1,1):e.splice(0,1),this.$message({message:"上传文件只能是 txt 格式!",type:"error"})),n||(e.length>1?e.splice(1,1):e.splice(0,1),this.$message({message:"上传头像图片大小不能超过 100kb!",type:"error"})),i&&n&&e.length>1&&e.splice(0,1),i&&n},dicHandleSizeChange:function(t){},dicHandleCurrentChange:function(t){},dicSliberHandleSizeChange:function(t){},dicSliberHandleCurrentChange:function(t){},clickRadioAudit:function(){var t=this;this.multiTabs.forEach(function(e,i){e.tabPath===t.$route.path&&t.$store.dispatch("removeTab",e.name)}),Object(m.c)("/robottalk","话术管理"),this.$message({message:"提交成功",type:"success"})},handleRadioBefore:function(t,e){if("audio/wav"!==t.type)return this.$message.warning("请上传wav格式的文件"),!1;this.fullLoading=!0,this.fullLoadingText="拼命上传中"},handleRadioExceed:function(t,e){},handleRadioBatchSuccess:function(t,e){this.fullLoading=!1,this.$message.success("上传成功")},handleRadioSpanSuccess:function(t,e){this.fullLoading=!1,this.$message.success("上传成功")},handleRadioError:function(t,e){this.fullLoading=!1,this.$message.error("上传失败")},clickShowAudioModal:function(t){this.showRadioAudio=!0,this.radioModalAudioData=t.audio},closeRadioAudioModal:function(){this.showRadioAudio=!1,this.$refs.radioModalAudio.pause(),this.$refs.radioModalAudio.currentTime=0},clickRadioDownload:function(){var t=document.createElement("a");t.download="录音",t.style.display="none",t.href="../../../static/image/download.txt",document.body.appendChild(t),t.click(),document.body.removeChild(t)},radioHandleSizeChange:function(t){},radioHandleCurrentChange:function(t){},releaseTalk:function(t,e){this.releaseTableData[e].state="1",this.$message({message:"发布成功",type:"success"})},changeLogDate:function(t){},searchLog:function(){},logHandleSizeChange:function(t){},logHandleCurrentChange:function(t){},delPopover:m.d},filters:{filtersClient:function(t,e){for(var i="",n=0;n<e.length;n++)t===e[n].value&&(i=e[n].label);return i}},components:{"v-addRules":v}},b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fullLoading,expression:"fullLoading"}],staticClass:"robottalkItem",attrs:{"element-loading-text":t.fullLoadingText,"element-loading-background":"rgba(255,255,255,.9)"}},[i("div",{class:["1"===t.activeTab||"3"===t.activeTab?"noMargin":"","haigui-section"]},[i("el-tabs",{on:{"tab-click":t.handleTabClick},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[i("el-tab-pane",{staticClass:"robottalkItem-map",attrs:{label:"流程",name:"1"}},[i("div",{staticClass:"talkItem-content"},[i("div",{staticClass:"map-left"},[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.clickShowMapAdd}},[t._v("新建流程")]),t._v(" "),i("div",{staticClass:"map-arr scrollbar"},t._l(t.mapData,function(e,n){return i("div",{class:[e.id===t.mapActiveIndex?"map-active":"","map-arrItem"],on:{click:function(i){t.clickLeftMap(e.id)}}},[i("p",[i("s",[t._v(t._s(n+1))]),t._v("."+t._s(e.title))]),t._v(" "),i("b",[i("i",{staticClass:"iconfont icon-compile",on:{click:function(i){i.stopPropagation(),t.clickShowMapEdit(e.id,n)}}}),t._v(" "),i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.visible,callback:function(i){t.$set(e,"visible",i)},expression:"item.visible"}},[i("p",[t._v("确定删除此流程吗？")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.visible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.visible=!1,t.clickDelMap(n)}}},[t._v("确定")])],1),t._v(" "),i("i",{staticClass:"iconfont icon-web-icon-",attrs:{slot:"reference"},on:{click:function(t){t.stopPropagation(),e.visible=!e.visible}},slot:"reference"})])],1)])}))],1),t._v(" "),i("div",{staticClass:"map-right"},[i("div",{staticClass:"map-flow"},[i("span",{staticStyle:{width:"150px","padding-top":"15px","box-sizing":"border-box"}},[i("div",{staticStyle:{background:"#F7F9FB"},attrs:{id:"haiguiPaletteMapDiv"}})]),t._v(" "),i("span",{staticClass:"qqq",staticStyle:{width:"calc(100% - 153px)"}},[i("div",{staticStyle:{"border-left":"1px solid #EBEEF5",background:"#fff"},attrs:{id:"haiguiDiagramMapDiv"}})])]),t._v(" "),i("div",{staticClass:"map-btn"},[i("p",{staticStyle:{float:"left","margin-left":"15px","line-height":"36px"}},[t._v("说明：录音待录音发送短信发送短信设置属性设置客户属性；右键节点可听录音")]),t._v(" "),i("div",{staticStyle:{float:"right","margin-right":"15px"}},[i("el-button",{attrs:{type:"primary",size:"small",id:"SaveButton"},on:{click:function(e){t.saveMap()}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.loadMap(t.mapTextJson)}}},[t._v("读取")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.mapTextJson,expression:"mapTextJson"}],staticStyle:{width:"90%",height:"300px"},attrs:{id:"mySavedModel"},domProps:{value:t.mapTextJson},on:{input:function(e){e.target.composing||(t.mapTextJson=e.target.value)}}})],1)])])])]),t._v(" "),i("el-tab-pane",{staticClass:"robottalkItem-library",attrs:{label:"知识库",name:"2"}},[i("div",{staticClass:"talkItem-title"},[i("p",{staticStyle:{color:"#606266","margin-bottom":"15px"}},[t._v("当前状态："),i("b",{style:{color:1===t.libraryState.type?"#67C23A":"#F56C6C"}},[t._v(t._s(t.libraryState.name))]),t._v("  "+t._s(t.libraryName)+"  更新于  "+t._s(t.libraryTime))]),t._v(" "),i("div",{},[i("el-input",{attrs:{size:"small",placeholder:"请输入标题、问法、关键词","suffix-icon":"el-icon-search"},on:{input:t.searchLibrary},model:{value:t.librarySearch,callback:function(e){t.librarySearch=e},expression:"librarySearch"}}),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.clickShowLibraryAdd}},[t._v("新建")])],1)]),t._v(" "),i("el-table",{ref:"libraryTable",staticStyle:{width:"100%"},attrs:{data:t.libraryTableData},on:{"row-click":t.clickLibraryItem}},[i("el-table-column",{attrs:{label:"",width:"20"}}),t._v(" "),i("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"250"}}),t._v(" "),i("el-table-column",{attrs:{prop:"type",label:"类型","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:1===e.row.type?"success":""},domProps:{textContent:t._s(1===e.row.type?"一般问题":"业务问题")}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"question",label:"问法","min-width":"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"keyWordCount",label:"关键词","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.keyWordCount)+"个")])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"date",label:"更新时间","min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("i",{staticClass:"iconfont icon-compile",staticStyle:{"margin-right":"10px"},on:{click:function(i){i.stopPropagation(),t.clickShowLibraryEdit(e.row.id,e.$index)}}}),t._v(" "),i("el-popover",{attrs:{"popper-class":"libraryPopover"+e.row.id,placement:"top",width:"160"},model:{value:e.row.visible,callback:function(i){t.$set(e.row,"visible",i)},expression:"scope.row.visible"}},[i("p",[t._v("确定删除此知识库吗？")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.visible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.row.visible=!1,t.clickDelLibrary(e.$index,t.libraryTableData)}}},[t._v("确定")])],1),t._v(" "),i("i",{staticClass:"iconfont icon-web-icon-",attrs:{slot:"reference"},on:{click:function(i){i.stopPropagation(),e.row.visible=!e.row.visible,t.delPopover("library",e.row.id)}},slot:"reference"})])]}}])})],1),t._v(" "),i("el-pagination",{attrs:{"current-page":t.libraryCurrentPage,"page-sizes":[100,200,300,400],"page-size":t.libraryPageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.libraryTotal},on:{"size-change":t.libraryHandleSizeChange,"current-change":t.libraryHandleCurrentChange}})],1),t._v(" "),i("el-tab-pane",{staticClass:"robottalkItem-wheel",attrs:{label:"多轮会话",name:"3"}},[i("div",{staticClass:"talkItem-content"},[i("div",{staticClass:"wheel-left"},[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.clickShowWheelAdd}},[t._v("新建流程")]),t._v(" "),i("div",{staticClass:"wheel-arr scrollbar"},t._l(t.wheelData,function(e,n){return i("div",{class:[e.id===t.wheelActiveIndex?"wheel-active":"","wheel-arrItem"],on:{click:function(i){t.clickLeftWheel(e.id)}}},[i("p",[i("s",[t._v(t._s(n+1))]),t._v("."+t._s(e.title))]),t._v(" "),i("b",[i("i",{staticClass:"iconfont icon-compile",on:{click:function(i){i.stopPropagation(),t.clickShowWheelEdit(e.id,n)}}}),t._v(" "),i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.visible,callback:function(i){t.$set(e,"visible",i)},expression:"item.visible"}},[i("p",[t._v("确定删除此流程吗？")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.visible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.visible=!1,t.clickDelWheel(n)}}},[t._v("确定")])],1),t._v(" "),i("i",{staticClass:"iconfont icon-web-icon-",attrs:{slot:"reference"},on:{click:function(t){t.stopPropagation(),e.visible=!e.visible}},slot:"reference"})])],1)])}))],1),t._v(" "),i("div",{staticClass:"wheel-right"},[i("div",{staticClass:"wheel-flow"},[i("span",{staticStyle:{width:"150px","padding-top":"15px","box-sizing":"border-box"}},[i("div",{staticStyle:{background:"#F7F9FB"},attrs:{id:"haiguiPaletteWheelDiv"}})]),t._v(" "),i("span",{staticStyle:{width:"calc(100% - 153px)"}},[i("div",{staticStyle:{"border-left":"1px solid #EBEEF5",background:"#fff"},attrs:{id:"haiguiDiagramWheelDiv"}})])]),t._v(" "),i("div",{staticClass:"wheel-btn"},[i("p",{staticStyle:{float:"left","margin-left":"15px","line-height":"36px"}},[t._v("说明：录音待录音发送短信发送短信设置属性设置客户属性；右键节点可听录音")]),t._v(" "),i("div",{staticStyle:{float:"right","margin-right":"15px"}},[i("el-button",{attrs:{type:"primary",size:"small",id:"SaveButton"},on:{click:function(e){t.saveWheel()}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.loadWheel(t.wheelTextJson)}}},[t._v("读取")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.wheelTextJson,expression:"wheelTextJson"}],staticStyle:{width:"90%",height:"300px"},attrs:{id:"mySavedModel"},domProps:{value:t.wheelTextJson},on:{input:function(e){e.target.composing||(t.wheelTextJson=e.target.value)}}})],1)])])])]),t._v(" "),i("el-tab-pane",{staticClass:"robottalkItem-hot",attrs:{label:"通话热词",name:"4"}},[i("div",{staticClass:"talkItem-content"},[i("div",{staticClass:"hot-tags"},[t._l(t.hotTagsArr,function(e){return i("el-tag",{key:e,attrs:{size:"normal",closable:"","disable-transitions":!1},on:{close:function(i){t.hotDel(e)}}},[t._v("\n              "+t._s(e)+"\n            ")])}),t._v(" "),t.hotInputVisible?i("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small",maxlength:"20"},on:{blur:t.handleHotConfirm},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleHotConfirm(e):null}},model:{value:t.hotInputValue,callback:function(e){t.hotInputValue=e},expression:"hotInputValue"}}):i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showHotInput}},[t._v("+ 添加热词")])],2),t._v(" "),i("div",{staticClass:"hot-footer"},[i("span",{staticStyle:{"line-height":"36px"}},[t._v(t._s(t.hotName)+"  更新于"+t._s(t.hotTime))]),t._v(" "),i("div",{},[i("span",[t._v("当前热词："+t._s(t.hotCount)+"/128个")]),t._v("  \n              "),i("el-button",{attrs:{type:"primary"},on:{click:t.clickSaveHot}},[t._v("保存")])],1)])])]),t._v(" "),i("el-tab-pane",{staticClass:"robottalkItem-rule",attrs:{label:"意向标签",name:"5"}},[i("div",{staticClass:"talkItem-title"},[i("span",[t._v("可拖动调整判断顺序")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){t.clickShowRuleModal("add")}}},[t._v("新建")])],1),t._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.ruleTableData}},[i("el-table-column",{attrs:{width:"20"}}),t._v(" "),i("el-table-column",{attrs:{prop:"num",label:"序号","min-width":"50"}}),t._v(" "),i("el-table-column",{attrs:{label:"规则","min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.ruleTitle,placement:"top"}},[i("span",[t._v(t._s(e.row.ruleTitle))])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"客户意向标签","min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("filtersClient")(e.row.client,t.clientOp)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"匹配次数","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.count)+"个\n            ")]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"date",label:"更新时间","min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("i",{staticClass:"iconfont icon-compile",on:{click:function(i){i.stopPropagation(),t.clickShowRuleModal("edit",e.row)}}}),t._v(" "),i("el-popover",{attrs:{"popper-class":"rulePopover"+e.row.id,placement:"top",width:"160"},model:{value:e.row.visible,callback:function(i){t.$set(e.row,"visible",i)},expression:"scope.row.visible"}},[i("p",[t._v("确定删除此意向标签吗？")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.visible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.row.visible=!1,t.clickDelRule(e.$index,t.ruleTableData)}}},[t._v("确定")])],1),t._v(" "),i("i",{staticClass:"iconfont icon-web-icon-",attrs:{slot:"reference"},on:{click:function(i){i.stopPropagation(),e.row.visible=!e.row.visible,t.delPopover("rule",e.row.id)}},slot:"reference"})])]}}])})],1),t._v(" "),i("span",{staticStyle:{"margin-left":"15px","font-size":"14px",color:"#606266",display:"inline-block","margin-top":"10px"}},[t._v("以上规则均不满足时，将客户意向标签设置为C级（明确拒绝）"),i("el-button",{attrs:{type:"text",size:"small"},on:{click:t.clickEditRuleLevel}},[t._v("编辑")])],1),t._v(" "),i("el-pagination",{attrs:{"current-page":t.ruleCurrentPage,"page-sizes":[100,200,300,400],"page-size":t.rulePageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.ruleTotal},on:{"size-change":t.ruleHandleSizeChange,"current-change":t.ruleHandleCurrentChange}})],1),t._v(" "),i("el-tab-pane",{staticClass:"robottalkItem-train",attrs:{label:"话术训练",name:"6"}},[i("div",{staticClass:"talkItem-content"},[i("div",{staticClass:"train-left scrollbar"},t._l(t.trainChat,function(e,n){return i("div",{class:[2===e.type?"my-chat":"","train-chat"]},[i("i",{class:[1===e.type?"icon-jiqiren_o":"icon-kehudongcha","iconfont"]}),t._v(" "),i("p",[t._v(t._s(e.content))])])})),t._v(" "),i("div",{staticClass:"train-right"},[i("div",{staticClass:"train-right-div"},[i("div",{staticStyle:{width:"45%","margin-right":"10px","text-align":"right"}},[i("i",{staticClass:"fa fa-phone"})]),t._v(" "),i("div",{},[i("p",{staticStyle:{margin:"5px 0 8px 0"}},[t._v("拨打训练")]),t._v(" "),i("b",{staticStyle:{color:"#909399"}},[t._v("点击拨打训练AI机器人")])])]),t._v(" "),i("div",{staticClass:"train-right-div"},[i("p",[t._v("关注点")]),t._v(" "),i("el-button",{attrs:{size:"small"}},[t._v("公司地址")]),t._v(" "),i("el-button",{attrs:{size:"small"}},[t._v("多少钱")])],1),t._v(" "),i("div",{staticClass:"train-right-div"},[i("p",[t._v("意向等级")]),t._v(" "),i("span",{staticStyle:{display:"block",color:"#606266"}},[t._v("B级（可能有意向）")]),t._v(" "),i("span",{staticStyle:{color:"#606266"}},[t._v("拒绝次数<=1次并且命中业务问题>=1")])]),t._v(" "),i("div",{staticClass:"train-right-div"},[i("p",[t._v("客户画像")]),t._v(" "),i("el-button",{attrs:{size:"small"}},[t._v("年底到期")])],1)])])]),t._v(" "),i("el-tab-pane",{staticClass:"robottalkItem-study",attrs:{label:"应答学习",name:"7"}},[i("div",{staticClass:"talkItem-title"},[i("el-radio-group",{staticStyle:{"margin-bottom":"30px"},attrs:{size:"small"},on:{change:t.changeStudyTab},model:{value:t.studyTab,callback:function(e){t.studyTab=e},expression:"studyTab"}},[i("el-radio-button",{attrs:{label:"1"}},[t._v("全部")]),t._v(" "),i("el-radio-button",{attrs:{label:"2"}},[t._v("待学习")]),t._v(" "),i("el-radio-button",{attrs:{label:"3"}},[t._v("已学习")]),t._v(" "),i("el-radio-button",{attrs:{label:"4"}},[t._v("已经忽略")])],1),t._v(" "),i("el-input",{attrs:{size:"small",placeholder:"请输入问题","suffix-icon":"el-icon-search"},on:{input:t.searchStudy},model:{value:t.studySearch,callback:function(e){t.studySearch=e},expression:"studySearch"}}),t._v(" "),i("span",{staticClass:"countStudy"},[t._v("累计学习："),i("b",[t._v(t._s(t.studyNum))]),t._v("条")])],1),t._v(" "),i("el-table",{ref:"studyTable",staticStyle:{width:"100%"},attrs:{data:t.studyTableData}},[i("el-table-column",{attrs:{label:"",width:"20"}}),t._v(" "),i("el-table-column",{attrs:{label:"待学习问题","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.title,placement:"top"}},[i("span",[t._v(t._s(e.row.title))])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"来源","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticStyle:{color:"#409EFF",cursor:"pointer"}},[t._v("查看通话记录")])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"state",label:"状态","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:"1"===e.row.state?"success":"2"===e.row.state?"danger":"info",size:"normal"},domProps:{textContent:t._s("1"===e.row.state?"已学习":"2"===e.row.state?"待学习":"已忽略")}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"date",label:"时间","min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small",disabled:"1"===e.row.state||"3"===e.row.state},on:{click:function(i){t.clickStudy(e.row.id,e.$index)}}},[t._v("学习")]),t._v(" "),i("el-popover",{attrs:{"popper-class":"studyPopover"+e.row.id,placement:"top",width:"160"},model:{value:e.row.visible,callback:function(i){t.$set(e.row,"visible",i)},expression:"scope.row.visible"}},[i("p",[t._v("是否确定忽略该问题？")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.visible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.row.visible=!1,t.clickIgnore(e.row,e.$index)}}},[t._v("确定")])],1),t._v(" "),i("el-button",{attrs:{slot:"reference",type:"text",size:"small",disabled:"1"===e.row.state||"3"===e.row.state},on:{click:function(i){e.row.visible=!e.row.visible,t.delPopover("study",e.row.id)}},slot:"reference"},[t._v("忽略")])],1)]}}])})],1),t._v(" "),i("el-pagination",{attrs:{"current-page":t.studyCurrentPage,"page-sizes":[100,200,300,400],"page-size":t.studyPageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.studyTotal},on:{"size-change":t.studyHandleSizeChange,"current-change":t.studyHandleCurrentChange}})],1),t._v(" "),i("el-tab-pane",{staticClass:"robottalkItem-dic",attrs:{label:"话术词典",name:"8"}},[i("div",{staticClass:"talkItem-title"},[i("el-input",{attrs:{size:"medium",placeholder:"请输入词典名","suffix-icon":"el-icon-search"},on:{input:t.searchDic},model:{value:t.dicSearch,callback:function(e){t.dicSearch=e},expression:"dicSearch"}}),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){t.clickShowDicModal("add")}}},[t._v("新建词典")])],1),t._v(" "),i("el-table",{ref:"dicTable",staticStyle:{width:"100%"},attrs:{data:t.dicTableData}},[i("el-table-column",{attrs:{label:"",width:"20"}}),t._v(" "),i("el-table-column",{attrs:{label:"词典名","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticStyle:{display:"block",color:"#409EFF",cursor:"pointer"},on:{click:function(i){t.clickDicItem(e.row,i)}}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"录音进度","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.percent)+"/100")])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"founder",label:"创建人","min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{prop:"recordings",label:"录音师","min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{label:"状态","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{on:{change:function(i){t.changeDicState(e.$index)}},model:{value:e.row.state,callback:function(i){t.$set(e.row,"state",i)},expression:"scope.row.state"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"date",label:"更新时间","min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("i",{staticClass:"iconfont icon-Icon-daoru",on:{click:function(i){t.clickUploadDic(e.row.id)}}}),t._v(" "),i("i",{staticClass:"iconfont icon-compile",staticStyle:{"margin-right":"10px"},on:{click:function(i){i.stopPropagation(),t.clickShowDicModal("edit",e.row)}}}),t._v(" "),i("el-popover",{attrs:{"popper-class":"dicPopover"+e.row.id,placement:"top",width:"160"},model:{value:e.row.visible,callback:function(i){t.$set(e.row,"visible",i)},expression:"scope.row.visible"}},[i("p",[t._v("确定删除此话术词典吗？")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.visible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.row.visible=!1,t.clickDelDic(e.$index,t.dicTableData)}}},[t._v("确定")])],1),t._v(" "),i("i",{staticClass:"iconfont icon-web-icon-",attrs:{slot:"reference"},on:{click:function(i){i.stopPropagation(),e.row.visible=!e.row.visible,t.delPopover("dic",e.row.id)}},slot:"reference"})])]}}])})],1),t._v(" "),i("el-pagination",{attrs:{"current-page":t.dicCurrentPage,"page-sizes":[100,200,300,400],"page-size":t.dicPageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.dicTotal},on:{"size-change":t.dicHandleSizeChange,"current-change":t.dicHandleCurrentChange}})],1),t._v(" "),i("el-tab-pane",{staticClass:"robottalkItem-radio",attrs:{label:"上传录音",name:"9"}},[i("div",{staticClass:"talkItem-title",staticStyle:{overflow:"hidden"}},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.showUploadNotice=!0}}},[t._v("上传录音文本须知")]),t._v(" "),i("el-upload",{ref:"radioBatchUpload",staticClass:"upload-demo",attrs:{accept:"jpg","show-file-list":!1,action:"https://jsonplaceholder.typicode.com/posts/",multiple:"","before-upload":t.handleRadioBefore,"on-success-":t.handleRadioBatchSuccess,"on-error":t.handleRadioError,"on-exceed":t.handleRadioExceed,"file-list":t.radioBatchFile}},[i("el-button",{attrs:{type:"primary",size:"small"}},[t._v("批量上传")])],1),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.clickRadioDownload}},[t._v("导出录音文本")]),t._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:t.clickRadioAudit}},[t._v("提交审核")])],1),t._v(" "),i("el-table",{ref:"dicTable",staticStyle:{width:"100%","margin-top":"15px"},attrs:{data:t.radioTableData}},[i("el-table-column",{attrs:{label:"",width:"20"}}),t._v(" "),i("el-table-column",{attrs:{prop:"id",label:"序号","min-width":"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"title",label:"主题","min-width":"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"content",label:"文案","min-width":"500"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"hoverBlueText"},[i("el-upload",{ref:"radioBatchUpload",staticClass:"upload-demo",attrs:{accept:"jpg","show-file-list":!1,action:"https://jsonplaceholder.typicode.com/posts/","before-upload":t.handleRadioBefore,"on-success-":t.handleRadioSpanSuccess,"on-error":t.handleRadioError,"on-exceed":t.handleRadioExceed,"file-list":t.radioBatchFile}},[i("i",{staticClass:"iconfont icon-Icon-daoru"}),t._v("上传\n                ")])],1),t._v(" "),i("span",{staticClass:"hoverBlueText",on:{click:function(i){i.stopPropagation(),t.clickShowAudioModal(e.row)}}},[i("i",{staticClass:"iconfont icon-compile"}),t._v("试听录音\n              ")])]}}])})],1),t._v(" "),i("el-pagination",{attrs:{"current-page":t.radioCurrentPage,"page-sizes":[100,200,300,400],"page-size":t.radioPageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.radioTotal},on:{"size-change":t.radioHandleSizeChange,"current-change":t.radioHandleCurrentChange}})],1),t._v(" "),i("el-tab-pane",{staticClass:"robottalkItem-release",attrs:{label:"发布话术",name:"10"}},[i("el-table",{ref:"releaseTable",staticStyle:{width:"100%"},attrs:{data:t.releaseTableData}},[i("el-table-column",{attrs:{label:"",width:"20"}}),t._v(" "),i("el-table-column",{attrs:{label:"话术名称","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.title,placement:"top"}},[i("span",[t._v(t._s(e.row.title))])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"录音进度","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.percent)+"/100，录音进度"+t._s(e.row.percent)+"%")])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"state",label:"话术状态","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:"1"===e.row.state?"success":"danger"},domProps:{textContent:t._s("1"===e.row.state?"已上线":"待上线")}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"更新人","min-width":"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"date",label:"更新时间","min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-popover",{attrs:{"popper-class":"releasePopover"+e.row.id,placement:"top",width:"160"},model:{value:e.row.visible,callback:function(i){t.$set(e.row,"visible",i)},expression:"scope.row.visible"}},[i("p",[t._v("是否发布？")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.visible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.row.visible=!1,t.releaseTalk(e.row.id,e.$index)}}},[t._v("确定")])],1),t._v(" "),i("el-button",{attrs:{slot:"reference",type:"primary",size:"mini",disabled:"1"===e.row.state},on:{click:function(i){i.stopPropagation(),e.row.visible=!e.row.visible,t.delPopover("release",e.row.id)}},slot:"reference"},[t._v("发布")])],1)]}}])})],1)],1),t._v(" "),i("el-tab-pane",{staticClass:"robottalkItem-log",attrs:{label:"日志",name:"11"}},[i("div",{staticClass:"talkItem-title"},[i("el-date-picker",{attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.changeLogDate},model:{value:t.logDate,callback:function(e){t.logDate=e},expression:"logDate"}}),t._v(" "),i("el-input",{attrs:{size:"small",placeholder:"请输入日志内容","suffix-icon":"el-icon-search"},on:{input:t.searchLog},model:{value:t.logSearch,callback:function(e){t.logSearch=e},expression:"logSearch"}})],1),t._v(" "),i("el-table",{ref:"logTable",staticStyle:{width:"100%"},attrs:{data:t.logTableData}},[i("el-table-column",{attrs:{label:"",width:"20"}}),t._v(" "),i("el-table-column",{attrs:{prop:"user",label:"操作用户","min-width":"150"}}),t._v(" "),i("el-table-column",{attrs:{label:"动作","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.action,placement:"top"}},[i("span",[t._v(t._s(e.row.action))])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"日志详情","min-width":"280"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.text,placement:"top"}},[i("span",[t._v(t._s(e.row.text))])])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"date",label:"更新时间","min-width":"120"}})],1),t._v(" "),i("el-pagination",{attrs:{"current-page":t.logCurrentPage,"page-sizes":[100,200,300,400],"page-size":t.logPageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.logTotal},on:{"size-change":t.logHandleSizeChange,"current-change":t.logHandleCurrentChange}})],1)],1)],1),t._v(" "),t.showOverlay?i("div",{attrs:{id:"overlay"}}):t._e(),t._v(" "),t.showSliderMask?i("div",{staticClass:"talk-slider-mask",on:{click:t.clickHiddenMask}}):t._e(),t._v(" "),i("div",{class:[t.showSliderLibrary?"talk-slider-show":"","talk-slider-wrap library-slider"]},[i("div",{staticClass:"talk-slider-header"},[i("div",{staticClass:"talk-slider-close"},[i("i",{staticClass:"fas fa-angle-right",on:{click:t.clickHiddenMask}})]),t._v(" "),i("span",{staticClass:"talk-header-title"},[t._v("问题描述")]),t._v(" "),i("div",{staticClass:"talk-side"},[i("span",{staticClass:"text-date"},[t._v("更新时间：2018-11-02")]),t._v(" "),i("div",{},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.clickEditLibrarySlider(t.librarySliderData.id)}}},[t._v("编辑")]),t._v(" "),i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.librarySliberVisible,callback:function(e){t.librarySliberVisible=e},expression:"librarySliberVisible"}},[i("p",[t._v("确定删除此问题吗？")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.librarySliberVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.librarySliberVisible=!1,t.clickDelLibrarySlider(t.librarySliderData.id)}}},[t._v("确定")])],1),t._v(" "),i("el-button",{attrs:{slot:"reference",size:"small",type:"danger"},on:{click:function(e){t.librarySliberVisible=!t.librarySliberVisible}},slot:"reference"},[t._v("删除")])],1)],1)])]),t._v(" "),i("div",{staticClass:"talk-slider-body scrollbar"},[i("div",{staticClass:"talk-silder-div"},[i("div",{staticClass:"library-slider-item"},[t._m(0),t._v(" "),i("div",{staticClass:"library-slider-content",domProps:{textContent:t._s(1===t.librarySliderData.type?"一般问题":"业务问题")}})]),t._v(" "),i("div",{staticClass:"library-slider-item"},[t._m(1),t._v(" "),i("div",{staticClass:"library-slider-content"},[t._v(t._s(t.librarySliderData.title))])]),t._v(" "),i("div",{staticClass:"library-slider-item"},[t._m(2),t._v(" "),i("div",{staticClass:"library-slider-content"},[t._v(t._s(t.librarySliderData.question))])]),t._v(" "),i("div",{staticClass:"library-slider-item"},[t._m(3),t._v(" "),i("div",{staticClass:"library-slider-content",domProps:{textContent:t._s(1===t.librarySliderData.answer?"单句回答":"多轮会话")}})]),t._v(" "),2===t.librarySliderData.answer?i("div",{},[t._m(4)]):i("div",{},[i("div",{staticClass:"library-slider-item"},[t._m(5),t._v(" "),i("div",{staticClass:"library-slider-content library-slider-answer"},t._l(t.librarySliderData.spanAnswer,function(e,n){return i("p",[i("i",{staticClass:"fas fa-microphone"}),i("span",[t._v(t._s(e.value))]),i("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("听录音")])],1)}))]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),i("div",{staticClass:"library-slider-item"},[t._m(8),t._v(" "),i("div",{staticClass:"library-slider-content"},[t._v(t._s(t.librarySliderData.time)+"秒")])])]),t._v(" "),i("div",{staticClass:"library-slider-item"},[t._m(9),t._v(" "),i("div",{staticClass:"library-slider-content"},t._l(t.librarySliderData.keyWord,function(e,n){return i("el-tag",{key:n,staticStyle:{cursor:"pointer"},nativeOn:{click:function(e){return t.copySpanText(e)}}},[t._v(t._s(e))])}))])])])]),t._v(" "),i("div",{class:[t.showSliderDic?"talk-slider-show":"","talk-slider-wrap dic-slider"]},[i("div",{staticClass:"talk-slider-header"},[i("div",{staticClass:"talk-slider-close"},[i("i",{staticClass:"fas fa-angle-right",on:{click:t.clickHiddenMask}})]),t._v(" "),i("span",{staticClass:"talk-header-title"},[t._v("词典内容")]),t._v(" "),i("div",{staticClass:"talk-side"},[i("span",{staticClass:"text-title"},[t._v(t._s(t.dicSliderData.title))]),t._v(" "),i("div",{},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.clickAddDicSlider("add")}}},[t._v("新增")])],1)])]),t._v(" "),i("div",{staticClass:"talk-slider-body scrollbar"},[i("div",{staticClass:"talk-silder-div"},[i("el-input",{attrs:{size:"small",placeholder:"搜索词条","suffix-icon":"el-icon-search"},on:{input:t.searchDicItem},model:{value:t.dicSearchItem,callback:function(e){t.dicSearchItem=e},expression:"dicSearchItem"}}),t._v(" "),i("el-table",{ref:"dicSliderTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.dicSliderData.list}},[i("el-table-column",{attrs:{prop:"title",label:"词条名","min-width":"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"date",label:"更新时间","min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("i",{staticClass:"iconfont icon-Icon-daoru"}),t._v(" "),i("i",{staticClass:"fas fa-microphone",staticStyle:{cursor:"pointer","font-size":"18px"},on:{click:function(e){t.showDicSound=!0}}}),t._v(" "),i("i",{staticClass:"iconfont icon-compile",staticStyle:{"margin-right":"10px"},on:{click:function(i){t.clickAddDicSlider("edit",e.row)}}}),t._v(" "),i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.row.visible,callback:function(i){t.$set(e.row,"visible",i)},expression:"scope.row.visible"}},[i("p",[t._v("确定删除该词条吗？")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.visible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.row.visible=!1,t.clickDelDicItem(e.$index,t.dicSliderData.list)}}},[t._v("确定")])],1),t._v(" "),i("i",{staticClass:"iconfont icon-web-icon-",attrs:{slot:"reference"},on:{click:function(t){t.stopPropagation(),e.row.visible=!e.row.visible}},slot:"reference"})])]}}])})],1),t._v(" "),i("el-pagination",{attrs:{"current-page":t.dicSliberCurrentPage,"page-sizes":[100,200,300,400],"page-size":t.dicSliberPageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.dicSliberTotal},on:{"size-change":t.dicSliberHandleSizeChange,"current-change":t.dicSliberHandleCurrentChange}})],1)])]),t._v(" "),i("el-dialog",{attrs:{width:"400px",title:t.addMapTitle,visible:t.showAddMap},on:{"update:visible":function(e){t.showAddMap=e},close:function(e){t.closeMapModal("mapAddForm")}}},[i("el-form",{ref:"mapAddForm",attrs:{model:t.mapAddForm,rules:t.mapAddRules,"label-width":"85px"}},[i("el-form-item",{attrs:{label:"流程名称",prop:"title"}},[i("el-input",{attrs:{maxlength:15,placeholder:"输入流程名称"},model:{value:t.mapAddForm.title,callback:function(e){t.$set(t.mapAddForm,"title",e)},expression:"mapAddForm.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"流程类型",prop:"type"}},[i("el-select",{attrs:{placeholder:"请选择流程类型"},model:{value:t.mapAddForm.type,callback:function(e){t.$set(t.mapAddForm,"type",e)},expression:"mapAddForm.type"}},t._l(t.mainFlowtOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.closeMapModal("mapAddForm")}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitMapAddBtn}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{staticClass:"restModal",attrs:{width:"600px",title:"普通话术节点",visible:t.showMapChangeTag},on:{"update:visible":function(e){t.showMapChangeTag=e},close:function(e){t.closeMapModal("mapNodeForm")}}},[i("el-form",{ref:"mapNodeForm",staticClass:"scrollbar",staticStyle:{"max-height":"400px","padding-right":"15px","overflow-y":"scroll"},attrs:{model:t.mapNodeForm,rules:t.mapNodeRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"节点名称",prop:"title"}},[i("el-input",{attrs:{maxlength:25,placeholder:"输入流程名称"},model:{value:t.mapNodeForm.title,callback:function(e){t.$set(t.mapNodeForm,"title",e)},expression:"mapNodeForm.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"节点话术",prop:"desp"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入节点话术内容"},model:{value:t.mapNodeForm.desp,callback:function(e){t.$set(t.mapNodeForm,"desp",e)},expression:"mapNodeForm.desp"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"用户回答",prop:"tags"}},[i("el-checkbox",{on:{change:t.changeMapNodeAll},model:{value:t.mapNodeForm.mapNodeAll,callback:function(e){t.$set(t.mapNodeForm,"mapNodeAll",e)},expression:"mapNodeForm.mapNodeAll"}},[t._v("全部回答")]),t._v(" "),i("el-checkbox-group",{staticClass:"mapCheckGroup",model:{value:t.mapNodeForm.mapNodeCheck,callback:function(e){t.$set(t.mapNodeForm,"mapNodeCheck",e)},expression:"mapNodeForm.mapNodeCheck"}},[i("p",[t._v("系统默认回答")]),t._v(" "),t._l(t.mapBasicsTags,function(e,n){return i("el-checkbox",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),t._v(" "),i("p",[t._v("自定义回答")]),t._v(" "),t._l(t.mapOwnTags,function(e,n){return i("el-tooltip",{key:e.value,staticClass:"item",attrs:{effect:"dark",content:e.label,placement:"top"}},[i("el-checkbox",{attrs:{label:e.value}},[t._v("\n              "+t._s(e.label)+"\n            ")])],1)}),t._v(" "),i("br"),t._v(" "),i("el-button",{attrs:{plain:"",size:"small"},on:{click:function(e){t.showAddMapTag=!0}}},[t._v("+ 增加回答")])],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"节点设置",prop:"set"}},[i("el-checkbox",{model:{value:t.mapNodeForm.isBreak,callback:function(e){t.$set(t.mapNodeForm,"isBreak",e)},expression:"mapNodeForm.isBreak"}},[t._v("不允许打断")]),i("br"),t._v(" "),i("el-checkbox",{model:{value:t.mapNodeForm.isMessage,callback:function(e){t.$set(t.mapNodeForm,"isMessage",e)},expression:"mapNodeForm.isMessage"}},[t._v("发送短信")]),t._v(" "),i("el-select",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{size:"small",placeholder:"请选择短信模板",disabled:!t.mapNodeForm.isMessage},model:{value:t.mapNodeForm.messageModel,callback:function(e){t.$set(t.mapNodeForm,"messageModel",e)},expression:"mapNodeForm.messageModel"}},t._l(t.messageOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"等待时间",prop:"time"}},[i("el-input",{staticStyle:{width:"100px"},attrs:{maxlength:6,size:"small"},model:{value:t.mapNodeForm.time,callback:function(e){t.$set(t.mapNodeForm,"time",t._n(e))},expression:"mapNodeForm.time"}}),t._v("  秒\n        "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v("说完本流程后等待时间，单位秒")]),t._v(" "),i("i",{staticClass:"far fa-question-circle",staticStyle:{cursor:"pointer"}})])],1)],1),t._v(" "),i("el-dialog",{staticClass:"restModal",attrs:{width:"500px",title:"新建回答",visible:t.showAddMapTag,"append-to-body":""},on:{"update:visible":function(e){t.showAddMapTag=e}}},[i("el-form",{ref:"addMapTagForm",staticClass:"scrollbar",staticStyle:{"max-height":"400px","padding-right":"15px","overflow-y":"scroll"},attrs:{model:t.addMapTagForm,rules:t.addMapTagRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"回答名称",prop:"title"}},[i("el-input",{attrs:{maxlength:10,placeholder:"请输入回答名称"},model:{value:t.addMapTagForm.title,callback:function(e){t.$set(t.addMapTagForm,"title",e)},expression:"addMapTagForm.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"关键词",prop:"keyword"}},[i("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"输入关键词，回车"},model:{value:t.addMapTagForm.keyword,callback:function(e){t.$set(t.addMapTagForm,"keyword",e)},expression:"addMapTagForm.keyword"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"答法",prop:"answer"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"匹配到该分支的客户答法，多个答法请用英文逗号间隔"},model:{value:t.addMapTagForm.answer,callback:function(e){t.$set(t.addMapTagForm,"answer",e)},expression:"addMapTagForm.answer"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:t.closeAddMapTagModal}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitMapTagBtn}},[t._v("确 定")])],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.closeMapModal("mapNodeForm")}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitMapNodeTagBtn}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{width:"500px",title:"跳转节点",visible:t.showMapChangeNext},on:{"update:visible":function(e){t.showMapChangeNext=e},close:function(e){t.closeMapModal("mapNextForm")}}},[i("el-form",{ref:"mapNextForm",attrs:{model:t.mapNextForm,rules:t.mapNextRules,"label-width":"85px"}},[i("el-form-item",{attrs:{label:"节点名称",prop:"title"}},[i("el-input",{attrs:{maxlength:25,placeholder:"输入流程名称"},model:{value:t.mapNextForm.title,callback:function(e){t.$set(t.mapNextForm,"title",e)},expression:"mapNextForm.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"跳转前话术",prop:"desp"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"进入该节点后播放的话术（可以为空）"},model:{value:t.mapNextForm.desp,callback:function(e){t.$set(t.mapNextForm,"desp",e)},expression:"mapNextForm.desp"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"下一步",prop:"next"}},[i("el-select",{attrs:{size:"small"},on:{change:t.changeMapNext},model:{value:t.mapNextForm.nextVal,callback:function(e){t.$set(t.mapNextForm,"nextVal",e)},expression:"mapNextForm.nextVal"}},t._l(t.mapNextOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),3===t.mapNextForm.nextVal?i("el-form-item",{attrs:{label:"",prop:"mainFlow"}},[i("el-select",{attrs:{size:"small"},model:{value:t.mapNextForm.mainFlow,callback:function(e){t.$set(t.mapNextForm,"mainFlow",e)},expression:"mapNextForm.mainFlow"}},t._l(t.mainFlowtOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e(),t._v(" "),4===t.mapNextForm.nextVal?i("el-form-item",{attrs:{label:"坐席组",prop:"group"}},[i("el-select",{attrs:{size:"small"},model:{value:t.mapNextForm.group,callback:function(e){t.$set(t.mapNextForm,"group",e)},expression:"mapNextForm.group"}},t._l(t.callGroupOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"其他设置",prop:"set"}},[i("el-checkbox",{model:{value:t.mapNextForm.isMessage,callback:function(e){t.$set(t.mapNextForm,"isMessage",e)},expression:"mapNextForm.isMessage"}},[t._v("发送短信")]),t._v(" "),i("el-select",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{size:"small",placeholder:"请选择短信模板",disabled:!t.mapNextForm.isMessage},model:{value:t.mapNextForm.messageModel,callback:function(e){t.$set(t.mapNextForm,"messageModel",e)},expression:"mapNextForm.messageModel"}},t._l(t.messageOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.closeMapModal("mapNextForm")}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitMapNextBtn}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{staticClass:"restModal",attrs:{width:"600px",title:t.addLibraryTitle,visible:t.showAddLibrary},on:{"update:visible":function(e){t.showAddLibrary=e},close:function(e){t.closeLibraryModal("libraryAddForm")}}},[i("el-form",{ref:"libraryAddForm",staticClass:"scrollbar",staticStyle:{"max-height":"400px","padding-right":"15px","overflow-y":"scroll"},attrs:{model:t.libraryAddForm,rules:t.libraryAddRules,"label-width":"85px"}},[i("el-form-item",{attrs:{label:"类型",prop:"type"}},[i("el-radio-group",{attrs:{size:"small"},model:{value:t.libraryAddForm.type,callback:function(e){t.$set(t.libraryAddForm,"type",e)},expression:"libraryAddForm.type"}},[i("el-radio-button",{attrs:{label:1}},[t._v("一般问题")]),t._v(" "),i("el-radio-button",{attrs:{label:2}},[t._v("业务问题")])],1),t._v(" "),1===t.libraryAddForm.type?i("p",{staticStyle:{color:"#909399"}},[t._v("与业务场景无关的问题，如：您贵姓")]):i("p",{staticStyle:{color:"#909399"}},[t._v('与业务场景有关，反应该场景下客户关注的问题，如贷款场景下客户关注"利息"')])],1),t._v(" "),i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{maxlength:30,placeholder:"请概括问题场景，如：客户询问利息"},model:{value:t.libraryAddForm.title,callback:function(e){t.$set(t.libraryAddForm,"title",e)},expression:"libraryAddForm.title"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:"关键词",prop:"keyWord"}},[i("el-input",{attrs:{placeholder:"请输入关键词按回车确定"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleLibraryKey(e):null}},model:{value:t.libraryAddForm.wordInput,callback:function(e){t.$set(t.libraryAddForm,"wordInput",e)},expression:"libraryAddForm.wordInput"}}),t._v(" "),i("div",{staticClass:"libraryKeyWord",staticStyle:{"margin-top":"6px"}},[this.libraryAddForm.keyWord.length<=0?i("span",[t._v("- 暂无关键词 -")]):t._e(),t._v(" "),t._l(t.libraryAddForm.keyWord,function(e){return i("el-tag",{key:e,staticStyle:{margin:"0 5px 5px 0",cursor:"pointer"},attrs:{closable:!0,"disable-transitions":!0},on:{close:function(i){t.handleClose(e)}},nativeOn:{click:function(e){return t.copySpanText(e)}}},[t._v("\n          "+t._s(e)+"\n          ")])}),i("br"),t._v(" "),i("input",{ref:"libraryKeyInput",staticStyle:{position:"absolute",top:"0",left:"0",opacity:"0","z-index":"-10"},attrs:{type:"text",name:"",value:""}}),t._v(" "),this.libraryAddForm.keyWord.length>0?i("el-button",{attrs:{type:"text"},on:{click:t.copyLibraryKey}},[t._v("复制全部关键词")]):t._e()],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"问法",prop:"question"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入问题多种问法，并回车分隔"},model:{value:t.libraryAddForm.question,callback:function(e){t.$set(t.libraryAddForm,"question",e)},expression:"libraryAddForm.question"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"回答方式",prop:"answer"}},[i("el-radio-group",{attrs:{size:"small"},model:{value:t.libraryAddForm.answer,callback:function(e){t.$set(t.libraryAddForm,"answer",e)},expression:"libraryAddForm.answer"}},[i("el-radio-button",{attrs:{label:1}},[t._v("\n            单句回答\n            "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v("AI一句话回答客户问题，如"),i("br"),t._v("客户：利息是多少？"),i("br"),t._v("AI：利息5厘")]),t._v(" "),i("i",{staticClass:"fas fa-question-circle"})])],1),t._v(" "),i("el-radio-button",{attrs:{label:2}},[t._v("\n            进入多轮会话\n            "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v("AI与客户需多轮对话结束该问题，如"),i("br"),t._v("客户：有推荐房型吗？"),i("br"),t._v("AI：请问您家几口人？"),i("br"),t._v("客户：4口人"),i("br"),t._v("AI：推荐您4居室")]),t._v(" "),i("i",{staticClass:"fas fa-question-circle"})])],1)],1)],1),t._v(" "),2===t.libraryAddForm.answer?i("el-form-item",{attrs:{label:"",prop:"wheel"}},[i("el-select",{attrs:{size:"small",placeholder:"选择回复该问题的多轮会话"},model:{value:t.libraryAddForm.wheel,callback:function(e){t.$set(t.libraryAddForm,"wheel",e)},expression:"libraryAddForm.wheel"}},t._l(t.wheelOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):i("div",{},[i("el-button",{staticStyle:{margin:"-12px 0 0 85px"},attrs:{type:"text",icon:"el-icon-plus"},on:{click:t.addAnswer}},[t._v("添加标准答案")]),t._v(" "),t._l(t.libraryAddForm.spanAnswer,function(e,n){return i("el-form-item",{key:e.key,attrs:{label:"",prop:"spanAnswer."+n+".value",rules:{required:!0,message:"请输入标准答案",trigger:"blur"}}},[i("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:2,placeholder:"输入该问题的标准答案，后续坐席或AI答复时将直接调取该答案"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"span.value"}}),t._v(" "),i("i",{staticClass:"iconfont icon-web-icon-",staticStyle:{display:"inline-block",margin:"0 0 60px 10px"},on:{click:function(i){i.stopPropagation(),t.removeAnswer(e)}}})],1)}),t._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"",prop:"checkbox"}},[i("el-checkbox",{model:{value:t.libraryAddForm.isRandom,callback:function(e){t.$set(t.libraryAddForm,"isRandom",e)},expression:"libraryAddForm.isRandom"}},[t._v("随机回答")]),i("br"),t._v(" "),i("el-checkbox",{model:{value:t.libraryAddForm.isAI,callback:function(e){t.$set(t.libraryAddForm,"isAI",e)},expression:"libraryAddForm.isAI"}},[t._v("AI回答")]),i("br")],1),t._v(" "),t.libraryAddForm.spanAnswer.length>0?i("el-form-item",{attrs:{label:"回答后",prop:"after"}},[i("el-select",{attrs:{size:"small"},on:{change:t.changeLibraryAfter},model:{value:t.libraryAddForm.after,callback:function(e){t.$set(t.libraryAddForm,"after",e)},expression:"libraryAddForm.after"}},t._l(t.libraryAfterOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e(),t._v(" "),3===t.libraryAddForm.after?i("el-form-item",{attrs:{label:"",prop:"mainFlow"}},[i("el-select",{attrs:{size:"small",placeholder:"选择要跳转到的流程节点"},model:{value:t.libraryAddForm.mainFlow,callback:function(e){t.$set(t.libraryAddForm,"mainFlow",e)},expression:"libraryAddForm.mainFlow"}},t._l(t.mainFlowtOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e(),t._v(" "),4===t.libraryAddForm.after?i("el-form-item",{attrs:{label:"坐席组",prop:"group","选择坐席组":""}},[i("el-select",{attrs:{size:"small"},model:{value:t.libraryAddForm.group,callback:function(e){t.$set(t.libraryAddForm,"group",e)},expression:"libraryAddForm.group"}},t._l(t.callGroupOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e(),t._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"-10px"},attrs:{label:"其他设置",prop:"set"}},[i("el-checkbox",{model:{value:t.libraryAddForm.isBreak,callback:function(e){t.$set(t.libraryAddForm,"isBreak",e)},expression:"libraryAddForm.isBreak"}},[t._v("不允许打断")])],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:""}},[i("el-col",{attrs:{span:6}},[i("el-form-item",[i("el-checkbox",{model:{value:t.libraryAddForm.isMessage,callback:function(e){t.$set(t.libraryAddForm,"isMessage",e)},expression:"libraryAddForm.isMessage"}},[t._v("发送短信")])],1)],1),t._v(" "),i("el-col",{staticClass:"rest-err__select",attrs:{span:6}},[i("el-form-item",{attrs:{prop:"messageModel"}},[i("el-select",{ref:"libraryMessage",staticStyle:{width:"150px","margin-left":"10px"},attrs:{size:"small",placeholder:"请选择短信模板",disabled:!t.libraryAddForm.isMessage},model:{value:t.libraryAddForm.messageModel,callback:function(e){t.$set(t.libraryAddForm,"messageModel",e)},expression:"libraryAddForm.messageModel"}},t._l(t.messageOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"",prop:"client"}},[i("el-col",{attrs:{span:6}},[i("el-form-item",[i("el-checkbox",{model:{value:t.libraryAddForm.isClient,callback:function(e){t.$set(t.libraryAddForm,"isClient",e)},expression:"libraryAddForm.isClient"}},[t._v("设置客户属性")])],1)],1),t._v(" "),i("el-col",{staticClass:"rest-err__select",attrs:{span:6}},[i("el-form-item",{attrs:{prop:"clientModel"}},[i("el-select",{ref:"libraryClient",staticStyle:{width:"150px","margin-left":"10px"},attrs:{size:"small",placeholder:"请选择客户属性",disabled:!t.libraryAddForm.isClient},model:{value:t.libraryAddForm.clientModel,callback:function(e){t.$set(t.libraryAddForm,"clientModel",e)},expression:"libraryAddForm.clientModel"}},t._l(t.clientOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"等待时间",prop:"time"}},[i("el-input",{staticStyle:{width:"100px"},attrs:{maxlength:6,size:"small"},model:{value:t.libraryAddForm.time,callback:function(e){t.$set(t.libraryAddForm,"time",t._n(e))},expression:"libraryAddForm.time"}}),t._v("  秒\n          "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v("说完本流程后等待时间，单位秒")]),t._v(" "),i("i",{staticClass:"far fa-question-circle",staticStyle:{cursor:"pointer"}})])],1)],2)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.closeLibraryModal("libraryAddForm")}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitLibraryAddBtn}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{width:"400px",title:t.addWheelTitle,visible:t.showAddWheel},on:{"update:visible":function(e){t.showAddWheel=e},close:function(e){t.closeWheelModal("wheelAddForm")}}},[i("el-form",{ref:"wheelAddForm",attrs:{model:t.wheelAddForm,rules:t.wheelAddRules,"label-width":"85px"}},[i("el-form-item",{attrs:{label:"流程名称",prop:"title"}},[i("el-input",{attrs:{maxlength:15,placeholder:"输入流程名称"},model:{value:t.wheelAddForm.title,callback:function(e){t.$set(t.wheelAddForm,"title",e)},expression:"wheelAddForm.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"流程类型",prop:"type"}},[i("el-select",{attrs:{placeholder:"请选择流程类型"},model:{value:t.wheelAddForm.type,callback:function(e){t.$set(t.wheelAddForm,"type",e)},expression:"wheelAddForm.type"}},t._l(t.mainFlowtOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.closeWheelModal("wheelAddForm")}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitWheelAddBtn}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{staticClass:"restModal",attrs:{width:"600px",title:"普通话术节点",visible:t.showWheelChangeTag},on:{"update:visible":function(e){t.showWheelChangeTag=e},close:function(e){t.closeWheelModal("wheelNodeForm")}}},[i("el-form",{ref:"wheelNodeForm",staticClass:"scrollbar",staticStyle:{"max-height":"400px","padding-right":"15px","overflow-y":"scroll"},attrs:{model:t.wheelNodeForm,rules:t.wheelNodeRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"节点名称",prop:"title"}},[i("el-input",{attrs:{maxlength:25,placeholder:"输入流程名称"},model:{value:t.wheelNodeForm.title,callback:function(e){t.$set(t.wheelNodeForm,"title",e)},expression:"wheelNodeForm.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"节点话术",prop:"desp"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入节点话术内容"},model:{value:t.wheelNodeForm.desp,callback:function(e){t.$set(t.wheelNodeForm,"desp",e)},expression:"wheelNodeForm.desp"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"用户回答",prop:"tags"}},[i("el-checkbox",{on:{change:t.changeWheelNodeAll},model:{value:t.wheelNodeForm.wheelNodeAll,callback:function(e){t.$set(t.wheelNodeForm,"wheelNodeAll",e)},expression:"wheelNodeForm.wheelNodeAll"}},[t._v("全部回答")]),t._v(" "),i("el-checkbox-group",{staticClass:"wheelCheckGroup",model:{value:t.wheelNodeForm.wheelNodeCheck,callback:function(e){t.$set(t.wheelNodeForm,"wheelNodeCheck",e)},expression:"wheelNodeForm.wheelNodeCheck"}},[i("p",[t._v("系统默认回答")]),t._v(" "),t._l(t.wheelBasicsTags,function(e,n){return i("el-checkbox",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),t._v(" "),i("p",[t._v("自定义回答")]),t._v(" "),t._l(t.wheelOwnTags,function(e,n){return i("el-tooltip",{key:e.value,staticClass:"item",attrs:{effect:"dark",content:e.label,placement:"top"}},[i("el-checkbox",{attrs:{label:e.value}},[t._v("\n              "+t._s(e.label)+"\n            ")])],1)}),t._v(" "),i("br"),t._v(" "),i("el-button",{attrs:{plain:"",size:"small"},on:{click:function(e){t.showAddWheelTag=!0}}},[t._v("+ 增加回答")])],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"节点设置",prop:"set"}},[i("el-checkbox",{model:{value:t.wheelNodeForm.isBreak,callback:function(e){t.$set(t.wheelNodeForm,"isBreak",e)},expression:"wheelNodeForm.isBreak"}},[t._v("不允许打断")]),i("br"),t._v(" "),i("el-checkbox",{model:{value:t.wheelNodeForm.isMessage,callback:function(e){t.$set(t.wheelNodeForm,"isMessage",e)},expression:"wheelNodeForm.isMessage"}},[t._v("发送短信")]),t._v(" "),i("el-select",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{size:"small",placeholder:"请选择短信模板",disabled:!t.wheelNodeForm.isMessage},model:{value:t.wheelNodeForm.messageModel,callback:function(e){t.$set(t.wheelNodeForm,"messageModel",e)},expression:"wheelNodeForm.messageModel"}},t._l(t.messageOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"等待时间",prop:"time"}},[i("el-input",{staticStyle:{width:"100px"},attrs:{maxlength:6,size:"small"},model:{value:t.wheelNodeForm.time,callback:function(e){t.$set(t.wheelNodeForm,"time",t._n(e))},expression:"wheelNodeForm.time"}}),t._v("  秒\n        "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v("说完本流程后等待时间，单位秒")]),t._v(" "),i("i",{staticClass:"far fa-question-circle",staticStyle:{cursor:"pointer"}})])],1)],1),t._v(" "),i("el-dialog",{attrs:{width:"500px",title:"新建回答",visible:t.showAddWheelTag,"append-to-body":""},on:{"update:visible":function(e){t.showAddWheelTag=e}}},[i("el-form",{ref:"addWheelTagForm",staticClass:"scrollbar",staticStyle:{"max-height":"400px",padding:"0 15px","overflow-y":"scroll"},attrs:{model:t.addWheelTagForm,rules:t.addWheelTagRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"回答名称",prop:"title"}},[i("el-input",{attrs:{maxlength:10,placeholder:"请输入回答名称"},model:{value:t.addWheelTagForm.title,callback:function(e){t.$set(t.addWheelTagForm,"title",e)},expression:"addWheelTagForm.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"关键词",prop:"keyword"}},[i("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"输入关键词，回车"},model:{value:t.addWheelTagForm.keyword,callback:function(e){t.$set(t.addWheelTagForm,"keyword",e)},expression:"addWheelTagForm.keyword"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"答法",prop:"answer"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"匹配到该分支的客户答法，多个答法请用英文逗号间隔"},model:{value:t.addWheelTagForm.answer,callback:function(e){t.$set(t.addWheelTagForm,"answer",e)},expression:"addWheelTagForm.answer"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:t.closeAddWheelTagModal}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitWheelTagBtn}},[t._v("确 定")])],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.closeWheelModal("wheelNodeForm")}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitWheelNodeTagBtn}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{width:"500px",title:"跳转节点",visible:t.showWheelChangeNext},on:{"update:visible":function(e){t.showWheelChangeNext=e},close:function(e){t.closeWheelModal("wheelNextForm")}}},[i("el-form",{ref:"wheelNextForm",attrs:{model:t.wheelNextForm,rules:t.wheelNextRules,"label-width":"85px"}},[i("el-form-item",{attrs:{label:"节点名称",prop:"title"}},[i("el-input",{attrs:{maxlength:25,placeholder:"输入流程名称"},model:{value:t.wheelNextForm.title,callback:function(e){t.$set(t.wheelNextForm,"title",e)},expression:"wheelNextForm.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"跳转前话术",prop:"desp"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"进入该节点后播放的话术（可以为空）"},model:{value:t.wheelNextForm.desp,callback:function(e){t.$set(t.wheelNextForm,"desp",e)},expression:"wheelNextForm.desp"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"下一步",prop:"next"}},[i("el-select",{attrs:{size:"small"},on:{change:t.changeWheelNext},model:{value:t.wheelNextForm.nextVal,callback:function(e){t.$set(t.wheelNextForm,"nextVal",e)},expression:"wheelNextForm.nextVal"}},t._l(t.wheelNextOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),3===t.wheelNextForm.nextVal?i("el-form-item",{attrs:{label:"",prop:"mainFlow"}},[i("el-select",{attrs:{size:"small"},model:{value:t.wheelNextForm.mainFlow,callback:function(e){t.$set(t.wheelNextForm,"mainFlow",e)},expression:"wheelNextForm.mainFlow"}},t._l(t.mainFlowtOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e(),t._v(" "),4===t.wheelNextForm.nextVal?i("el-form-item",{attrs:{label:"坐席组",prop:"group"}},[i("el-select",{attrs:{size:"small"},model:{value:t.wheelNextForm.group,callback:function(e){t.$set(t.wheelNextForm,"group",e)},expression:"wheelNextForm.group"}},t._l(t.callGroupOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"其他设置",prop:"set"}},[i("el-checkbox",{model:{value:t.wheelNextForm.isMessage,callback:function(e){t.$set(t.wheelNextForm,"isMessage",e)},expression:"wheelNextForm.isMessage"}},[t._v("发送短信")]),t._v(" "),i("el-select",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{size:"small",placeholder:"请选择短信模板",disabled:!t.wheelNextForm.isMessage},model:{value:t.wheelNextForm.messageModel,callback:function(e){t.$set(t.wheelNextForm,"messageModel",e)},expression:"wheelNextForm.messageModel"}},t._l(t.messageOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.closeWheelModal("wheelNextForm")}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitWheelNextBtn}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{staticClass:"addRuleModal restModal",attrs:{width:"600px",title:t.ruleAddTitle,visible:t.showAddRule},on:{"update:visible":function(e){t.showAddRule=e},close:function(e){t.closeAddRuleModal("ruleAddForm")}}},[i("el-form",{ref:"ruleAddForm",staticClass:"scrollbar",staticStyle:{"max-height":"400px","padding-right":"20px","overflow-y":"scroll"},attrs:{model:t.ruleAddForm,rules:t.ruleAddRules}},[i("div",{staticClass:"setTriggers-item appAll"},[i("p",{staticStyle:{"font-size":"14px","margin-bottom":"15px"}},[t._v("同时满足下列条件")]),t._v(" "),i("div",{staticClass:"appAllCon"},t._l(t.addRulesItem,function(e,n){return i("v-addRules",{tag:"div",attrs:{rulesFilterOp:t.rulesFilterOp,val1:e.condition_field,val2:e.condition_type,val3:e.condition_value},on:{"update:rulesFilterOp":function(e){t.rulesFilterOp=e},"update:val1":function(i){t.$set(e,"condition_field",i)},"update:val2":function(i){t.$set(e,"condition_type",i)},"update:val3":function(i){t.$set(e,"condition_value",i)},first:function(i){t.clickChangeFirst(n,e)},remove:function(e){t.removeRuleItem(n,t.addRulesItem)}}})})),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(e){t.addCon("add")}}},[t._v("添加条件")])],1),t._v(" "),i("el-form-item",{staticStyle:{margin:"10px 0 22px 0","border-top":"1px solid #EBEEF5"},attrs:{prop:"client"}},[i("p",{staticStyle:{"font-size":"14px"}},[t._v("将意向登记标签设置为")]),t._v(" "),i("el-select",{attrs:{size:"small",placeholder:"请选择客户属性"},model:{value:t.ruleAddForm.client,callback:function(e){t.$set(t.ruleAddForm,"client",e)},expression:"ruleAddForm.client"}},t._l(t.clientOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.closeAddRuleModal("ruleAddForm")}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitAddRuleBtn}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{width:"400px",title:"编辑规则",visible:t.showEditRuleLevel},on:{"update:visible":function(e){t.showEditRuleLevel=e},close:function(e){t.closeRuleLevelModal("ruleLevelForm")}}},[i("el-form",{ref:"ruleLevelForm",attrs:{model:t.ruleLevelForm}},[i("p",[t._v("以上规则均不满足时，将客户意向标签设置为")]),t._v(" "),i("el-form-item",{staticStyle:{margin:"10px 0 0 0"},attrs:{prop:"client"}},[i("el-select",{attrs:{size:"small",placeholder:"请选择客户属性"},model:{value:t.ruleLevelForm.client,callback:function(e){t.$set(t.ruleLevelForm,"client",e)},expression:"ruleLevelForm.client"}},t._l(t.clientOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.closeRuleLevelModal("ruleLevelForm")}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitRuleLevelBtn}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{staticClass:"restModal",attrs:{width:"600px",title:"添加到知识库",visible:t.showAddStudy},on:{"update:visible":function(e){t.showAddStudy=e},close:function(e){t.closeStudyModal("studyAddForm")}}},[i("el-form",{ref:"studyAddForm",staticClass:"scrollbar",staticStyle:{"max-height":"400px","padding-right":"15px","overflow-y":"scroll"},attrs:{model:t.studyAddForm,rules:t.studyAddRules,"label-width":"85px"}},[i("el-form-item",{attrs:{label:"类型",prop:"type"}},[i("el-radio-group",{attrs:{size:"small"},model:{value:t.studyAddForm.state,callback:function(e){t.$set(t.studyAddForm,"state",e)},expression:"studyAddForm.state"}},[i("el-radio-button",{attrs:{label:1}},[t._v("已有问题")]),t._v(" "),i("el-radio-button",{attrs:{label:2}},[t._v("新问题")])],1)],1),t._v(" "),1===t.studyAddForm.state?i("el-form-item",{attrs:{label:"选择问题",prop:"quesTitle"}},[i("el-select",{attrs:{filterable:"",placeholder:"搜索并选择问题"},model:{value:t.studyAddForm.quesTitle,callback:function(e){t.$set(t.studyAddForm,"quesTitle",e)},expression:"studyAddForm.quesTitle"}},t._l(t.quesOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"类型",prop:"type"}},[i("el-radio-group",{attrs:{size:"small"},model:{value:t.studyAddForm.type,callback:function(e){t.$set(t.studyAddForm,"type",e)},expression:"studyAddForm.type"}},[i("el-radio-button",{attrs:{label:1}},[t._v("一般问题")]),t._v(" "),i("el-radio-button",{attrs:{label:2}},[t._v("业务问题")])],1),t._v(" "),1===t.studyAddForm.type?i("p",{staticStyle:{color:"#909399"}},[t._v("与业务场景无关的问题，如：您贵姓")]):i("p",{staticStyle:{color:"#909399"}},[t._v('与业务场景有关，反应该场景下客户关注的问题，如贷款场景下客户关注"利息"')])],1),t._v(" "),i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{maxlength:30,placeholder:"请概括问题场景，如：客户询问利息"},model:{value:t.studyAddForm.title,callback:function(e){t.$set(t.studyAddForm,"title",e)},expression:"studyAddForm.title"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:"关键词",prop:"keyWord"}},[i("el-input",{attrs:{placeholder:"请输入关键词按回车确定"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleStudyKey(e):null}},model:{value:t.studyAddForm.wordInput,callback:function(e){t.$set(t.studyAddForm,"wordInput",e)},expression:"studyAddForm.wordInput"}}),t._v(" "),i("div",{staticClass:"libraryKeyWord",staticStyle:{"margin-top":"6px"}},[this.studyAddForm.keyWord.length<=0?i("span",[t._v("- 暂无关键词 -")]):t._e(),t._v(" "),t._l(t.studyAddForm.keyWord,function(e){return i("el-tag",{key:e,staticStyle:{margin:"0 5px 5px 0",cursor:"pointer"},attrs:{closable:!0,"disable-transitions":!0},on:{close:function(i){t.handleStudyClose(e)}},nativeOn:{click:function(e){return t.copySpanText(e)}}},[t._v("\n          "+t._s(e)+"\n          ")])}),i("br"),t._v(" "),i("input",{ref:"studyKeyInput",staticStyle:{position:"absolute",top:"0",left:"0",opacity:"0","z-index":"-10"},attrs:{type:"text",name:"",value:""}}),t._v(" "),this.studyAddForm.keyWord.length>0?i("el-button",{attrs:{type:"text"},on:{click:t.copyStudyKey}},[t._v("复制全部关键词")]):t._e()],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"问法",prop:"question"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入问题多种问法，并回车分隔"},model:{value:t.studyAddForm.question,callback:function(e){t.$set(t.studyAddForm,"question",e)},expression:"studyAddForm.question"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"回答方式",prop:"answer"}},[i("el-radio-group",{attrs:{size:"small"},model:{value:t.studyAddForm.answer,callback:function(e){t.$set(t.studyAddForm,"answer",e)},expression:"studyAddForm.answer"}},[i("el-radio-button",{attrs:{label:1}},[t._v("\n            单句回答\n            "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v("AI一句话回答客户问题，如"),i("br"),t._v("客户：利息是多少？"),i("br"),t._v("AI：利息5厘")]),t._v(" "),i("i",{staticClass:"fas fa-question-circle"})])],1),t._v(" "),i("el-radio-button",{attrs:{label:2}},[t._v("\n            进入多轮会话\n            "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v("AI与客户需多轮对话结束该问题，如"),i("br"),t._v("客户：有推荐房型吗？"),i("br"),t._v("AI：请问您家几口人？"),i("br"),t._v("客户：4口人"),i("br"),t._v("AI：推荐您4居室")]),t._v(" "),i("i",{staticClass:"fas fa-question-circle"})])],1)],1)],1),t._v(" "),2===t.studyAddForm.answer?i("el-form-item",{attrs:{label:"",prop:"wheel"}},[i("el-select",{attrs:{size:"small",placeholder:"选择回复该问题的多轮会话"},model:{value:t.studyAddForm.wheel,callback:function(e){t.$set(t.studyAddForm,"wheel",e)},expression:"studyAddForm.wheel"}},t._l(t.wheelOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):i("div",{},[i("el-button",{staticStyle:{margin:"-12px 0 0 85px"},attrs:{type:"text",icon:"el-icon-plus"},on:{click:t.addStudyAnswer}},[t._v("添加标准答案")]),t._v(" "),t._l(t.studyAddForm.spanAnswer,function(e,n){return i("el-form-item",{key:e.key,attrs:{label:"",prop:"spanAnswer."+n+".value",rules:{required:!0,message:"请输入标准答案",trigger:"blur"}}},[i("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:2,placeholder:"输入该问题的标准答案，后续坐席或AI答复时将直接调取该答案"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"span.value"}}),t._v(" "),i("i",{staticClass:"iconfont icon-web-icon-",staticStyle:{display:"inline-block",margin:"0 0 60px 10px"},on:{click:function(i){i.stopPropagation(),t.removeStudyAnswer(e)}}})],1)}),t._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"",prop:"checkbox"}},[i("el-checkbox",{model:{value:t.studyAddForm.isRandom,callback:function(e){t.$set(t.studyAddForm,"isRandom",e)},expression:"studyAddForm.isRandom"}},[t._v("随机回答")]),i("br"),t._v(" "),i("el-checkbox",{model:{value:t.studyAddForm.isAI,callback:function(e){t.$set(t.studyAddForm,"isAI",e)},expression:"studyAddForm.isAI"}},[t._v("AI回答")]),i("br")],1),t._v(" "),t.studyAddForm.spanAnswer.length>0?i("el-form-item",{attrs:{label:"回答后",prop:"after"}},[i("el-select",{attrs:{size:"small"},on:{change:t.changeStudyAfter},model:{value:t.studyAddForm.after,callback:function(e){t.$set(t.studyAddForm,"after",e)},expression:"studyAddForm.after"}},t._l(t.studyAfterOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e(),t._v(" "),3===t.studyAddForm.after?i("el-form-item",{attrs:{label:"",prop:"mainFlow"}},[i("el-select",{attrs:{size:"small",placeholder:"选择要跳转到的流程节点"},model:{value:t.studyAddForm.mainFlow,callback:function(e){t.$set(t.studyAddForm,"mainFlow",e)},expression:"studyAddForm.mainFlow"}},t._l(t.mainFlowtOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e(),t._v(" "),4===t.studyAddForm.after?i("el-form-item",{attrs:{label:"坐席组",prop:"group","选择坐席组":""}},[i("el-select",{attrs:{size:"small"},model:{value:t.studyAddForm.group,callback:function(e){t.$set(t.studyAddForm,"group",e)},expression:"studyAddForm.group"}},t._l(t.callGroupOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e(),t._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"-10px"},attrs:{label:"其他设置",prop:"set"}},[i("el-checkbox",{model:{value:t.studyAddForm.isBreak,callback:function(e){t.$set(t.studyAddForm,"isBreak",e)},expression:"studyAddForm.isBreak"}},[t._v("不允许打断")])],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:""}},[i("el-col",{attrs:{span:6}},[i("el-form-item",[i("el-checkbox",{model:{value:t.studyAddForm.isMessage,callback:function(e){t.$set(t.studyAddForm,"isMessage",e)},expression:"studyAddForm.isMessage"}},[t._v("发送短信")])],1)],1),t._v(" "),i("el-col",{staticClass:"rest-err__select",attrs:{span:6}},[i("el-form-item",{attrs:{prop:"messageModel"}},[i("el-select",{ref:"studyMessage",staticStyle:{width:"150px","margin-left":"10px"},attrs:{size:"small",placeholder:"请选择短信模板",disabled:!t.studyAddForm.isMessage},model:{value:t.studyAddForm.messageModel,callback:function(e){t.$set(t.studyAddForm,"messageModel",e)},expression:"studyAddForm.messageModel"}},t._l(t.messageOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"",prop:"client"}},[i("el-col",{attrs:{span:6}},[i("el-form-item",[i("el-checkbox",{model:{value:t.studyAddForm.isClient,callback:function(e){t.$set(t.studyAddForm,"isClient",e)},expression:"studyAddForm.isClient"}},[t._v("设置客户属性")])],1)],1),t._v(" "),i("el-col",{staticClass:"rest-err__select",attrs:{span:6}},[i("el-form-item",{attrs:{prop:"clientModel"}},[i("el-select",{ref:"studyClient",staticStyle:{width:"150px","margin-left":"10px"},attrs:{size:"small",placeholder:"请选择客户属性",disabled:!t.studyAddForm.isClient},model:{value:t.studyAddForm.clientModel,callback:function(e){t.$set(t.studyAddForm,"clientModel",e)},expression:"studyAddForm.clientModel"}},t._l(t.clientOp,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"等待时间",prop:"time"}},[i("el-input",{staticStyle:{width:"100px"},attrs:{maxlength:6,size:"small"},model:{value:t.studyAddForm.time,callback:function(e){t.$set(t.studyAddForm,"time",t._n(e))},expression:"studyAddForm.time"}}),t._v("  秒\n          "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v("说完本流程后等待时间，单位秒")]),t._v(" "),i("i",{staticClass:"far fa-question-circle",staticStyle:{cursor:"pointer"}})])],1)],2)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.closeStudyModal("studyAddForm")}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitStudyAddBtn}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{width:"400px",title:t.dicAddTitle,visible:t.showAddDic},on:{"update:visible":function(e){t.showAddDic=e},close:function(e){t.closeDicModal("dicAddForm")}}},[i("el-form",{ref:"dicAddForm",attrs:{model:t.dicAddForm,rules:t.addDicRules,"label-width":"85px"}},[i("el-form-item",{attrs:{label:"词典名",prop:"title"}},[i("el-input",{attrs:{maxlength:10,placeholder:"请输入词典名"},model:{value:t.dicAddForm.title,callback:function(e){t.$set(t.dicAddForm,"title",e)},expression:"dicAddForm.title"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.closeDicModal("dicAddForm")}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitDicAddBtn}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{width:"400px",title:"词典导入",visible:t.showUploadDic},on:{"update:visible":function(e){t.showUploadDic=e},close:t.closeUploadDic}},[i("el-form",{attrs:{"label-width":"85px"}},[i("el-form-item",{attrs:{label:"词典文件"}},[i("el-upload",{ref:"dicUpload",staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-change":t.handleUploadDic,limit:2,"auto-upload":!1,"file-list":t.dicFileList}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("选择文件")]),t._v(" "),i("span",{staticStyle:{color:"#909399l"}},[t._v("只能上传jtxt文件，且不超过100kb")])],1)],1),t._v(" "),i("span",{staticStyle:{color:"#909399l"}},[t._v("说明：支持英文逗号分割的文本文件，比如张,李,王")])],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:t.closeUploadDic}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitUploadDicBtn}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{width:"400px",title:t.dicItemAddTitle,visible:t.showAddDicItem},on:{"update:visible":function(e){t.showAddDicItem=e},close:function(e){t.closeDicModal("dicItemAddForm")}}},[i("el-form",{ref:"dicItemAddForm",attrs:{model:t.dicItemAddForm,rules:t.addDicItemRules,"label-width":"85px"}},[i("el-form-item",{attrs:{label:"词条名",prop:"title"}},[i("el-input",{attrs:{maxlength:10,placeholder:"请输入词条名"},model:{value:t.dicItemAddForm.title,callback:function(e){t.$set(t.dicItemAddForm,"title",e)},expression:"dicItemAddForm.title"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.closeDicModal("dicItemAddForm")}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitDicItemAddBtn}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{"custom-class":"dicSoundModal",width:"300px",visible:t.showDicSound},on:{"update:visible":function(e){t.showDicSound=e},close:function(e){t.closeDicModal("")}}},[t._v("\n    - 暂无录音 -\n  ")]),t._v(" "),i("el-dialog",{attrs:{"custom-class":"radioUploadNoticeModal",width:"400px",title:"上传须知",visible:t.showUploadNotice},on:{"update:visible":function(e){t.showUploadNotice=e},close:function(e){t.showUploadNotice=!1}}},[i("div",{staticClass:"noticeContent"},[i("p",[t._v("\n        1. 录音文件格式要求：必须为wav文件\n      ")]),t._v(" "),i("p",[t._v("\n        2. 录音文件名称要求：序号.wav (例如：34676.wav)\n      ")]),t._v(" "),i("p",[t._v("\n        3.压缩包格式要求：请您录制完话术内所有的句子且按照命名要求命名放入一个文件夹内压缩成zip包后上传，压缩包名称可以是字母或数字，不能是中文(例如：huashu.zip)\n      ")]),t._v(" "),i("p",[t._v("\n        4. 录音文件大小要求：单条语音文件大小不能超过1MB，压缩包大小不能超过80MB，请不要上传过大的录音文件，源文件可以通过录音编辑工作进行压缩\n      ")]),t._v(" "),i("p",[t._v("\n        5. 录音文件如果前后有空白，需要进行裁剪，做到“掐头去尾”，可以使用录音编辑工具进行裁剪\n      ")]),t._v(" "),i("p",[t._v("\n        更多录音指导请点击下载，获取操作指南\n      ")])])]),t._v(" "),i("el-dialog",{attrs:{"custom-class":"radioAudioModal",width:"340px",title:"试听录音",visible:t.showRadioAudio},on:{"update:visible":function(e){t.showRadioAudio=e},close:t.closeRadioAudioModal}},[i("audio",{ref:"radioModalAudio",staticClass:"radioAudioModal",attrs:{src:t.radioModalAudioData.url,preload:t.radioModalAudioData.preload,controls:"controls"}})])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"library-slider-tag"},[e("span",[this._v("类型")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"library-slider-tag"},[e("span",[this._v("标题")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"library-slider-tag"},[e("span",[this._v("问法")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"library-slider-tag"},[e("span",[this._v("回答方式")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"library-slider-item"},[e("p",{staticClass:"library-slider-tag"},[e("span",[this._v("问题答案")])]),this._v(" "),e("div",{staticClass:"library-slider-content"},[this._v("多轮会话")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"library-slider-tag",staticStyle:{"vertical-align":"top"}},[e("span",[this._v("问题答案")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"library-slider-item"},[e("p",{staticClass:"library-slider-tag"},[e("span",[this._v("回答后")])]),this._v(" "),e("div",{staticClass:"library-slider-content"},[this._v("\n              等待用户应答\n            ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"library-slider-item"},[e("p",{staticClass:"library-slider-tag",staticStyle:{"vertical-align":"top"}},[e("span",[this._v("其他设置")])]),this._v(" "),e("div",{staticClass:"library-slider-content library-slider-set"},[e("p",[this._v("不允许打断：是")]),this._v(" "),e("p",[this._v("短信模板：无")]),this._v(" "),e("p",[this._v("客户属性：A级(有明确意向)")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"library-slider-tag"},[e("span",[this._v("等待时间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"library-slider-tag",staticStyle:{"vertical-align":"top"}},[e("span",[this._v("关键词")])])}]};var x=i("VU/8")(g,b,!1,function(t){i("qJQE")},null,null);e.default=x.exports},"RRo+":function(t,e,i){t.exports={default:i("c45H"),__esModule:!0}},c45H:function(t,e,i){i("1alW"),t.exports=i("FeBl").Number.isInteger},qJQE:function(t,e){},tDXF:function(t,e){!function(e){var i,n={};if(!e.document||void 0===e.document.createElement("canvas").getContext)throw e.console&&e.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");Function.prototype.bind||(Function.prototype.bind=function(t){function e(){return r.apply(t,o.concat(n.call(arguments)))}function i(){}var n=Array.prototype.slice,o=n.call(arguments,1),r=this;return i.prototype=this.prototype,e.prototype=new i,e}),function(){for(var t=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!e.requestAnimationFrame;++n)e.requestAnimationFrame=e[i[n]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[n]+"CancelAnimationFrame"]||e[i[n]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(i){var n=(new Date).getTime(),o=Math.max(8,16-(n-t)),r=e.setTimeout(function(){i(n+o)},o);return t=n+o,r}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(t){e.clearTimeout(t)})}(),n.Debug=null;var o,r={od:1,Tc:2,fd:4,ed:8,Dn:void 0!==e.navigator&&0<e.navigator.userAgent.indexOf("534.30")&&0<e.navigator.userAgent.indexOf("Android"),ru:void 0!==e.navigator&&0<e.navigator.userAgent.indexOf("MSIE 9.0"),bq:void 0!==e.navigator&&0<e.navigator.userAgent.indexOf("MSIE 10.0"),cq:void 0!==e.navigator&&0<e.navigator.userAgent.indexOf("Trident/7"),PA:void 0!==e.navigator&&0<e.navigator.userAgent.indexOf("Edge/"),yh:void 0!==e.navigator&&void 0!==e.navigator.platform&&0<=e.navigator.platform.toUpperCase().indexOf("MAC"),BF:void 0!==e.navigator&&void 0!==e.navigator.platform&&null!==e.navigator.platform.match(/(iPhone|iPod|iPad)/i),NE:function(t,e,i){var n=-1;return function(){var o=this,a=arguments;-1!==n&&r.clearTimeout(n),n=r.setTimeout(function(){n=-1,i||t.apply(o,a)},e),i&&!n&&t.apply(o,a)}},setTimeout:function(t,i){return e.setTimeout(t,i)},clearTimeout:function(t){e.clearTimeout(t)},createElement:function(t){return e.document.createElement(t)},k:function(t){throw Error(t)},ma:function(t,e){var i="The object is frozen, so its properties cannot be set: "+t.toString();void 0!==e&&(i+="  to value: "+e),r.k(i)},G:function(t,e,i,n){t instanceof e||(i=r.getTypeName(i),void 0!==n&&(i+="."+n),r.Ed(t,e,i))},j:function(t,e,i,n){typeof t!==e&&(i=r.getTypeName(i),void 0!==n&&(i+="."+n),r.Ed(t,e,i))},zd:function(t,e,i){"number"==typeof t&&isFinite(t)||(e=r.getTypeName(e),void 0!==i&&(e+="."+i),r.k(e+" must be a real number type, and not NaN or Infinity: "+t))},ob:function(t,e,i,n){t instanceof a&&t.Ge===e||(i=r.getTypeName(i),void 0!==n&&(i+="."+n),r.Ed(t,"a constant of class "+r.pf(e),i))},GK:function(t,e){"string"==typeof t?za(t)||r.k('Color "'+t+'" is not a valid color string for '+e):t instanceof ja||r.k("Value for "+e+" must be a color string or a Brush, not "+t)},Ed:function(t,e,i,n){e=r.getTypeName(e),i=r.getTypeName(i),void 0!==n&&(i+="."+n),"string"==typeof t?r.k(i+" value is not an instance of "+e+': "'+t+'"'):r.k(i+" value is not an instance of "+e+": "+t)},Fa:function(t,e,i,n){i=r.getTypeName(i),void 0!==n&&(i+="."+n),r.k(i+" is not in the range "+e+": "+t)},nd:function(t){r.k(r.pf(t)+" constructor cannot take any arguments.")},Na:function(t){r.k("Collection was modified during iteration: "+t.toString()+"\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")},Ij:function(t,e){r.k("No property to set for this enum value: "+e+" on "+t.toString())},trace:function(t){e.console&&e.console.log(t)},tx:{},Qt:function(t,i){!0!==r.tx[t]&&(r.tx[t]=!0,e.console&&e.console.log(t+" is deprecated in "+i+", see the GoJS change log for more information."))},Pa:function(t){return"object"==typeof t&&null!==t},isArray:function(t){return Array.isArray(t)||t instanceof NodeList||t instanceof HTMLCollection},AI:function(t){return Array.isArray(t)},gA:function(t,e,i){r.isArray(t)||r.Ed(t,"Array or NodeList or HTMLCollection",e,i)},Za:function(t){return t.length},Ol:function(t){return Array.prototype.slice.call(t)},Ba:function(t,e){return Array.isArray(t),t[e]},DE:function(t,e,i){Array.isArray(t)?t[e]=i:r.k("Cannot replace an object in an HTMLCollection or NodeList at "+e)},Ll:function(t,e){if(Array.isArray(t))return t.indexOf(e);for(var i=t.length,n=0;n<i;n++)if(t[n]===e)return n;return-1},qh:function(t,e,i){Array.isArray(t)?e>=t.length?t.push(i):t.splice(e,0,i):r.k("Cannot insert an object into an HTMLCollection or NodeList: "+i+" at "+e)},Jg:function(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):r.k("Cannot remove an object from an HTMLCollection or NodeList at "+e)},Hy:[],K:function(){var t=r.Hy.pop();return void 0===t?new ut:t},xb:function(t,e){var i=r.Hy.pop();return void 0===i?new ut(t,e):(i.x=t,i.y=e,i)},v:function(t){r.Hy.push(t)},aC:[],mm:function(){var t=r.aC.pop();return void 0===t?new dt:t},Hk:function(t){r.aC.push(t)},Iy:[],Kf:function(){var t=r.Iy.pop();return void 0===t?new pt:t},lg:function(t,e,i,n){var o=r.Iy.pop();return void 0===o?new pt(t,e,i,n):(o.x=t,o.y=e,o.width=i,o.height=n,o)},Eb:function(t){r.Iy.push(t)},bC:[],Wg:function(){var t=r.bC.pop();return void 0===t?new kt:t},bf:function(t){r.bC.push(t)},Jy:null,s:function(){var t=r.Jy;return null!==t?(r.Jy=null,t):new uh},q:function(t){t.reset(),r.Jy=t},$B:[],eb:function(){var t=r.$B.pop();return void 0===t?[]:t},ta:function(t){t.length=0,r.$B.push(t)},fo:Object.freeze([]),qm:1,oc:function(t){t.__gohashid=r.qm++},Xp:function(t){var e=t.__gohashid;return void 0===e&&(e=r.qm++,t.__gohashid=e),e},Pd:function(t){return t.__gohashid},ga:function(t,e){e.Ty=t,n[t]=e},La:function(t,e){function i(){}i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},mi:function(t){t.cH=!0},defineProperty:function(t,e,i,n,o){for(var a in r.j(t,"function","Util.defineProperty:classfunc"),r.j(e,"object","Util.defineProperty:propobj"),r.j(i,"function","Util.defineProperty:getter"),r.j(n,"function","Util.defineProperty:setter"),e){if(e=e[a],i={get:i,set:n,enumerable:!0},void 0!==o)for(var s in o)i[s]=o[s];Object.defineProperty(t.prototype,a,i),o=Object.getOwnPropertyDescriptor(t.prototype,a),e&&o&&Object.defineProperty(t.prototype,e,o);break}},dK:!1,u:function(t,e,i,n){for(var o in r.j(t,"function","Util.defineReadOnlyProperty:classfunc"),r.j(e,"object","Util.defineReadOnlyProperty:propobj"),r.j(i,"function","Util.defineReadOnlyProperty:getter"),e){var a=e[o];if(e={get:i,set:function(t){r.k('The property "'+a+'" is read-only and cannot be set to '+t)},enumerable:!0},void 0!==n)for(var s in n)e[s]=n[s];Object.defineProperty(t.prototype,o,e),n=Object.getOwnPropertyDescriptor(t.prototype,o),a&&n&&Object.defineProperty(t.prototype,a,n);break}},be:function(t,e){for(var i in e)e[i]=!0;t.prototype.ZG=e},getTypeName:function(t){return void 0===t?"":"string"==typeof t?t:"function"==typeof t?r.pf(t):null===t?"*":""},pf:function(t){if("function"==typeof t){if(t.Ty)return t.Ty;if(t.name)return t.name;var e,i=(e=t.toString()).indexOf("(");if(""!==(e=e.substring(9,i).trim()))return t.Ty=e}else if(r.Pa(t)&&t.constructor)return r.pf(t.constructor);return typeof t},p:function(t,e,i){r.j(t,"function","Util.defineEnumValue:classfunc"),r.j(e,"string","Util.defineEnumValue:name"),r.j(i,"number","Util.defineEnumValue:num"),i=new a(t,e,i),Object.freeze(i),t[e]=i;var n=t.fv;return n instanceof ht||(n=new ht("string",a),t.fv=n),n.add(e,i),i},ub:function(t,e){if(!t||!e)return null;var i=void 0;try{"function"==typeof e?i=e(t):"function"==typeof t.getAttribute?null===(i=t.getAttribute(e))&&(i=void 0):i=t[e]}catch(t){}return i},Ma:function(t,e,i){if(t&&e)try{"function"==typeof e?e(t,i):"function"==typeof t.setAttribute?t.setAttribute(e,i):t[e]=i}catch(t){}},Vu:function(t,e){r.j(t,"object","Setting properties requires Objects as arguments"),r.j(e,"object","Setting properties requires Objects as arguments");var i,n=t instanceof Ys,o=t instanceof Qo;for(i in e){""===i&&r.k("Setting properties requires non-empty property names");var a=t,s=i;if(n||o){var l=i.indexOf(".");if(0<l){var h=i.substring(0,l);n?a=t.Bd(h):(void 0===(a=t[h])||null===a)&&(a=t.fb[h]),r.Pa(a)?s=i.substr(l+1):r.k("Unable to find object named: "+h+" in "+t.toString()+" when trying to set property: "+i)}}if("_"!==s[0]&&!r.sF(a,s)){if(o&&"ModelChanged"===s){t.mH(e[s]);continue}if(o&&"Changed"===s){t.gn(e[s]);continue}if(o&&r.sF(t.fb,s))a=t.fb;else{if(o&&ca(t,s)){t.Yw(s,e[s]);continue}if(t instanceof ri&&"Changed"===s){t.gn(e[s]);continue}r.k('Trying to set undefined property "'+s+'" on object: '+a.toString())}}a[s]=e[i],"_"===s[0]&&a instanceof ls&&a.jH(s)}},sF:function(t,e){if(t.hasOwnProperty(e))return!0;for(var i=Object.getPrototypeOf(t);i&&i!==Function;){if(i.hasOwnProperty(e))return!0;var n=i.ZG;if(n&&n[e])return!0;i=Object.getPrototypeOf(i)}return!1},nJ:function(t){for(var e=[],i=0;256>i;i++)e[i]=i;var n=0,o=0;for(i=0;256>i;i++)n=(n+e[i]+119)%256,o=e[i],e[i]=e[n],e[n]=o;n=i=0;for(var r="",a=0;a<t.length;a++)n=(n+e[i=(i+1)%256])%256,o=e[i],e[i]=e[n],e[n]=o,r+=String.fromCharCode(t.charCodeAt(a)^e[(e[i]+e[n])%256]);return r},nI:function(t){for(var e={},i=0;256>i;i++)e["0123456789abcdef".charAt(i>>4)+"0123456789abcdef".charAt(15&i)]=String.fromCharCode(i);t.length%2&&(t="0"+t);var n=[],o=0;for(i=0;i<t.length;i+=2)n[o++]=e[t.substr(i,2)];return""===(t=n.join(""))?"0":t},Kg:function(t){return r.nJ(r.nI(t))},om:null,adym:"7da71ca0ad381e90",vfo:"2be64efdb262",IK:"@COLOR1",JK:"@COLOR2",OE:!1,Nt:null,Ot:null};function a(t,e,i){r.oc(this),this.pC=t,this.Rb=e,this.gH=i}function s(){this.nC=[]}function l(){}function h(t){void 0===t&&(t=42),this.seed=t,this.Dy=48271,this.ev=2147483647,this.ZB=this.ev/this.Dy,this.OG=this.ev%this.Dy,this.NG=1/this.ev,this.random()}function u(){}r.om=function(){var t=e.document.createElement("canvas");t.getContext("2d");return t}(),r.ga("EnumValue",a),a.prototype.toString=function(){return r.pf(this.pC)+"."+this.Rb},r.u(a,{Ge:"classType"},function(){return this.pC}),r.u(a,{name:"name"},function(){return this.Rb}),r.u(a,{value:"value"},function(){return this.gH}),a.findName=o=function(t,e){if(void 0===e||null===e||""===e)return null;r.j(t,"function","findName:classfunc"),r.j(e,"string","EnumValue.findName:name");var i=t.fv;return i instanceof ht?i.ka(e):null},s.prototype.toString=function(){return this.nC.join("")},s.prototype.add=function(t){""!==t&&this.nC.push(t)},h.prototype.random=function(){var t=this.seed%this.ZB*this.Dy-this.seed/this.ZB*this.OG;return this.seed=0<t?t:t+this.ev,this.seed*this.NG},r.u(u,{i:"iterator"},function(){return this}),u.prototype.reset=u.prototype.reset=function(){},u.prototype.next=u.prototype.next=function(){return!1},u.prototype.hasNext=function(){return!1},u.prototype.first=u.prototype.first=function(){return null},u.prototype.any=function(){return!1},u.prototype.all=function(){return!0},u.prototype.each=function(){return this},u.prototype.map=function(){return this},u.prototype.filter=function(){return this},u.prototype.concat=function(t){return t.i},r.u(u,{count:"count"},function(){return 0}),u.prototype.Nf=function(){},u.prototype.toString=function(){return"EmptyIterator"};var c,f,d,p,y,v,m,g,b,x,w,k,M,S,T,P,N,C,A,F,D,L,j,z,B,I,O,E,q,R,G,V,_,H,K,W,U,J,$,Y=new u;function X(t){this.key=-1,this.value=t}function Q(t,e){this.ql=t,this.rl=e,this.gv=!1}function Z(t){this.Ac=t,this.Zh=null,t.Qb=null,this.Ta=t.F,this.zc=-1}function tt(t){this.Ac=t,t.Pi=null,this.Ta=t.F,this.zc=t.n.length}function et(t){r.oc(this),this.P=!1,this.n=[],this.F=0,this.Pi=this.Qb=null,void 0===t||null===t?this.na=null:"string"==typeof t?"object"===t||"string"===t||"number"===t||"boolean"===t||"function"===t?this.na=t:r.Fa(t,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"==typeof t?this.na=t===Object?"object":t===String?"string":t===Number?"number":t===Boolean?"boolean":t===Function?"function":t:r.Fa(t,"null, a primitive type name, or a class type","List constructor: type")}function it(t){this.ai=t,t.Qb=null,this.Ta=t.F,this.Va=null}function nt(t){r.oc(this),this.P=!1,void 0===t||null===t?this.na=null:"string"==typeof t?"object"===t||"string"===t||"number"===t?this.na=t:r.Fa(t,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"==typeof t?this.na=t===Object?"object":t===String?"string":t===Number?"number":t:r.Fa(t,"null, a primitive type name, or a class type","Set constructor: type"),this.sd={},this.rd=0,this.Qb=null,this.F=0,this.Th=this.Ea=null}function ot(t){this.Ga=t,this.Ta=t.F,this.Va=null}function rt(t){r.oc(this),this.P=!0,this.Ga=t}function at(t){this.Ga=t,t.Qi=null,this.Ta=t.F,this.Va=null}function st(t,e){this.key=t,this.value=e,this.fp=this.Xa=null}function lt(t){this.Ga=t,t.Qb=null,this.Ta=t.F,this.Va=null}function ht(t,e){r.oc(this),this.P=!1,void 0===t||null===t?this.Sh=null:"string"==typeof t?"object"===t||"string"===t||"number"===t?this.Sh=t:r.Fa(t,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"==typeof t?this.Sh=t===Object?"object":t===String?"string":t===Number?"number":t:r.Fa(t,"null, a primitive type name, or a class type","Map constructor: keytype"),void 0===e||null===e?this.Bt=null:"string"==typeof e?"object"===e||"string"===e||"boolean"===e||"number"===e||"function"===e?this.Bt=e:r.Fa(e,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"==typeof e?this.Bt=e===Object?"object":e===String?"string":e===Number?"number":e===Boolean?"boolean":e===Function?"function":e:r.Fa(e,"null, a primitive type name, or a class type","Map constructor: valtype"),this.sd={},this.rd=0,this.Qi=this.Qb=null,this.F=0,this.Th=this.Ea=null}function ut(t,e){void 0===t?this.y=this.x=0:(this.x=t,this.y=e)}function ct(t,e){if(0===t)return 0<e?90:0>e?270:0;if(0===e)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var i=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i}function ft(t,e){return e.wh(t),t}function dt(t,e){void 0===t?this.height=this.width=0:(this.width=t,this.height=e)}function pt(t,e,i,n){void 0===t?this.height=this.width=this.y=this.x=0:t instanceof ut?e instanceof ut?(this.x=Math.min(t.x,e.x),this.y=Math.min(t.y,e.y),this.width=Math.abs(t.x-e.x),this.height=Math.abs(t.y-e.y)):e instanceof dt?(this.x=t.x,this.y=t.y,this.width=e.width,this.height=e.height):r.k("Incorrect arguments supplied to Rect constructor"):(this.x=t,this.y=e,this.width=i,this.height=n)}function yt(t,e,i){t.width=e,t.height=i}function vt(t,e){return ke(t.x,e.x)&&ke(t.y,e.y)&&ke(t.width,e.width)&&ke(t.height,e.height)}function mt(t,e,i,n,o){var r=t.width;return i+o<=-r?(t.x+=r/2,t.width=0):(t.x-=o,t.width+=i+o),e+n<=-(i=t.height)?(t.y+=i/2,t.height=0):(t.y-=e,t.height+=e+n),t}function gt(t,e,i,n,o){var r=Math.max(t.x,e),a=Math.max(t.y,i);return e=Math.min(t.x+t.width,e+n),i=Math.min(t.y+t.height,i+o),t.x=r,t.y=a,t.width=Math.max(0,e-r),t.height=Math.max(0,i-a),t}function bt(t,e){var i=t.width,n=e.width+10+10,o=t.x,r=e.x-10;return!(o>n+r||r>i+o)&&(i=t.height,n=e.height+10+10,!((o=t.y)>n+(r=e.y-10)||r>i+o))}function xt(t,e,i,n,o){var r=Math.min(t.x,e),a=Math.min(t.y,i);return e=Math.max(t.x+t.width,e+n),i=Math.max(t.y+t.height,i+o),t.x=r,t.y=a,t.width=e-r,t.height=i-a,t}function wt(t,e,i,n){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===e?this.left=this.bottom=this.right=this.top=t:void 0===i?(n=e,this.top=t,this.right=e,this.bottom=t,this.left=n):void 0!==n?(this.top=t,this.right=e,this.bottom=i,this.left=n):r.k("Invalid arguments to Margin constructor")}function kt(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}function Mt(t,e,i,n){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.offsetX=i,this.offsetY=n)}function St(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function Tt(){this.Tb=[1,0,0,1,0,0]}function Pt(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.HE=[],this.pattern=null}function Nt(t,e,i){this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.Hn=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.Jp=!1,this.Eg=this.kt=this.jt=0,this.document=e||document,this.VE=i,this.Nx=null,this.path=[],this.uh=new Tt,this.stack=[],this.qf=[],this.ux=t,this.iJ="http://www.w3.org/2000/svg",this.width=this.ux.width,this.height=this.ux.height,this.km=Ct(this,"svg",{width:this.width+"px",height:this.height+"px",viewBox:"0 0 "+this.ux.width+" "+this.ux.height}),this.km.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.km.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),jt(this,1,0,0,1,0,0),(e=Ct(this,"clipPath",{id:"mainClip"+(t=r.qm++)})).appendChild(Ct(this,"rect",{x:0,y:0,width:this.width,height:this.height})),this.km.appendChild(e),this.qf[0].setAttributeNS(null,"clip-path","url(#mainClip"+t+")")}function Ct(t,e,i,n){if(t=t.document.createElementNS(t.iJ,e),r.Pa(i))for(var o in i)t.setAttributeNS("href"===o?"http://www.w3.org/1999/xlink":"",o,i[o]);return void 0!==n&&(t.textContent=n),t}function At(t,e,i,n,o){1!==t.globalAlpha&&(i.opacity=t.globalAlpha),"fill"===e?(t.fillStyle instanceof Pt?i.fill=Ft(t,t.fillStyle):(/^rgba\(/.test(t.fillStyle)&&(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),i.fill="rgb("+e[1]+","+e[2]+","+e[3]+")",i["fill-opacity"]=e[4]),i.fill=t.fillStyle),i.stroke="none"):"stroke"===e&&(i.fill="none",t.strokeStyle instanceof Pt?i.stroke=Ft(t,t.strokeStyle):(/^rgba\(/.test(t.strokeStyle)&&(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),i.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",i["stroke-opacity"]=e[4]),i.stroke=t.strokeStyle),i["stroke-width"]=t.lineWidth,i["stroke-linecap"]=t.lineCap,i["stroke-linejoin"]=t.lineJoin,i["stroke-miterlimit"]=t.miterLimit),t="matrix("+(t=n.Tb)[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")",void 0!==o&&(t+=o),i.transform=t}function Ft(t,e){var i,n="GRAD"+r.qm++;if("linear"===e.type)i=Ct(t,"linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else if("radial"===e.type)i=Ct(t,"radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n});else{if("pattern"!==e.type)throw Error("invalid gradient");i={width:(a=e.pattern).width,height:a.height,id:n,patternUnits:"userSpaceOnUse"};var o="";a instanceof HTMLCanvasElement&&(o=a.toDataURL()),a instanceof HTMLImageElement&&(o=a.src),a={x:0,y:0,width:a.width,height:a.height,href:o},(i=Ct(t,"pattern",i)).appendChild(Ct(t,"image",a))}o=(a=e.HE).length;for(var a,s=[],l=0;l<o;l++){var h=(u=a[l]).color,u={offset:u.offset,"stop-color":h};/^rgba\(/.test(h)&&(h=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(h),u["stop-color"]="rgb("+h[1]+","+h[2]+","+h[3]+")",u["stop-opacity"]=h[4]),s.push(u)}for(s.sort(function(t,e){return t.offset>e.offset?1:-1}),l=0;l<o;l++)i.appendChild(Ct(t,"stop",s[l]));return t.km.appendChild(i),"url(#"+n+")"}function Dt(t,e,i,n){At(t,e,i={x:i[0],y:i[1],width:i[2],height:i[3]},n),t.addElement("rect",i)}function Lt(t,e,i,n){for(var o=[],a=0;a<i.length;a++){var s=r.Ol(i[a]),l=[s.shift()];if("A"===l[0])l.push(s.shift()+","+s.shift(),s.shift(),s.shift()+","+s.shift(),s.shift()+","+s.shift());else for(;s.length;)l.push(s.shift()+","+s.shift());o.push(l.join(" "))}At(t,e,i={d:o.join(" ")},n),"clipPath"===e?((n=Ct(t,"clipPath",{id:e="CLIP"+r.qm++})).appendChild(Ct(t,"path",i)),t.km.appendChild(n),0<t.qf.length&&t.qf[t.qf.length-1].setAttributeNS(null,"clip-path","url(#"+e+")")):t.addElement("path",i)}function jt(t,e,i,n,o,r,a){var s=new Tt;s.Tb=[e,i,n,o,r,a],At(t,"g",e={},s),s=t.addElement("g",e),t.qf.push(s)}function zt(t,e){this.ownerDocument=void 0===e?document:e;var i=this.ownerDocument.createElement("canvas");i.tabIndex=0,this.Od=i,this.Bk=new Bt(i),i.aa=t,Object.seal(this)}function Bt(t){t.getContext&&t.getContext("2d")||r.k("Browser does not support HTML Canvas Element"),this.ua=t.getContext("2d"),this.Qy=this.Sy=this.Ry="",this.Zq=!1,this.Eg=this.kt=this.jt=0,Object.seal(this)}r.be(X,{key:!0,value:!0}),r.u(X,{i:"iterator"},function(){return this}),X.prototype.reset=X.prototype.reset=function(){this.key=-1},X.prototype.next=X.prototype.next=function(){return-1===this.key&&(this.key=0,!0)},X.prototype.hasNext=function(){return this.next()},X.prototype.first=X.prototype.first=function(){return this.key=0,this.value},X.prototype.any=function(t){return this.key=-1,t(this.value)},X.prototype.all=function(t){return this.key=-1,t(this.value)},X.prototype.each=function(t){return this.key=-1,t(this.value),this},X.prototype.map=function(t){return new X(t(this.value))},X.prototype.filter=function(t){return t(this.value)?new X(this.value):Y},X.prototype.concat=function(t){return new Q(this,t.i)},r.u(X,{count:"count"},function(){return 1}),X.prototype.Nf=function(){this.value=null},X.prototype.toString=function(){return"SingletonIterator("+this.value+")"},r.be(Q,{key:!0,value:!0}),r.u(Q,{i:"iterator"},function(){return this}),Q.prototype.reset=Q.prototype.reset=function(){this.ql.reset(),this.rl.reset(),this.gv=!1},Q.prototype.next=Q.prototype.next=function(){if(!this.gv){var t=this.ql;if(t.next())return this.key=t.key,this.value=t.value,!0;this.gv=!0}return!(!this.gv||(t=this.rl,!t.next()))&&(this.key=t.key,this.value=t.value,!0)},Q.prototype.hasNext=function(){return this.next()},Q.prototype.first=Q.prototype.first=function(){return this.reset(),this.next()?this.value:null},Q.prototype.any=function(t){return!(!this.ql.any(t)&&!this.rl.any(t))},Q.prototype.all=function(t){return!(!this.ql.all(t)||!this.rl.all(t))},Q.prototype.each=function(t){return this.ql.each(t),this.rl.each(t),this},Q.prototype.map=function(t){return new Q(this.ql.map(t),this.rl.map(t))},Q.prototype.filter=function(t){return new Q(this.ql.filter(t),this.rl.filter(t))},Q.prototype.concat=function(t){return new Q(this,t.i)},r.u(Q,{count:"count"},function(){return this.ql.count+this.rl.count}),Q.prototype.Nf=function(){this.value=this.key=null},Q.prototype.toString=function(){return"ConcatIterator()"},r.be(Z,{key:!0,value:!0}),r.u(Z,{i:"iterator"},function(){return this}),r.defineProperty(Z,{qq:"predicate"},function(){return this.Zh},function(t){this.Zh=t}),Z.prototype.reset=Z.prototype.reset=function(){var t=this.Ac;t.Qb=null,this.Ta=t.F,this.zc=-1},Z.prototype.next=Z.prototype.next=function(){if((t=this.Ac).F!==this.Ta){if(0>this.key)return!1;r.Na(t)}var t,e=(t=t.n).length,i=++this.zc,n=this.Zh;if(null!==n)for(;i<e;){var o=t[i];if(n(o))return this.key=this.zc=i,this.value=o,!0;i++}else{if(i<e)return this.key=i,this.value=t[i],!0;this.Nf()}return!1},Z.prototype.hasNext=function(){return this.next()},Z.prototype.first=Z.prototype.first=function(){var t=this.Ac;this.Ta=t.F,this.zc=0;var e=(t=t.n).length,i=this.Zh;if(null!==i){for(var n=0;n<e;){var o=t[n];if(i(o))return this.key=this.zc=n,this.value=o;n++}return null}return 0<e?(o=t[0],this.key=0,this.value=o):null},Z.prototype.any=function(t){var e=this.Ac;e.Qb=null;var i=e.F;this.zc=-1;for(var n=e.n,o=n.length,a=this.Zh,s=0;s<o;s++){var l=n[s];if(null===a||a(l)){if(t(l))return!0;e.F!==i&&r.Na(e)}}return!1},Z.prototype.all=function(t){var e=this.Ac;e.Qb=null;var i=e.F;this.zc=-1;for(var n=e.n,o=n.length,a=this.Zh,s=0;s<o;s++){var l=n[s];if(null===a||a(l)){if(!t(l))return!1;e.F!==i&&r.Na(e)}}return!0},Z.prototype.each=function(t){var e=this.Ac;e.Qb=null;var i=e.F;this.zc=-1;for(var n=e.n,o=n.length,a=this.Zh,s=0;s<o;s++){var l=n[s];(null===a||a(l))&&(t(l),e.F!==i&&r.Na(e))}return this},Z.prototype.map=function(t){var e=this.Ac;e.Qb=null;var i=e.F;this.zc=-1;for(var n=[],o=e.n,a=o.length,s=this.Zh,l=0;l<a;l++){var h=o[l];(null===s||s(h))&&(n.push(t(h)),e.F!==i&&r.Na(e))}return(t=new et).n=n,t.Lc(),t.i},Z.prototype.filter=function(t){var e=this.Ac;e.Qb=null;var i=e.F;this.zc=-1;for(var n=[],o=e.n,a=o.length,s=this.Zh,l=0;l<a;l++){var h=o[l];(null===s||s(h))&&(t(h)&&n.push(h),e.F!==i&&r.Na(e))}return(t=new et(e.na)).n=n,t.Lc(),t.i},Z.prototype.concat=function(t){return this.Ac.Qb=null,new Q(this,t.i)},r.u(Z,{count:"count"},function(){var t=this.Zh;if(null!==t){for(var e=0,i=this.Ac.n,n=i.length,o=0;o<n;o++)t(i[o])&&e++;return e}return this.Ac.n.length}),Z.prototype.Nf=function(){this.key=-1,this.value=null,this.Ta=-1,this.Zh=null,this.Ac.Qb=this},Z.prototype.toString=function(){return"ListIterator@"+this.zc+"/"+this.Ac.count},r.be(tt,{key:!0,value:!0}),r.u(tt,{i:"iterator"},function(){return this}),tt.prototype.reset=tt.prototype.reset=function(){var t=this.Ac;t.Pi=null,this.Ta=t.F,this.zc=t.n.length},tt.prototype.next=tt.prototype.next=function(){var t=this.Ac;if(t.F!==this.Ta){if(0>this.key)return!1;r.Na(t)}var e=--this.zc;return 0<=e?(this.key=e,this.value=t.n[e],!0):(this.Nf(),!1)},tt.prototype.hasNext=function(){return this.next()},tt.prototype.first=tt.prototype.first=function(){var t=this.Ac;this.Ta=t.F;var e=t.n;return this.zc=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},tt.prototype.any=function(t){var e=this.Ac;e.Pi=null;var i=e.F,n=e.n,o=n.length;for(this.zc=o,o-=1;0<=o;o--){if(t(n[o]))return!0;e.F!==i&&r.Na(e)}return!1},tt.prototype.all=function(t){var e=this.Ac;e.Pi=null;var i=e.F,n=e.n,o=n.length;for(this.zc=o,o-=1;0<=o;o--){if(!t(n[o]))return!1;e.F!==i&&r.Na(e)}return!0},tt.prototype.each=function(t){var e=this.Ac;e.Pi=null;var i=e.F,n=e.n,o=n.length;for(this.zc=o,o-=1;0<=o;o--)t(n[o]),e.F!==i&&r.Na(e);return this},tt.prototype.map=function(t){var e=this.Ac;e.Pi=null;var i=e.F,n=[],o=e.n,a=o.length;for(this.zc=a,a-=1;0<=a;a--)n.push(t(o[a])),e.F!==i&&r.Na(e);return(t=new et).n=n,t.Lc(),t.i},tt.prototype.filter=function(t){var e=this.Ac;e.Pi=null;var i=e.F,n=[],o=e.n,a=o.length;for(this.zc=a,a-=1;0<=a;a--){var s=o[a];t(s)&&n.push(s),e.F!==i&&r.Na(e)}return(t=new et(e.na)).n=n,t.Lc(),t.i},tt.prototype.concat=function(t){return this.Ac.Pi=null,new Q(this,t.i)},r.u(tt,{count:"count"},function(){return this.Ac.n.length}),tt.prototype.Nf=function(){this.key=-1,this.value=null,this.Ta=-1,this.Ac.Pi=this},tt.prototype.toString=function(){return"ListIteratorBackwards("+this.zc+"/"+this.Ac.count+")"},r.ga("List",et),et.prototype.Lc=function(){var t=this.F;999999999<++t&&(t=0),this.F=t},et.prototype.freeze=et.prototype.freeze=function(){return this.P=!0,this},et.prototype.thaw=et.prototype.Qa=function(){return this.P=!1,this},et.prototype.toString=function(){return"List("+r.getTypeName(this.na)+")#"+r.Pd(this)},et.prototype.add=et.prototype.add=function(t){null!==t&&(this.P&&r.ma(this,t),this.n.push(t),this.Lc())},et.prototype.push=et.prototype.push=function(t){this.add(t)},et.prototype.addAll=et.prototype.Nc=function(t){if(null===t)return this;this.P&&r.ma(this);var e=this.n;if(r.isArray(t))for(var i=r.Za(t),n=0;n<i;n++){var o=r.Ba(t,n);e.push(o)}else for(t=t.i;t.next();)o=t.value,e.push(o);return this.Lc(),this},et.prototype.clear=et.prototype.clear=function(){this.P&&r.ma(this),this.n.length=0,this.Lc()},et.prototype.contains=et.prototype.contains=function(t){return null!==t&&-1!==this.n.indexOf(t)},et.prototype.has=et.prototype.has=function(t){return this.contains(t)},et.prototype.indexOf=et.prototype.indexOf=function(t){return null===t?-1:this.n.indexOf(t)},et.prototype.elt=et.prototype.ea=function(t){var e=this.n;return(0>t||t>=e.length)&&r.Fa(t,"0 <= i < length",et,"elt:i"),e[t]},et.prototype.get=et.prototype.get=function(t){return this.ea(t)},et.prototype.setElt=et.prototype.kg=function(t,e){var i=this.n;(0>t||t>=i.length)&&r.Fa(t,"0 <= i < length",et,"setElt:i"),this.P&&r.ma(this,t),i[t]=e},et.prototype.set=et.prototype.set=function(t,e){this.kg(t,e)},et.prototype.first=et.prototype.first=function(){var t=this.n;return 0===t.length?null:t[0]},et.prototype.last=et.prototype.ge=function(){var t=this.n,e=t.length;return 0<e?t[e-1]:null},et.prototype.pop=et.prototype.pop=function(){this.P&&r.ma(this);var t=this.n;return 0<t.length?t.pop():null},et.prototype.any=function(t){for(var e=this.n,i=this.F,n=e.length,o=0;o<n;o++){if(t(e[o]))return!0;this.F!==i&&r.Na(this)}return!1},et.prototype.all=function(t){for(var e=this.n,i=this.F,n=e.length,o=0;o<n;o++){if(!t(e[o]))return!1;this.F!==i&&r.Na(this)}return!0},et.prototype.each=function(t){for(var e=this.n,i=this.F,n=e.length,o=0;o<n;o++)t(e[o]),this.F!==i&&r.Na(this);return this},et.prototype.map=function(t){for(var e=new et,i=[],n=this.n,o=this.F,a=n.length,s=0;s<a;s++)i.push(t(n[s])),this.F!==o&&r.Na(this);return e.n=i,e.Lc(),e},et.prototype.filter=function(t){for(var e=new et(this.na),i=[],n=this.n,o=this.F,a=n.length,s=0;s<a;s++){var l=n[s];t(l)&&i.push(l),this.F!==o&&r.Na(this)}return e.n=i,e.Lc(),e},et.prototype.concat=function(t){return this.copy().Nc(t)},et.prototype.insertAt=et.prototype.Rd=function(t,e){0>t&&r.Fa(t,">= 0",et,"insertAt:i"),this.P&&r.ma(this,t);var i=this.n;return t>=i.length?i.push(e):i.splice(t,0,e),this.Lc(),!0},et.prototype.remove=et.prototype.delete=et.prototype.remove=function(t){if(null===t)return!1;this.P&&r.ma(this,t);var e=this.n;return-1!==(t=e.indexOf(t))&&(t===e.length-1?e.pop():e.splice(t,1),this.Lc(),!0)},et.prototype.removeAt=et.prototype.dd=function(t){var e=this.n;(0>t||t>=e.length)&&r.Fa(t,"0 <= i < length",et,"removeAt:i"),this.P&&r.ma(this,t),t===e.length-1?e.pop():e.splice(t,1),this.Lc()},et.prototype.removeRange=et.prototype.removeRange=function(t,e){var i=this.n,n=i.length;if(0>t)t=0;else if(t>=n)return this;if(0>e)return this;if(e>=n&&(e=n-1),t>e)return this;this.P&&r.ma(this);for(var o=t,a=e+1;a<n;)i[o++]=i[a++];return i.length=n-(e-t+1),this.Lc(),this},et.prototype.copy=function(){var t=new et(this.na),e=this.n;return 0<e.length&&(t.n=Array.prototype.slice.call(e)),t},et.prototype.toArray=et.prototype.xc=function(){for(var t=this.n,e=this.count,i=Array(e),n=0;n<e;n++)i[n]=t[n];return i},et.prototype.toSet=et.prototype.CG=function(){for(var t=new nt(this.na),e=this.n,i=this.count,n=0;n<i;n++)t.add(e[n]);return t},et.prototype.sort=et.prototype.sort=function(t){return this.P&&r.ma(this),this.n.sort(t),this.Lc(),this},et.prototype.sortRange=et.prototype.Cq=function(t,e,i){var n=this.n,o=n.length;void 0===e&&(e=0),void 0===i&&(i=o),this.P&&r.ma(this);var a=i-e;if(1>=a)return this;if((0>e||e>=o-1)&&r.Fa(e,"0 <= from < length",et,"sortRange:from"),2===a)return 0<t(i=n[e],o=n[e+1])&&(n[e]=o,n[e+1]=i,this.Lc()),this;if(0===e)if(i>=o)n.sort(t);else for((a=n.slice(0,i)).sort(t),t=0;t<i;t++)n[t]=a[t];else if(i>=o)for((a=n.slice(e)).sort(t),t=e;t<o;t++)n[t]=a[t-e];else for((a=n.slice(e,i)).sort(t),t=e;t<i;t++)n[t]=a[t-e];return this.Lc(),this},et.prototype.reverse=et.prototype.reverse=function(){return this.P&&r.ma(this),this.n.reverse(),this.Lc(),this},r.u(et,{count:"count"},function(){return this.n.length}),r.u(et,{size:"size"},function(){return this.n.length}),r.u(et,{length:"length"},function(){return this.n.length}),r.u(et,{i:"iterator"},function(){if(0>=this.n.length)return Y;var t=this.Qb;return null!==t?(t.reset(),t):new Z(this)}),r.u(et,{Gn:"iteratorBackwards"},function(){if(0>=this.n.length)return Y;var t=this.Pi;return null!==t?(t.reset(),t):new tt(this)}),r.be(it,{key:!0,value:!0}),r.u(it,{i:"iterator"},function(){return this}),it.prototype.reset=it.prototype.reset=function(){var t=this.ai;t.Qb=null,this.Ta=t.F,this.Va=null},it.prototype.next=it.prototype.next=function(){var t,e=this.ai;if(e.F!==this.Ta){if(null===this.key)return!1;r.Na(e)}return null!==(t=null===(t=this.Va)?e.Ea:t.Xa)?(this.Va=t,this.value=t.value,this.key=t.key,!0):(this.Nf(),!1)},it.prototype.hasNext=function(){return this.next()},it.prototype.first=it.prototype.first=function(){var t=this.ai;if(this.Ta=t.F,null!==(t=t.Ea)){this.Va=t;var e=t.value;return this.key=t.key,this.value=e}return null},it.prototype.any=function(t){var e=this.ai;e.Qb=null;var i=e.F;this.Va=null;for(var n=e.Ea;null!==n;){if(t(n.value))return!0;e.F!==i&&r.Na(e),n=n.Xa}return!1},it.prototype.all=function(t){var e=this.ai;e.Qb=null;var i=e.F;this.Va=null;for(var n=e.Ea;null!==n;){if(!t(n.value))return!1;e.F!==i&&r.Na(e),n=n.Xa}return!0},it.prototype.each=function(t){var e=this.ai;e.Qb=null;var i=e.F;this.Va=null;for(var n=e.Ea;null!==n;)t(n.value),e.F!==i&&r.Na(e),n=n.Xa;return this},it.prototype.map=function(t){var e=this.ai;e.Qb=null;for(var i=new et,n=e.F,o=e.Ea;null!==o;)i.add(t(o.value)),e.F!==n&&r.Na(e),o=o.Xa;return i.i},it.prototype.filter=function(t){var e=this.ai;e.Qb=null;for(var i=new et(e.na),n=e.F,o=e.Ea;null!==o;){var a=o.value;t(a)&&i.add(a),e.F!==n&&r.Na(e),o=o.Xa}return i.i},it.prototype.concat=function(t){return this.ai.Qb=null,new Q(this,t.i)},r.u(it,{count:"count"},function(){return this.ai.rd}),it.prototype.Nf=function(){this.value=this.key=null,this.Ta=-1,this.ai.Qb=this},it.prototype.toString=function(){return null!==this.Va?"SetIterator@"+this.Va.value:"SetIterator"},r.ga("Set",nt),nt.prototype.Lc=function(){var t=this.F;999999999<++t&&(t=0),this.F=t},nt.prototype.freeze=nt.prototype.freeze=function(){return this.P=!0,this},nt.prototype.thaw=nt.prototype.Qa=function(){return this.P=!1,this},nt.prototype.toString=function(){return"Set("+r.getTypeName(this.na)+")#"+r.Pd(this)},nt.prototype.add=nt.prototype.add=function(t){if(null===t)return!1;this.P&&r.ma(this,t);var e=t;return r.Pa(t)&&(e=r.Xp(t)),void 0===this.sd[e]&&(this.rd++,t=new st(t,t),this.sd[e]=t,null===(e=this.Th)?this.Ea=t:(t.fp=e,e.Xa=t),this.Th=t,this.Lc(),!0)},nt.prototype.addAll=nt.prototype.Nc=function(t){if(null===t)return this;if(this.P&&r.ma(this),r.isArray(t))for(var e=r.Za(t),i=0;i<e;i++)this.add(r.Ba(t,i));else for(t=t.i;t.next();)this.add(t.value);return this},nt.prototype.contains=nt.prototype.contains=function(t){if(null===t)return!1;var e=t;return(!r.Pa(t)||void 0!==(e=r.Pd(t)))&&void 0!==this.sd[e]},nt.prototype.has=nt.prototype.has=function(t){return this.contains(t)},nt.prototype.containsAll=function(t){if(null===t)return!0;for(t=t.i;t.next();)if(!this.contains(t.value))return!1;return!0},nt.prototype.containsAny=function(t){if(null===t)return!0;for(t=t.i;t.next();)if(this.contains(t.value))return!0;return!1},nt.prototype.first=nt.prototype.first=function(){var t=this.Ea;return null===t?null:t.value},nt.prototype.any=function(t){for(var e=this.F,i=this.Ea;null!==i;){if(t(i.value))return!0;this.F!==e&&r.Na(this),i=i.Xa}return!1},nt.prototype.all=function(t){for(var e=this.F,i=this.Ea;null!==i;){if(!t(i.value))return!1;this.F!==e&&r.Na(this),i=i.Xa}return!0},nt.prototype.each=function(t){for(var e=this.F,i=this.Ea;null!==i;)t(i.value),this.F!==e&&r.Na(this),i=i.Xa;return this},nt.prototype.map=function(t){for(var e=new nt,i=this.F,n=this.Ea;null!==n;)e.add(t(n.value)),this.F!==i&&r.Na(this),n=n.Xa;return e},nt.prototype.filter=function(t){for(var e=new nt(this.na),i=this.F,n=this.Ea;null!==n;){var o=n.value;t(o)&&e.add(o),this.F!==i&&r.Na(this),n=n.Xa}return e},nt.prototype.concat=function(t){return this.copy().Nc(t)},nt.prototype.remove=nt.prototype.delete=nt.prototype.remove=function(t){if(null===t)return!1;this.P&&r.ma(this,t);var e=t;if(r.Pa(t)&&void 0===(e=r.Pd(t)))return!1;if(void 0===(t=this.sd[e]))return!1;var i=t.Xa,n=t.fp;return null!==i&&(i.fp=n),null!==n&&(n.Xa=i),this.Ea===t&&(this.Ea=i),this.Th===t&&(this.Th=n),delete this.sd[e],this.rd--,this.Lc(),!0},nt.prototype.removeAll=nt.prototype.jy=function(t){if(null===t)return this;if(this.P&&r.ma(this),r.isArray(t))for(var e=r.Za(t),i=0;i<e;i++)this.remove(r.Ba(t,i));else for(t=t.i;t.next();)this.remove(t.value);return this},nt.prototype.retainAll=function(t){if(null===t||0===this.count)return this;this.P&&r.ma(this);var e=new nt(this.na);e.Nc(t),t=[];for(var i=this.i;i.next();){var n=i.value;e.contains(n)||t.push(n)}return this.jy(t),this},nt.prototype.clear=nt.prototype.clear=function(){this.P&&r.ma(this),this.sd={},this.rd=0,this.Th=this.Ea=null,this.Lc()},nt.prototype.copy=function(){var t,e=new nt(this.na),i=this.sd;for(t in i)e.add(i[t].value);return e},nt.prototype.toArray=nt.prototype.xc=function(){var t,e=Array(this.rd),i=this.sd,n=0;for(t in i)e[n]=i[t].value,n++;return e},nt.prototype.toList=function(){var t,e=new et(this.na),i=this.sd;for(t in i)e.add(i[t].value);return e},r.u(nt,{count:"count"},function(){return this.rd}),r.u(nt,{size:"size"},function(){return this.rd}),r.u(nt,{i:"iterator"},function(){if(0>=this.rd)return Y;var t=this.Qb;return null!==t?(t.reset(),t):new it(this)}),r.be(ot,{key:!0,value:!0}),r.u(ot,{i:"iterator"},function(){return this}),ot.prototype.reset=ot.prototype.reset=function(){this.Ta=this.Ga.F,this.Va=null},ot.prototype.next=ot.prototype.next=function(){var t,e=this.Ga;if(e.F!==this.Ta){if(null===this.key)return!1;r.Na(e)}return null!==(t=null===(t=this.Va)?e.Ea:t.Xa)?(this.Va=t,this.value=this.key=e=t.key,!0):(this.Nf(),!1)},ot.prototype.hasNext=function(){return this.next()},ot.prototype.first=ot.prototype.first=function(){var t=this.Ga;return this.Ta=t.F,null!==(t=t.Ea)?(this.Va=t,this.value=this.key=t=t.key):null},ot.prototype.any=function(t){var e=this.Ga,i=e.F;this.Va=null;for(var n=e.Ea;null!==n;){if(t(n.key))return!0;e.F!==i&&r.Na(e),n=n.Xa}return!1},ot.prototype.all=function(t){var e=this.Ga,i=e.F;this.Va=null;for(var n=e.Ea;null!==n;){if(!t(n.key))return!1;e.F!==i&&r.Na(e),n=n.Xa}return!0},ot.prototype.each=function(t){var e=this.Ga,i=e.F;this.Va=null;for(var n=e.Ea;null!==n;)t(n.key),e.F!==i&&r.Na(e),n=n.Xa;return this},ot.prototype.map=function(t){var e=this.Ga,i=e.F;this.Va=null;for(var n=new et,o=e.Ea;null!==o;)n.add(t(o.key)),e.F!==i&&r.Na(e),o=o.Xa;return n.i},ot.prototype.filter=function(t){var e=this.Ga,i=e.F;this.Va=null;for(var n=new et(e.Sh),o=e.Ea;null!==o;){var a=o.key;t(a)&&n.add(a),e.F!==i&&r.Na(e),o=o.Xa}return n.i},ot.prototype.concat=function(t){return new Q(this,t.i)},r.u(ot,{count:"count"},function(){return this.Ga.rd}),ot.prototype.Nf=function(){this.value=this.key=null,this.Ta=-1},ot.prototype.toString=function(){return null!==this.Va?"MapKeySetIterator@"+this.Va.value:"MapKeySetIterator"},r.La(rt,nt),rt.prototype.freeze=function(){return this},rt.prototype.Qa=function(){return this},rt.prototype.toString=function(){return"MapKeySet("+this.Ga.toString()+")"},rt.prototype.add=rt.prototype.add=function(){return r.k("This Set is read-only: "+this.toString()),!1},rt.prototype.set=rt.prototype.set=function(){return r.k("This Set is read-only: "+this.toString()),!1},rt.prototype.contains=rt.prototype.contains=function(t){return this.Ga.contains(t)},rt.prototype.has=rt.prototype.has=function(t){return this.contains(t)},rt.prototype.remove=rt.prototype.delete=rt.prototype.remove=function(){return r.k("This Set is read-only: "+this.toString()),!1},rt.prototype.clear=rt.prototype.clear=function(){r.k("This Set is read-only: "+this.toString())},rt.prototype.first=rt.prototype.first=function(){var t=this.Ga.Ea;return null!==t?t.key:null},rt.prototype.any=function(t){for(var e=this.Ga.Ea;null!==e;){if(t(e.key))return!0;e=e.Xa}return!1},rt.prototype.all=function(t){for(var e=this.Ga.Ea;null!==e;){if(!t(e.key))return!1;e=e.Xa}return!0},rt.prototype.each=function(t){for(var e=this.Ga.Ea;null!==e;)t(e.key),e=e.Xa;return this},rt.prototype.map=function(t){for(var e=new nt,i=this.Ga.Ea;null!==i;)e.add(t(i.key)),i=i.Xa;return e},rt.prototype.filter=function(t){for(var e=new nt(this.Ga.Sh),i=this.Ga.Ea;null!==i;){var n=i.key;t(n)&&e.add(n),i=i.Xa}return e},rt.prototype.concat=function(t){return this.CG().Nc(t)},rt.prototype.copy=function(){return new rt(this.Ga)},rt.prototype.toSet=rt.prototype.CG=function(){var t,e=new nt(this.Ga.Sh),i=this.Ga.sd;for(t in i)e.add(i[t].key);return e},rt.prototype.toArray=rt.prototype.xc=function(){var t,e=this.Ga.sd,i=Array(this.Ga.rd),n=0;for(t in e)i[n]=e[t].key,n++;return i},rt.prototype.toList=function(){var t,e=new et(this.Ga.Sh),i=this.Ga.sd;for(t in i)e.add(i[t].key);return e},r.u(rt,{count:"count"},function(){return this.Ga.rd}),r.u(rt,{size:"size"},function(){return this.Ga.rd}),r.u(rt,{i:"iterator"},function(){return 0>=this.Ga.rd?Y:new ot(this.Ga)}),r.be(at,{key:!0,value:!0}),r.u(at,{i:"iterator"},function(){return this}),at.prototype.reset=at.prototype.reset=function(){var t=this.Ga;t.Qi=null,this.Ta=t.F,this.Va=null},at.prototype.next=at.prototype.next=function(){var t,e=this.Ga;if(e.F!==this.Ta){if(null===this.key)return!1;r.Na(e)}return null!==(t=null===(t=this.Va)?e.Ea:t.Xa)?(this.Va=t,this.value=t.value,this.key=t.key,!0):(this.Nf(),!1)},at.prototype.hasNext=function(){return this.next()},at.prototype.first=at.prototype.first=function(){var t=this.Ga;if(this.Ta=t.F,null!==(t=t.Ea)){this.Va=t;var e=t.value;return this.key=t.key,this.value=e}return null},at.prototype.any=function(t){var e=this.Ga;e.Qi=null;var i=e.F;this.Va=null;for(var n=e.Ea;null!==n;){if(t(n.value))return!0;e.F!==i&&r.Na(e),n=n.Xa}return!1},at.prototype.all=function(t){var e=this.Ga;e.Qi=null;var i=e.F;this.Va=null;for(var n=e.Ea;null!==n;){if(!t(n.value))return!1;e.F!==i&&r.Na(e),n=n.Xa}return!0},at.prototype.each=function(t){var e=this.Ga;e.Qi=null;var i=e.F;this.Va=null;for(var n=e.Ea;null!==n;)t(n.value),e.F!==i&&r.Na(e),n=n.Xa;return this},at.prototype.map=function(t){var e=this.Ga;e.Qi=null;var i=e.F;this.Va=null;for(var n=new et,o=e.Ea;null!==o;)n.add(t(o.value)),e.F!==i&&r.Na(e),o=o.Xa;return n.i},at.prototype.filter=function(t){var e=this.Ga;e.Qi=null;var i=e.F;this.Va=null;for(var n=new et(e.Sh),o=e.Ea;null!==o;){var a=o.value;t(a)&&n.add(a),e.F!==i&&r.Na(e),o=o.Xa}return n.i},at.prototype.concat=function(t){return this.Ga.Qi=null,new Q(this,t.i)},r.u(at,{count:"count"},function(){return this.Ga.rd}),at.prototype.Nf=function(){this.value=this.key=null,this.Ta=-1,this.Ga.Qi=this},at.prototype.toString=function(){return null!==this.Va?"MapValueSetIterator@"+this.Va.value:"MapValueSetIterator"},r.be(st,{key:!0,value:!0}),st.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},r.be(lt,{key:!0,value:!0}),r.u(lt,{i:"iterator"},function(){return this}),lt.prototype.reset=lt.prototype.reset=function(){var t=this.Ga;t.Qb=null,this.Ta=t.F,this.Va=null},lt.prototype.next=lt.prototype.next=function(){var t,e=this.Ga;if(e.F!==this.Ta){if(null===this.key)return!1;r.Na(e)}return null!==(t=null===(t=this.Va)?e.Ea:t.Xa)?(this.Va=t,this.key=t.key,this.value=t.value,!0):(this.Nf(),!1)},lt.prototype.hasNext=function(){return this.next()},lt.prototype.first=lt.prototype.first=function(){var t=this.Ga;return this.Ta=t.F,null!==(t=t.Ea)?(this.Va=t,this.key=t.key,this.value=t.value,t):null},lt.prototype.any=function(t){var e=this.Ga;e.Qb=null;var i=e.F;this.Va=null;for(var n=e.Ea;null!==n;){if(t(n))return!0;e.F!==i&&r.Na(e),n=n.Xa}return!1},lt.prototype.all=function(t){var e=this.Ga;e.Qb=null;var i=e.F;this.Va=null;for(var n=e.Ea;null!==n;){if(!t(n))return!1;e.F!==i&&r.Na(e),n=n.Xa}return!0},lt.prototype.each=function(t){var e=this.Ga;e.Qb=null;var i=e.F;this.Va=null;for(var n=e.Ea;null!==n;)t(n),e.F!==i&&r.Na(e),n=n.Xa;return this},lt.prototype.map=function(t){var e=this.Ga;e.Qb=null;var i=e.F;this.Va=null;for(var n=new et,o=e.Ea;null!==o;)n.add(t(o)),e.F!==i&&r.Na(e),o=o.Xa;return n.i},lt.prototype.filter=function(t){var e=this.Ga;e.Qb=null;var i=e.F;this.Va=null;for(var n=new et,o=e.Ea;null!==o;)t(o)&&n.add(o),e.F!==i&&r.Na(e),o=o.Xa;return n.i},lt.prototype.concat=function(t){return this.Ga.Qb=null,new Q(this,t.i)},r.u(lt,{count:"count"},function(){return this.Ga.rd}),lt.prototype.Nf=function(){this.value=this.key=null,this.Ta=-1,this.Ga.Qb=this},lt.prototype.toString=function(){return null!==this.Va?"MapIterator@"+this.Va:"MapIterator"},r.ga("Map",ht),ht.prototype.Lc=function(){var t=this.F;999999999<++t&&(t=0),this.F=t},ht.prototype.freeze=ht.prototype.freeze=function(){return this.P=!0,this},ht.prototype.thaw=ht.prototype.Qa=function(){return this.P=!1,this},ht.prototype.toString=function(){return"Map("+r.getTypeName(this.Sh)+","+r.getTypeName(this.Bt)+")#"+r.Pd(this)},ht.prototype.add=ht.prototype.add=function(t,e){this.P&&r.ma(this,t);var i=t;r.Pa(t)&&(i=r.Xp(t));var n=this.sd[i];return void 0===n?(this.rd++,n=new st(t,e),this.sd[i]=n,null===(i=this.Th)?this.Ea=n:(n.fp=i,i.Xa=n),this.Th=n,this.Lc(),!0):(n.value=e,!1)},ht.prototype.set=ht.prototype.set=function(t,e){return this.add(t,e)},ht.prototype.addAll=ht.prototype.Nc=function(t){if(null===t)return this;if(r.isArray(t))for(var e=r.Za(t),i=0;i<e;i++){var n=r.Ba(t,i);this.add(n.key,n.value)}else for(t=t.i;t.next();)this.add(t.key,t.value);return this},ht.prototype.first=ht.prototype.first=function(){return this.Ea},ht.prototype.any=function(t){for(var e=this.F,i=this.Ea;null!==i;){if(t(i))return!0;this.F!==e&&r.Na(this),i=i.Xa}return!1},ht.prototype.all=function(t){for(var e=this.F,i=this.Ea;null!==i;){if(!t(i))return!1;this.F!==e&&r.Na(this),i=i.Xa}return!0},ht.prototype.each=function(t){for(var e=this.F,i=this.Ea;null!==i;)t(i),this.F!==e&&r.Na(this),i=i.Xa;return this},ht.prototype.map=function(t){for(var e=new ht(this.Sh),i=this.F,n=this.Ea;null!==n;)e.add(n.key,t(n)),this.F!==i&&r.Na(this),n=n.Xa;return e},ht.prototype.filter=function(t){for(var e=new ht(this.Sh,this.Bt),i=this.F,n=this.Ea;null!==n;)t(n)&&e.add(n.key,n.value),this.F!==i&&r.Na(this),n=n.Xa;return e},ht.prototype.concat=function(t){return this.copy().Nc(t)},ht.prototype.contains=ht.prototype.contains=function(t){var e=t;return(!r.Pa(t)||void 0!==(e=r.Pd(t)))&&void 0!==this.sd[e]},ht.prototype.has=ht.prototype.has=function(t){return this.contains(t)},ht.prototype.getValue=ht.prototype.ka=function(t){var e=t;return r.Pa(t)&&void 0===(e=r.Pd(t))?null:void 0===(t=this.sd[e])?null:t.value},ht.prototype.get=ht.prototype.get=function(t){return this.ka(t)},ht.prototype.remove=ht.prototype.delete=ht.prototype.remove=function(t){if(null===t)return!1;this.P&&r.ma(this,t);var e=t;if(r.Pa(t)&&void 0===(e=r.Pd(t)))return!1;if(void 0===(t=this.sd[e]))return!1;var i=t.Xa,n=t.fp;return null!==i&&(i.fp=n),null!==n&&(n.Xa=i),this.Ea===t&&(this.Ea=i),this.Th===t&&(this.Th=n),delete this.sd[e],this.rd--,this.Lc(),!0},ht.prototype.clear=ht.prototype.clear=function(){this.P&&r.ma(this),this.sd={},this.rd=0,this.Th=this.Ea=null,this.Lc()},ht.prototype.copy=function(){var t,e=new ht(this.Sh,this.Bt),i=this.sd;for(t in i){var n=i[t];e.add(n.key,n.value)}return e},ht.prototype.toArray=ht.prototype.xc=function(){var t,e=this.sd,i=Array(this.rd),n=0;for(t in e){var o=e[t];i[n]=new st(o.key,o.value),n++}return i},ht.prototype.toKeySet=ht.prototype.Jj=function(){return new rt(this)},r.u(ht,{count:"count"},function(){return this.rd}),r.u(ht,{size:"size"},function(){return this.rd}),r.u(ht,{i:"iterator"},function(){if(0>=this.count)return Y;var t=this.Qb;return null!==t?(t.reset(),t):new lt(this)}),r.u(ht,{IF:"iteratorKeys"},function(){return 0>=this.count?Y:new ot(this)}),r.u(ht,{JF:"iteratorValues"},function(){if(0>=this.count)return Y;var t=this.Qi;return null!==t?(t.reset(),t):new at(this)}),r.ga("Point",ut),r.mi(ut),r.be(ut,{x:!0,y:!0}),ut.prototype.assign=function(t){this.x=t.x,this.y=t.y},ut.prototype.setTo=ut.prototype.m=function(t,e){return this.x=t,this.y=e,this},ut.prototype.set=ut.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},ut.prototype.copy=function(){var t=new ut;return t.x=this.x,t.y=this.y,t},ut.prototype.Ha=function(){return Object.freeze(this),this},ut.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},ut.prototype.freeze=function(){return this},ut.prototype.Qa=function(){return Object.isFrozen(this)&&r.k("cannot thaw constant: "+this),this},ut.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var o=0;""===t[e];)e++;return(n=t[e++])&&(o=parseFloat(n)),new ut(i,o)}return new ut},ut.stringify=function(t){return t.x.toString()+" "+t.y.toString()},ut.prototype.toString=function(){return"Point("+this.x+","+this.y+")"},ut.prototype.equals=ut.prototype.L=function(t){return t instanceof ut&&(this.x===t.x&&this.y===t.y)},ut.prototype.equalTo=ut.prototype.wx=function(t,e){return this.x===t&&this.y===e},ut.prototype.equalsApprox=ut.prototype.Oc=function(t){return we(this.x,t.x)&&we(this.y,t.y)},ut.prototype.add=ut.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},ut.prototype.subtract=ut.prototype.Hj=function(t){return this.x-=t.x,this.y-=t.y,this},ut.prototype.offset=ut.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},ut.prototype.rotate=ut.prototype.rotate=function(t){if(0===t)return this;var e=this.x,i=this.y;if(0===e&&0===i)return this;var n=0,o=0;return 360<=t?t-=360:0>t&&(t+=360),90===t?(n=0,o=1):180===t?(n=-1,o=0):270===t?(n=0,o=-1):(t=t*Math.PI/180,n=Math.cos(t),o=Math.sin(t)),this.x=n*e-o*i,this.y=o*e+n*i,this},ut.prototype.scale=ut.prototype.scale=function(t,e){return this.x*=t,this.y*=e,this},ut.prototype.distanceSquaredPoint=ut.prototype.Bf=function(t){var e=t.x-this.x;return e*e+(t=t.y-this.y)*t},ut.prototype.distanceSquared=ut.prototype.Rp=function(t,e){var i=t-this.x,n=e-this.y;return i*i+n*n},ut.prototype.normalize=ut.prototype.normalize=function(){var t=this.x,e=this.y,i=Math.sqrt(t*t+e*e);return 0<i&&(this.x=t/i,this.y=e/i),this},ut.prototype.directionPoint=ut.prototype.Pb=function(t){return ct(t.x-this.x,t.y-this.y)},ut.prototype.direction=ut.prototype.direction=function(t,e){return ct(t-this.x,e-this.y)},ut.prototype.projectOntoLineSegment=function(t,e,i,n){return je(t,e,i,n,this.x,this.y,this),this},ut.prototype.projectOntoLineSegmentPoint=function(t,e){return je(t.x,t.y,e.x,e.y,this.x,this.y,this),this},ut.prototype.snapToGrid=function(t,e,i,n){return Ve(this.x,this.y,t,e,i,n,this),this},ut.prototype.snapToGridPoint=function(t,e){return Ve(this.x,this.y,t.x,t.y,e.width,e.height,this),this},ut.prototype.setRectSpot=ut.prototype.Wn=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},ut.prototype.setSpot=ut.prototype.Xu=function(t,e,i,n,o){return this.x=t+o.x*i+o.offsetX,this.y=e+o.y*n+o.offsetY,this},ut.prototype.transform=function(t){return t.nb(this),this},ut.distanceLineSegmentSquared=c=function(t,e,i,n,o,r){var a=o-i,s=r-n,l=a*a+s*s,h=-(i-=t)*a-(n-=e)*s;return 0>=h||h>=l?(a=o-t,s=r-e,Math.min(i*i+n*n,a*a+s*s)):(t=a*n-s*i)*t/l},ut.distanceSquared=f=function(t,e,i,n){return(t=i-t)*t+(e=n-e)*e},ut.direction=d=function(t,e,i,n){return e=n-e,0===(t=i-t)?0<e?90:0>e?270:0:0===e?0<t?0:180:isNaN(t)||isNaN(e)?0:(n=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n)},ut.prototype.isReal=ut.prototype.I=function(){return isFinite(this.x)&&isFinite(this.y)},r.ga("Size",dt),r.mi(dt),r.be(dt,{width:!0,height:!0}),dt.prototype.assign=function(t){this.width=t.width,this.height=t.height},dt.prototype.setTo=dt.prototype.m=function(t,e){return this.width=t,this.height=e,this},dt.prototype.set=dt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},dt.prototype.copy=function(){var t=new dt;return t.width=this.width,t.height=this.height,t},dt.prototype.Ha=function(){return Object.freeze(this),this},dt.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},dt.prototype.freeze=function(){return this},dt.prototype.Qa=function(){return Object.isFrozen(this)&&r.k("cannot thaw constant: "+this),this},dt.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var o=0;""===t[e];)e++;return(n=t[e++])&&(o=parseFloat(n)),new dt(i,o)}return new dt},dt.stringify=function(t){return t.width.toString()+" "+t.height.toString()},dt.prototype.toString=function(){return"Size("+this.width+","+this.height+")"},dt.prototype.equals=dt.prototype.L=function(t){return t instanceof dt&&(this.width===t.width&&this.height===t.height)},dt.prototype.equalTo=dt.prototype.wx=function(t,e){return this.width===t&&this.height===e},dt.prototype.equalsApprox=dt.prototype.Oc=function(t){return we(this.width,t.width)&&we(this.height,t.height)},dt.prototype.isReal=dt.prototype.I=function(){return isFinite(this.width)&&isFinite(this.height)},r.ga("Rect",pt),r.mi(pt),r.be(pt,{x:!0,y:!0,width:!0,height:!0}),pt.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},pt.prototype.setTo=pt.prototype.m=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},pt.prototype.set=pt.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},pt.prototype.setPoint=pt.prototype.Vg=function(t){return this.x=t.x,this.y=t.y,this},pt.prototype.setSize=function(t){return this.width=t.width,this.height=t.height,this},pt.prototype.copy=function(){var t=new pt;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},pt.prototype.Ha=function(){return Object.freeze(this),this},pt.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},pt.prototype.freeze=function(){return this},pt.prototype.Qa=function(){return Object.isFrozen(this)&&r.k("cannot thaw constant: "+this),this},pt.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];n&&(i=parseFloat(n));for(var o=0;""===t[e];)e++;(n=t[e++])&&(o=parseFloat(n));for(var r=0;""===t[e];)e++;(n=t[e++])&&(r=parseFloat(n));for(var a=0;""===t[e];)e++;return(n=t[e++])&&(a=parseFloat(n)),new pt(i,o,r,a)}return new pt},pt.stringify=function(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()},pt.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},pt.prototype.equals=pt.prototype.L=function(t){return t instanceof pt&&(this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height)},pt.prototype.equalTo=pt.prototype.wx=function(t,e,i,n){return this.x===t&&this.y===e&&this.width===i&&this.height===n},pt.prototype.equalsApprox=pt.prototype.Oc=function(t){return we(this.x,t.x)&&we(this.y,t.y)&&we(this.width,t.width)&&we(this.height,t.height)},pt.prototype.containsPoint=pt.prototype.Ia=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},pt.prototype.containsRect=pt.prototype.Ak=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},pt.prototype.contains=pt.prototype.contains=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),this.x<=t&&t+i<=this.x+this.width&&this.y<=e&&e+n<=this.y+this.height},pt.prototype.reset=function(){this.height=this.width=this.y=this.x=0},pt.prototype.offset=pt.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},pt.prototype.inflate=pt.prototype.Yf=function(t,e){return mt(this,e,t,e,t)},pt.prototype.addMargin=pt.prototype.Zw=function(t){return mt(this,t.top,t.right,t.bottom,t.left)},pt.prototype.subtractMargin=pt.prototype.PJ=function(t){return mt(this,-t.top,-t.right,-t.bottom,-t.left)},pt.prototype.grow=function(t,e,i,n){return mt(this,t,e,i,n)},pt.prototype.intersectRect=function(t){return gt(this,t.x,t.y,t.width,t.height)},pt.prototype.intersect=pt.prototype.uF=function(t,e,i,n){return gt(this,t,e,i,n)},pt.prototype.intersectsRect=pt.prototype.Zf=function(t){return this.vF(t.x,t.y,t.width,t.height)},pt.prototype.intersects=pt.prototype.vF=function(t,e,i,n){var o=this.width,r=this.x;return!(1/0!==o&&1/0!==i&&(o+=r,i+=t,isNaN(i)||isNaN(o)||r>i||t>o))&&(t=this.height,i=this.y,!(1/0!==t&&1/0!==n&&(t+=i,n+=e,isNaN(n)||isNaN(t)||i>n||e>t)))},pt.prototype.unionPoint=pt.prototype.vi=function(t){return xt(this,t.x,t.y,0,0)},pt.prototype.unionRect=pt.prototype.Ih=function(t){return xt(this,t.x,t.y,t.width,t.height)},pt.prototype.union=pt.prototype.HG=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),xt(this,t,e,i,n)},pt.prototype.setSpot=pt.prototype.Xu=function(t,e,i){return this.x=t-i.offsetX-i.x*this.width,this.y=e-i.offsetY-i.y*this.height,this},pt.contains=p=function(t,e,i,n,o,r,a,s){return void 0===a&&(a=0),void 0===s&&(s=0),t<=o&&o+a<=t+i&&e<=r&&r+s<=e+n},pt.intersects=function(t,e,i,n,o,r,a,s){return!(t>(a+=o)||o>(i+=t))&&(t=n+e,!(e>(s+=r)||r>t))},r.defineProperty(pt,{left:"left"},function(){return this.x},function(t){this.x=t}),r.defineProperty(pt,{top:"top"},function(){return this.y},function(t){this.y=t}),r.defineProperty(pt,{right:"right"},function(){return this.x+this.width},function(t){this.x+=t-(this.x+this.width)}),r.defineProperty(pt,{bottom:"bottom"},function(){return this.y+this.height},function(t){this.y+=t-(this.y+this.height)}),r.defineProperty(pt,{position:"position"},function(){return new ut(this.x,this.y)},function(t){this.x=t.x,this.y=t.y}),r.defineProperty(pt,{size:"size"},function(){return new dt(this.width,this.height)},function(t){this.width=t.width,this.height=t.height}),r.defineProperty(pt,{Nl:"center"},function(){return new ut(this.x+this.width/2,this.y+this.height/2)},function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}),r.defineProperty(pt,{la:"centerX"},function(){return this.x+this.width/2},function(t){this.x=t-this.width/2}),r.defineProperty(pt,{ra:"centerY"},function(){return this.y+this.height/2},function(t){this.y=t-this.height/2}),pt.prototype.isReal=pt.prototype.I=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},pt.prototype.isEmpty=function(){return 0===this.width&&0===this.height},r.ga("Margin",wt),r.mi(wt),r.be(wt,{top:!0,right:!0,bottom:!0,left:!0}),wt.prototype.assign=function(t){this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left},wt.prototype.setTo=wt.prototype.m=function(t,e,i,n){return this.top=t,this.right=e,this.bottom=i,this.left=n,this},wt.prototype.set=wt.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},wt.prototype.copy=function(){var t=new wt;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},wt.prototype.Ha=function(){return Object.freeze(this),this},wt.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},wt.prototype.freeze=function(){return this},wt.prototype.Qa=function(){return Object.isFrozen(this)&&r.k("cannot thaw constant: "+this),this},wt.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var e=0,i=NaN;""===t[e];)e++;var n=t[e++];if(n&&(i=parseFloat(n)),isNaN(i))return new wt;for(var o=NaN;""===t[e];)e++;if((n=t[e++])&&(o=parseFloat(n)),isNaN(o))return new wt(i);for(var r=NaN;""===t[e];)e++;if((n=t[e++])&&(r=parseFloat(n)),isNaN(r))return new wt(i,o);for(var a=NaN;""===t[e];)e++;return(n=t[e++])&&(a=parseFloat(n)),isNaN(a)?new wt(i,o):new wt(i,o,r,a)}return new wt},wt.stringify=function(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()},wt.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},wt.prototype.equals=wt.prototype.L=function(t){return t instanceof wt&&(this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left)},wt.prototype.equalTo=wt.prototype.wx=function(t,e,i,n){return this.top===t&&this.right===e&&this.bottom===i&&this.left===n},wt.prototype.equalsApprox=wt.prototype.Oc=function(t){return we(this.top,t.top)&&we(this.right,t.right)&&we(this.bottom,t.bottom)&&we(this.left,t.left)},wt.prototype.isReal=wt.prototype.I=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},r.mi(kt),r.be(kt,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0}),kt.prototype.set=kt.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},kt.prototype.copy=function(){var t=new kt;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},kt.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},kt.prototype.equals=kt.prototype.L=function(t){return t instanceof kt&&(this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy)},kt.prototype.isIdentity=kt.prototype.su=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy},kt.prototype.reset=kt.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},kt.prototype.multiply=kt.prototype.multiply=function(t){var e=this.m12*t.m11+this.m22*t.m12,i=this.m11*t.m21+this.m21*t.m22,n=this.m12*t.m21+this.m22*t.m22,o=this.m11*t.dx+this.m21*t.dy+this.dx,r=this.m12*t.dx+this.m22*t.dy+this.dy;return this.m11=this.m11*t.m11+this.m21*t.m12,this.m12=e,this.m21=i,this.m22=n,this.dx=o,this.dy=r,this},kt.prototype.multiplyInverted=kt.prototype.RF=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),i=t.m22*e,n=-t.m12*e,o=-t.m21*e,r=t.m11*e,a=e*(t.m21*t.dy-t.m22*t.dx),s=e*(t.m12*t.dx-t.m11*t.dy);return t=this.m12*i+this.m22*n,e=this.m11*o+this.m21*r,o=this.m12*o+this.m22*r,r=this.m11*a+this.m21*s+this.dx,a=this.m12*a+this.m22*s+this.dy,this.m11=this.m11*i+this.m21*n,this.m12=t,this.m21=e,this.m22=o,this.dx=r,this.dy=a,this},kt.prototype.invert=kt.prototype.NA=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,i=-this.m21*t,n=this.m11*t,o=t*(this.m21*this.dy-this.m22*this.dx),r=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=i,this.m22=n,this.dx=o,this.dy=r,this},kt.prototype.rotate=kt.prototype.rotate=function(t,e,i){if(360<=t?t-=360:0>t&&(t+=360),0===t)return this;this.translate(e,i);var n=0,o=0;90===t?(n=0,o=1):180===t?(n=-1,o=0):270===t?(n=0,o=-1):(o=t*Math.PI/180,n=Math.cos(o),o=Math.sin(o)),t=this.m12*n+this.m22*o;var r=this.m11*-o+this.m21*n,a=this.m12*-o+this.m22*n;return this.m11=this.m11*n+this.m21*o,this.m12=t,this.m21=r,this.m22=a,this.translate(-e,-i),this},kt.prototype.translate=kt.prototype.translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},kt.prototype.scale=kt.prototype.scale=function(t,e){return void 0===e&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},kt.prototype.transformPoint=kt.prototype.nb=function(t){var e=t.x,i=t.y;return t.x=e*this.m11+i*this.m21+this.dx,t.y=e*this.m12+i*this.m22+this.dy,t},kt.prototype.invertedTransformPoint=kt.prototype.wh=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=-this.m12*e,n=this.m11*e,o=e*(this.m12*this.dx-this.m11*this.dy),r=t.x,a=t.y;return t.x=r*this.m22*e+a*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),t.y=r*i+a*n+o,t},kt.prototype.transformRect=kt.prototype.GG=function(t){var e=t.x,i=t.y,n=e+t.width,o=i+t.height,r=this.m11,a=this.m12,s=this.m21,l=this.m22,h=this.dx,u=this.dy,c=e*r+i*s+h,f=e*a+i*l+u,d=n*r+i*s+h,p=(i=n*a+i*l+u,e*r+o*s+h);e=e*a+o*l+u,r=n*r+o*s+h,n=n*a+o*l+u,o=c,a=f,c=Math.min(c,d),o=Math.max(o,d),a=Math.min(a,i),f=Math.max(f,i),c=Math.min(c,p),o=Math.max(o,p),a=Math.min(a,e),f=Math.max(f,e),c=Math.min(c,r),o=Math.max(o,r),a=Math.min(a,n),f=Math.max(f,n);return t.x=c,t.y=a,t.width=o-c,t.height=f-a,t},r.ga("Spot",Mt),r.mi(Mt),r.be(Mt,{x:!0,y:!0,offsetX:!0,offsetY:!0}),Mt.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY},Mt.prototype.setTo=Mt.prototype.m=function(t,e,i,n){return this.x=t,this.y=e,this.offsetX=i,this.offsetY=n,this},Mt.prototype.set=Mt.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},Mt.prototype.copy=function(){var t=new Mt;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},Mt.prototype.Ha=function(){return Object.freeze(this),this},Mt.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},Mt.prototype.freeze=function(){return this},Mt.prototype.Qa=function(){return Object.isFrozen(this)&&r.k("cannot thaw constant: "+this),this},Mt.parse=y=function(t){if("string"==typeof t){if("None"===(t=t.trim()))return v;if("TopLeft"===t)return g;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return b;if("TopRight"===t)return x;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return w;if("Center"===t)return k;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return M;if("BottomLeft"===t)return S;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return T;if("BottomRight"===t)return P;if("TopSide"===t)return B;if("LeftSide"===t)return I;if("RightSide"===t)return O;if("BottomSide"===t)return E;if("TopBottomSides"===t)return q;if("LeftRightSides"===t)return R;if("TopLeftSides"===t)return G;if("TopRightSides"===t)return V;if("BottomLeftSides"===t)return _;if("BottomRightSides"===t)return H;if("NotTopSide"===t)return K;if("NotLeftSide"===t)return W;if("NotRightSide"===t)return U;if("NotBottomSide"===t)return J;if("AllSides"===t)return $;if("Default"===t)return m;t=t.split(" ");for(var e=0,i=0;""===t[e];)e++;var n=t[e++];void 0!==n&&0<n.length&&(i=parseFloat(n));for(var o=0;""===t[e];)e++;void 0!==(n=t[e++])&&0<n.length&&(o=parseFloat(n));for(var r=0;""===t[e];)e++;void 0!==(n=t[e++])&&0<n.length&&(r=parseFloat(n));for(var a=0;""===t[e];)e++;return void 0!==(n=t[e++])&&0<n.length&&(a=parseFloat(n)),new Mt(i,o,r,a)}return new Mt},Mt.stringify=function(t){return t.$c()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()},Mt.prototype.toString=function(){return this.$c()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.L(v)?"None":this.L(g)?"TopLeft":this.L(b)?"Top":this.L(x)?"TopRight":this.L(w)?"Left":this.L(k)?"Center":this.L(M)?"Right":this.L(S)?"BottomLeft":this.L(T)?"Bottom":this.L(P)?"BottomRight":this.L(B)?"TopSide":this.L(I)?"LeftSide":this.L(O)?"RightSide":this.L(E)?"BottomSide":this.L(q)?"TopBottomSides":this.L(R)?"LeftRightSides":this.L(G)?"TopLeftSides":this.L(V)?"TopRightSides":this.L(_)?"BottomLeftSides":this.L(H)?"BottomRightSides":this.L(K)?"NotTopSide":this.L(W)?"NotLeftSide":this.L(U)?"NotRightSide":this.L(J)?"NotBottomSide":this.L($)?"AllSides":this.L(m)?"Default":"None"},Mt.prototype.equals=Mt.prototype.L=function(t){return t instanceof Mt&&((this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY)},Mt.prototype.opposite=Mt.prototype.VF=function(){return new Mt(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},Mt.prototype.includesSide=Mt.prototype.vj=function(t){if(!this.xj())return!1;if(!t.xj())if(t.L(L))t=I;else if(t.L(j))t=O;else if(t.L(D))t=B;else{if(!t.L(z))return!1;t=E}return t=t.offsetY,(this.offsetY&t)===t},Mt.prototype.isSpot=Mt.prototype.$c=function(){return!isNaN(this.x)&&!isNaN(this.y)},Mt.prototype.isNoSpot=Mt.prototype.Td=function(){return isNaN(this.x)||isNaN(this.y)},Mt.prototype.isSide=Mt.prototype.xj=function(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY},Mt.prototype.isNone=Mt.prototype.CI=function(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY},Mt.prototype.isDefault=Mt.prototype.Zc=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY},Mt.None=v=St(new Mt(0,0,0,0),0).Ha(),Mt.Default=m=St(new Mt(0,0,-1,0),-1).Ha(),Mt.TopLeft=g=new Mt(0,0,0,0).Ha(),Mt.TopCenter=b=new Mt(.5,0,0,0).Ha(),Mt.TopRight=x=new Mt(1,0,0,0).Ha(),Mt.LeftCenter=w=new Mt(0,.5,0,0).Ha(),Mt.Center=k=new Mt(.5,.5,0,0).Ha(),Mt.RightCenter=M=new Mt(1,.5,0,0).Ha(),Mt.BottomLeft=S=new Mt(0,1,0,0).Ha(),Mt.BottomCenter=T=new Mt(.5,1,0,0).Ha(),Mt.BottomRight=P=new Mt(1,1,0,0).Ha(),Mt.MiddleTop=N=b,Mt.MiddleLeft=C=w,Mt.MiddleRight=A=M,Mt.MiddleBottom=F=T,Mt.Top=D=b,Mt.Left=L=w,Mt.Right=j=M,Mt.Bottom=z=T,Mt.TopSide=B=St(new Mt(0,0,1,r.od),1).Ha(),Mt.LeftSide=I=St(new Mt(0,0,1,r.Tc),1).Ha(),Mt.RightSide=O=St(new Mt(0,0,1,r.fd),1).Ha(),Mt.BottomSide=E=St(new Mt(0,0,1,r.ed),1).Ha(),Mt.TopBottomSides=q=St(new Mt(0,0,1,r.od|r.ed),1).Ha(),Mt.LeftRightSides=R=St(new Mt(0,0,1,r.Tc|r.fd),1).Ha(),Mt.TopLeftSides=G=St(new Mt(0,0,1,r.od|r.Tc),1).Ha(),Mt.TopRightSides=V=St(new Mt(0,0,1,r.od|r.fd),1).Ha(),Mt.BottomLeftSides=_=St(new Mt(0,0,1,r.ed|r.Tc),1).Ha(),Mt.BottomRightSides=H=St(new Mt(0,0,1,r.ed|r.fd),1).Ha(),Mt.NotTopSide=K=St(new Mt(0,0,1,r.Tc|r.fd|r.ed),1).Ha(),Mt.NotLeftSide=W=St(new Mt(0,0,1,r.od|r.fd|r.ed),1).Ha(),Mt.NotRightSide=U=St(new Mt(0,0,1,r.od|r.Tc|r.ed),1).Ha(),Mt.NotBottomSide=J=St(new Mt(0,0,1,r.od|r.Tc|r.fd),1).Ha(),Mt.AllSides=$=St(new Mt(0,0,1,r.od|r.Tc|r.fd|r.ed),1).Ha(),Tt.prototype.copy=function(){var t=new Tt;return t.Tb[0]=this.Tb[0],t.Tb[1]=this.Tb[1],t.Tb[2]=this.Tb[2],t.Tb[3]=this.Tb[3],t.Tb[4]=this.Tb[4],t.Tb[5]=this.Tb[5],t},Tt.prototype.translate=function(t,e){this.Tb[4]+=this.Tb[0]*t+this.Tb[2]*e,this.Tb[5]+=this.Tb[1]*t+this.Tb[3]*e},Tt.prototype.scale=function(t,e){this.Tb[0]*=t,this.Tb[1]*=t,this.Tb[2]*=e,this.Tb[3]*=e},Pt.prototype.addColorStop=function(t,e){this.HE.push({offset:t,color:e})},(i=Nt.prototype).arc=function(t,e,i,n,o,r){!function t(e,i,n,o,r,a,s){var l=Math.abs(r-a);if(r!==a){var h=i+o*Math.cos(a);a=n+o*Math.sin(a),l>=2*Math.PI?(t(e,i,n,o,r,r+Math.PI,s),t(e,i,n,o,r+Math.PI,r+2*Math.PI,s),e.path.push(["M",h,a])):(i+=o*Math.cos(r),n+=o*Math.sin(r),l=180*l/Math.PI,r=s?0:1,s=180<=l==!!s?0:1,0!==e.path.length?e.path.push(["L",i,n]):e.path.push(["M",i,n]),e.path.push(["A",o,o,l,s,r,h,a]))}}(this,t,e,i,n,o,r)},i.beginPath=function(){this.path=[]},i.bezierCurveTo=function(t,e,i,n,o,r){this.path.push(["C",t,e,i,n,o,r])},i.clearRect=function(){},i.clip=function(){Lt(this,"clipPath",this.path,new Tt)},i.closePath=function(){this.path.push(["z"])},i.createLinearGradient=function(t,e,i,n){var o=new Pt("linear");return o.x1=t,o.y1=e,o.x2=i,o.y2=n,o},i.createPattern=function(){return null},i.createRadialGradient=function(t,e,i,n,o,r){var a=new Pt("radial");return a.x1=t,a.y1=e,a.r1=i,a.x2=n,a.y2=o,a.r2=r,a},i.drawImage=function(t,e,i,n,o,a,s,l,h){var u="";t instanceof HTMLCanvasElement&&(u=t.toDataURL()),t instanceof HTMLImageElement&&(u=t.src),void 0===n&&(a=e,s=i,l=n=t.naturalWidth,h=o=t.naturalHeight),n=n||0,o=o||0,a=a||0,s=s||0,l=l||0,h=h||0,u={x:0,y:0,width:t.naturalWidth,height:t.naturalHeight,href:u,preserveAspectRatio:"xMidYMid slice"},ke(n,l)&&ke(o,h)||(u.preserveAspectRatio="none");var c="";l/=n,h/=o,0===a&&0===s||(c+=" translate("+a+", "+s+")"),1===l&&1===h||(c+=" scale("+l+", "+h+")"),0===e&&0===i||(c+=" translate("+-e+", "+-i+")"),0===e&&0===i&&n===t.naturalWidth&&o===t.naturalHeight||((a=Ct(this,"clipPath",{id:t="CLIP"+r.qm++})).appendChild(Ct(this,"rect",{x:e,y:i,width:n,height:o})),this.km.appendChild(a),u["clip-path"]="url(#"+t+")"),At(this,"image",u,this.uh,c),this.addElement("image",u)},i.fill=function(){Lt(this,"fill",this.path,this.uh)},i.Lg=function(){this.Jp?this.clip():this.fill()},i.fillRect=function(t,e,i,n){Dt(this,"fill",[t,e,i,n],this.uh)},i.fillText=function(t,e,i){t=[t,e,i],"left"===(e=this.textAlign)?e="start":"right"===e?e="end":"center"===e&&(e="middle"),At(this,"fill",e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},this.uh),this.addElement("text",e,t[0])},i.lineTo=function(t,e){this.path.push(["L",t,e])},i.moveTo=function(t,e){this.path.push(["M",t,e])},i.quadraticCurveTo=function(t,e,i,n){this.path.push(["Q",t,e,i,n])},i.rect=function(t,e,i,n){this.path.push(["M",t,e],["L",t+i,e],["L",t+i,e+n],["L",t,e+n],["z"])},i.restore=function(){this.uh=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.Hn=t.Hn,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},i.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,Hn:this.Hn,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.uh.copy())},i.setTransform=function(t,e,i,n,o,r){1===t&&0===e&&0===i&&1===n&&0===o&&0===r||jt(this,t,e,i,n,o,r)},i.scale=function(t,e){this.uh.scale(t,e)},i.translate=function(t,e){this.uh.translate(t,e)},i.transform=function(){},i.stroke=function(){Lt(this,"stroke",this.path,this.uh)},i.Gj=function(){this.Jp||this.stroke()},i.strokeRect=function(t,e,i,n){Dt(this,"stroke",[t,e,i,n],this.uh)},i.addElement=function(t,e,i){return t=Ct(this,t,e,i),0<this.qf.length?this.qf[this.qf.length-1].appendChild(t):this.km.appendChild(t),this.Nx=t},i.bb=function(){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var t,e,i,n,o,a="SHADOW"+r.qm++,s=this.addElement("filter",{id:a,x:"-100%",y:"-100%",width:"300%",height:"300%"},null);t=Ct(this,"feGaussianBlur",{in:"SourceAlpha",result:"blur",TL:this.shadowBlur/2}),e=Ct(this,"feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),i=Ct(this,"feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"}),n=Ct(this,"feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),(o=Ct(this,"feMerge",{})).appendChild(Ct(this,"feMergeNode",{in:"offsetBlur"})),o.appendChild(Ct(this,"feMergeNode",{in:"SourceGraphic"})),s.appendChild(t),s.appendChild(e),s.appendChild(i),s.appendChild(n),s.appendChild(o),0<this.qf.length&&this.qf[this.qf.length-1].setAttributeNS(null,"filter","url(#"+a+")")}},i.EB=function(t,e,i){this.jt=t,this.kt=e,this.Eg=i},i.im=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0},i.Yn=function(){this.shadowOffsetX=this.jt,this.shadowOffsetY=this.kt,this.shadowBlur=this.Eg},i.vA=function(){return!1},i.sA=function(){},i.He=function(){},i.ty=function(){},Nt.prototype.rotate=function(){},(i=zt.prototype).toDataURL=function(t,e){return this.Od.toDataURL(t,e)},i.getBoundingClientRect=function(){return this.Od.getBoundingClientRect()},i.focus=function(){return this.Od.focus()},i.addEventListener=function(t,e,i){this.Od.addEventListener(t,e,i)},i.removeEventListener=function(t,e,i){this.Od.removeEventListener(t,e,i)},r.defineProperty(zt,{width:"width"},function(){return this.Od.width},function(t){this.Od.width=t}),r.defineProperty(zt,{height:"height"},function(){return this.Od.height},function(t){this.Od.height=t}),r.u(zt,{style:"style"},function(){return this.Od.style}),Bt.prototype.ty=function(t){this.ua.JA=t},r.defineProperty(Bt,{fillStyle:"fillStyle"},function(){return this.ua.fillStyle},function(t){this.Qy!==t&&(this.Qy=this.ua.fillStyle=t)}),r.defineProperty(Bt,{font:"font"},function(){return this.ua.font},function(t){this.Ry!==t&&(this.Ry=this.ua.font=t)}),r.defineProperty(Bt,{globalAlpha:"globalAlpha"},function(){return this.ua.globalAlpha},function(t){this.ua.globalAlpha=t}),r.defineProperty(Bt,{lineCap:"lineCap"},function(){return this.ua.lineCap},function(t){this.ua.lineCap=t}),r.defineProperty(Bt,{Hn:"lineDashOffset"},function(){return this.ua.Hn},function(t){this.ua.Hn=t}),r.defineProperty(Bt,{lineJoin:"lineJoin"},function(){return this.ua.lineJoin},function(t){this.ua.lineJoin=t}),r.defineProperty(Bt,{lineWidth:"lineWidth"},function(){return this.ua.lineWidth},function(t){this.ua.lineWidth=t}),r.defineProperty(Bt,{miterLimit:"miterLimit"},function(){return this.ua.miterLimit},function(t){this.ua.miterLimit=t}),r.defineProperty(Bt,{shadowBlur:"shadowBlur"},function(){return this.ua.shadowBlur},function(t){this.ua.shadowBlur=t}),r.defineProperty(Bt,{shadowColor:"shadowColor"},function(){return this.ua.shadowColor},function(t){this.ua.shadowColor=t}),r.defineProperty(Bt,{shadowOffsetX:"shadowOffsetX"},function(){return this.ua.shadowOffsetX},function(t){this.ua.shadowOffsetX=t}),r.defineProperty(Bt,{shadowOffsetY:"shadowOffsetY"},function(){return this.ua.shadowOffsetY},function(t){this.ua.shadowOffsetY=t}),r.defineProperty(Bt,{strokeStyle:"strokeStyle"},function(){return this.ua.strokeStyle},function(t){this.Sy!==t&&(this.Sy=this.ua.strokeStyle=t)}),r.defineProperty(Bt,{textAlign:"textAlign"},function(){return this.ua.textAlign},function(t){this.ua.textAlign=t}),r.defineProperty(Bt,{JA:"imageSmoothingEnabled"},function(){return this.ua.JA},function(t){this.ua.JA=t}),(i=Bt.prototype).arc=function(t,e,i,n,o,r){this.ua.arc(t,e,i,n,o,r)},i.beginPath=function(){this.ua.beginPath()},i.bezierCurveTo=function(t,e,i,n,o,r){this.ua.bezierCurveTo(t,e,i,n,o,r)},i.clearRect=function(t,e,i,n){this.ua.clearRect(t,e,i,n)},i.clip=function(){this.ua.clip()},i.closePath=function(){this.ua.closePath()},i.createLinearGradient=function(t,e,i,n){return this.ua.createLinearGradient(t,e,i,n)},i.createPattern=function(t,e){return this.ua.createPattern(t,e)},i.createRadialGradient=function(t,e,i,n,o,r){return this.ua.createRadialGradient(t,e,i,n,o,r)},i.drawImage=function(t,e,i,n,o,r,a,s,l){void 0===n?this.ua.drawImage(t,e,i):this.ua.drawImage(t,e,i,n,o,r,a,s,l)},i.fill=function(){this.ua.fill()},i.fillRect=function(t,e,i,n){this.ua.fillRect(t,e,i,n)},i.fillText=function(t,e,i){this.ua.fillText(t,e,i)},i.getImageData=function(t,e,i,n){return this.ua.getImageData(t,e,i,n)},i.lineTo=function(t,e){this.ua.lineTo(t,e)},i.measureText=function(t){return this.ua.measureText(t)},i.moveTo=function(t,e){this.ua.moveTo(t,e)},i.quadraticCurveTo=function(t,e,i,n){this.ua.quadraticCurveTo(t,e,i,n)},i.rect=function(t,e,i,n){this.ua.rect(t,e,i,n)},i.restore=function(){this.ua.restore()},Bt.prototype.rotate=function(t){this.ua.rotate(t)},(i=Bt.prototype).save=function(){this.ua.save()},i.setTransform=function(t,e,i,n,o,r){this.ua.setTransform(t,e,i,n,o,r)},i.scale=function(t,e){this.ua.scale(t,e)},i.stroke=function(){this.ua.stroke()},i.transform=function(t,e,i,n,o,r){1===t&&0===e&&0===i&&1===n&&0===o&&0===r||this.ua.transform(t,e,i,n,o,r)},i.translate=function(t,e){this.ua.translate(t,e)},i.Lg=function(t){if(t instanceof ja&&t.type===ba){var e=t.po;(t=t.Vy)>e?(this.scale(e/t,1),this.translate((t-e)/2,0)):e>t&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.Zq?this.clip():this.fill(),t>e?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):e>t&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))}else this.Zq?this.clip():this.fill()},i.Gj=function(){this.Zq||this.stroke()},r.defineProperty(Bt,{Jp:"clipInsteadOfFill"},function(){return this.Zq},function(t){this.Zq=t}),(i=Bt.prototype).EB=function(t,e,i){this.jt=t,this.kt=e,this.Eg=i},i.im=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0},i.Yn=function(){this.shadowOffsetX=this.jt,this.shadowOffsetY=this.kt,this.shadowBlur=this.Eg},i.vA=function(t,e){var i=this.ua;if(void 0!==i.setLineDash)i.setLineDash(t),i.lineDashOffset=e;else{if(void 0===i.webkitLineDash)return!1;i.webkitLineDash=t,i.webkitLineDashOffset=e}return!0},i.sA=function(){var t=this.ua;void 0!==t.setLineDash?(t.setLineDash(r.fo),t.lineDashOffset=0):void 0!==t.webkitLineDash&&(t.webkitLineDash=r.fo,t.webkitLineDashOffset=0)},i.He=function(t){t&&(this.Ry=""),this.Qy=this.Sy=""};var It,Ot,Et,qt,Rt,Gt,Vt,_t,Ht,Kt,Wt,Ut,Jt,$t,Yt,Xt,Qt=(Math.sqrt(2)-1)/3*4,Zt=new ut(0,0).Ha(),te=new pt(0,0,0,0).Ha(),ee=new wt(0,0,0,0).Ha(),ie=new wt(2,2,2,2).Ha(),ne=new ut(6,6).Ha(),oe=new ut(-1/0,-1/0).Ha(),re=new ut(1/0,1/0).Ha(),ae=new dt(0,0).Ha(),se=new dt(1,1).Ha(),le=new dt(6,6).Ha(),he=new dt(8,8).Ha(),ue=new dt(10,10).Ha(),ce=new dt(1/0,1/0).Ha(),fe=new ut(NaN,NaN).Ha(),de=new dt(NaN,NaN).Ha(),pe=new pt(NaN,NaN,NaN,NaN).Ha(),ye=new Mt(.156,.156).Ha(),ve=new Mt(.844,.844).Ha(),me=new l,ge=new l,be=null;function xe(t){if(0>=t)return 0;if(null===(e=be)){for(var e=[],i=0;2e3>=i;i++)e[i]=Math.sqrt(i);be=e}return 1>t?2e3>=(i=1/t)?1/e[0|i]:Math.sqrt(t):2e3>=t?e[0|t]:Math.sqrt(t)}function we(t,e){var i=t-e;return.5>i&&-.5<i}function ke(t,e){var i=t-e;return 5e-8>i&&-5e-8<i}function Me(t,e,i,n,o,r,a){0>=o&&(o=1e-6);var s=0,l=0,h=0,u=0;if(t<i?(l=t,s=i):(l=i,s=t),e<n?(u=e,h=n):(u=n,h=e),t===i)return u<=a&&a<=h&&t-o<=r&&r<=t+o;if(e===n)return l<=r&&r<=s&&e-o<=a&&a<=e+o;if(s+=o,(l-=o)<=r&&r<=s&&(h+=o,(u-=o)<=a&&a<=h))if(s-l>h-u){if(!(t-i>o||i-t>o))return!0;if((r=(n-e)/(i-t)*(r-t)+e)-o<=a&&a<=r+o)return!0}else{if(!(e-n>o||n-e>o))return!0;if((a=(i-t)/(n-e)*(a-e)+t)-o<=r&&r<=a+o)return!0}return!1}function Se(t,e,i,n,o,r,a,s,l,h,u,c){if(Me(t,e,a,s,c,i,n)&&Me(t,e,a,s,c,o,r))return Me(t,e,a,s,c,h,u);var f,d=(t+i)/2,p=(e+n)/2,y=(n+r)/2,v=((n=(d+(f=(i+o)/2))/2)+(f=(f+(o=(o+a)/2))/2))/2,m=((i=(p+y)/2)+(y=(y+(r=(r+s)/2))/2))/2;return Se(t,e,d,p,n,i,v,m,l,h,u,c)||Se(v,m,f,y,o,r,a,s,l,h,u,c)}function Te(t,e,i,n,o,r,a,s,l,h){if(Me(t,e,a,s,l,i,n)&&Me(t,e,a,s,l,o,r))xt(h,t,e,0,0),xt(h,a,s,0,0);else{var u,c=(t+i)/2,f=(e+n)/2,d=(n+r)/2,p=((n=(c+(u=(i+o)/2))/2)+(u=(u+(o=(o+a)/2))/2))/2,y=((i=(f+d)/2)+(d=(d+(r=(r+s)/2))/2))/2;Te(t,e,c,f,n,i,p,y,l,h),Te(p,y,u,d,o,r,a,s,l,h)}}function Pe(t,e,i,n,o,r,a,s,l,h){if(Me(t,e,a,s,l,i,n)&&Me(t,e,a,s,l,o,r))0===h.length&&(h.push(t),h.push(e)),h.push(a),h.push(s);else{var u,c=(t+i)/2,f=(e+n)/2,d=(n+r)/2,p=((n=(c+(u=(i+o)/2))/2)+(u=(u+(o=(o+a)/2))/2))/2,y=((i=(f+d)/2)+(d=(d+(r=(r+s)/2))/2))/2;Pe(t,e,c,f,n,i,p,y,l,h),Pe(p,y,u,d,o,r,a,s,l,h)}}function Ne(t,e,i,n,o,r,a,s,l,h,u,c,f,d){var p=1-l;t=t*p+i*l,e=e*p+n*l,i=i*p+o*l,n=n*p+r*l,o=o*p+a*l,r=r*p+s*l,s=t*p+i*l,a=e*p+n*l,i=i*p+o*l,n=n*p+r*l,h.x=t,h.y=e,u.x=s,u.y=a,c.x=s*p+i*l,c.y=a*p+n*l,f.x=i,f.y=n,d.x=o,d.y=r}function Ce(t,e,i,n,o,r,a,s,l,h){if(Me(t,e,o,r,h,i,n))return Me(t,e,o,r,h,s,l);var u=(t+i)/2,c=(e+n)/2,f=(u+(i=(i+o)/2))/2,d=(c+(n=(n+r)/2))/2;return Ce(t,e,u,c,f,d,a,s,l,h)||Ce(f,d,i,n,o,r,a,s,l,h)}function Ae(t,e,i,n,o,r,a,s){if(Me(t,e,o,r,a,i,n))xt(s,t,e,0,0),xt(s,o,r,0,0);else{var l=(t+i)/2,h=(e+n)/2,u=(l+(i=(i+o)/2))/2,c=(h+(n=(n+r)/2))/2;Ae(t,e,l,h,u,c,a,s),Ae(u,c,i,n,o,r,a,s)}}function Fe(t,e,i,n,o,r,a,s){if(Me(t,e,o,r,a,i,n))0===s.length&&(s.push(t),s.push(e)),s.push(o),s.push(r);else{var l=(t+i)/2,h=(e+n)/2,u=(l+(i=(i+o)/2))/2,c=(h+(n=(n+r)/2))/2;Fe(t,e,l,h,u,c,a,s),Fe(u,c,i,n,o,r,a,s)}}function De(t,e,i,n,o,r,a,s,l,h,u,c,f,d){if(0>=f&&(f=1e-6),Me(t,e,a,s,f,i,n)&&Me(t,e,a,s,f,o,r)){if(0===(p=(t-a)*(h-c)-(e-s)*(l-u)))return!1;if(f=((t*s-e*a)*(l-u)-(t-a)*(l*c-h*u))/p,p=((t*s-e*a)*(h-c)-(e-s)*(l*c-h*u))/p,(l>u?l-u:u-l)<(h>c?h-c:c-h)){if(a=l=0,e<s?(l=e,a=s):(l=s,a=e),p<l||p>a)return!1}else if(t<a?l=t:(l=a,a=t),f<l||f>a)return!1;return d.x=f,d.y=p,!0}var p,y=(e+n)/2,v=((p=(t+i)/2)+(i=(i+o)/2))/2,m=(y+(n=(n+r)/2))/2,g=(v+(i=(i+(o=(o+a)/2))/2))/2,b=(m+(n=(n+(r=(r+s)/2))/2))/2,x=(u-l)*(u-l)+(c-h)*(c-h),w=!1;return De(t,e,p,y,v,m,g,b,l,h,u,c,f,d)&&((e=(d.x-l)*(d.x-l)+(d.y-h)*(d.y-h))<x&&(x=e,w=!0)),t=d.x,p=d.y,De(g,b,i,n,o,r,a,s,l,h,u,c,f,d)&&((e=(d.x-l)*(d.x-l)+(d.y-h)*(d.y-h))<x?w=!0:(d.x=t,d.y=p)),w}function Le(t,e,i,n,o,r,a,s,l,h,u,c,f){var d=0;if(0>=f&&(f=1e-6),Me(t,e,a,s,f,i,n)&&Me(t,e,a,s,f,o,r)){if(0===(f=(t-a)*(h-c)-(e-s)*(l-u)))return d;var p=((t*s-e*a)*(h-c)-(e-s)*(l*c-h*u))/f;if((y=((t*s-e*a)*(l-u)-(t-a)*(l*c-h*u))/f)>=u)return d;if((l>u?l-u:u-l)<(h>c?h-c:c-h)){if(t=l=0,e<s?(l=e,t=s):(l=s,t=e),p<l||p>t)return d}else if(t<a?(l=t,t=a):l=a,y<l||y>t)return d;0<f?d++:0>f&&d--}else{p=(e+n)/2;var y,v,m=(n+r)/2,g=((n=((y=(t+i)/2)+(v=(i+o)/2))/2)+(v=(v+(o=(o+a)/2))/2))/2,b=((i=(p+m)/2)+(m=(m+(r=(r+s)/2))/2))/2;d=(d=d+Le(t,e,y,p,n,i,g,b,l,h,u,c,f))+Le(g,b,v,m,o,r,a,s,l,h,u,c,f)}return d}function je(t,e,i,n,o,r,a){if(ke(t,i)){var s=0;return i=0,e<n?(s=e,i=n):(s=n,i=e),(n=r)<s?(a.x=t,a.y=s,!1):n>i?(a.x=t,a.y=i,!1):(a.x=t,a.y=n,!0)}return ke(e,n)?(t<i?s=t:(s=i,i=t),(n=o)<s?(a.x=s,a.y=e,!1):n>i?(a.x=i,a.y=e,!1):(a.x=n,a.y=e,!0)):-5e-6>(s=((t-o)*(t-i)+(e-r)*(e-n))/((i-t)*(i-t)+(n-e)*(n-e)))?(a.x=t,a.y=e,!1):1.000005<s?(a.x=i,a.y=n,!1):(a.x=t+s*(i-t),a.y=e+s*(n-e),!0)}function ze(t,e,i,n,o,r,a,s,l){return we(t,i)&&we(e,n)?(l.x=t,l.y=e,!1):ke(o,a)?ke(t,i)?(je(t,e,i,n,o,r,l),!1):je(t,e,i,n,o,r=(n-e)/(i-t)*(o-t)+e,l):(s=(s-r)/(a-o),ke(t,i)?(r=s*(t-o)+r,i=a=0,e<n?(a=e,i=n):(a=n,i=e),r<a?(l.x=t,l.y=a,!1):r>i?(l.x=t,l.y=i,!1):(l.x=t,l.y=r,!0)):ke(s,a=(n-e)/(i-t))?(je(t,e,i,n,o,r,l),!1):(o=(a*t-s*o+r-e)/(a-s),ke(a,0)?(t<i?a=t:(a=i,i=t),o<a?(l.x=a,l.y=e,!1):o>i?(l.x=i,l.y=e,!1):(l.x=o,l.y=e,!0)):je(t,e,i,n,o,r=a*(o-t)+e,l)))}function Be(t,e,i,n,o,r,a,s,l){var h=1e21,u=t,c=e;if(ze(t,e,t,n,o,r,a,s,l)){var f=(l.x-o)*(l.x-o)+(l.y-r)*(l.y-r);f<h&&(h=f,u=l.x,c=l.y)}return ze(i,e,i,n,o,r,a,s,l)&&((f=(l.x-o)*(l.x-o)+(l.y-r)*(l.y-r))<h&&(h=f,u=l.x,c=l.y)),ze(t,e,i,e,o,r,a,s,l)&&((f=(l.x-o)*(l.x-o)+(l.y-r)*(l.y-r))<h&&(h=f,u=l.x,c=l.y)),ze(t,n,i,n,o,r,a,s,l)&&((f=(l.x-o)*(l.x-o)+(l.y-r)*(l.y-r))<h&&(h=f,u=l.x,c=l.y)),l.x=u,l.y=c,1e21>h}function Ie(t,e,i,n,o,r,a,s,l){var h=o-a,u=a=0;return 0===(i=t-i)||0===h?0===i?u=(s=(r-s)/h)*(a=t)+(r-s*o):u=(n=(e-n)/i)*(a=o)+(e-n*t):u=(n=(e-n)/i)*(a=(r-(s=(r-s)/h)*o-(t=e-n*t))/(n-s))+t,l.m(a,u),l}function Oe(t,e,i){var n=e.x,o=e.y,r=i.x,a=i.y,s=t.left,l=t.right,h=t.top,u=t.bottom;return n===r?(r=t=0,o<a?(t=o,r=a):(t=a,r=o),s<=n&&n<=l&&t<=u&&r>=h):o===a?(n<r?t=n:(t=r,r=n),h<=o&&o<=u&&t<=l&&r>=s):!!(t.Ia(e)||t.Ia(i)||Ee(s,h,l,h,n,o,r,a)||Ee(l,h,l,u,n,o,r,a)||Ee(l,u,s,u,n,o,r,a)||Ee(s,u,s,h,n,o,r,a))}function Ee(t,e,i,n,o,r,a,s){return 0>=qe(t,e,i,n,o,r)*qe(t,e,i,n,a,s)&&0>=qe(o,r,a,s,t,e)*qe(o,r,a,s,i,n)}function qe(t,e,i,n,o,r){return i-=t,0===(r=(t=o-t)*(n-=e)-(e=r-e)*i)&&(0<(r=t*i+e*n)&&(0>(r=(t-i)*i+(e-n)*n)&&(r=0))),0>r?-1:0<r?1:0}function Re(t){return 0>t&&(t+=360),360<=t&&(t-=360),t}function Ge(t,e,i,n){var o=Math.PI;n||(e*=o/180,i*=o/180);var r=e>i?-1:1;n=[];var a=o/2,s=e;if(1e-5>(i=Math.min(2*o,Math.abs(i-e))))return e=s+r*Math.min(i,a),r=0+t*Math.cos(s),s=0+t*Math.sin(s),a=0+t*Math.cos(e),t=0+t*Math.sin(e),e=(r+a)/2,i=(s+t)/2,n.push([r,s,e,i,e,i,a,t]),n;for(;1e-5<i;){o=((e=s+r*Math.min(i,a))-s)/2;var l,h=(f=(l=t*Math.cos(o))*l+(c=-(u=t*Math.sin(o)))*c)+l*l+c*u,u=l-(f=4/3*(Math.sqrt(2*f*h)-h)/(l*u-c*l))*c,c=-(l=c+f*l),f=o+s;o=Math.cos(f),f=Math.sin(f);n.push([0+t*Math.cos(s),0+t*Math.sin(s),0+u*o-l*f,0+u*f+l*o,0+u*o-c*f,0+u*f+c*o,0+t*Math.cos(e),0+t*Math.sin(e)]),i-=Math.abs(e-s),s=e}return n}function Ve(t,e,i,n,o,r,a){i=Math.floor((t-i)/o)*o+i,n=Math.floor((e-n)/r)*r+n;var s=i;i+o-t<o/2&&(s=i+o),t=n,n+r-e<r/2&&(t=n+r),a.m(s,t)}function _e(t,e){var i=Math.max(t,e),n=Math.min(t,e),o=1,r=1;do{o=i%n,i=r=n,n=o}while(0<o);return r}function He(t){1<arguments.length&&r.k("Geometry constructor can take at most one optional argument, the Geometry type."),r.oc(this),this.P=!1,void 0===t&&(t=qt),this.na=t,this.Gb=this.yb=this.Mc=this.Cc=0,this.Rj=new et(Qe),this.Kv=this.Rj.F,this.vv=(new pt).freeze(),this.gb=!0,this.Oq=this.jo=null,this.Pq=NaN,this.gi=g,this.hi=P,this.Lo=this.No=NaN,this.Gi=Ya}function Ke(t,e){if(t.type!==It||e.type!==qt)return!1;if(1===e.fc.count){var i=e.fc.ea(0);if(1===i.wb.count&&we(t.ha,i.ha)&&we(t.fa,i.fa)&&((i=i.wb.ea(0)).type===_t&&we(t.C,i.C)&&we(t.D,i.D)))return!0}return!1}function We(t,e){for(var i=t.length,n=r.K(),o=0;o<i;o++){var a=t[o];n.x=a[0],n.y=a[1],e.nb(n),a[0]=n.x,a[1]=n.y,n.x=a[2],n.y=a[3],e.nb(n),a[2]=n.x,a[3]=n.y,n.x=a[4],n.y=a[5],e.nb(n),a[4]=n.x,a[5]=n.y,n.x=a[6],n.y=a[7],e.nb(n),a[6]=n.x,a[7]=n.y}r.v(n)}function Ue(t,e,i){switch(t.type){case It:case Ot:case Et:i?e.m(t.Cc,t.Mc,0,0):xt(e,t.Cc,t.Mc,0,0),xt(e,t.yb,t.Gb,0,0);break;case qt:t=(n=t.fc).n;for(var n=n.length,o=0;o<n;o++){var a=t[o];i&&0===o?e.m(a.ha,a.fa,0,0):xt(e,a.ha,a.fa,0,0);for(var s=a.wb.n,l=s.length,h=a.ha,u=a.fa,c=0;c<l;c++){switch((p=s[c]).type){case _t:case Vt:xt(e,h=p.C,u=p.D,0,0);break;case Ht:Te(h,u,p.wc,p.Rc,p.Ch,p.Dh,p.C,p.D,.5,e),h=p.C,u=p.D;break;case Kt:Ae(h,u,p.wc,p.Rc,p.C,p.D,.5,e),h=p.C,u=p.D;break;case Wt:case Ut:var f=p.type===Wt?ti(p,a):ei(p,a,h,u),d=f.length;if(0===d){xt(e,h=p.la,u=p.ra,0,0);break}for(var p=null,y=0;y<d;y++)Te((p=f[y])[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],.5,e);null!==p&&(h=p[6],u=p[7]);break;default:r.k("Unknown Segment type: "+p.type)}}}break;default:r.k("Unknown Geometry type: "+t.type)}}function Je(t,e,i,n,o,r,a,s){if(Me(o,r,a,s,.05,t,e))return NaN;var l=(t-i)*(r-s);if(0===l)return 0;var h=((t*n-e*i)*(o-a)-(t-i)*(o*s-r*a))/l;if(e=(t*n-e*i)*(r-s)/l,h>=t)return 0;if((o>a?o-a:a-o)<(r>s?r-s:s-r)){if(o=t=0,r<s?(t=r,o=s):(t=s,o=r),e<t||e>o)return 0}else if(o<a?(t=o,o=a):t=a,h<t||h>o)return 0;return 0<l?1:-1}function $e(t,e,i,n){for(var o=(t=t.fc.n).length,r=0;r<o;r++)if(t[r].Ia(e,i,n))return!0;return!1}function Ye(t){if(null===t.jo){t.Ix()&&t.Ay();var e=t.jo=[],i=t.Oq=[],n=[],o=[];if(t.type===It)n.push(t.ha),n.push(t.fa),n.push(t.C),n.push(t.D),e.push(n),o.push(Math.sqrt((t.ha-t.C)*(t.ha-t.C)+(t.fa-t.D)*(t.fa-t.D))),i.push(o);else if(t.type===Ot)n.push(t.ha),n.push(t.fa),n.push(t.C),n.push(t.fa),n.push(t.C),n.push(t.D),n.push(t.ha),n.push(t.D),n.push(t.ha),n.push(t.fa),e.push(n),o.push(Math.abs(t.ha-t.C)),o.push(Math.abs(t.fa-t.D)),o.push(Math.abs(t.ha-t.C)),o.push(Math.abs(t.fa-t.D)),i.push(o);else if(t.type===Et){if((s=new Qe).ha=t.C,s.fa=(t.fa+t.D)/2,(a=new Ze(Wt)).ze=0,a.uf=360,a.la=(t.ha+t.C)/2,a.ra=(t.fa+t.D)/2,a.radiusX=Math.abs(t.ha-t.C)/2,a.radiusY=Math.abs(t.fa-t.D)/2,s.add(a),0===(o=(t=ti(a,s)).length))n.push(a.la),n.push(a.ra);else for(var a=s.ha,s=s.fa,l=0;l<o;l++){var h=t[l];Pe(a,s,h[2],h[3],h[4],h[5],h[6],h[7],.5,n),a=h[6],s=h[7]}e.push(n),i.push(Xe(n))}else for(var u=t.fc.i;u.next();){var c=u.value;(n=[]).push(c.ha),n.push(c.fa);for(var f=a=c.ha,d=s=c.fa,p=c.wb.n,y=p.length,v=0;v<y;v++){var m=p[v];switch(m.na){case Vt:4<=n.length&&(e.push(n),i.push(Xe(n))),(n=[]).push(m.C),n.push(m.D),f=a=m.C,d=s=m.D;break;case _t:n.push(m.C),n.push(m.D),a=m.C,s=m.D;break;case Ht:Pe(a,s,m.Jd,m.We,m.mh,m.Dg,m.yb,m.Gb,.5,n),a=m.C,s=m.D;break;case Kt:Fe(a,s,m.Jd,m.We,m.yb,m.Gb,.5,n),a=m.C,s=m.D;break;case Wt:if(0===(o=(t=ti(m,c)).length)){n.push(m.la),n.push(m.ra),a=m.la,s=m.ra;break}for(l=0;l<o;l++)Pe(a,s,(h=t[l])[2],h[3],h[4],h[5],h[6],h[7],.5,n),a=h[6],s=h[7];break;case Ut:if(0===(o=(t=ei(m,c,a,s)).length)){n.push(m.la),n.push(m.ra),a=m.la,s=m.ra;break}for(l=0;l<o;l++)Pe(a,s,(h=t[l])[2],h[3],h[4],h[5],h[6],h[7],.5,n),a=h[6],s=h[7];break;default:r.k("Segment not of valid type: "+m.na)}m.Rh&&(n.push(f),n.push(d))}4<=n.length&&(e.push(n),i.push(Xe(n)))}}}function Xe(t){for(var e=[],i=0,n=0,o=t.length,r=0;r<o;r+=2){var a=t[r],s=t[r+1];0!==r&&(i=Math.sqrt(f(i,n,a,s)),e.push(i)),i=a,n=s}return e}function Qe(t,e,i,n){r.oc(this),this.P=!1,void 0===i&&(i=!0),this.Fm=i,void 0===n&&(n=!0),this.Oo=n,this.Cc=void 0!==t?t:0,this.Mc=void 0!==e?e:0,this.jp=new et(Ze),this.Jw=this.jp.F,this.gb=!0}function Ze(t,e,i,n,o,a,s,l){r.oc(this),this.P=!1,void 0===t&&(t=_t),this.na=t,this.yb=void 0!==e?e:0,this.Gb=void 0!==i?i:0,void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),t===Ut?(0>(t=a%360)&&(t+=360),this.Jd=t,this.We=0,this.mh=Math.max(n,0),this.Dg=Math.max(o,0),this.So="boolean"==typeof s&&!!s,this.no=!!l):(this.Jd=n,this.We=o,t===Wt&&(a=Math.max(a,0)),this.mh=a,"number"==typeof s?(t===Wt&&(s=Math.max(s,0)),this.Dg=s):this.Dg=0,this.no=this.So=!1),this.Rh=!1,this.gb=!0,this.Jh=null}function ti(t,e){if(null!==t.Jh&&!1===e.gb)return t.Jh;var i=t.radiusX,n=t.radiusY;if(void 0===n&&(n=i),0===i||0===n)return t.Jh=[],t.Jh;var o=t.Jd,a=t.We,s=Ge(i<n?i:n,t.ze,t.ze+t.uf,!1);if(i!==n){var l=r.Wg();l.reset(),i<n?l.scale(1,n/i):l.scale(i/n,1),We(s,l),r.bf(l)}for(i=s.length,n=0;n<i;n++)(l=s[n])[0]+=o,l[1]+=a,l[2]+=o,l[3]+=a,l[4]+=o,l[5]+=a,l[6]+=o,l[7]+=a;return t.Jh=s,t.Jh}function ei(t,e,i,n){function o(t,e,i,n){return(t*n<e*i?-1:1)*Math.acos((t*i+e*n)/(Math.sqrt(t*t+e*e)*Math.sqrt(i*i+n*n)))}if(null!==t.Jh&&!1===e.gb)return t.Jh;e=t.mh;var a=t.Dg;0===e&&(e=1e-4),0===a&&(a=1e-4);var s=Math.PI/180*t.Jd,l=t.So,h=t.no,u=t.yb,c=t.Gb,f=Math.cos(s),d=Math.sin(s),p=f*(i-u)/2+d*(n-c)/2,y=p*p/(e*e)+(s=-d*(i-u)/2+f*(n-c)/2)*s/(a*a);return 1<y&&(e*=Math.sqrt(y),a*=Math.sqrt(y)),y=(l===h?-1:1)*Math.sqrt((e*e*a*a-e*e*s*s-a*a*p*p)/(e*e*s*s+a*a*p*p)),isNaN(y)&&(y=0),l=y*e*s/a,y=y*-a*p/e,isNaN(l)&&(l=0),isNaN(y)&&(y=0),i=(i+u)/2+f*l-d*y,n=(n+c)/2+d*l+f*y,c=o(1,0,(p-l)/e,(s-y)/a),s=o(f=(p-l)/e,u=(s-y)/a,p=(-p-l)/e,l=(-s-y)/a),-1>=(p=(f*p+u*l)/(Math.sqrt(f*f+u*u)*Math.sqrt(p*p+l*l)))?s=Math.PI:1<=p&&(s=0),!h&&0<s&&(s-=2*Math.PI),h&&0>s&&(s+=2*Math.PI),h=e>a?1:e/a,p=e>a?a/e:1,e=Ge(e>a?e:a,c,c+s,!0),(a=r.Wg()).reset(),a.translate(i,n),a.rotate(t.Jd,0,0),a.scale(h,p),We(e,a),r.bf(a),t.Jh=e,t.Jh}function ii(){this.aa=null,this.Zz=new ut(0,0).freeze(),this.dz=new ut(0,0).freeze(),this.sv=this.ow=0,this.tv=1,this.cw="",this.Tw=this.Gv=!1,this.Ev=this.uv=0,this.Mj=this.Pv=this.Zv=!1,this.Cr=null,this.Rw=0,this.Gg=this.Qw=null}function ni(){this.aa=null,this.Rb="",this.xw=this.Ow=null,this.Wq=!1}function oi(){this.Xq=$t,this.Vm=this.nw="",this.Bs=this.Cs=this.Hs=this.Is=this.Fs=this.aa=this.ne=null}function ri(t){1<arguments.length&&r.k("Model constructor can only take one optional argument, the Array of node data."),r.oc(this),this.lr=this.Rb="",this.Oi=!1,this.Cz={},this.Fe=[],this.Kc=new ht(null,Object),this.kk="key",this.so=this.Wo=null,this.cr=this.dr=!1,this.Nq=null,this.Qm="category",this.Hi=new ht(null,nt),this.gk=null,this.fj=!1,this.Yz=null,this.ja=new Ii,void 0!==t&&(this.hg=t)}function ai(t){return',\n  "modelData": '+di(t,t.Mk)}function si(t,e){var i=e.modelData;r.Pa(i)&&(t.Pu(i),t.Mk=i)}function li(t,e,i,n){if(e===i)return!0;if(typeof e!=typeof i||"function"==typeof e||"function"==typeof i)return!1;if(Array.isArray(e)&&Array.isArray(i)){if(n.ka(e)===i)return!0;if(n.add(e,i),e.length!==i.length)return!1;for(var o=0;o<e.length;o++)if(!li(t,e[o],i[o],n))return!1;return!0}if(r.Pa(e)&&r.Pa(i)){if(n.ka(e)===i)return!0;for(o in n.add(e,i),e){var a=e[o];if(!ci(o,a)){var s=i[o];if(void 0===s||!li(t,a,s,n))return!1}}for(var l in i)if(!ci(l,s=i[l])&&(void 0===(a=e[l])||!li(t,a,s,n)))return!1;return!0}return!1}function hi(t,e,i){t[i]!==e[i]&&r.k("Model.computeJsonDifference: Model."+i+' is not the same in both models: "'+t[i]+'" and "'+e[i]+'"')}function ui(t,e,i){void 0===i&&(i=!1);var n=r.Za(e);if(0>=n)return"[]";var o=new s;o.add("[ "),i&&1<n&&o.add("\n");for(var a=0;a<n;a++){var l=r.Ba(e,a);void 0!==l&&(0<a&&(o.add(","),i&&o.add("\n")),o.add(t.dv(l)))}return i&&1<n&&o.add("\n"),o.add(" ]"),o.toString()}function ci(t,e){return void 0===e||"__gohashid"===t||"_"===t[0]||"function"==typeof e}function fi(t){return isNaN(t)?"NaN":1/0===t?"9e9999":-1/0===t?"-9e9999":t}function di(t,e){if((n=e)instanceof ut)e={class:"go.Point",x:fi(n.x),y:fi(n.y)};else if(n instanceof dt)e={class:"go.Size",width:fi(n.width),height:fi(n.height)};else if(n instanceof pt)e={class:"go.Rect",x:fi(n.x),y:fi(n.y),width:fi(n.width),height:fi(n.height)};else if(n instanceof wt)e={class:"go.Margin",top:fi(n.top),right:fi(n.right),bottom:fi(n.bottom),left:fi(n.left)};else if(n instanceof Mt)e=n.$c()?{class:"go.Spot",x:fi(n.x),y:fi(n.y),offsetX:fi(n.offsetX),offsetY:fi(n.offsetY)}:{class:"go.Spot",enum:n.toString()};else if(n instanceof ja){if(e={class:"go.Brush",type:n.type.name},n.type===ma?e.color=n.color:n.type!==ga&&n.type!==ba||(e.start=n.start,e.end=n.end,n.type===ba&&(0!==n.$u&&(e.startRadius=fi(n.$u)),isNaN(n.St)||(e.endRadius=fi(n.St)))),null!==n.yk){for(var i={},n=n.yk.i;n.next();)i[n.key]=n.value;e.colorStops=i}}else if(n instanceof He)e={class:"go.Geometry",type:n.type.name},0!==n.ha&&(e.startX=fi(n.ha)),0!==n.fa&&(e.startY=fi(n.fa)),0!==n.C&&(e.endX=fi(n.C)),0!==n.D&&(e.endY=fi(n.D)),n.A.L(g)||(e.spot1=n.A),n.B.L(P)||(e.spot2=n.B),n.type===qt&&(e.path=Rt(n));else if(n instanceof a)e={class:"go.EnumValue",classType:r.pf(n.Ge),name:n.name};else if(n instanceof ls||n instanceof Qo||n instanceof $o||n instanceof ri||n instanceof Hi||n instanceof Ei||n instanceof Sf||n instanceof Nf||n instanceof Ii||n instanceof Bi)return r.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+n.toString()),"{}";var o;i="{",n=!0;for(o in e){if(!ci(o,l=r.ub(e,o)))if(n?n=!1:i+=", ",i+='"'+o+'":',"points"===o&&l instanceof et&&l.na===ut){for(var s="[",l=l.i;l.next();){var h=l.value;1<s.length&&(s+=","),s+=t.dv(h.x),s+=",",s+=t.dv(h.y)}i+=s+="]"}else i+=t.dv(l)}return i+"}"}function pi(t){return"number"==typeof t?t:"NaN"===t?NaN:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}function yi(t,e,i,n,o,r,a,s,l){void 0===s&&(s=null),void 0===l&&(l=null);var h=new oi;h.$=t,h.Dc=i,h.tf=e,h.propertyName=n,h.object=o,h.oldValue=r,h.Dj=s,h.newValue=a,h.Cj=l,t.jx(h)}function vi(t,e,i){"string"!=typeof t&&"function"!=typeof t&&r.Ed(t,"string or function",e,i)}function mi(t){return"number"==typeof t||"string"==typeof t}function gi(t,e,i){var n=t.qb(e);void 0!==n&&t.Kc.ka(n)===e||(t.YA(e),void 0===(n=t.qb(e))?r.k("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."):(t.Kc.add(n,e),n=null,i&&(n=r.Za(t.Fe),r.qh(t.Fe,n,e)),yi(t,"nodeDataArray",Yt,"nodeDataArray",t,null,e,null,n),t.tq(e),t.sq(e)))}function bi(t,e,i){var n=t.qb(e);if(void 0!==n&&t.Kc.remove(n),n=null,i){if(0>(n=r.Ll(t.Fe,e)))return;r.Jg(t.Fe,n)}yi(t,"nodeDataArray",Xt,"nodeDataArray",t,e,null,n,null),t.cv(e)}function xi(t,e,i){if(void 0!==e){var n=t.Hi.ka(e);null===n&&(n=new nt(Object),t.Hi.add(e,n)),n.add(i)}}function wi(t,e,i){if(void 0!==e){var n=t.Hi.ka(e);n instanceof nt&&(void 0===i||null===i?t.Hi.remove(e):(n.remove(i),0===n.count&&t.Hi.remove(e)))}}function ki(t,e){if(void 0===e)return null;var i=t.Hi.ka(e);return i instanceof nt?i:null}function Mi(t,e,i){if(t.oA&&Array.isArray(e)){var n=[];for(i=0;i<e.length;i++){var o=Mi(t,e[i],t.nA);n.push(o)}return r.oc(n),n}if(i&&r.Pa(e)){for(n in i=(i=e.constructor)?new i:{},e)if("__gohashid"!==n){var a;(a=o=r.ub(e,n))instanceof ls||a instanceof Qo||a instanceof $o||a instanceof wl||a instanceof xo||a instanceof Hi||a instanceof Ei||a instanceof Sf||a instanceof ii||a instanceof ni?("_"!==n[0]&&r.trace('Warning: found GraphObject or Diagram reference when copying model data on property "'+n+'" of data object: '+e.toString()+"  \nModel data should not have any references to a Diagram or any part of a diagram, such as: "+a.toString()),a=!0):a=a instanceof ri||a instanceof Ii||a instanceof Bi||a instanceof oi,a||(o=Mi(t,o,!1)),r.Ma(i,n,o)}return r.oc(i),i}return e instanceof ut?e.copy():e instanceof dt?e.copy():e instanceof pt?e.copy():e instanceof Mt?e.copy():e instanceof wt?e.copy():e}r.ga("Geometry",He),r.mi(He),He.prototype.copy=function(){var t=new He;t.na=this.na,t.Cc=this.Cc,t.Mc=this.Mc,t.yb=this.yb,t.Gb=this.Gb;for(var e=this.Rj.n,i=e.length,n=t.Rj,o=0;o<i;o++){var r=e[o].copy();n.add(r)}return t.Kv=this.Kv,t.vv.assign(this.vv),t.gb=this.gb,t.jo=this.jo,t.Oq=this.Oq,t.Pq=this.Pq,t.gi=this.gi.S(),t.hi=this.hi.S(),t.No=this.No,t.Lo=this.Lo,t.Gi=this.Gi,t},He.Line=It=r.p(He,"Line",0),He.Rectangle=Ot=r.p(He,"Rectangle",1),He.Ellipse=Et=r.p(He,"Ellipse",2),He.Path=qt=r.p(He,"Path",3),He.prototype.Ha=function(){return this.freeze(),Object.freeze(this),this},He.prototype.freeze=function(){this.P=!0,(t=this.fc).freeze();for(var t,e=(t=t.n).length,i=0;i<e;i++)t[i].freeze();return this},He.prototype.Qa=function(){Object.isFrozen(this)&&r.k("cannot thaw constant: "+this),this.P=!1,(t=this.fc).Qa();for(var t,e=(t=t.n).length,i=0;i<e;i++)t[i].Qa();return this},He.prototype.equalsApprox=He.prototype.Oc=function(t){if(!(t instanceof He))return!1;if(this.type!==t.type)return this.type===It&&t.type===qt?Ke(this,t):t.type===It&&this.type===qt&&Ke(t,this);if(this.type===qt){var e=this.fc.n;t=t.fc.n;var i=e.length;if(i!==t.length)return!1;for(var n=0;n<i;n++)if(!e[n].Oc(t[n]))return!1;return!0}return we(this.ha,t.ha)&&we(this.fa,t.fa)&&we(this.C,t.C)&&we(this.D,t.D)},He.stringify=Rt=function(t){return t.toString()},He.prototype.hc=function(t){t.Ge===He?this.type=t:r.Ij(this,t)},He.prototype.toString=function(t){switch(void 0===t&&(t=-1),this.type){case It:return 0>t?"M"+this.ha.toString()+" "+this.fa.toString()+"L"+this.C.toString()+" "+this.D.toString():"M"+this.ha.toFixed(t)+" "+this.fa.toFixed(t)+"L"+this.C.toFixed(t)+" "+this.D.toFixed(t);case Ot:return(n=new pt(this.ha,this.fa,0,0)).HG(this.C,this.D,0,0),0>t?"M"+n.x.toString()+" "+n.y.toString()+"H"+n.right.toString()+"V"+n.bottom.toString()+"H"+n.left.toString()+"z":"M"+n.x.toFixed(t)+" "+n.y.toFixed(t)+"H"+n.right.toFixed(t)+"V"+n.bottom.toFixed(t)+"H"+n.left.toFixed(t)+"z";case Et:if((n=new pt(this.ha,this.fa,0,0)).HG(this.C,this.D,0,0),0>t){var e=n.left.toString()+" "+(n.y+n.height/2).toString(),i=n.right.toString()+" "+(n.y+n.height/2).toString();return"M"+e+"A"+(n.width/2).toString()+" "+(n.height/2).toString()+" 0 0 1 "+i+"A"+(n.width/2).toString()+" "+(n.height/2).toString()+" 0 0 1 "+e}return e=n.left.toFixed(t)+" "+(n.y+n.height/2).toFixed(t),i=n.right.toFixed(t)+" "+(n.y+n.height/2).toFixed(t),"M"+e+"A"+(n.width/2).toFixed(t)+" "+(n.height/2).toFixed(t)+" 0 0 1 "+i+"A"+(n.width/2).toFixed(t)+" "+(n.height/2).toFixed(t)+" 0 0 1 "+e;case qt:for(var n="",o=(i=(e=this.fc.n).length,0);o<i;o++){var r=e[o];0<o&&(n+=" x "),r.pu&&(n+="F "),n+=r.toString(t)}return n;default:return this.type.toString()}},He.fillPath=function(t){"string"!=typeof t&&r.Ed(t,"string",He,"fillPath:str");for(var e=(t=t.split(/[Xx]/)).length,i="",n=0;n<e;n++){var o=t[n];i=null!==o.match(/[Ff]/)?0===n?i+o:i+"X"+(" "===o[0]?"":" ")+o:i+(0===n?"":"X ")+"F"+(" "===o[0]?"":" ")+o}return i},He.parse=Gt=function(t,e){function i(){return y>=w-1||null!==h[y+1].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)}function n(){return h[++y]}function o(){var t=new ut(parseFloat(n()),parseFloat(n()));return v===v.toLowerCase()&&(t.x=x.x+t.x,t.y=x.y+t.y),t}function a(){return x=o()}function s(){return b=o()}function l(){return"c"!==m.toLowerCase()&&"s"!==m.toLowerCase()?x:new ut(2*x.x-b.x,2*x.y-b.y)}void 0===e&&(e=!1),"string"!=typeof t&&r.Ed(t,"string",He,"parse:str");for(var h=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/,/gm," ")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^\s])/gm,"$1 $2")).replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ")).replace(/[\s\r\t\n]+/gm," ")).replace(/^\s+|\s+$/g,"")).split(" "),u=0;u<h.length;u++){if(null!==(g=h[u]).match(/(\.[0-9]*)(\.)/gm)){for(var c=[],f="",d=!1,p=0;p<g.length;p++){"."!==(k=g[p])||d?"."===k?(c.push(f),f="."):f+=k:(d=!0,f+=k)}for(c.push(f),h.splice(u,1),g=0;g<c.length;g++)h.splice(u+g,0,c[g]);u+=c.length-1}}var y=-1,v="",m="",g=new ut(0,0),b=new ut(0,0),x=new ut(0,0),w=h.length;for(c=r.s(),d=f=!1,p=!0,u=null;!(y>=w-1);)if(m=v,""!==(v=n()))switch(v.toUpperCase()){case"X":p=!0,d=f=!1;break;case"M":for(u=a(),null===c.Xb||!0===p?(ch(c,u.x,u.y,f,!1,!d),p=!1):c.moveTo(u.x,u.y),g=x;!i();)u=a(),c.lineTo(u.x,u.y);break;case"L":for(;!i();)u=a(),c.lineTo(u.x,u.y);break;case"H":for(;!i();)x=u=new ut((v===v.toLowerCase()?x.x:0)+parseFloat(n()),x.y),c.lineTo(x.x,x.y);break;case"V":for(;!i();)x=u=new ut(x.x,(v===v.toLowerCase()?x.y:0)+parseFloat(n())),c.lineTo(x.x,x.y);break;case"C":for(;!i();){var k=o(),M=s();u=a();ph(c,k.x,k.y,M.x,M.y,u.x,u.y)}break;case"S":for(;!i();)k=l(),M=s(),u=a(),ph(c,k.x,k.y,M.x,M.y,u.x,u.y);break;case"Q":for(;!i();)M=s(),u=a(),yh(c,M.x,M.y,u.x,u.y);break;case"T":for(;!i();)b=M=l(),u=a(),yh(c,M.x,M.y,u.x,u.y);break;case"B":for(;!i();){u=parseFloat(n()),k=parseFloat(n()),M=parseFloat(n());var S=parseFloat(n()),T=parseFloat(n()),P=T,N=!1;i()||(P=parseFloat(n()),i()||(N=0!==parseFloat(n()))),v===v.toLowerCase()&&(M+=x.x,S+=x.y),c.arcTo(u,k,M,S,T,P,N)}break;case"A":for(;!i();)vh(c,k=Math.abs(parseFloat(n())),M=Math.abs(parseFloat(n())),S=parseFloat(n()),T=!!parseFloat(n()),P=!!parseFloat(n()),(u=a()).x,u.y);break;case"Z":u=c.o.fc.n[c.o.fc.length-1],fh(c),x=g;break;case"F":for(k="",u=1;h[y+u];)if(null!==h[y+u].match(/[Uu]/))u++;else{if(null!==h[y+u].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)){k=h[y+u];break}u++}k.match(/[Mm]/)?f=!0:dh(c);break;case"U":for(k="",u=1;h[y+u];)if(null!==h[y+u].match(/[Ff]/))u++;else{if(null!==h[y+u].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)){k=h[y+u];break}u++}k.match(/[Mm]/)?d=!0:c.bb(!1)}if(g=c.o,r.q(c),e)for(c=g.fc.i;c.next();)(u=c.value).pu=!0;return g},He.prototype.Ix=function(){if(this.gb||this.Kv!==this.fc.F)return!0;for(var t=this.fc.n,e=t.length,i=0;i<e;i++)if(t[i].Ix())return!0;return!1},He.prototype.Ay=function(){this.gb=!1,this.Oq=this.jo=null,this.Pq=NaN,this.Kv=this.fc.F;for(var t=this.fc.n,e=t.length,i=0;i<e;i++)t[i].Ay()},He.prototype.sh=function(){var t=this.vv;t.Qa(),isNaN(this.No)||isNaN(this.Lo)?t.m(0,0,0,0):t.m(0,0,this.No,this.Lo),Ue(this,t,!1),xt(t,0,0,0,0),t.freeze()},He.prototype.computeBoundsWithoutOrigin=He.prototype.AH=function(){var t=new pt;return Ue(this,t,!0),t},He.prototype.normalize=He.prototype.normalize=function(){this.P&&r.ma(this);var t=this.AH();return this.offset(-t.x,-t.y),new ut(-t.x,-t.y)},He.prototype.offset=He.prototype.offset=function(t,e){return this.P&&r.ma(this),this.transform(1,0,0,1,t,e),this},He.prototype.scale=He.prototype.scale=function(t,e){return this.P&&r.ma(this),this.transform(t,0,0,e,0,0),this},He.prototype.rotate=He.prototype.rotate=function(t,e,i){this.P&&r.ma(this),void 0===e&&(e=0),void 0===i&&(i=0);var n=r.Wg();return n.reset(),n.rotate(t,e,i),this.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),r.bf(n),this},He.prototype.transform=He.prototype.transform=function(t,e,i,n,o,a){var s=0,l=0;switch(this.type){case It:case Ot:case Et:s=this.Cc,l=this.Mc,this.Cc=s*t+l*i+o,this.Mc=s*e+l*n+a,s=this.yb,l=this.Gb,this.yb=s*t+l*i+o,this.Gb=s*e+l*n+a;break;case qt:for(var h=this.fc.n,u=h.length,c=0;c<u;c++){s=(f=h[c]).ha,l=f.fa;f.ha=s*t+l*i+o,f.fa=s*e+l*n+a;for(var f,d=(f=f.wb.n).length,p=0;p<d;p++){var y=f[p];switch(y.type){case _t:case Vt:s=y.C,l=y.D,y.C=s*t+l*i+o,y.D=s*e+l*n+a;break;case Ht:s=y.wc,l=y.Rc,y.wc=s*t+l*i+o,y.Rc=s*e+l*n+a,s=y.Ch,l=y.Dh,y.Ch=s*t+l*i+o,y.Dh=s*e+l*n+a,s=y.C,l=y.D,y.C=s*t+l*i+o,y.D=s*e+l*n+a;break;case Kt:s=y.wc,l=y.Rc,y.wc=s*t+l*i+o,y.Rc=s*e+l*n+a,s=y.C,l=y.D,y.C=s*t+l*i+o,y.D=s*e+l*n+a;break;case Wt:s=y.la,l=y.ra,y.la=s*t+l*i+o,y.ra=s*e+l*n+a,0!==e&&(0>(s=180*Math.atan2(e,t)/Math.PI)&&(s+=360),y.ze+=s),0>t&&(y.ze=180-y.ze,y.uf=-y.uf),0>n&&(y.ze=-y.ze,y.uf=-y.uf),y.radiusX*=Math.sqrt(t*t+i*i),void 0!==y.radiusY&&(y.radiusY*=Math.sqrt(e*e+n*n));break;case Ut:s=y.C,l=y.D,y.C=s*t+l*i+o,y.D=s*e+l*n+a,0!==e&&(0>(s=180*Math.atan2(e,t)/Math.PI)&&(s+=360),y.Kj+=s),0>t&&(y.Kj=180-y.Kj,y.$l=!y.$l),0>n&&(y.Kj=-y.Kj,y.$l=!y.$l),y.radiusX*=Math.sqrt(t*t+i*i),y.radiusY*=Math.sqrt(e*e+n*n);break;default:r.k("Unknown Segment type: "+y.type)}}}}return this.gb=!0,this},He.prototype.Ia=function(t,e,i,n){var o=t.x,a=t.y,s=this.ab.x-20;t=t.y;for(var l=0,h=0,u=0,c=0,f=0,d=0,p=this.fc.n,y=p.length,v=0;v<y;v++){var m=p[v];if(m.pu){if(i&&m.Ia(o,a,e))return!0;for(var g=m.wb,b=h=m.ha,x=u=m.fa,w=g.n,k=0;k<=g.length;k++){var M,S;switch(k!==g.length?(S=(M=w[k]).type,f=M.C,d=M.D):(S=_t,f=b,d=x),S){case Vt:if(c=Je(o,a,s,t,h,u,b,x),isNaN(c))return!0;l+=c,b=f,x=d;break;case _t:if(c=Je(o,a,s,t,h,u,f,d),isNaN(c))return!0;l+=c;break;case Ht:l+=c=Le(h,u,M.wc,M.Rc,M.Ch,M.Dh,f,d,s,t,o,a,.5);break;case Kt:l+=c=Le(h,u,(h+2*M.wc)/3,(u+2*M.Rc)/3,(2*M.wc+f)/3,(2*M.Rc+d)/3,f,d,s,t,o,a,.5);break;case Wt:case Ut:var T=(S=M.type===Wt?ti(M,m):ei(M,m,h,u)).length;if(0===T){if(c=Je(o,a,s,t,h,u,M.la,M.ra),isNaN(c))return!0;l+=c;break}for(var P=null,N=0;N<T;N++){if(P=S[N],0===N){if(c=Je(o,a,s,t,h,u,P[0],P[1]),isNaN(c))return!0;l+=c}l+=c=Le(P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],s,t,o,a,.5)}null!==P&&(f=P[6],d=P[7]);break;default:r.k("Unknown Segment type: "+M.type)}h=f,u=d}if(0!==l)return!0;l=0}else if(m.Ia(o,a,n?e:e+2))return!0}return 0!==l},He.prototype.getPointAlongPath=He.prototype.fI=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=new ut),this.type===It)return e.m(this.ha+t*(this.C-this.ha),this.fa+t*(this.D-this.fa)),e;for(var i=this.Cx,n=this.Zt,o=i.length,r=this.$t*t,a=0,s=0;s<o;s++)for(var l=n[s],h=l.length,u=0;u<h;u++){var c=l[u];if(a+c>=r)return n=(r-a)/c,s=(i=i[s])[2*u],o=i[2*u+1],e.m(s+(i[2*u+2]-s)*n,o+(i[2*u+3]-o)*n),e;a+=c}return e.m(NaN,NaN),e},He.prototype.getAngleAlongPath=He.prototype.hF=function(t){0>t?t=0:1<t&&(t=1);var e=0;if(this.type===It)return 180*Math.atan2(this.D-this.fa,this.C-this.ha)/Math.PI;e=this.Cx;for(var i=this.Zt,n=e.length,o=this.$t*t,r=0,a=0;a<n;a++){var s=i[a],l=s.length;for(t=0;t<l;t++){var h=s[t];if(r+h>=o)return e=e[a],180*Math.atan2(e[2*t+3]-e[2*t+1],e[2*t+2]-e[2*t])/Math.PI;r+=h}}return NaN},He.prototype.getFractionForPoint=He.prototype.bI=function(t){if(this.type===It){var e=this.ha,i=this.fa,n=this.C,o=this.D;if(e!==n||i!==o){var a=t.x;t=t.y;var s=0,l=0;return e===n?(i<o?(s=i,l=o):(s=o,l=i),t<=s?s===i?0:1:t>=l?l===i?0:1:Math.abs(t-i)/(l-s)):i===o?(e<n?(s=e,l=n):(s=n,l=e),a<=s?s===e?0:1:a>=l?l===e?0:1:Math.abs(a-e)/(l-s)):((a-e)*(a-e)+(t-i)*(t-i))/((n-e)*(n-e)+(o-i)*(o-i))}}else{if(this.type!==Ot){o=this.Cx,s=this.Zt,l=this.$t,g=r.K(),i=1/0,e=n=0,a=o.length;for(var h=b=0,u=0;u<a;u++)for(var c=o[u],f=s[u],d=c.length,p=0;p<d;p+=2){var y=c[p],v=c[p+1];if(0!==p){je(b,h,y,v,t.x,t.y,g);var m=(g.x-t.x)*(g.x-t.x)+(g.y-t.y)*(g.y-t.y);m<i&&(i=m,n=e,n+=Math.sqrt((g.x-b)*(g.x-b)+(g.y-h)*(g.y-h))),e+=f[(p-2)/2]}b=y,h=v}return r.v(g),0>(t=n/l)?0:1<t?1:t}if(e=this.ha,i=this.fa,n=this.C,o=this.D,e!==n||i!==o){var g=2*(s=n-e)+2*(l=o-i),a=t.x;t=t.y,a=Math.min(Math.max(a,e),n),t=Math.min(Math.max(t,i),o);var e=Math.abs(a-e),i=(n=Math.abs(a-n),Math.abs(t-i)),o=Math.abs(t-o),b=Math.min(e,n,i,o);if(b===i)return a/g;if(b===n)return(s+t)/g;if(b===o)return(2*s+l-a)/g;if(b===e)return(2*s+2*l-t)/g}}return 0},r.u(He,{Cx:null},function(){return Ye(this),this.jo}),r.u(He,{Zt:null},function(){return Ye(this),this.Oq}),r.u(He,{$t:null},function(){var t=this.Pq;if(isNaN(t)){if(this.type===It){t=Math.abs(this.C-this.ha);var e=Math.abs(this.D-this.fa);t=Math.sqrt(t*t+e*e)}else if(this.type===Ot)t=2*(t=Math.abs(this.C-this.ha))+2*(e=Math.abs(this.D-this.fa));else for(var i=(e=this.Zt).length,n=t=0;n<i;n++)for(var o=e[n],r=o.length,a=0;a<r;a++)t+=o[a];this.Pq=t}return t}),r.defineProperty(He,{type:"type"},function(){return this.na},function(t){this.na!==t&&(this.P&&r.ma(this,t),this.na=t,this.gb=!0)}),r.defineProperty(He,{ha:"startX"},function(){return this.Cc},function(t){this.Cc!==t&&(this.P&&r.ma(this,t),this.Cc=t,this.gb=!0)}),r.defineProperty(He,{fa:"startY"},function(){return this.Mc},function(t){this.Mc!==t&&(this.P&&r.ma(this,t),this.Mc=t,this.gb=!0)}),r.defineProperty(He,{C:"endX"},function(){return this.yb},function(t){this.yb!==t&&(this.P&&r.ma(this,t),this.yb=t,this.gb=!0)}),r.defineProperty(He,{D:"endY"},function(){return this.Gb},function(t){this.Gb!==t&&(this.P&&r.ma(this,t),this.Gb=t,this.gb=!0)}),r.defineProperty(He,{fc:"figures"},function(){return this.Rj},function(t){this.Rj!==t&&(this.P&&r.ma(this,t),this.Rj=t,this.gb=!0)}),He.prototype.add=He.prototype.add=function(t){return this.Rj.add(t),this},He.prototype.setSpots=function(t,e,i,n,o,a,s,l){return this.P&&r.ma(this),this.gi=new Mt(t,e,o,a).freeze(),this.hi=new Mt(i,n,s,l).freeze(),this},r.defineProperty(He,{A:"spot1"},function(){return this.gi},function(t){this.P&&r.ma(this,t),this.gi=t.S()}),r.defineProperty(He,{B:"spot2"},function(){return this.hi},function(t){this.P&&r.ma(this,t),this.hi=t.S()}),r.defineProperty(He,{ae:"defaultStretch"},function(){return this.Gi},function(t){this.P&&r.ma(this,t),this.Gi=t}),r.u(He,{ab:"bounds"},function(){return this.Ix()&&(this.Ay(),this.sh()),this.vv}),r.ga("PathFigure",Qe),r.mi(Qe),Qe.prototype.copy=function(){var t=new Qe;t.Fm=this.Fm,t.Oo=this.Oo,t.Cc=this.Cc,t.Mc=this.Mc;for(var e=this.jp.n,i=e.length,n=t.jp,o=0;o<i;o++){var r=e[o].copy();n.add(r)}return t.Jw=this.Jw,t.gb=this.gb,t},Qe.prototype.equalsApprox=Qe.prototype.Oc=function(t){if(!(t instanceof Qe&&we(this.ha,t.ha)&&we(this.fa,t.fa)))return!1;var e=this.wb.n;t=t.wb.n;var i=e.length;if(i!==t.length)return!1;for(var n=0;n<i;n++)if(!e[n].Oc(t[n]))return!1;return!0},(i=Qe.prototype).toString=function(t){void 0===t&&(t=-1);for(var e=0>t?"M"+this.ha.toString()+" "+this.fa.toString():"M"+this.ha.toFixed(t)+" "+this.fa.toFixed(t),i=this.wb.n,n=i.length,o=0;o<n;o++)e+=" "+i[o].toString(t);return e},i.freeze=function(){this.P=!0,(e=this.wb).freeze();for(var t=e.n,e=e.length,i=0;i<e;i++)t[i].freeze();return this},i.Qa=function(){this.P=!1,(t=this.wb).Qa();for(var t,e=(t=t.n).length,i=0;i<e;i++)t[i].Qa();return this},i.Ix=function(){if(this.gb)return!0;var t=this.wb;if(this.Jw!==t.F)return!0;for(var e=(t=t.n).length,i=0;i<e;i++)if(t[i].gb)return!0;return!1},i.Ay=function(){this.gb=!1;var t=this.wb;this.Jw=t.F;for(var e=(t=t.n).length,i=0;i<e;i++){var n=t[i];n.gb=!1,n.Jh=null}},r.defineProperty(Qe,{pu:"isFilled"},function(){return this.Fm},function(t){this.P&&r.ma(this,t),this.Fm=t}),r.defineProperty(Qe,{cm:"isShadowed"},function(){return this.Oo},function(t){this.P&&r.ma(this,t),this.Oo=t}),r.defineProperty(Qe,{ha:"startX"},function(){return this.Cc},function(t){this.P&&r.ma(this,t),this.Cc=t,this.gb=!0}),r.defineProperty(Qe,{fa:"startY"},function(){return this.Mc},function(t){this.P&&r.ma(this,t),this.Mc=t,this.gb=!0}),r.defineProperty(Qe,{wb:"segments"},function(){return this.jp},function(t){this.P&&r.ma(this,t),this.jp=t,this.gb=!0}),Qe.prototype.add=Qe.prototype.add=function(t){return this.jp.add(t),this},Qe.prototype.Ia=function(t,e,i){for(var n=this.ha,o=this.fa,a=n,s=o,l=this.wb.n,h=l.length,u=0;u<h;u++){var c=l[u];switch(c.type){case Vt:a=c.C,s=c.D,n=c.C,o=c.D;break;case _t:if(Me(n,o,c.C,c.D,i,t,e))return!0;n=c.C,o=c.D;break;case Ht:if(Se(n,o,c.wc,c.Rc,c.Ch,c.Dh,c.C,c.D,.5,t,e,i))return!0;n=c.C,o=c.D;break;case Kt:if(Ce(n,o,c.wc,c.Rc,c.C,c.D,.5,t,e,i))return!0;n=c.C,o=c.D;break;case Wt:case Ut:var f=c.type===Wt?ti(c,this):ei(c,this,n,o),d=f.length;if(0===d){if(Me(n,o,c.la,c.ra,i,t,e))return!0;n=c.la,o=c.ra;break}for(var p=null,y=0;y<d;y++)if(p=f[y],0===y&&Me(n,o,p[0],p[1],i,t,e)||Se(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],.5,t,e,i))return!0;null!==p&&(n=p[6],o=p[7]);break;default:r.k("Unknown Segment type: "+c.type)}if(c.Gx&&(n!==a||o!==s)&&Me(n,o,a,s,i,t,e))return!0}return!1},r.ga("PathSegment",Ze),r.mi(Ze),Ze.prototype.copy=function(){var t=new Ze;return t.na=this.na,t.yb=this.yb,t.Gb=this.Gb,t.Jd=this.Jd,t.We=this.We,t.mh=this.mh,t.Dg=this.Dg,t.So=this.So,t.no=this.no,t.Rh=this.Rh,t.gb=this.gb,t},Ze.prototype.equalsApprox=Ze.prototype.Oc=function(t){if(!(t instanceof Ze)||this.type!==t.type||this.Gx!==t.Gx)return!1;switch(this.type){case Vt:case _t:return we(this.C,t.C)&&we(this.D,t.D);case Ht:return we(this.C,t.C)&&we(this.D,t.D)&&we(this.wc,t.wc)&&we(this.Rc,t.Rc)&&we(this.Ch,t.Ch)&&we(this.Dh,t.Dh);case Kt:return we(this.C,t.C)&&we(this.D,t.D)&&we(this.wc,t.wc)&&we(this.Rc,t.Rc);case Wt:return we(this.ze,t.ze)&&we(this.uf,t.uf)&&we(this.la,t.la)&&we(this.ra,t.ra)&&we(this.radiusX,t.radiusX)&&we(this.radiusY,t.radiusY);case Ut:return this.$l===t.$l&&this.Jx===t.Jx&&we(this.Kj,t.Kj)&&we(this.C,t.C)&&we(this.D,t.D)&&we(this.radiusX,t.radiusX)&&we(this.radiusY,t.radiusY);default:return!1}},Ze.prototype.hc=function(t){t.Ge===Ze?this.type=t:r.Ij(this,t)},Ze.prototype.toString=function(t){void 0===t&&(t=-1);var e="";switch(this.type){case Vt:e=0>t?"M"+this.C.toString()+" "+this.D.toString():"M"+this.C.toFixed(t)+" "+this.D.toFixed(t);break;case _t:e=0>t?"L"+this.C.toString()+" "+this.D.toString():"L"+this.C.toFixed(t)+" "+this.D.toFixed(t);break;case Ht:e=0>t?"C"+this.wc.toString()+" "+this.Rc.toString()+" "+this.Ch.toString()+" "+this.Dh.toString()+" "+this.C.toString()+" "+this.D.toString():"C"+this.wc.toFixed(t)+" "+this.Rc.toFixed(t)+" "+this.Ch.toFixed(t)+" "+this.Dh.toFixed(t)+" "+this.C.toFixed(t)+" "+this.D.toFixed(t);break;case Kt:e=0>t?"Q"+this.wc.toString()+" "+this.Rc.toString()+" "+this.C.toString()+" "+this.D.toString():"Q"+this.wc.toFixed(t)+" "+this.Rc.toFixed(t)+" "+this.C.toFixed(t)+" "+this.D.toFixed(t);break;case Wt:e=0>t?"B"+this.ze.toString()+" "+this.uf.toString()+" "+this.la.toString()+" "+this.ra.toString()+" "+this.radiusX:"B"+this.ze.toFixed(t)+" "+this.uf.toFixed(t)+" "+this.la.toFixed(t)+" "+this.ra.toFixed(t)+" "+this.radiusX;break;case Ut:e=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.Kj.toString()+" "+(this.Jx?1:0)+" "+(this.$l?1:0)+" "+this.C.toString()+" "+this.D.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.Kj.toFixed(t)+" "+(this.Jx?1:0)+" "+(this.$l?1:0)+" "+this.C.toFixed(t)+" "+this.D.toFixed(t);break;default:e=this.type.toString()}return e+(this.Rh?"z":"")},Ze.Move=Vt=r.p(Ze,"Move",0),Ze.Line=_t=r.p(Ze,"Line",1),Ze.Bezier=Ht=r.p(Ze,"Bezier",2),Ze.QuadraticBezier=Kt=r.p(Ze,"QuadraticBezier",3),Ze.Arc=Wt=r.p(Ze,"Arc",4),Ze.SvgArc=Ut=r.p(Ze,"SvgArc",4),Ze.prototype.freeze=function(){return this.P=!0,this},Ze.prototype.Qa=function(){return this.P=!1,this},Ze.prototype.close=Ze.prototype.close=function(){return this.Rh=!0,this},r.defineProperty(Ze,{Gx:"isClosed"},function(){return this.Rh},function(t){this.Rh!==t&&(this.Rh=t,this.gb=!0)}),r.defineProperty(Ze,{type:"type"},function(){return this.na},function(t){this.P&&r.ma(this,t),this.na=t,this.gb=!0}),r.defineProperty(Ze,{C:"endX"},function(){return this.yb},function(t){this.P&&r.ma(this,t),this.yb=t,this.gb=!0}),r.defineProperty(Ze,{D:"endY"},function(){return this.Gb},function(t){this.P&&r.ma(this,t),this.Gb=t,this.gb=!0}),r.defineProperty(Ze,{wc:"point1X"},function(){return this.Jd},function(t){this.P&&r.ma(this,t),this.Jd=t,this.gb=!0}),r.defineProperty(Ze,{Rc:"point1Y"},function(){return this.We},function(t){this.P&&r.ma(this,t),this.We=t,this.gb=!0}),r.defineProperty(Ze,{Ch:"point2X"},function(){return this.mh},function(t){this.P&&r.ma(this,t),this.mh=t,this.gb=!0}),r.defineProperty(Ze,{Dh:"point2Y"},function(){return this.Dg},function(t){this.P&&r.ma(this,t),this.Dg=t,this.gb=!0}),r.defineProperty(Ze,{la:"centerX"},function(){return this.Jd},function(t){this.P&&r.ma(this,t),this.Jd=t,this.gb=!0}),r.defineProperty(Ze,{ra:"centerY"},function(){return this.We},function(t){this.P&&r.ma(this,t),this.We=t,this.gb=!0}),r.defineProperty(Ze,{radiusX:"radiusX"},function(){return this.mh},function(t){0>t&&r.Fa(t,">= zero",Ze,"radiusX"),this.P&&r.ma(this,t),this.mh=t,this.gb=!0}),r.defineProperty(Ze,{radiusY:"radiusY"},function(){return this.Dg},function(t){0>t&&r.Fa(t,">= zero",Ze,"radiusY"),this.P&&r.ma(this,t),this.Dg=t,this.gb=!0}),r.defineProperty(Ze,{ze:"startAngle"},function(){return this.yb},function(t){this.yb!==t&&(this.P&&r.ma(this,t),0>(t%=360)&&(t+=360),this.yb=t,this.gb=!0)}),r.defineProperty(Ze,{uf:"sweepAngle"},function(){return this.Gb},function(t){this.P&&r.ma(this,t),360<t&&(t=360),-360>t&&(t=-360),this.Gb=t,this.gb=!0}),r.defineProperty(Ze,{$l:"isClockwiseArc"},function(){return this.no},function(t){this.P&&r.ma(this,t),this.no=t,this.gb=!0}),r.defineProperty(Ze,{Jx:"isLargeArc"},function(){return this.So},function(t){this.P&&r.ma(this,t),this.So=t,this.gb=!0}),r.defineProperty(Ze,{Kj:"xAxisRotation"},function(){return this.Jd},function(t){0>(t%=360)&&(t+=360),this.P&&r.ma(this,t),this.Jd=t,this.gb=!0}),r.ga("InputEvent",ii),ii.prototype.copy=function(){var t=new ii;return t.aa=this.aa,t.Zz.assign(this.hf),t.dz.assign(this.da),t.ow=this.ow,t.sv=this.sv,t.tv=this.tv,t.cw=this.cw,t.Gv=this.Gv,t.Tw=this.Tw,t.uv=this.uv,t.Ev=this.Ev,t.Zv=this.Zv,t.Pv=this.Pv,t.Mj=this.Mj,t.Cr=this.Cr,t.Rw=this.Rw,t.Qw=this.Qw,t.Gg=this.Gg,t},ii.prototype.toString=function(){var t="^";return 0!==this.md&&(t+="M:"+this.md),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.re&&(t+="C:"+this.re),0!==this.Ck&&(t+="D:"+this.Ck),this.tc&&(t+="h"),this.bubbles&&(t+="b"),null!==this.da&&(t+="@"+this.da.toString()),t},r.defineProperty(ii,{g:"diagram"},function(){return this.aa},function(t){this.aa=t}),r.defineProperty(ii,{hf:"viewPoint"},function(){return this.Zz},function(t){r.G(t,ut,ii,"viewPoint"),this.Zz.assign(t)}),r.defineProperty(ii,{da:"documentPoint"},function(){return this.dz},function(t){r.G(t,ut,ii,"documentPoint"),this.dz.assign(t)}),ii.prototype.getMultiTouchViewPoint=ii.prototype.Dx=function(t,e){var i=this.g;return null===i?e:(mr(i,this.event,t,e),e)},ii.prototype.getMultiTouchDocumentPoint=function(t,e){var i=this.g;return null===i?e:(mr(i,this.event,t,e),e.assign(i.OB(e)),e)},r.defineProperty(ii,{md:"modifiers"},function(){return this.ow},function(t){this.ow=t}),r.defineProperty(ii,{button:"button"},function(){return this.sv},function(t){if(this.sv=t,null===this.event)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}),r.defineProperty(ii,{buttons:"buttons"},function(){return this.tv},function(t){this.tv=t}),r.defineProperty(ii,{key:"key"},function(){return this.cw},function(t){this.cw=t}),r.defineProperty(ii,{Dk:"down"},function(){return this.Gv},function(t){this.Gv=t}),r.defineProperty(ii,{up:"up"},function(){return this.Tw},function(t){this.Tw=t}),r.defineProperty(ii,{re:"clickCount"},function(){return this.uv},function(t){this.uv=t}),r.defineProperty(ii,{Ck:"delta"},function(){return this.Ev},function(t){this.Ev=t}),r.defineProperty(ii,{tu:"isMultiTouch"},function(){return this.Zv},function(t){this.Zv=t}),r.defineProperty(ii,{tc:"handled"},function(){return this.Pv},function(t){this.Pv=t}),r.defineProperty(ii,{bubbles:"bubbles"},function(){return this.Mj},function(t){this.Mj=t}),r.defineProperty(ii,{event:"event"},function(){return this.Cr},function(t){this.Cr=t}),r.u(ii,{yj:"isTouchEvent"},function(){var t=e.TouchEvent,i=this.event;return!!(t&&i instanceof t)||(t=e.PointerEvent)&&i instanceof t&&("touch"===i.pointerType||"pen"===i.pointerType)}),r.u(ii,{yh:"isMac"},function(){return r.yh}),r.defineProperty(ii,{timestamp:"timestamp"},function(){return this.Rw},function(t){this.Rw=t}),r.defineProperty(ii,{If:"targetDiagram"},function(){return this.Qw},function(t){this.Qw=t}),r.defineProperty(ii,{Ae:"targetObject"},function(){return this.Gg},function(t){this.Gg=t}),r.defineProperty(ii,{control:"control"},function(){return 0!=(1&this.md)},function(t){this.md=t?1|this.md:-2&this.md}),r.defineProperty(ii,{shift:"shift"},function(){return 0!=(4&this.md)},function(t){this.md=t?4|this.md:-5&this.md}),r.defineProperty(ii,{alt:"alt"},function(){return 0!=(2&this.md)},function(t){this.md=t?2|this.md:-3&this.md}),r.defineProperty(ii,{Cu:"meta"},function(){return 0!=(8&this.md)},function(t){this.md=t?8|this.md:-9&this.md}),r.defineProperty(ii,{left:"left"},function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(1&this.buttons):0===this.button},function(t){this.buttons=t?1|this.buttons:-2&this.buttons}),r.defineProperty(ii,{right:"right"},function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(2&this.buttons):2===this.button},function(t){this.buttons=t?2|this.buttons:-3&this.buttons}),r.defineProperty(ii,{xL:"middle"},function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(4&this.buttons):1===this.button},function(t){this.buttons=t?4|this.buttons:-5&this.buttons}),r.ga("DiagramEvent",ni),ni.prototype.copy=function(){var t=new ni;return t.aa=this.aa,t.Rb=this.Rb,t.Ow=this.Ow,t.xw=this.xw,t.Wq=this.Wq,t},ni.prototype.toString=function(){var t="*"+this.name;return null!==this.GB&&(t+=":"+this.GB.toString()),null!==this.iB&&(t+="("+this.iB.toString()+")"),t},r.defineProperty(ni,{g:"diagram"},function(){return this.aa},function(t){this.aa=t}),r.defineProperty(ni,{name:"name"},function(){return this.Rb},function(t){this.Rb=t}),r.defineProperty(ni,{GB:"subject"},function(){return this.Ow},function(t){this.Ow=t}),r.defineProperty(ni,{iB:"parameter"},function(){return this.xw},function(t){this.xw=t}),r.defineProperty(ni,{cancel:"cancel"},function(){return this.Wq},function(t){this.Wq!==t&&r.Qt("DiagramEvent.cancel","2.0"),this.Wq=t}),r.ga("ChangedEvent",oi),oi.Transaction=Jt=r.p(oi,"Transaction",-1),oi.Property=$t=r.p(oi,"Property",0),oi.Insert=Yt=r.p(oi,"Insert",1),oi.Remove=Xt=r.p(oi,"Remove",2),oi.prototype.clear=oi.prototype.clear=function(){this.Bs=this.Cs=this.Hs=this.Is=this.Fs=this.aa=this.ne=null},oi.prototype.copy=function(){var t=new oi;t.Xq=this.Xq,t.nw=this.nw,t.Vm=this.Vm,t.ne=this.ne,t.aa=this.aa,t.Fs=this.Fs;var e=this.Is;return t.Is=r.Pa(e)&&"function"==typeof e.S?e.S():e,e=this.Hs,t.Hs=r.Pa(e)&&"function"==typeof e.S?e.S():e,e=this.Cs,t.Cs=r.Pa(e)&&"function"==typeof e.S?e.S():e,e=this.Bs,t.Bs=r.Pa(e)&&"function"==typeof e.S?e.S():e,t},oi.prototype.hc=function(t){t.Ge===oi?this.Dc=t:r.Ij(this,t)},oi.prototype.toString=function(){var t="";t=this.Dc===Jt?t+"* ":this.Dc===$t?t+(null!==this.$?"!m":"!d"):t+(null!==this.$?"!m":"!d")+this.Dc;return this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.tf&&this.tf!==this.propertyName&&(t+=" "+this.tf),t+=": ",this.Dc===Jt?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=Pi(this.object)),null!==this.oldValue&&(t+="  old: "+Pi(this.oldValue)),null!==this.Dj&&(t+=" "+this.Dj),null!==this.newValue&&(t+="  new: "+Pi(this.newValue)),null!==this.Cj&&(t+=" "+this.Cj)),t},oi.prototype.getValue=oi.prototype.ka=function(t){return t?this.oldValue:this.newValue},oi.prototype.getParam=function(t){return t?this.Dj:this.Cj},oi.prototype.canUndo=oi.prototype.canUndo=function(){return null!==this.$||null!==this.g},oi.prototype.undo=oi.prototype.undo=function(){this.canUndo()&&(null!==this.$?this.$.mn(this,!0):null!==this.g&&this.g.mn(this,!0))},oi.prototype.canRedo=oi.prototype.canRedo=function(){return null!==this.$||null!==this.g},oi.prototype.redo=oi.prototype.redo=function(){this.canRedo()&&(null!==this.$?this.$.mn(this,!1):null!==this.g&&this.g.mn(this,!1))},r.defineProperty(oi,{$:"model"},function(){return this.ne},function(t){this.ne=t}),r.defineProperty(oi,{g:"diagram"},function(){return this.aa},function(t){this.aa=t}),r.defineProperty(oi,{Dc:"change"},function(){return this.Xq},function(t){this.Xq=t}),r.defineProperty(oi,{tf:"modelChange"},function(){return this.nw},function(t){this.nw=t}),r.defineProperty(oi,{propertyName:"propertyName"},function(){return this.Vm},function(t){this.Vm=t}),r.u(oi,{HF:"isTransactionFinished"},function(){return this.Xq===Jt&&("CommittedTransaction"===this.Vm||"FinishedUndo"===this.Vm||"FinishedRedo"===this.Vm)}),r.defineProperty(oi,{object:"object"},function(){return this.Fs},function(t){this.Fs=t}),r.defineProperty(oi,{oldValue:"oldValue"},function(){return this.Is},function(t){this.Is=t}),r.defineProperty(oi,{Dj:"oldParam"},function(){return this.Hs},function(t){this.Hs=t}),r.defineProperty(oi,{newValue:"newValue"},function(){return this.Cs},function(t){this.Cs=t}),r.defineProperty(oi,{Cj:"newParam"},function(){return this.Bs},function(t){this.Bs=t}),r.ga("Model",ri),ri.prototype.cloneProtected=function(t){t.Rb=this.Rb,t.lr=this.lr,t.Oi=this.Oi,t.kk=this.kk,t.Wo=this.Wo,t.so=this.so,t.dr=this.dr,t.cr=this.cr,t.Nq=this.Nq,t.Qm=this.Qm},ri.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},ri.prototype.clear=ri.prototype.clear=function(){this.Fe=[],this.Kc.clear(),this.Hi.clear(),this.ja.clear()},(i=ri.prototype).toString=function(t){if(void 0===t&&(t=0),1<t)return this.JB();var e=(""!==this.name?this.name:"")+" Model";if(0<t){e+="\n node data:",t=this.hg;for(var i=r.Za(t),n=0;n<i;n++){var o=r.Ba(t,n);e=e+" "+this.qb(o)+":"+Pi(o)}}return e},i.bo=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.Rl&&(t+=',\n  "dataFormat": '+this.quote(this.Rl)),this.hb&&(t+=',\n  "isReadOnly": '+this.hb),"key"!==this.dm&&"string"==typeof this.dm&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.dm)),this.oA&&(t+=',\n  "copiesArrays": true'),this.nA&&(t+=',\n  "copiesArrayObjects": true'),"category"!==this.Sn&&"string"==typeof this.Sn&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.Sn)),t},i.Lu=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.Rl=t.dataFormat),t.isReadOnly&&(this.hb=t.isReadOnly),t.nodeKeyProperty&&(this.dm=t.nodeKeyProperty),t.copiesArrays&&(this.oA=t.copiesArrays),t.copiesArrayObjects&&(this.nA=t.copiesArrayObjects),t.nodeCategoryProperty&&(this.Sn=t.nodeCategoryProperty)},i.VB=function(){var t,e=this.Mk,i=!1;for(t in e)if(!ci(t,e[t])){i=!0;break}return e="",i&&(e=ai(this)),e+',\n  "nodeDataArray": '+ui(this,this.hg,!0)},i.lB=function(t){si(this,t),t=t.nodeDataArray,r.isArray(t)&&(this.Pu(t),this.hg=t)},i.WB=function(t){hi(this,t,"nodeKeyProperty"),this instanceof Li&&hi(this,t,"nodeParentKeyProperty");for(var e=new nt,i=new nt,n=(new nt).Nc(this.Kc.IF),o=new ht,r=t.hg,a=0;a<r.length;a++){var s=r[a],l=t.qb(s);if(void 0!==l){n.remove(l);var h=this.we(l);null===h?(e.add(l),i.add(s)):li(this,h,s,o)||i.add(s)}else this.YA(s),l=this.qb(s),e.add(l),i.add(s)}return r="",li(this,this.Mk,t.Mk,o)||(r+=ai(this)),0<e.count&&(r+=this.Ly+ui(this,e.xc(),!0)),0<i.count&&(r+=this.dC+ui(this,i.xc(),!0)),0<n.count&&(r+=this.Ny+ui(this,n.xc(),!0)),r},ri.prototype.computeJsonDifference=ri.prototype.computeJSONDifference=function(t,e){return r.G(t,ri,ri,"computeJsonDifference:newmodel"),void 0===e&&(e=this.constructor===ri?"go.Model":this.constructor===Ci?"go.GraphLinksModel":this.constructor===Li?"go.TreeModel":r.pf(this)),'{ "class": '+this.quote(e)+', "incremental": 1'+this.bo()+this.WB(t)+"}"},(i=ri.prototype).Ly=',\n  "insertedNodeKeys": ',i.dC=',\n  "modifiedNodeData": ',i.Ny=',\n  "removedNodeKeys": ',i.UB=function(t,e){var i=this,n=!1,o=new nt,r=new nt,a=new nt;t.Wf.each(function(t){t.$===i&&("nodeDataArray"===t.tf?t.Dc===Yt?o.add(t.newValue):t.Dc===Xt&&a.add(t.oldValue):i.Ie(t.object)?r.add(t.object):i.Mk===t.object&&t.Dc===$t&&(n=!0))});var s=new nt;o.each(function(t){s.add(i.qb(t)),e||r.add(t)});var l=new nt;a.each(function(t){l.add(i.qb(t)),e&&r.add(t)});var h="";return n&&(h+=ai(this)),0<s.count&&(h+=(e?this.Ny:this.Ly)+ui(this,s.xc(),!0)),0<r.count&&(h+=this.dC+ui(this,r.xc(),!0)),0<l.count&&(h+=(e?this.Ly:this.Ny)+ui(this,l.xc(),!0)),h},i.kB=function(t){si(this,t);var e=t.insertedNodeKeys,i=t.modifiedNodeData,n=new ht;if(r.isArray(i))for(var o=0;o<i.length;o++){var a=r.Ba(i,o),s=this.qb(a);void 0!==s&&null!==s&&n.set(s,a)}if(r.isArray(e)){o=r.Za(e);for(var l=0;l<o;l++)a=r.Ba(e,l),null===(s=this.we(a))&&(s=(s=n.get(a))?s:this.copyNodeData({}),this.uy(s,a),this.Il(s))}if(r.isArray(i))for(o=r.Za(i),l=0;l<o;l++)if(a=r.Ba(i,l),s=this.qb(a),null!==(s=this.we(s)))for(var h in a)"__gohashid"!==h&&h!==this.dm&&h!==this.lq&&this.setDataProperty(s,h,a[h]);if(t=t.removedNodeKeys,r.isArray(t))for(o=r.Za(t),l=0;l<o;l++)a=r.Ba(t,l),null!==(s=this.we(a))&&this.ly(s)},ri.prototype.toIncrementalJson=ri.prototype.toIncrementalJSON=function(t,e){r.G(t,oi,ri,"toIncrementalJson:e"),t.Dc!==Jt&&r.k("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var i=t.object;return t.HF&&i instanceof Bi?(void 0===e&&(e=this.constructor===ri?"go.Model":this.constructor===Ci?"go.GraphLinksModel":this.constructor===Li?"go.TreeModel":r.pf(this)),'{ "class": '+this.quote(e)+', "incremental": 1'+this.bo()+this.UB(i,"FinishedUndo"===t.propertyName)+"}"):'{ "incremental": 0 }'},ri.prototype.toJson=ri.prototype.toJSON=ri.prototype.JB=function(t){return void 0===t&&(t=this.constructor===ri?"go.Model":this.constructor===Ci?"go.GraphLinksModel":this.constructor===Li?"go.TreeModel":r.pf(this)),'{ "class": '+this.quote(t)+this.bo()+this.VB()+"}"},ri.prototype.applyIncrementalJson=ri.prototype.applyIncrementalJSON=function(t){var i=null;if("string"==typeof t)if(e.JSON&&e.JSON.parse)try{i=e.JSON.parse(t)}catch(t){}else r.trace("WARNING: no JSON.parse available");else"object"==typeof t?i=t:r.k("Unable to modify a Model from: "+t);var n=i.incremental;"number"!=typeof n&&r.k("Unable to apply non-incremental changes to Model: "+t),0!==n&&(this.Hb("applyIncrementalJson"),this.kB(i),this.Yc("applyIncrementalJson"))},ri.fromJson=ri.fromJSON=function(t,i){void 0===i&&(i=null),null!==i&&r.G(i,ri,ri,"fromJson:model");var o=null;if("string"==typeof t)if(e.JSON&&e.JSON.parse)try{o=e.JSON.parse(t)}catch(t){}else r.trace("WARNING: no JSON.parse available");else"object"==typeof t?o=t:r.k("Unable to construct a Model from: "+t);if(null===i){var a;a=null;var s=o.class;if("string"==typeof s)try{var l=null;0===s.indexOf("go.")?(s=s.substr(3),l=n[s]):void 0===(l=n[s])&&(l=e[s]),"function"==typeof l&&(a=new l)}catch(t){}null===a||a instanceof ri?i=a:r.k("Unable to construct a Model of declared class: "+o.class)}return null===i&&(i=new Ci),i.Lu(o),i.lB(o),i},ri.prototype.replaceJsonObjects=ri.prototype.Pu=function(t){if(r.isArray(t))for(var e=r.Za(t),i=0;i<e;i++){var a=r.Ba(t,i);r.Pa(a)&&r.DE(t,i,this.Pu(a))}else if(r.Pa(t)){for(i in t)if(a=t[i],r.Pa(a)&&(a=this.Pu(a),t[i]=a,"points"===i&&Array.isArray(a))){for(var s=0==a.length%2,l=0;l<a.length;l++)if("number"!=typeof a[l]){s=!1;break}if(s){for(s=new et(ut),l=0;l<a.length/2;l++)s.add(new ut(a[2*l],a[2*l+1]));s.freeze(),t[i]=s}}if("object"==typeof t){if(i=t,"NaN"===(a=t.class))i=NaN;else if("Date"===a)i=new Date(t.value);else if("go.Point"===a)i=new ut(pi(t.x),pi(t.y));else if("go.Size"===a)i=new dt(pi(t.width),pi(t.height));else if("go.Rect"===a)i=new pt(pi(t.x),pi(t.y),pi(t.width),pi(t.height));else if("go.Margin"===a)i=new wt(pi(t.top),pi(t.right),pi(t.bottom),pi(t.left));else if("go.Spot"===a)i="string"==typeof t.enum?y(t.enum):new Mt(pi(t.x),pi(t.y),pi(t.offsetX),pi(t.offsetY));else if("go.Brush"===a){if((i=new ja).type=o(ja,t.type),"string"==typeof t.color&&(i.color=t.color),t.start instanceof Mt&&(i.start=t.start),t.end instanceof Mt&&(i.end=t.end),"number"==typeof t.startRadius&&(i.$u=pi(t.startRadius)),"number"==typeof t.endRadius&&(i.St=pi(t.endRadius)),t=t.colorStops,r.Pa(t))for(e in t)i.addColorStop(parseFloat(e),t[e])}else"go.Geometry"===a?(e=null,(e="string"==typeof t.path?Gt(t.path):new He).type=o(He,t.type),"number"==typeof t.startX&&(e.ha=pi(t.startX)),"number"==typeof t.startY&&(e.fa=pi(t.startY)),"number"==typeof t.endX&&(e.C=pi(t.endX)),"number"==typeof t.endY&&(e.D=pi(t.endY)),t.spot1 instanceof Mt&&(e.A=t.spot1),t.spot2 instanceof Mt&&(e.B=t.spot2),i=e):"go.EnumValue"===a&&(0===(e=t.classType).indexOf("go.")&&(e=e.substr(3)),i=o(n[e],t.name));t=i}}return t},ri.prototype.quote=function(t){for(var e="",i=t.length,n=0;n<i;n++){var o=t[n];if('"'===o||"\\"===o)e+="\\"+o;else if("\b"===o)e+="\\b";else if("\f"===o)e+="\\f";else if("\n"===o)e+="\\n";else if("\r"===o)e+="\\r";else if("\t"===o)e+="\\t";else{var r=t.charCodeAt(n);e=16>r?e+"\\u000"+t.charCodeAt(n).toString(16):32>r?e+"\\u00"+t.charCodeAt(n).toString(16):8232===r?e+"\\u2028":8233===r?e+"\\u2029":e+o}}return'"'+e+'"'},ri.prototype.writeJsonValue=ri.prototype.dv=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?1/0===t?"9e9999":-1/0===t?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.dv(t.valueOf()):r.isArray(t)?ui(this,t):r.Pa(t)?di(this,t):"function"==typeof t?"null":t.toString()},r.defineProperty(ri,{name:"name"},function(){return this.Rb},function(t){var e=this.Rb;e!==t&&(r.j(t,"string",ri,"name"),this.Rb=t,this.h("name",e,t))}),r.defineProperty(ri,{Rl:"dataFormat"},function(){return this.lr},function(t){var e=this.lr;e!==t&&(r.j(t,"string",ri,"dataFormat"),this.lr=t,this.h("dataFormat",e,t))}),r.defineProperty(ri,{hb:"isReadOnly"},function(){return this.Oi},function(t){var e=this.Oi;e!==t&&(r.j(t,"boolean",ri,"isReadOnly"),this.Oi=t,this.h("isReadOnly",e,t))}),r.defineProperty(ri,{Mk:"modelData"},function(){return this.Cz},function(t){var e=this.Cz;e!==t&&(r.j(t,"object",ri,"modelData"),this.Cz=t,this.h("modelData",e,t),this.Ib(t))}),ri.prototype.addChangedListener=ri.prototype.gn=function(t){r.j(t,"function",ri,"addChangedListener:listener"),null===this.gk&&(this.gk=new et("function")),this.gk.add(t)},ri.prototype.removeChangedListener=ri.prototype.Nu=function(t){r.j(t,"function",ri,"removeChangedListener:listener"),null!==this.gk&&(this.gk.remove(t),0===this.gk.count&&(this.gk=null))},ri.prototype.jx=function(t){if(this.cb||this.ja.rF(t),null!==this.gk)for(var e=this.gk,i=e.length,n=0;n<i;n++)e.ea(n)(t)},ri.prototype.raiseChangedEvent=ri.prototype.cd=function(t,e,i,n,o,r,a){yi(this,"",t,e,i,n,o,r,a)},ri.prototype.raiseChanged=ri.prototype.h=function(t,e,i,n,o){yi(this,"",$t,t,this,e,i,n,o)},ri.prototype.raiseDataChanged=ri.prototype.jB=function(t,e,i,n,o,r){yi(this,"",$t,e,t,i,n,o,r)},r.defineProperty(ri,{ja:"undoManager"},function(){return this.Yz},function(t){var e=this.Yz;e!==t&&(r.G(t,Ii,ri,"undoManager"),null!==e&&e.rJ(this),this.Yz=t,null!==t&&t.lH(this))}),r.defineProperty(ri,{cb:"skipsUndoManager"},function(){return this.fj},function(t){r.j(t,"boolean",ri,"skipsUndoManager"),this.fj=t}),ri.prototype.mn=function(t,e){if(null!==t&&t.$===this)if(t.Dc===$t){var i=t.object,n=t.propertyName,o=t.ka(e);r.Ma(i,n,o)}else t.Dc===Yt?(i=t.Cj,"nodeDataArray"===t.tf?(n=t.newValue,r.Pa(n)&&"number"==typeof i&&(o=this.qb(n),e?(r.Ba(this.Fe,i)===n&&r.Jg(this.Fe,i),void 0!==o&&this.Kc.remove(o)):(r.Ba(this.Fe,i)!==n&&r.qh(this.Fe,i,n),void 0!==o&&this.Kc.add(o,n)))):""===t.tf?(n=t.object,!r.isArray(n)&&t.propertyName&&(n=r.ub(t.object,t.propertyName)),r.isArray(n)&&"number"==typeof i&&(o=t.newValue,e?r.Jg(n,i):r.qh(n,i,o))):r.k("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.Dc===Xt?(i=t.Dj,"nodeDataArray"===t.tf?(n=t.oldValue,r.Pa(n)&&"number"==typeof i&&(o=this.qb(n),e?(r.Ba(this.Fe,i)!==n&&r.qh(this.Fe,i,n),void 0!==o&&this.Kc.add(o,n)):(r.Ba(this.Fe,i)===n&&r.Jg(this.Fe,i),void 0!==o&&this.Kc.remove(o)))):""===t.tf?(n=t.object,!r.isArray(n)&&t.propertyName&&(n=r.ub(t.object,t.propertyName)),r.isArray(n)&&"number"==typeof i&&(o=t.oldValue,e?r.qh(n,i,o):r.Jg(n,i))):r.k("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.Dc!==Jt&&r.k("unknown ChangedEvent: "+t.toString())},ri.prototype.startTransaction=ri.prototype.Hb=function(t){return this.ja.Hb(t)},ri.prototype.commitTransaction=ri.prototype.Yc=function(t){return this.ja.Yc(t)},ri.prototype.rollbackTransaction=ri.prototype.fm=function(){return this.ja.fm()},ri.prototype.commit=function(t,e){var i=e;void 0===i&&(i="");var n=this.cb;null===i&&(this.cb=!0,i=""),this.ja.Hb(i);var o=!1;try{t(this),o=!0}finally{o?this.ja.Yc(i):this.ja.fm(),this.cb=n}},ri.prototype.updateTargetBindings=ri.prototype.Ib=function(t,e){void 0===e&&(e=""),yi(this,"SourceChanged",Jt,e,t,null,null)},r.defineProperty(ri,{dm:"nodeKeyProperty"},function(){return this.kk},function(t){var e=this.kk;e!==t&&(vi(t,ri,"nodeKeyProperty"),""===t&&r.k("Model.nodeKeyProperty may not be the empty string"),0<this.Kc.count&&r.k("Cannot set Model.nodeKeyProperty when there is existing node data"),this.kk=t,this.h("nodeKeyProperty",e,t))}),ri.prototype.getKeyForNodeData=ri.prototype.qb=function(t){if(null!==t){var e=this.kk;if(""!==e&&void 0!==(e=r.ub(t,e))){if(mi(e))return e;r.k("Key value for node data "+t+" is not a number or a string: "+e)}}},ri.prototype.setKeyForNodeData=ri.prototype.uy=function(t,e){if(void 0!==e&&null!==e&&mi(e)||r.Ed(e,"number or string",ri,"setKeyForNodeData:key"),null!==t){var i=this.kk;if(""!==i)if(this.Ie(t)){var n=r.ub(t,i);n!==e&&null===this.we(e)&&(r.Ma(t,i,e),this.Kc.remove(n),this.Kc.add(e,t),yi(this,"nodeKey",$t,i,t,n,e),"string"==typeof i&&this.Ib(t,i),this.Ou(n,e))}else r.Ma(t,i,e)}},r.defineProperty(ri,{qL:"makeUniqueKeyFunction"},function(){return this.Wo},function(t){var e=this.Wo;e!==t&&(null!==t&&r.j(t,"function",ri,"makeUniqueKeyFunction"),this.Wo=t,this.h("makeUniqueKeyFunction",e,t))}),ri.prototype.containsNodeData=ri.prototype.Ie=function(t){var e=this.qb(t);return void 0!==e&&this.Kc.ka(e)===t},ri.prototype.findNodeDataForKey=ri.prototype.we=function(t){return null===t&&r.k("Model.findNodeDataForKey:key must not be null"),void 0!==t&&mi(t)?this.Kc.ka(t):null},r.defineProperty(ri,{hg:"nodeDataArray"},function(){return this.Fe},function(t){var e=this.Fe;if(e!==t){r.gA(t,ri,"nodeDataArray"),this.Kc.clear(),this.QB();for(var i=r.Za(t),n=0;n<i;n++){var o=r.Ba(t,n);if(!r.Pa(o))return void r.k("Model.nodeDataArray must only contain Objects, not: "+o);r.Xp(o)}this.Fe=t;var a=new et(Object);for(n=0;n<i;n++){o=r.Ba(t,n);var s=this.qb(o);void 0===s?a.add(o):null!==this.Kc.ka(s)?a.add(o):this.Kc.add(s,o)}for(n=a.i;n.next();)o=n.value,this.YA(o),void 0!==(a=this.qb(o))&&this.Kc.add(a,o);for(yi(this,"nodeDataArray",$t,"nodeDataArray",this,e,t),n=0;n<i;n++)o=r.Ba(t,n),this.tq(o),this.sq(o);this.GE(),r.AI(t)||(this.hb=!0)}}),ri.prototype.makeNodeDataKeyUnique=ri.prototype.YA=function(t){if(null!==t){var e=this.kk;if(""!==e){var i=this.qb(t);if(void 0===i||this.Kc.contains(i)){var n=this.Wo;if(null!==n&&(void 0!==(i=n(this,t))&&null!==i&&!this.Kc.contains(i)))return void r.Ma(t,e,i);if("string"==typeof i){for(n=2;this.Kc.contains(i+n);)n++;r.Ma(t,e,i+n)}else if(void 0===i||"number"==typeof i){for(n=-this.Kc.count-1;this.Kc.contains(n);)n--;r.Ma(t,e,n)}else r.k("Model.getKeyForNodeData returned something other than a string or a number: "+i)}}}},ri.prototype.addNodeData=ri.prototype.Il=function(t){null!==t&&(r.Xp(t),this.Ie(t)||gi(this,t,!0))},ri.prototype.addNodeDataCollection=function(t){if(r.isArray(t))for(var e=r.Za(t),i=0;i<e;i++)this.Il(r.Ba(t,i));else for(t=t.i;t.next();)this.Il(t.value)},ri.prototype.removeNodeData=ri.prototype.ly=function(t){null!==t&&bi(this,t,!0)},ri.prototype.removeNodeDataCollection=function(t){if(r.isArray(t))for(var e=r.Za(t),i=0;i<e;i++)this.ly(r.Ba(t,i));else for(t=t.i;t.next();)this.ly(t.value)},(i=ri.prototype).Ou=function(t,e){var i=ki(this,t);i instanceof nt&&this.Hi.add(e,i)},i.QB=function(){},i.tq=function(){},i.sq=function(){},i.cv=function(){},ri.prototype.clearUnresolvedReferences=ri.prototype.GE=function(t){void 0===t?this.Hi.clear():this.Hi.remove(t)},r.defineProperty(ri,{MK:"copyNodeDataFunction"},function(){return this.so},function(t){var e=this.so;e!==t&&(null!==t&&r.j(t,"function",ri,"copyNodeDataFunction"),this.so=t,this.h("copyNodeDataFunction",e,t))}),r.defineProperty(ri,{oA:"copiesArrays"},function(){return this.dr},function(t){var e=this.dr;e!==t&&(null!==t&&r.j(t,"boolean",ri,"copiesArrays"),this.dr=t,this.h("copiesArrays",e,t))}),r.defineProperty(ri,{nA:"copiesArrayObjects"},function(){return this.cr},function(t){var e=this.cr;e!==t&&(null!==t&&r.j(t,"boolean",ri,"copiesArrayObjects"),this.cr=t,this.h("copiesArrayObjects",e,t))}),ri.prototype.copyNodeData=function(t){if(null===t)return null;var e=null;e=null!==(e=this.so)?e(t,this):Mi(this,t,!0);return r.Pa(e)&&r.oc(e),e},r.defineProperty(ri,{nH:"afterCopyFunction"},function(){return this.Nq},function(t){var e=this.Nq;e!==t&&(null!==t&&r.j(t,"function",ri,"afterCopyFunction"),this.Nq=t,this.h("afterCopyFunction",e,t))});var Si,Ti,Pi,Ni=!1;function Ci(t,e){ri.call(this),2<arguments.length&&r.k("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data."),this.lf=[],this.Si=new nt(Object),this.gd=new ht(null,Object),this.tl="",this.um=this.ro=this.Xo=null,this.Vh="from",this.Wh="to",this.Mm=this.Lm="",this.Km="category",this.zg="",this.ap="isGroup",this.kh="group",this.er=!1,void 0!==t&&(this.hg=t),void 0!==e&&(this.Pg=e)}function Ai(t,e,i){if(""!==t.Bj){var n=t.cf(e);if(void 0!==n&&t.gd.ka(n)===e)return;if(t.Ux(e),void 0===(n=t.cf(e)))return void r.k("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model.");t.gd.add(n,e)}t.Si.add(e),n=null,i&&(n=r.Za(t.lf),r.qh(t.lf,n,e)),yi(t,"linkDataArray",Yt,"linkDataArray",t,null,e,null,n),Di(t,e)}function Fi(t,e,i){t.Si.remove(e);var n=t.cf(e);if(void 0!==n&&t.gd.remove(n),n=null,i){if(0>(n=r.Ll(t.lf,e)))return;r.Jg(t.lf,n)}if(yi(t,"linkDataArray",Xt,"linkDataArray",t,e,null,n,null),wi(t,i=t.Wl(e),e),wi(t,i=t.Xl(e),e),n=t.Ik(e),r.isArray(n))for(var o=r.Za(n),a=0;a<o;a++)wi(t,i=r.Ba(n,a),e)}function Di(t,e){var i=t.Wl(e);i=t.Kn(i);null===t.we(i)&&xi(t,i,e),i=t.Xl(e),i=t.Kn(i),null===t.we(i)&&xi(t,i,e);var n=t.Ik(e);if(r.isArray(n))for(var o=r.Za(n),a=0;a<o;a++)i=r.Ba(n,a),null===t.we(i)&&xi(t,i,e)}function Li(t){1<arguments.length&&r.k("TreeModel constructor can only take one optional argument, the Array of node data."),ri.call(this),this.lh="parent",this.fr=!1,this.Tm="parentLinkCategory",void 0!==t&&(this.hg=t)}function ji(t,e,i){r.oc(this),this.P=!1,void 0===t?t="":r.j(t,"string",ji,"constructor:targetprop"),void 0===e?e=t:r.j(e,"string",ji,"constructor:sourceprop"),void 0===i?i=null:null!==i&&r.j(i,"function",ji,"constructor:conv"),this.YD=-1,this.Gg=null,this.wp=t,this.vp=this.tt=0,this.Lw=null,this.Yr=!1,this.lp=e,this.br=i,this.ss=Si,this.Vq=null,this.mz=new nt}function zi(t,e,i){return null===(t=t.Dq)||""===t?e:"/"===t?i.U:"."===t?i:".."===t?i.Q:e.Bd(t)}function Bi(){this.PG=new et(oi).freeze(),this.Rb="",this.dD=!1}function Ii(){this.Dz=new nt(ri),this.kf=!1,this.TG=new et(Bi).freeze(),this.bh=-1,this.rD=999,this.fh=!1,this.Dv=null,this.Fl=0,this.oC=!1,this.jh=new et("string").freeze(),this.$o=new et("number"),this.nz=!0,this.yz=!1}function Oi(t,e,i){if(t.lb)return!1;t.hA&&1>t.ti&&r.trace("Ending transaction without having started a transaction: "+i);var n=1===t.ti;n&&e&&t.jd("CommittingTransaction",i,t.pj);var o=0;if(0<t.ti&&(t.Fl--,t.isEnabled)){var a=t.jh.count;0<a&&(""===i&&(i=t.jh.ea(0)),t.jh.Qa(),t.jh.dd(a-1),t.jh.freeze()),0<(a=t.$o.count)&&(o=t.$o.ea(a-1),t.$o.dd(a-1))}if(a=t.pj,n){if(e){if(t.yz=!1,t.isEnabled&&null!==a){for((e=a).nu=!0,e.name=i,(n=t.history).Qa(),o=n.count-1;o>t.uj;o--)null!==(a=n.ea(o))&&a.clear(),n.dd(o),t.yz=!0;0===(o=t.NF)&&(o=1),0<o&&n.count>=o&&(null!==(a=n.ea(0))&&a.clear(),n.dd(0),t.bh--),n.add(e),t.bh++,n.freeze(),a=e}t.jd("CommittedTransaction",i,a)}else{t.fh=!0;try{t.isEnabled&&null!==a&&(a.nu=!0,a.undo())}finally{t.jd("RolledBackTransaction",i,a),t.fh=!1}null!==a&&a.clear()}return t.Dv=null,!0}if(t.isEnabled&&!e&&null!==a){for(t=o,e=(i=a.Wf).count-1;e>=t;e--)null!==(n=i.ea(e))&&n.undo(),i.Qa(),i.dd(e);i.freeze()}return!1}function Ei(){0<arguments.length&&r.nd(Ei),r.oc(this),this.aa=null,this.rC=!1,this.MC=this.sC=!0,this.uC=this.vC=this.NC=this.wC=!1,this.wl=this.hC=null,this.pE=1.05,this.JC=1,this.zz=NaN,this.oD=null,this.bA=NaN,this.aA=te,this.ej=null,this.OD=0}ri.prototype.set=function(t,e,i){this.setDataProperty(t,e,i)},ri.prototype.set=ri.prototype.setDataProperty=function(t,e,i){if(this.Ie(t)){if(e===this.dm)this.uy(t,i);else if(e===this.Sn)return void this.sy(t,i)}else!Ni&&t instanceof ls&&(Ni=!0,r.trace('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),r.trace("  Is that really your intent?"));var n=r.ub(t,e);n!==i&&(r.Ma(t,e,i),this.jB(t,e,n,i))},ri.prototype.addArrayItem=function(t,e){this.KA(t,-1,e)},ri.prototype.insertArrayItem=ri.prototype.KA=function(t,e,i){t===this.Fe&&r.k("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray"),0>e&&(e=r.Za(t)),r.qh(t,e,i),yi(this,"",Yt,"",t,null,i,null,e)},ri.prototype.removeArrayItem=ri.prototype.$F=function(t,e){void 0===e&&(e=-1),t===this.Fe&&r.k("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===e&&(e=r.Za(t)-1);var i=r.Ba(t,e);r.Jg(t,e),yi(this,"",Xt,"",t,i,null,e,null)},r.defineProperty(ri,{Sn:"nodeCategoryProperty"},function(){return this.Qm},function(t){var e=this.Qm;e!==t&&(vi(t,ri,"nodeCategoryProperty"),this.Qm=t,this.h("nodeCategoryProperty",e,t))}),ri.prototype.getCategoryForNodeData=ri.prototype.CA=function(t){if(null===t)return"";var e=this.Qm;return""===e?"":void 0===(e=r.ub(t,e))?"":"string"==typeof e?e:(r.k("getCategoryForNodeData found a non-string category for "+t+": "+e),"")},ri.prototype.setCategoryForNodeData=ri.prototype.sy=function(t,e){if(r.j(e,"string",ri,"setCategoryForNodeData:cat"),null!==t){var i=this.Qm;if(""!==i)if(this.Ie(t)){var n=r.ub(t,i);void 0===n&&(n=""),n!==e&&(r.Ma(t,i,e),yi(this,"nodeCategory",$t,i,t,n,e))}else r.Ma(t,i,e)}},r.La(Ci,ri),r.ga("GraphLinksModel",Ci),Ci.prototype.cloneProtected=function(t){ri.prototype.cloneProtected.call(this,t),t.tl=this.tl,t.Xo=this.Xo,t.ro=this.ro,t.Vh=this.Vh,t.Wh=this.Wh,t.Lm=this.Lm,t.Mm=this.Mm,t.Km=this.Km,t.zg=this.zg,t.ap=this.ap,t.kh=this.kh,t.er=this.er},Ci.prototype.clear=Ci.prototype.clear=function(){ri.prototype.clear.call(this),this.lf=[],this.gd.clear(),this.Si.clear()},(i=Ci.prototype).toString=function(t){if(void 0===t&&(t=0),2<=t)return this.JB();var e=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<t){e+="\n node data:",t=this.hg;var i=r.Za(t),n=0;for(n=0;n<i;n++){var o=r.Ba(t,n);e=e+" "+this.qb(o)+":"+Pi(o)}for(e+="\n link data:",t=this.Pg,i=r.Za(t),n=0;n<i;n++)o=r.Ba(t,n),e+=" "+this.Wl(o)+"--\x3e"+this.Xl(o)}return e},i.bo=function(){var t=ri.prototype.bo.call(this),e="";return"category"!==this.xu&&"string"==typeof this.xu&&(e+=',\n  "linkCategoryProperty": '+this.quote(this.xu)),""!==this.Bj&&"string"==typeof this.Bj&&(e+=',\n  "linkKeyProperty": '+this.quote(this.Bj)),"from"!==this.In&&"string"==typeof this.In&&(e+=',\n  "linkFromKeyProperty": '+this.quote(this.In)),"to"!==this.Jn&&"string"==typeof this.Jn&&(e+=',\n  "linkToKeyProperty": '+this.quote(this.Jn)),""!==this.yu&&"string"==typeof this.yu&&(e+=',\n  "linkFromPortIdProperty": '+this.quote(this.yu)),""!==this.Au&&"string"==typeof this.Au&&(e+=',\n  "linkToPortIdProperty": '+this.quote(this.Au)),""!==this.zu&&"string"==typeof this.zu&&(e+=',\n  "linkLabelKeysProperty": '+this.quote(this.zu)),"isGroup"!==this.lq&&"string"==typeof this.lq&&(e+=',\n  "nodeIsGroupProperty": '+this.quote(this.lq)),"group"!==this.Hu&&"string"==typeof this.Hu&&(e+=',\n  "nodeGroupKeyProperty": '+this.quote(this.Hu)),t+e},i.Lu=function(t){ri.prototype.Lu.call(this,t),t.linkKeyProperty&&(this.Bj=t.linkKeyProperty),t.linkFromKeyProperty&&(this.In=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.Jn=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.yu=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.Au=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.xu=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.zu=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.lq=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.Hu=t.nodeGroupKeyProperty)},i.VB=function(){return ri.prototype.VB.call(this)+(',\n  "linkDataArray": '+ui(this,this.Pg,!0))},i.lB=function(t){ri.prototype.lB.call(this,t),t=t.linkDataArray,r.isArray(t)&&(this.Pu(t),this.Pg=t)},i.WB=function(t){if(!(t instanceof Ci))return r.k("Model.computeJsonDifference: newmodel must be a GraphLinksModel"),"";""===this.Bj&&r.k("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");var e=ri.prototype.WB.call(this,t);hi(this,t,"linkKeyProperty"),hi(this,t,"linkFromKeyProperty"),hi(this,t,"linkToKeyProperty"),hi(this,t,"linkLabelKeysProperty"),hi(this,t,"nodeIsGroupProperty"),hi(this,t,"nodeGroupKeyProperty");for(var i=new nt,n=new nt,o=(new nt).Nc(this.gd.IF),a=new ht,s=t.Pg,l=0;l<s.length;l++){var h=s[l],u=t.cf(h);if(void 0!==u){o.remove(u);var c=this.Tp(u);null===c?(i.add(u),n.add(h)):li(this,c,h,a)||n.add(h)}else this.Ux(h),u=this.cf(h),i.add(u),n.add(h)}return t=e,0<i.count&&(t+=this.Ky+ui(this,i.xc(),!0)),0<n.count&&(t+=this.cC+ui(this,n.xc(),!0)),0<o.count&&(t+=this.My+ui(this,o.xc(),!0)),t},i.Ky=',\n  "insertedLinkKeys": ',i.cC=',\n  "modifiedLinkData": ',i.My=',\n  "removedLinkKeys": ',i.UB=function(t,e){""===this.Bj&&r.k("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var i=ri.prototype.UB.call(this,t,e),n=this,o=new nt,a=new nt,s=new nt;t.Wf.each(function(t){t.$===n&&("linkDataArray"===t.tf?t.Dc===Yt?o.add(t.newValue):t.Dc===Xt&&s.add(t.oldValue):n.th(t.object)&&a.add(t.object))});var l=new nt;o.each(function(t){l.add(n.cf(t)),e||a.add(t)});var h=new nt;return s.each(function(t){h.add(n.cf(t)),e&&a.add(t)}),0<l.count&&(i+=(e?this.My:this.Ky)+ui(this,l.xc(),!0)),0<a.count&&(i+=this.cC+ui(this,a.xc(),!0)),0<h.count&&(i+=(e?this.Ky:this.My)+ui(this,h.xc(),!0)),i},i.kB=function(t){ri.prototype.kB.call(this,t);var e=t.insertedLinkKeys,i=t.modifiedLinkData,n=new ht;if(r.isArray(i))for(var o=0;o<i.length;o++){var a=r.Ba(i,o),s=this.cf(a);void 0!==s&&null!==s&&n.set(s,a)}if(r.isArray(e)){o=r.Za(e);for(var l=0;l<o;l++)a=r.Ba(e,l),null===(s=this.Tp(a))&&(s=(s=n.get(a))?s:this.mx({}),this.qG(s,a),this.Gt(s))}if(r.isArray(i))for(o=r.Za(i),l=0;l<o;l++)if(a=r.Ba(i,l),s=this.cf(a),null!==(s=this.Tp(s)))for(var h in a)"__gohashid"!==h&&h!==this.Bj&&this.setDataProperty(s,h,a[h]);if(t=t.removedLinkKeys,r.isArray(t))for(o=r.Za(t),l=0;l<o;l++)a=r.Ba(t,l),null!==(s=this.Tp(a))&&this.ky(s)},i.mn=function(t,e){if(t.Dc===Yt){var i=t.Cj;if("linkDataArray"===t.tf){var n=t.newValue;if(r.Pa(n)&&"number"==typeof i){var o=this.cf(n);e?(this.Si.remove(n),r.Ba(this.lf,i)===n&&r.Jg(this.lf,i),void 0!==o&&this.gd.remove(o)):(this.Si.add(n),r.Ba(this.lf,i)!==n&&r.qh(this.lf,i,n),void 0!==o&&this.gd.add(o,n))}return}if("linkLabelKeys"===t.tf)return n=this.Ik(t.object),void(r.isArray(n)&&"number"==typeof i&&(e?(i=r.Ll(n,t.newValue),0<=i&&r.Jg(n,i)):0>r.Ll(n,t.newValue)&&r.qh(n,i,t.newValue)))}else if(t.Dc===Xt){if(i=t.Dj,"linkDataArray"===t.tf)return n=t.oldValue,void(r.Pa(n)&&"number"==typeof i&&(o=this.cf(n),e?(this.Si.add(n),r.Ba(this.lf,i)!==n&&r.qh(this.lf,i,n),void 0!==o&&this.gd.add(o,n)):(this.Si.remove(n),r.Ba(this.lf,i)===n&&r.Jg(this.lf,i),void 0!==o&&this.gd.remove(o))));if("linkLabelKeys"===t.tf)return n=this.Ik(t.object),void(r.isArray(n)&&"number"==typeof i&&(e?0>r.Ll(n,t.newValue)&&r.qh(n,i,t.newValue):(i=r.Ll(n,t.newValue),0<=i&&r.Jg(n,i))))}ri.prototype.mn.call(this,t,e)},r.defineProperty(Ci,{eA:"archetypeNodeData"},function(){return this.um},function(t){var e=this.um;e!==t&&(null!==t&&r.G(t,Object,Ci,"archetypeNodeData"),this.um=t,this.h("archetypeNodeData",e,t))}),Ci.prototype.Kn=function(t){if(void 0!==t){var e=this.um;if(null!==e){var i=this.we(t);null===i&&(i=this.copyNodeData(e),r.Ma(i,this.kk,t),this.Il(i))}return t}},r.defineProperty(Ci,{In:"linkFromKeyProperty"},function(){return this.Vh},function(t){var e=this.Vh;e!==t&&(vi(t,Ci,"linkFromKeyProperty"),this.Vh=t,this.h("linkFromKeyProperty",e,t))}),Ci.prototype.getFromKeyForLinkData=Ci.prototype.Wl=function(t){if(null!==t){var e=this.Vh;if(""!==e&&void 0!==(e=r.ub(t,e))){if(mi(e))return e;r.k("FromKey value for link data "+t+" is not a number or a string: "+e)}}},Ci.prototype.setFromKeyForLinkData=Ci.prototype.wB=function(t,e){if(null===e&&(e=void 0),void 0===e||mi(e)||r.Ed(e,"number or string",Ci,"setFromKeyForLinkData:key"),null!==t){var i=this.Vh;if(""!==i)if(e=this.Kn(e),this.th(t)){var n=r.ub(t,i);n!==e&&(wi(this,n,t),r.Ma(t,i,e),null===this.we(e)&&xi(this,e,t),yi(this,"linkFromKey",$t,i,t,n,e),"string"==typeof i&&this.Ib(t,i))}else r.Ma(t,i,e)}},r.defineProperty(Ci,{Jn:"linkToKeyProperty"},function(){return this.Wh},function(t){var e=this.Wh;e!==t&&(vi(t,Ci,"linkToKeyProperty"),this.Wh=t,this.h("linkToKeyProperty",e,t))}),Ci.prototype.getToKeyForLinkData=Ci.prototype.Xl=function(t){if(null!==t){var e=this.Wh;if(""!==e&&void 0!==(e=r.ub(t,e))){if(mi(e))return e;r.k("ToKey value for link data "+t+" is not a number or a string: "+e)}}},Ci.prototype.setToKeyForLinkData=Ci.prototype.CB=function(t,e){if(null===e&&(e=void 0),void 0===e||mi(e)||r.Ed(e,"number or string",Ci,"setToKeyForLinkData:key"),null!==t){var i=this.Wh;if(""!==i)if(e=this.Kn(e),this.th(t)){var n=r.ub(t,i);n!==e&&(wi(this,n,t),r.Ma(t,i,e),null===this.we(e)&&xi(this,e,t),yi(this,"linkToKey",$t,i,t,n,e),"string"==typeof i&&this.Ib(t,i))}else r.Ma(t,i,e)}},r.defineProperty(Ci,{yu:"linkFromPortIdProperty"},function(){return this.Lm},function(t){var e=this.Lm;e!==t&&(vi(t,Ci,"linkFromPortIdProperty"),t!==this.In&&t!==this.Jn||r.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: "+t),this.Lm=t,this.h("linkFromPortIdProperty",e,t))}),Ci.prototype.getFromPortIdForLinkData=Ci.prototype.cI=function(t){if(null===t)return"";var e=this.Lm;return""===e?"":void 0===(t=r.ub(t,e))?"":t},Ci.prototype.setFromPortIdForLinkData=Ci.prototype.xB=function(t,e){if(r.j(e,"string",Ci,"setFromPortIdForLinkData:portname"),null!==t){var i=this.Lm;if(""!==i)if(this.th(t)){var n=r.ub(t,i);void 0===n&&(n=""),n!==e&&(r.Ma(t,i,e),yi(this,"linkFromPortId",$t,i,t,n,e),"string"==typeof i&&this.Ib(t,i))}else r.Ma(t,i,e)}},r.defineProperty(Ci,{Au:"linkToPortIdProperty"},function(){return this.Mm},function(t){var e=this.Mm;e!==t&&(vi(t,Ci,"linkToPortIdProperty"),t!==this.In&&t!==this.Jn||r.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: "+t),this.Mm=t,this.h("linkToPortIdProperty",e,t))}),Ci.prototype.getToPortIdForLinkData=Ci.prototype.gI=function(t){if(null===t)return"";var e=this.Mm;return""===e?"":void 0===(t=r.ub(t,e))?"":t},Ci.prototype.setToPortIdForLinkData=Ci.prototype.DB=function(t,e){if(r.j(e,"string",Ci,"setToPortIdForLinkData:portname"),null!==t){var i=this.Mm;if(""!==i)if(this.th(t)){var n=r.ub(t,i);void 0===n&&(n=""),n!==e&&(r.Ma(t,i,e),yi(this,"linkToPortId",$t,i,t,n,e),"string"==typeof i&&this.Ib(t,i))}else r.Ma(t,i,e)}},r.defineProperty(Ci,{zu:"linkLabelKeysProperty"},function(){return this.zg},function(t){var e=this.zg;e!==t&&(vi(t,Ci,"linkLabelKeysProperty"),this.zg=t,this.h("linkLabelKeysProperty",e,t))}),Ci.prototype.getLabelKeysForLinkData=Ci.prototype.Ik=function(t){if(null===t)return r.fo;var e=this.zg;return""===e?r.fo:void 0===(t=r.ub(t,e))?r.fo:t},Ci.prototype.setLabelKeysForLinkData=Ci.prototype.rG=function(t,e){if(r.gA(e,Ci,"setLabelKeysForLinkData:arr"),null!==t){var i=this.zg;if(""!==i)if(this.th(t)){var n=r.ub(t,i);if(void 0===n&&(n=r.fo),n!==e){for(var o=r.Za(n),a=0;a<o;a++){var s=r.Ba(n,a);wi(this,s,t)}for(r.Ma(t,i,e),o=r.Za(e),a=0;a<o;a++)s=r.Ba(e,a),null===this.we(s)&&xi(this,s,t);yi(this,"linkLabelKeys",$t,i,t,n,e),"string"==typeof i&&this.Ib(t,i)}}else r.Ma(t,i,e)}},Ci.prototype.addLabelKeyForLinkData=Ci.prototype.vE=function(t,e){if(null!==e&&void 0!==e&&(mi(e)||r.Ed(e,"number or string",Ci,"addLabelKeyForLinkData:key"),null!==t)){var i=this.zg;if(""!==i){var n=r.ub(t,i);if(void 0===n)(i=[]).push(e),this.rG(t,i);else if(r.isArray(n)){var o=r.Ll(n,e);0<=o||(o=r.Za(n),r.qh(n,1/0,e),this.th(t)&&(null===this.we(e)&&xi(this,e,t),yi(this,"linkLabelKeys",Yt,i,t,null,e,null,o)))}else r.k(i+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},Ci.prototype.removeLabelKeyForLinkData=Ci.prototype.qJ=function(t,e){if(null!==e&&void 0!==e&&(mi(e)||r.Ed(e,"number or string",Ci,"removeLabelKeyForLinkData:key"),null!==t)){var i=this.zg;if(""!==i){var n=r.ub(t,i);if(r.isArray(n)){var o=r.Ll(n,e);0>o||(r.Jg(n,o),this.th(t)&&(wi(this,e,t),yi(this,"linkLabelKeys",Xt,i,t,e,null,o,null)))}else void 0!==n&&r.k(i+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},r.defineProperty(Ci,{Pg:"linkDataArray"},function(){return this.lf},function(t){var e=this.lf;if(e!==t){r.gA(t,Ci,"linkDataArray"),this.gd.clear();for(var i=r.Za(t),n=0;n<i;n++){var o=r.Ba(t,n);if(!r.Pa(o))return void r.k("GraphLinksModel.linkDataArray must only contain Objects, not: "+o);r.Xp(o)}if(this.lf=t,""!==this.Bj){var a=new et(Object);for(n=0;n<i;n++){o=r.Ba(t,n);var s=this.cf(o);void 0===s?a.add(o):null!==this.gd.ka(s)?a.add(o):this.gd.add(s,o)}for(n=a.i;n.next();)o=n.value,this.Ux(o),void 0!==(a=this.cf(o))&&this.gd.add(a,o)}for(a=new nt(Object),n=0;n<i;n++)o=r.Ba(t,n),a.add(o);for(this.Si=a,yi(this,"linkDataArray",$t,"linkDataArray",this,e,t),n=0;n<i;n++)Di(this,o=r.Ba(t,n))}}),r.defineProperty(Ci,{Bj:"linkKeyProperty"},function(){return this.tl},function(t){var e=this.tl;if(e!==t){vi(t,Ci,"linkKeyProperty"),this.tl=t,this.gd.clear();for(var i=r.Za(this.Pg),n=0;n<i;n++){var o=r.Ba(this.Pg,n),a=this.cf(o);void 0===a&&(this.Ux(o),a=this.cf(o)),void 0!==a&&this.gd.add(a,o)}this.h("linkKeyProperty",e,t)}}),Ci.prototype.getKeyForLinkData=Ci.prototype.cf=function(t){if(null!==t){var e=this.tl;if(""!==e&&void 0!==(e=r.ub(t,e))){if(mi(e))return e;r.k("Key value for link data "+t+" is not a number or a string: "+e)}}},Ci.prototype.setKeyForLinkData=Ci.prototype.qG=function(t,e){if(void 0!==e&&null!==e&&mi(e)||r.Ed(e,"number or string",Ci,"setKeyForLinkData:key"),null!==t){var i=this.tl;if(""!==i)if(this.th(t)){var n=r.ub(t,i);n!==e&&null===this.Tp(e)&&(r.Ma(t,i,e),this.gd.remove(n),this.gd.add(e,t),yi(this,"linkKey",$t,i,t,n,e),"string"==typeof i&&this.Ib(t,i))}else r.Ma(t,i,e)}},r.defineProperty(Ci,{rL:"makeUniqueLinkKeyFunction"},function(){return this.Xo},function(t){var e=this.Xo;e!==t&&(null!==t&&r.j(t,"function",Ci,"makeUniqueLinkKeyFunction"),this.Xo=t,this.h("makeUniqueLinkKeyFunction",e,t))}),Ci.prototype.findLinkDataForKey=Ci.prototype.Tp=function(t){return null===t&&r.k("GraphLinksModel.findLinkDataForKey:key must not be null"),void 0!==t&&mi(t)?this.gd.ka(t):null},Ci.prototype.makeLinkDataKeyUnique=Ci.prototype.Ux=function(t){if(null!==t){var e=this.tl;if(""!==e){var i=this.cf(t);if(void 0===i||this.gd.contains(i)){var n=this.Xo;if(null!==n&&(void 0!==(i=n(this,t))&&null!==i&&!this.gd.contains(i)))return void r.Ma(t,e,i);if("string"==typeof i){for(n=2;this.gd.contains(i+n);)n++;r.Ma(t,e,i+n)}else if(void 0===i||"number"==typeof i){for(n=-this.gd.count-1;this.gd.contains(n);)n--;r.Ma(t,e,n)}else r.k("GraphLinksModel.getKeyForLinkData returned something other than a string or a number: "+i)}}}},Ci.prototype.containsLinkData=Ci.prototype.th=function(t){return null!==t&&this.Si.contains(t)},Ci.prototype.addLinkData=Ci.prototype.Gt=function(t){null!==t&&(r.Xp(t),this.th(t)||Ai(this,t,!0))},Ci.prototype.addLinkDataCollection=function(t){if(r.isArray(t))for(var e=r.Za(t),i=0;i<e;i++)this.Gt(r.Ba(t,i));else for(t=t.i;t.next();)this.Gt(t.value)},Ci.prototype.removeLinkData=Ci.prototype.ky=function(t){null!==t&&Fi(this,t,!0)},Ci.prototype.removeLinkDataCollection=function(t){if(r.isArray(t))for(var e=r.Za(t),i=0;i<e;i++)this.ky(r.Ba(t,i));else for(t=t.i;t.next();)this.ky(t.value)},r.defineProperty(Ci,{LK:"copyLinkDataFunction"},function(){return this.ro},function(t){var e=this.ro;e!==t&&(null!==t&&r.j(t,"function",Ci,"copyLinkDataFunction"),this.ro=t,this.h("copyLinkDataFunction",e,t))}),Ci.prototype.copyLinkData=Ci.prototype.mx=function(t){if(null===t)return null;var e=null;e=null!==(e=this.ro)?e(t,this):Mi(this,t,!0);return r.Pa(e)&&(r.oc(e),""!==this.Vh&&r.Ma(e,this.Vh,void 0),""!==this.Wh&&r.Ma(e,this.Wh,void 0),""!==this.zg&&r.Ma(e,this.zg,[])),e},r.defineProperty(Ci,{lq:"nodeIsGroupProperty"},function(){return this.ap},function(t){var e=this.ap;e!==t&&(vi(t,Ci,"nodeIsGroupProperty"),this.ap=t,this.h("nodeIsGroupProperty",e,t))}),Ci.prototype.isGroupForNodeData=Ci.prototype.QA=function(t){if(null===t)return!1;var e=this.ap;return""!==e&&!!r.ub(t,e)},r.defineProperty(Ci,{Hu:"nodeGroupKeyProperty"},function(){return this.kh},function(t){var e=this.kh;e!==t&&(vi(t,Ci,"nodeGroupKeyProperty"),this.kh=t,this.h("nodeGroupKeyProperty",e,t))}),r.defineProperty(Ci,{qn:"copiesGroupKeyOfNodeData"},function(){return this.er},function(t){this.er!==t&&(r.j(t,"boolean",Ci,"copiesGroupKeyOfNodeData"),this.er=t)}),Ci.prototype.getGroupKeyForNodeData=Ci.prototype.yn=function(t){if(null!==t){var e=this.kh;if(""!==e&&void 0!==(e=r.ub(t,e))){if(mi(e))return e;r.k("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},Ci.prototype.setGroupKeyForNodeData=Ci.prototype.yB=function(t,e){if(null===e&&(e=void 0),void 0===e||mi(e)||r.Ed(e,"number or string",Ci,"setGroupKeyForNodeData:key"),null!==t){var i=this.kh;if(""!==i)if(this.Ie(t)){var n=r.ub(t,i);n!==e&&(wi(this,n,t),r.Ma(t,i,e),null===this.we(e)&&xi(this,e,t),yi(this,"nodeGroupKey",$t,i,t,n,e),"string"==typeof i&&this.Ib(t,i))}else r.Ma(t,i,e)}},Ci.prototype.copyNodeData=function(t){return null===t?null:(t=ri.prototype.copyNodeData.call(this,t),this.qn||""===this.kh||void 0===r.ub(t,this.kh)||r.Ma(t,this.kh,void 0),t)},Ci.prototype.setDataProperty=function(t,e,i){if(this.Ie(t))if(e===this.dm)this.uy(t,i);else{if(e===this.Sn)return void this.sy(t,i);if(e===this.Hu)return void this.yB(t,i);e===this.lq&&r.k("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+e)}else if(this.th(t)){if(e===this.In)return void this.wB(t,i);if(e===this.Jn)return void this.CB(t,i);if(e===this.yu)return void this.xB(t,i);if(e===this.Au)return void this.DB(t,i);if(e===this.Bj)return void this.qG(t,i);if(e===this.xu)return void this.pG(t,i);if(e===this.zu)return void this.rG(t,i)}else!Ni&&t instanceof ls&&(Ni=!0,r.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),r.trace("  Is that really your intent?"));var n=r.ub(t,e);n!==i&&(r.Ma(t,e,i),this.jB(t,e,n,i))},(i=Ci.prototype).Ou=function(t,e){ri.prototype.Ou.call(this,t,e);for(var i=this.Kc.i;i.next();)this.pB(i.value,t,e);for(i=this.Si.i;i.next();){var n=i.value,o=t,a=e;if(this.Wl(n)===o){var s=this.Vh;r.Ma(n,s,a),yi(this,"linkFromKey",$t,s,n,o,a),"string"==typeof s&&this.Ib(n,s)}if(this.Xl(n)===o&&(s=this.Wh,r.Ma(n,s,a),yi(this,"linkToKey",$t,s,n,o,a),"string"==typeof s&&this.Ib(n,s)),s=this.Ik(n),r.isArray(s))for(var l=r.Za(s),h=this.zg,u=0;u<l;u++)r.Ba(s,u)===o&&(r.DE(s,u,a),yi(this,"linkLabelKeys",Yt,h,n,o,a,u,u))}},i.pB=function(t,e,i){if(this.yn(t)===e){var n=this.kh;r.Ma(t,n,i),yi(this,"nodeGroupKey",$t,n,t,e,i),"string"==typeof n&&this.Ib(t,n)}},i.QB=function(){ri.prototype.QB.call(this);for(var t=this.Pg,e=r.Za(t),i=0;i<e;i++){Di(this,r.Ba(t,i))}},i.tq=function(t){if(ri.prototype.tq.call(this,t),null!==(i=ki(this,t=this.qb(t)))){for(var e=new et(Object),i=i.i;i.next();){var n=i.value;if(this.Ie(n)){if(this.yn(n)===t){var o=this.kh;yi(this,"nodeGroupKey",$t,o,n,t,t),"string"==typeof o&&this.Ib(n,o),e.add(n)}}else if(this.Wl(n)===t&&(o=this.Vh,yi(this,"linkFromKey",$t,o,n,t,t),"string"==typeof o&&this.Ib(n,o),e.add(n)),this.Xl(n)===t&&(o=this.Wh,yi(this,"linkToKey",$t,o,n,t,t),"string"==typeof o&&this.Ib(n,o),e.add(n)),o=this.Ik(n),r.isArray(o))for(var a=r.Za(o),s=this.zg,l=0;l<a;l++)r.Ba(o,l)===t&&(yi(this,"linkLabelKeys",Yt,s,n,t,t,l,l),e.add(n))}for(e=e.i;e.next();)wi(this,t,e.value)}},i.sq=function(t){ri.prototype.sq.call(this,t);var e=this.yn(t);null===this.we(e)&&xi(this,e,t)},i.cv=function(t){ri.prototype.cv.call(this,t),wi(this,this.yn(t),t)},r.defineProperty(Ci,{xu:"linkCategoryProperty"},function(){return this.Km},function(t){var e=this.Km;e!==t&&(vi(t,Ci,"linkCategoryProperty"),this.Km=t,this.h("linkCategoryProperty",e,t))}),Ci.prototype.getCategoryForLinkData=Ci.prototype.fu=function(t){if(null===t)return"";var e=this.Km;return""===e?"":void 0===(e=r.ub(t,e))?"":"string"==typeof e?e:(r.k("getCategoryForLinkData found a non-string category for "+t+": "+e),"")},Ci.prototype.setCategoryForLinkData=Ci.prototype.pG=function(t,e){if(r.j(e,"string",Ci,"setCategoryForLinkData:cat"),null!==t){var i=this.Km;if(""!==i)if(this.th(t)){var n=r.ub(t,i);void 0===n&&(n=""),n!==e&&(r.Ma(t,i,e),yi(this,"linkCategory",$t,i,t,n,e),"string"==typeof i&&this.Ib(t,i))}else r.Ma(t,i,e)}},r.La(Li,ri),r.ga("TreeModel",Li),Li.prototype.cloneProtected=function(t){ri.prototype.cloneProtected.call(this,t),t.lh=this.lh,t.fr=this.fr,t.Tm=this.Tm},Li.prototype.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.JB();var e=(""!==this.name?this.name:"")+" TreeModel";if(0<t){e+="\n node data:",t=this.hg;for(var i=r.Za(t),n=0;n<i;n++){var o=r.Ba(t,n);e=e+" "+this.qb(o)+":"+Pi(o)}}return e},Li.prototype.bo=function(){var t=ri.prototype.bo.call(this),e="";return"parent"!==this.Iu&&"string"==typeof this.Iu&&(e+=',\n  "nodeParentKeyProperty": '+this.quote(this.Iu)),t+e},Li.prototype.Lu=function(t){ri.prototype.Lu.call(this,t),t.nodeParentKeyProperty&&(this.Iu=t.nodeParentKeyProperty)},Li.prototype.Kn=function(t){return t},r.defineProperty(Li,{Iu:"nodeParentKeyProperty"},function(){return this.lh},function(t){var e=this.lh;e!==t&&(vi(t,Li,"nodeParentKeyProperty"),this.lh=t,this.h("nodeParentKeyProperty",e,t))}),r.defineProperty(Li,{rn:"copiesParentKeyOfNodeData"},function(){return this.fr},function(t){this.fr!==t&&(r.j(t,"boolean",Li,"copiesParentKeyOfNodeData"),this.fr=t)}),Li.prototype.getParentKeyForNodeData=Li.prototype.An=function(t){if(null!==t){var e=this.lh;if(""!==e&&void 0!==(e=r.ub(t,e))){if(mi(e))return e;r.k("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},Li.prototype.setParentKeyForNodeData=Li.prototype.ri=function(t,e){if(null===e&&(e=void 0),void 0===e||mi(e)||r.Ed(e,"number or string",Li,"setParentKeyForNodeData:key"),null!==t){var i=this.lh;if(""!==i)if(e=this.Kn(e),this.Ie(t)){var n=r.ub(t,i);n!==e&&(wi(this,n,t),r.Ma(t,i,e),null===this.we(e)&&xi(this,e,t),yi(this,"nodeParentKey",$t,i,t,n,e),"string"==typeof i&&this.Ib(t,i))}else r.Ma(t,i,e)}},r.defineProperty(Li,{IL:"parentLinkCategoryProperty"},function(){return this.Tm},function(t){var e=this.Tm;e!==t&&(vi(t,Li,"parentLinkCategoryProperty"),this.Tm=t,this.h("parentLinkCategoryProperty",e,t))}),Li.prototype.getParentLinkCategoryForNodeData=Li.prototype.eI=function(t){if(null===t)return"";var e=this.Tm;return""===e?"":void 0===(e=r.ub(t,e))?"":"string"==typeof e?e:(r.k("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},Li.prototype.setParentLinkCategoryForNodeData=Li.prototype.HJ=function(t,e){if(r.j(e,"string",Li,"setParentLinkCategoryForNodeData:cat"),null!==t){var i=this.Tm;if(""!==i)if(this.Ie(t)){var n=r.ub(t,i);void 0===n&&(n=""),n!==e&&(r.Ma(t,i,e),yi(this,"parentLinkCategory",$t,i,t,n,e),"string"==typeof i&&this.Ib(t,i))}else r.Ma(t,i,e)}},Li.prototype.copyNodeData=function(t){return null===t?null:(t=ri.prototype.copyNodeData.call(this,t),this.rn||""===this.lh||void 0===r.ub(t,this.lh)||r.Ma(t,this.lh,void 0),t)},Li.prototype.setDataProperty=function(t,e,i){if(this.Ie(t))if(e===this.dm)this.uy(t,i);else{if(e===this.Sn)return void this.sy(t,i);if(e===this.Iu)return void this.ri(t,i)}else!Ni&&t instanceof ls&&(Ni=!0,r.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),r.trace("  Is that really your intent?"));var n=r.ub(t,e);n!==i&&(r.Ma(t,e,i),this.jB(t,e,n,i))},(i=Li.prototype).Ou=function(t,e){ri.prototype.Ou.call(this,t,e);for(var i=this.Kc.i;i.next();)this.pB(i.value,t,e)},i.pB=function(t,e,i){if(this.An(t)===e){var n=this.lh;r.Ma(t,n,i),yi(this,"nodeParentKey",$t,n,t,e,i),"string"==typeof n&&this.Ib(t,n)}},i.tq=function(t){if(ri.prototype.tq.call(this,t),null!==(i=ki(this,t=this.qb(t)))){for(var e=new et(Object),i=i.i;i.next();){var n=i.value;if(this.Ie(n)&&this.An(n)===t){var o=this.lh;yi(this,"nodeParentKey",$t,o,n,t,t),"string"==typeof o&&this.Ib(n,o),e.add(n)}}for(e=e.i;e.next();)wi(this,t,e.value)}},i.sq=function(t){ri.prototype.sq.call(this,t);var e=this.An(t);e=this.Kn(e);null===this.we(e)&&xi(this,e,t)},i.cv=function(t){ri.prototype.cv.call(this,t),wi(this,this.An(t),t)},r.ga("Binding",ji),ji.prototype.copy=function(){var t=new ji;return t.wp=this.wp,t.tt=this.tt,t.vp=this.vp,t.Lw=this.Lw,t.Yr=this.Yr,t.lp=this.lp,t.br=this.br,t.ss=this.ss,t.Vq=this.Vq,t},ji.OneWay=Si=r.p(ji,"OneWay",1),ji.TwoWay=Ti=r.p(ji,"TwoWay",2),ji.parseEnum=function(t,e){return r.j(t,"function",ji,"parseEnum:ctor"),r.ob(e,t,ji,"parseEnum:defval"),function(i){return null===(i=o(t,i))?e:i}},ji.prototype.hc=function(t){t.Ge===ji?this.mode=t:r.Ij(this,t)},ji.toString=Pi=function(t){var e=t;return r.Pa(t)&&(t.text?e=t.text:t.name?e=t.name:void 0!==t.key?e=t.key:void 0!==t.id?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:void 0!==t.Key?e=t.Key:void 0!==t.Id?e=t.Id:void 0!==t.ID&&(e=t.ID))),void 0===e?"undefined":null===e?"null":e.toString()},ji.prototype.toString=function(){return"Binding("+this.xy+":"+this.uG+(-1!==this.lm?" "+this.lm:"")+" "+this.mode.name+")"},ji.prototype.freeze=function(){return this.P=!0,this},ji.prototype.Qa=function(){return this.P=!1,this},r.defineProperty(ji,{lm:null},function(){return this.YD},function(t){this.P&&r.ma(this),r.j(t,"number",ji,"targetId"),this.YD=t}),r.defineProperty(ji,{xy:"targetProperty"},function(){return this.wp},function(t){this.P&&r.ma(this),r.j(t,"string",ji,"targetProperty"),this.wp=t}),r.defineProperty(ji,{Dq:"sourceName"},function(){return this.Lw},function(t){this.P&&r.ma(this),null!==t&&r.j(t,"string",ji,"sourceName"),this.Lw=t,null!==t&&(this.Yr=!1)}),r.defineProperty(ji,{Lx:"isToModel"},function(){return this.Yr},function(t){this.P&&r.ma(this),r.j(t,"boolean",ji,"isToModel"),this.Yr=t}),r.defineProperty(ji,{uG:"sourceProperty"},function(){return this.lp},function(t){this.P&&r.ma(this),r.j(t,"string",ji,"sourceProperty"),this.lp=t}),r.defineProperty(ji,{DH:"converter"},function(){return this.br},function(t){this.P&&r.ma(this),null!==t&&r.j(t,"function",ji,"converter"),this.br=t}),r.defineProperty(ji,{sH:"backConverter"},function(){return this.Vq},function(t){this.P&&r.ma(this),null!==t&&r.j(t,"function",ji,"backConverter"),this.Vq=t}),r.defineProperty(ji,{mode:"mode"},function(){return this.ss},function(t){this.P&&r.ma(this),r.ob(t,ji,ji,"mode"),this.ss=t}),ji.prototype.makeTwoWay=ji.prototype.RI=function(t){return void 0===t&&(t=null),null!==t&&r.j(t,"function",ji,"makeTwoWay"),this.mode=Ti,this.sH=t,this},ji.prototype.ofObject=ji.prototype.Xx=function(t){return void 0===t&&(t=""),this.Dq=t,this.Lx=!1,this},ji.prototype.ofModel=function(){return this.Dq=null,this.Lx=!0,this},ji.prototype.updateTarget=ji.prototype.JG=function(t,e,i){var n=this.lp;if(void 0===i||""===n||n===i){i=this.wp;var o=this.br;if(null===o&&""===i)r.trace("Binding error: target property is the empty string: "+this.toString());else{var a=e;if(""!==n&&(a=r.ub(e,n)),void 0!==a)if(null===o)""!==i&&r.Ma(t,i,a);else try{if(""!==i){var s=o(a,t);r.Ma(t,i,s)}else o(a,t)}catch(t){}}}},ji.prototype.updateSource=ji.prototype.yy=function(t,e,i,n){if(this.ss===Ti){var o=this.wp;if(void 0===i||o===i){i=this.lp;var a=this.Vq,s=t;if(""!==o&&(s=r.ub(t,o)),void 0!==s&&!this.mz.contains(t))try{this.mz.add(t);var l=null!==n?n.g:null,h=null!==l?l.$:null;if(null===a){if(""!==i)null!==h?h.setDataProperty(e,i,s):r.Ma(e,i,s);else if(null!==h&&null!==n&&0<=n.vu&&null!==n.Q&&Array.isArray(n.Q.gq)){var u=n.vu,c=n.Q.gq;h.$F(c,u),h.KA(c,u,s)}}else try{if(""!==i){var f=a(s,e,h);null!==h?h.setDataProperty(e,i,f):r.Ma(e,i,f)}else void 0!==(f=a(s,e,h))&&null!==h&&null!==n&&0<=n.vu&&null!==n.Q&&Array.isArray(n.Q.gq)&&(u=n.vu,c=n.Q.gq,h.$F(c,u),h.KA(c,u,f))}catch(t){}}finally{this.mz.remove(t)}}}},r.ga("Transaction",Bi),Bi.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.Wf.count.toString()+(this.nu?"":", incomplete");if(void 0!==t&&0<t){t=this.Wf.count;for(var i=0;i<t;i++){var n=this.Wf.ea(i);null!==n&&(e+="\n  "+n.toString())}}return e},Bi.prototype.clear=Bi.prototype.clear=function(){var t=this.Wf;t.Qa();for(var e=t.count-1;0<=e;e--){var i=t.ea(e);null!==i&&i.clear()}t.clear(),t.freeze()},Bi.prototype.canUndo=Bi.prototype.canUndo=function(){return this.nu},Bi.prototype.undo=Bi.prototype.undo=function(){if(this.canUndo())for(var t=this.Wf.count-1;0<=t;t--){var e=this.Wf.ea(t);null!==e&&e.undo()}},Bi.prototype.canRedo=Bi.prototype.canRedo=function(){return this.nu},Bi.prototype.redo=Bi.prototype.redo=function(){if(this.canRedo())for(var t=this.Wf.count,e=0;e<t;e++){var i=this.Wf.ea(e);null!==i&&i.redo()}},r.u(Bi,{Wf:"changes"},function(){return this.PG}),r.defineProperty(Bi,{name:"name"},function(){return this.Rb},function(t){this.Rb=t}),r.defineProperty(Bi,{nu:"isComplete"},function(){return this.dD},function(t){this.dD=t}),r.ga("UndoManager",Ii),Ii.prototype.toString=function(t){for(var e=(e="UndoManager "+this.uj+"<"+this.history.count+"<="+this.NF)+"[",i=this.SF.count,n=0;n<i;n++)0<n&&(e+=" "),e+=this.SF.ea(n);if(e+="]",void 0!==t&&0<t)for(i=this.history.count,n=0;n<i;n++)e+="\n "+this.history.ea(n).toString(t-1);return e},Ii.prototype.clear=Ii.prototype.clear=function(){var t=this.history;t.Qa();for(var e=t.count-1;0<=e;e--){var i=t.ea(e);null!==i&&i.clear()}t.clear(),this.bh=-1,t.freeze(),this.fh=!1,this.Dv=null,this.Fl=0,this.jh.Qa(),this.jh.clear(),this.jh.freeze(),this.$o.clear()},Ii.prototype.addModel=Ii.prototype.lH=function(t){this.Dz.add(t)},Ii.prototype.removeModel=Ii.prototype.rJ=function(t){this.Dz.remove(t)},Ii.prototype.startTransaction=Ii.prototype.Hb=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.lb)return!1;!0===this.nz&&(this.nz=!1,this.Fl++,this.jd("StartingFirstTransaction",t,this.pj),0<this.Fl&&this.Fl--),this.isEnabled&&(this.jh.Qa(),this.jh.add(t),this.jh.freeze(),null===this.pj?this.$o.add(0):this.$o.add(this.pj.Wf.count)),this.Fl++;var e=1===this.ti;return e&&this.jd("StartedTransaction",t,this.pj),e},Ii.prototype.commitTransaction=Ii.prototype.Yc=function(t){return void 0===t&&(t=""),Oi(this,!0,t)},Ii.prototype.rollbackTransaction=Ii.prototype.fm=function(){return Oi(this,!1,"")},Ii.prototype.canUndo=Ii.prototype.canUndo=function(){if(!this.isEnabled||0<this.ti)return!1;var t=this.EG;return!(null===t||!t.canUndo())},Ii.prototype.undo=Ii.prototype.undo=function(){if(this.canUndo()){var t=this.EG;try{this.fh=!0,this.jd("StartingUndo","Undo",t),this.bh--,t.undo()}catch(t){r.trace("undo error: "+t.toString())}finally{this.jd("FinishedUndo","Undo",t),this.fh=!1}}},Ii.prototype.canRedo=Ii.prototype.canRedo=function(){if(!this.isEnabled||0<this.ti)return!1;var t=this.DG;return!(null===t||!t.canRedo())},Ii.prototype.redo=Ii.prototype.redo=function(){if(this.canRedo()){var t=this.DG;try{this.fh=!0,this.jd("StartingRedo","Redo",t),this.bh++,t.redo()}catch(t){r.trace("redo error: "+t.toString())}finally{this.jd("FinishedRedo","Redo",t),this.fh=!1}}},Ii.prototype.jd=function(t,e,i){void 0===i&&(i=null);var n=new oi;for(n.Dc=Jt,n.propertyName=t,n.object=i,n.oldValue=e,t=this.aJ;t.next();)e=t.value,n.$=e,e.jx(n)},Ii.prototype.handleChanged=Ii.prototype.rF=function(t){if(this.isEnabled&&!this.lb&&!this.skipsEvent(t)){null===(e=this.pj)&&(this.Dv=e=new Bi);var e,i=t.copy();(e=e.Wf).Qa(),e.add(i),e.freeze(),this.hA&&0>=this.ti&&!this.nz&&(null!==(t=t.g)&&!1===t.Fn||r.trace("Change not within a transaction: "+i.toString()))}},Ii.prototype.skipsEvent=function(t){if(null===t||0>t.Dc.value)return!0;if((t=t.object)instanceof ls){if(null!==(t=t.layer)&&t.Pc)return!0}else if(t instanceof $o&&t.Pc)return!0;return!1},r.u(Ii,{aJ:"models"},function(){return this.Dz.i}),r.defineProperty(Ii,{isEnabled:"isEnabled"},function(){return this.kf},function(t){this.kf=t}),r.u(Ii,{EG:"transactionToUndo"},function(){return 0<=this.uj&&this.uj<=this.history.count-1?this.history.ea(this.uj):null}),r.u(Ii,{DG:"transactionToRedo"},function(){return this.uj<this.history.count-1?this.history.ea(this.uj+1):null}),r.u(Ii,{lb:"isUndoingRedoing"},function(){return this.fh}),r.u(Ii,{history:"history"},function(){return this.TG}),r.defineProperty(Ii,{NF:"maxHistoryLength"},function(){return this.rD},function(t){this.rD=t}),r.u(Ii,{uj:"historyIndex"},function(){return this.bh}),r.u(Ii,{pj:"currentTransaction"},function(){return this.Dv}),r.u(Ii,{ti:"transactionLevel"},function(){return this.Fl}),r.u(Ii,{CF:"isInTransaction"},function(){return 0<this.Fl}),r.defineProperty(Ii,{hA:"checksTransactionLevel"},function(){return this.oC},function(t){this.oC=t}),r.u(Ii,{SF:"nestedTransactionNames"},function(){return this.jh}),r.ga("CommandHandler",Ei);var qi=null,Ri="";function Gi(t,e,i,n,o,r){if(void 0===r&&(r=null),!(t.contains(e)||null!==r&&!r(e)||e instanceof Ac))if(t.add(e),e instanceof Fc){if(i&&e instanceof xf)for(var a=e.vc;a.next();)Gi(t,a.value,i,n,o,r);if(o)for(a=e.he;a.next();){var s=a.value;if(!t.contains(s)){var l=s.W,h=s.Z;null!==l&&t.contains(l)&&null!==h&&t.contains(h)?Gi(t,s,i,n,o,r):null!==l&&null!==h||Gi(t,s,i,n,o,r)}}if(1<n)for(e=e.dF();e.next();)Gi(t,e.value,i,n-1,o,r)}else if(e instanceof Rc)for(e=e.Ef;e.next();)Gi(t,e.value,i,n,o,r)}function Vi(t,e,i,n,o){if(null===e||o&&!e.canCopy())return null;if(n.contains(e))return n.ka(e);var a=null,s=e.data;if(null!==s&&null!==i){var l=i.$;e instanceof Rc?l instanceof Ci&&(s=l.mx(s),r.Pa(s)&&(l.Gt(s),a=i.Xf(s))):(s=l.copyNodeData(s),r.Pa(s)&&(l.Il(s),a=i.vh(s)))}else cl(e),null!==(a=e.copy())&&(null!==i?i.add(a):null!==s&&null!==t.g&&t.EH&&(l=t.g.$,s=a instanceof Rc&&l instanceof Ci?l.mx(s):l.copyNodeData(s),r.Pa(s)&&(a.data=s)));if(!(a instanceof Ch))return null;if(a.ib=!1,a.Og=!1,n.add(e,a),e instanceof Fc){for(s=e.he;s.next();){if((l=s.value).W===e){var h=n.ka(l);null!==h&&(h.W=a)}l.Z===e&&(null!==(h=n.ka(l))&&(h.Z=a))}if(e instanceof xf&&a instanceof xf)for(s=a,e=e.vc;e.next();)(l=Vi(t,e.value,i,n,o))instanceof Rc||null===l||(l.Da=s)}else if(e instanceof Rc&&a instanceof Rc)for(null!==(s=e.W)&&(null!==(s=n.ka(s))&&(a.W=s)),null!==(s=e.Z)&&(null!==(s=n.ka(s))&&(a.Z=s)),e=e.Ef;e.next();)null!==(s=Vi(t,e.value,i,n,o))&&s instanceof Fc&&(s.Wb=a);return a}function _i(t){var e=r.eb();for(t=t.i;t.next();){(i=t.value)instanceof Rc||e.push(i)}t=new nt(Ch);for(var i=e.length,n=0;n<i;n++){for(var o=e[n],a=!0,s=0;s<i;s++)if(o.oi(e[s])){a=!1;break}a&&t.add(o)}return r.ta(e),t}function Hi(){0<arguments.length&&r.nd(Hi),r.oc(this),this.aa=null,this.Rb="",this.kf=!0,this.bD=!1,this.jE=null,this.Ww=-1}function Ki(t,e,i){if(e.tc=!1,null===t||t.ou()){var n=0;e.left?n=1===e.re?1:2===e.re?2:1:e.right&&1===e.re&&(n=3);var o="";if(null!==t){switch(n){case 1:o="ObjectSingleClicked";break;case 2:o="ObjectDoubleClicked";break;case 3:o="ObjectContextClicked"}0!==n&&i.Aa(o,t)}else{switch(n){case 1:o="BackgroundSingleClicked";break;case 2:o="BackgroundDoubleClicked";break;case 3:o="BackgroundContextClicked"}0!==n&&i.Aa(o)}if(null!==t)for(;null!==t;){switch(i=null,n){case 1:i=t.click;break;case 2:i=t.Rt?t.Rt:t.click;break;case 3:i=t.lA}if(null!==i&&(i(e,t),e.tc))break;t=t.Q}else{switch(t=null,n){case 1:t=i.click;break;case 2:t=i.Rt?i.Rt:i.click;break;case 3:t=i.lA}null!==t&&t(e)}}}function Wi(){Hi.call(this),0<arguments.length&&r.nd(Wi),this.name="Dragging",this.tC=this.fD=!0,this.Sr=this.SC=!1,this.jD=!0,this.oz=new dt(NaN,NaN).freeze(),this.pz=g,this.qz=new ut(NaN,NaN).freeze(),this.RC=!1,this.sw=this.rw=this.ez=this.qC=this.QC=this.BC=this.cj=null,this.xr=this.hD=!1,this.op=new ut(NaN,NaN),this.Mw=new ut,this.Pw=!1,this.eD=!0,this.zo=100,this.Qj=[],this.SG=new nt(Ch).freeze()}function Ui(t,e){if(t.rj){var i=t.g;null!==i&&i.jn&&(i.$ instanceof Ci&&1===e.count&&e.first()instanceof Rc?(t.ld=e.first(),t.ld.canRelinkFrom()&&t.ld.canRelinkTo()&&t.ld.Mt(),t.cj=i.fb.ZF,null===t.cj&&(t.cj=new $n,t.cj.Sc(i))):(t.ld=null,t.cj=null))}}function Ji(t,e){return void 0===e?new Hn(Zt):t.qu?new Hn(new ut(Math.round(e.x),Math.round(e.y))):new Hn(e.copy())}function $i(t,e,i,n){if(!e.contains(i)&&(!n||i.canMove()||i.canCopy()))if(i instanceof Fc){if(e.add(i,Ji(t,i.location)),i instanceof xf)for(var o=i.vc;o.next();)$i(t,e,o.value,n);for(o=i.he;o.next();){var r=o.value;if(!e.contains(r)){var a=r.W,s=r.Z;null!==a&&e.contains(a)&&null!==s&&e.contains(s)&&$i(t,e,r,n)}}if(t.TH)for(i=i.dF();i.next();)$i(t,e,i.value,n)}else if(i instanceof Rc)for(r=i,e.add(r,Ji(t)),i=r.Ef;i.next();)$i(t,e,i.value,n);else i instanceof Ac||e.add(i,Ji(t,i.location))}function Yi(t){var e=t.g;if(null!==e){var i=e.cb;e.cb=!0,un(t,e.R,null),e.cb=i}t.Qj.length=0}function Xi(){var t=Gn;nn(t),sn(t);var e=t.g;null!==e&&t.op.I()&&(e.position=t.op),null!==e&&ya(e)}function Qi(t,e){if(null!==e){t.Pw=!0;for(var i=e.i;i.next();){var n=i.key;n instanceof Rc&&(n.si=!0)}}}function Zi(t,e){if(null!==e){for(var i=e.i;i.next();){var n=i.key;n instanceof Rc&&(n.si=!1,Wc(n)&&n.Vb())}t.Pw=!1}}function tn(t,e){for(var i=1/0,n=1/0,o=-1/0,r=-1/0,a=t.i;a.next();){if((s=a.value).fe()&&s.isVisible()){var s=(l=s.location).x,l=l.y;isNaN(s)||isNaN(l)||(s<i&&(i=s),l<n&&(n=l),s>o&&(o=s),l>r&&(r=l))}}1/0===i?e.m(0,0,0,0):e.m(i,n,o-i,r-n)}function en(t,e){if(null===t.ec&&(!(null===(n=t.g)||e&&(n.hb||n.Df))&&null!==t.$b)){var i=n.ja;for(i.isEnabled&&i.CF?null!==i.pj&&0<i.pj.Wf.count&&(n.ja.fm(),n.Hb("Drag")):sn(t),n.cb=!e,n.Lq=!e,t.Qk=n.Ec.da,i=t.GH?t.$b.Jj():n.selection,n=(i=n.Mp(i,n,!0)).i;n.next();)n.value.location=n.key.location;tn(i,n=r.Kf()),r.Eb(n);for(var n=new ht(Ch),o=t.$b.i;o.next();){var a=o.key;a.fe()&&a.canCopy()&&(null!==(a=i.ka(a))&&(a.af(),n.add(a,Ji(t,a.location))))}for(i=i.i;i.next();)(o=i.value)instanceof Rc&&o.canCopy()&&n.add(o,Ji(t));t.ec=n,Ui(t,n.Jj()),null!==t.ld&&(i=(n=t.ld).Vn,n.Nk(t.Qk.x-(i.x+i.width/2),t.Qk.y-(i.y+i.height/2)))}}function nn(t){var e=t.g;if(null!==e){if(null!==t.ec&&(e.oB(t.ec.Jj(),!1),t.ec=null,null!==t.$b))for(var i=t.$b.i;i.next();)i.key instanceof Rc&&(i.value.point=new ut(0,0));e.cb=!1,e.Lq=!1,t.Qk=e.Ec.da}}function on(t){if(null!==t.ld){if(t.rj&&null!==t.cj){var e=t.cj;null!==e.g&&(e.g.remove(e.Wd),e.g.remove(e.Xd))}t.ld=null,t.cj=null}}function rn(t,e,i){var n=t.g;if(null!==n){var o=t.Qk,a=r.K();a.assign(n.R.da),t.moveParts(e,a.Hj(o),i),r.v(a)}}function an(t,e,i){if(null!==(e=e.Da)){if(null!==(t=an(t,e,i)))return t;if(null!==(t=i.ka(e)))return t}return null}function sn(t){if(null!==t.$b){for(var e=t.g,i=t.$b.i;i.next();){var n=i.key;n.fe()&&(n.location=i.value.point)}for(i=t.$b.i;i.next();)if((n=i.key)instanceof Rc&&n.si){var o=i.value.point;t.$b.add(n,Ji(t)),n.Nk(-o.x,-o.y)}e.cg()}}function ln(t,e){if(null===e)return!0;var i=e.U;return!!(null===i||i instanceof Ac||i.layer.Pc||t.$b&&t.$b.contains(i)||t.ec&&t.ec.contains(i))}function hn(t,e){var i=t.g;if(null!==i){t.rj&&(null!==t.ld&&(t.ld.W=null,t.ld.Z=null),dn(t,!1));var n=ur(i,e,null,function(e){return!ln(t,e)}),o=i.R;o.Ae=n;var r=i.cb,a=!1;try{if(i.cb=!0,a=un(t,o,n),!t.sa&&null===Gn)return;if(null===n){var s=i.dJ;null!==s&&(s(o),a=!0)}if(!t.sa&&null===Gn)return;if(t.doDragOver(e,n),!t.sa&&null===Gn)return}finally{i.cb=r,a&&i.cg()}(i.pe||i.qe)&&i.tA(o.hf)}}function un(t,e,i){var n=!1,o=t.Qj.length,r=0<o?t.Qj[0]:null;if(i===r)return!1;e.tc=!1;for(var a=0;a<o;a++){var s=t.Qj[a],l=s.cJ;if(null!==l&&(l(e,s,i),n=!0,e.tc))break}if(t.Qj.length=0,!t.sa&&null===Gn||null===i)return n;for(e.tc=!1;null!==i;)t.Qj.push(i),i=cn(i);for(o=t.Qj.length,a=0;a<o&&(null===(l=(s=t.Qj[a]).bJ)||(l(e,s,r),n=!0,!e.tc));a++);return n}function cn(t){var e=t.Q;return null!==e?e:t instanceof Ch&&!(t instanceof xf)&&(null!==(t=t.Da)&&t.mI)?t:null}function fn(t,e,i){var n=t.cj;if(null===n)return null;var o=t.g.vn(e,n.XF,function(t){return n.findValidLinkablePort(t,i)});t=r.K();var a=1/0,s=null;for(o=o.i;o.next();){var l=o.value;if(null!==l.U){var h=l.Wa(k,t);(h=e.Bf(h))<a&&(s=l,a=h)}}return r.v(t),s}function dn(t,e){var i=t.ld;if(null!==i&&!(2>i.qa)){var n=t.g;if(null!==n&&!n.hb){var o=t.cj;if(null!==o){var r=null,a=null;null===i.W&&(null!==(r=fn(t,i.l(0),!1))&&(a=r.U));var s=null,l=null;null===i.Z&&(null!==(s=fn(t,i.l(i.qa-1),!0))&&(l=s.U)),o.isValidLink(a,r,l,s)?e?(i.Np=i.l(0),i.Op=i.l(i.qa-1),i.si=!1,i.W=a,null!==r&&(i.Ng=r.Vd),i.Z=l,null!==s&&(i.Hh=s.Vd),i.lc!==t.rw&&n.Aa("LinkRelinked",i,t.rw),i.Ic!==t.sw&&n.Aa("LinkRelinked",i,t.sw)):Yn(o,a,r,l,s):Yn(o,null,null,null,null)}}}}function pn(t,e){var i=t.g;if(null!==i){t.rj&&dn(t,!0),Yi(t);var n=ur(i,e,null,function(e){return!ln(t,e)}),o=i.R;if(o.Ae=n,null!==n){o.tc=!1;for(var a=n;null!==a;){var s=a.aB;if(null!==s&&(s(o,a),o.tc))break;a=cn(a)}}else null!==(a=i.aB)&&a(o);if(t.sa||null!==Gn){for(o=(t.ec||t.$b).i;o.next();)(a=o.key)instanceof Fc&&a.he.each(function(t){t.si=!1});if(t.doDropOnto(e,n),t.sa||null!==Gn){for(n=r.Kf(),o=i.selection.i;o.next();)(a=o.value)instanceof Fc&&yn(i,a.getAvoidableRect(n));r.Eb(n)}}}}function yn(t,e){var i=!1;if(t.rb.Ak(e)&&(i=!0),0!==(i=t.xA(e,function(t){return t.U},function(t){return t instanceof Rc},!0,function(t){return t instanceof Rc},i)).count)for(i=i.i;i.next();){var n=i.value;n.Zl&&n.Vb()}}Ei.prototype.toString=function(){return"CommandHandler"},r.u(Ei,{g:"diagram"},function(){return this.aa}),Ei.prototype.Sc=function(t){this.aa=t},Ei.prototype.doKeyDown=function(){var t=this.g;if(null!==t){var e=t.R,i=r.yh?e.Cu:e.control,n=e.shift,o=e.alt,a=e.key;!i||"C"!==a&&"Insert"!==a?i&&"X"===a||n&&"Del"===a?this.canCutSelection()&&this.cutSelection():i&&"V"===a||n&&"Insert"===a?this.canPasteSelection()&&this.pasteSelection():i&&"Y"===a||o&&n&&"Backspace"===a?this.canRedo()&&this.redo():i&&"Z"===a||o&&"Backspace"===a?this.canUndo()&&this.undo():"Del"===a||"Backspace"===a?this.canDeleteSelection()&&this.deleteSelection():i&&"A"===a?this.canSelectAll()&&this.selectAll():"Esc"===a?this.canStopCommand()&&this.stopCommand():"Up"===a?t.qe&&(i?t.scroll("pixel","up"):t.scroll("line","up")):"Down"===a?t.qe&&(i?t.scroll("pixel","down"):t.scroll("line","down")):"Left"===a?t.pe&&(i?t.scroll("pixel","left"):t.scroll("line","left")):"Right"===a?t.pe&&(i?t.scroll("pixel","right"):t.scroll("line","right")):"PageUp"===a?n&&t.pe?t.scroll("page","left"):t.qe&&t.scroll("page","up"):"PageDown"===a?n&&t.pe?t.scroll("page","right"):t.qe&&t.scroll("page","down"):"Home"===a?i&&t.qe?t.scroll("document","up"):!i&&t.pe&&t.scroll("document","left"):"End"===a?i&&t.qe?t.scroll("document","down"):!i&&t.pe&&t.scroll("document","right"):" "===a?this.canScrollToPart()&&this.scrollToPart():"Subtract"===a?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===a?this.canIncreaseZoom()&&this.increaseZoom():i&&"0"===a?this.canResetZoom()&&this.resetZoom():n&&"Z"===a?this.canZoomToFit()&&this.zoomToFit():i&&!n&&"G"===a?this.canGroupSelection()&&this.groupSelection():i&&n&&"G"===a?this.canUngroupSelection()&&this.ungroupSelection():e.event&&113===e.event.which?this.canEditTextBlock()&&this.editTextBlock():e.event&&93===e.event.which?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()}},Ei.prototype.doKeyUp=function(){var t=this.g;null!==t&&(t.R.bubbles=!0)},Ei.prototype.stopCommand=function(){var t=this.g;if(null!==t){var e=t.$a;e instanceof mo&&t.Af&&t.kx(),null!==e&&e.doCancel()}},Ei.prototype.canStopCommand=function(){return!0},Ei.prototype.selectAll=function(){var t=this.g;if(null!==t){t.oa();try{t.jc="wait",t.Aa("ChangingSelection");for(var e=t.Pk;e.next();)e.value.ib=!0;for(var i=t.ig;i.next();)i.value.ib=!0;for(var n=t.links;n.next();)n.value.ib=!0}finally{t.Aa("ChangedSelection"),t.jc=""}}},Ei.prototype.canSelectAll=function(){var t=this.g;return null!==t&&t.Af},Ei.prototype.deleteSelection=function(){var t=this.g;if(null!==t&&!t.Aa("SelectionDeleting",t.selection))try{t.jc="wait",t.Hb("Delete"),t.Aa("ChangingSelection");for(var e=new nt(Ch),i=t.selection.i;i.next();)Gi(e,i.value,!0,this.OH?1/0:0,this.TE,function(t){return t.canDelete()});t.oB(e,!0),t.Aa("SelectionDeleted",e)}finally{t.Aa("ChangedSelection"),t.Yc("Delete"),t.jc=""}},Ei.prototype.canDeleteSelection=function(){var t=this.g;return!(null===t||t.hb||t.Df||!t.hn||0===t.selection.count)},Ei.prototype.Mp=function(t,e,i){var n=new ht(Ch,Ch);for(t=t.i;t.next();)Vi(this,t.value,e,n,i);if(null!==e){i=e.$,t=!1,null!==e.fb.ue&&(t=e.fb.ue.rj);for(var o=new nt(Rc),r=new ht(Rc,Rc),a=n.i;a.next();){if((l=a.value)instanceof Rc){var s=l;t||null!==s.W&&null!==s.Z||o.add(s)}else if(i instanceof Li&&l instanceof Fc&&null!==l.data){s=i;var l,h=l,u=(l=a.key).Gk();null!==u&&(null!==(u=n.ka(u))?(s.ri(h.data,s.qb(u.data)),s=e.Xf(h.data),null!==(l=l.wn())&&null!==s&&r.add(l,s)):s.ri(h.data,void 0))}}if(0<o.count&&e.oB(o,!1),0<r.count)for(i=r.i;i.next();)n.add(i.key,i.value)}if(null!==e&&null!==this.g&&null!==(i=(e=e.$).nH)){var c=new ht;n.each(function(t){null!==t.key.data&&c.add(t.key.data,t.value.data)}),i(c,e,this.g.$)}for(e=n.i;e.next();)e.value.Ib();return n},Ei.prototype.copySelection=function(){if(null!==(e=this.g)){for(var t=new nt(Ch),e=e.selection.i;e.next();)Gi(t,e.value,!0,this.HH?1/0:0,this.FH,function(t){return t.canCopy()});this.copyToClipboard(t)}},Ei.prototype.canCopySelection=function(){var t=this.g;return!(null===t||!t.xk||!t.cA||0===t.selection.count)},Ei.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},Ei.prototype.canCutSelection=function(){var t=this.g;return!(null===t||t.hb||t.Df||!t.xk||!t.hn||!t.cA||0===t.selection.count)},Ei.prototype.copyToClipboard=function(t){var e=this.g;if(null!==e){var i=null;if(null===t)qi=null,Ri="";else{i=e.$;var n=!1,o=!1,r=null;try{if(i instanceof Li){var a=i;n=a.rn;a.rn=this.ME}i instanceof Ci&&(o=(a=i).qn,a.qn=this.LE),r=e.Mp(t,null,!0)}finally{i instanceof Li&&(i.rn=n),i instanceof Ci&&(i.qn=o),(i=new et(Ch)).Nc(r),qi=i,Ri=e.$.Rl}}e.Aa("ClipboardChanged",i)}},Ei.prototype.pasteFromClipboard=function(){var t=new nt(Ch),e=qi;if(null===e)return t;var i=this.g;if(null===i||Ri!==i.$.Rl)return t;var n=i.$,o=!1,r=!1,a=null;try{if(n instanceof Li){var s=n;o=s.rn;s.rn=this.ME}n instanceof Ci&&(r=(s=n).qn,s.qn=this.LE),a=i.Mp(e,i,!1)}finally{for(n instanceof Li&&(n.rn=o),n instanceof Ci&&(n.qn=r),e=a.i;e.next();)i=e.value,n=e.key,i.location.I()||(n.location.I()?i.location=n.location:!i.position.I()&&n.position.I()&&(i.position=n.position)),t.add(i)}return t},Ei.prototype.pasteSelection=function(t){void 0===t&&(t=null);var e=this.g;if(null!==e)try{e.jc="wait",e.Hb("Paste"),e.Aa("ChangingSelection");var i=this.pasteFromClipboard();0<i.count&&Br(e);for(var n=i.i;n.next();)n.value.ib=!0;if(e.Aa("ChangedSelection"),null!==t){var o=e.computePartsBounds(e.selection);if(o.I()){var r=e.fb.ue;null===r&&(r=new Wi).Sc(e);var a=r.computeEffectiveCollection(e.selection);r.moveParts(a,new ut(t.x-o.la,t.y-o.ra),!1)}}e.Aa("ClipboardPasted",i)}finally{e.Yc("Paste"),e.jc=""}},Ei.prototype.canPasteSelection=function(){var t=this.g;return!(null===t||t.hb||t.Df||!t.Dp||!t.cA||null===qi||0===qi.count||Ri!==t.$.Rl)},Ei.prototype.undo=function(){var t=this.g;null!==t&&t.ja.undo()},Ei.prototype.canUndo=function(){var t=this.g;return null!==t&&!t.hb&&!t.Df&&(t.yE&&t.ja.canUndo())},Ei.prototype.redo=function(){var t=this.g;null!==t&&t.ja.redo()},Ei.prototype.canRedo=function(){var t=this.g;return null!==t&&!t.hb&&!t.Df&&(t.yE&&t.ja.canRedo())},Ei.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.Cy),r.zd(t,Ei,"decreaseZoom:factor");var e=this.g;null!==e&&e.Ml===zo&&((t*=e.scale)<e.Ah||t>e.zh||(e.scale=t))},Ei.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.Cy),r.zd(t,Ei,"canDecreaseZoom:factor");var e=this.g;return null!==e&&e.Ml===zo&&(!((t*=e.scale)<e.Ah||t>e.zh)&&e.ix)},Ei.prototype.increaseZoom=function(t){void 0===t&&(t=this.Cy),r.zd(t,Ei,"increaseZoom:factor");var e=this.g;null!==e&&e.Ml===zo&&((t*=e.scale)<e.Ah||t>e.zh||(e.scale=t))},Ei.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.Cy),r.zd(t,Ei,"canIncreaseZoom:factor");var e=this.g;return null!==e&&e.Ml===zo&&(!((t*=e.scale)<e.Ah||t>e.zh)&&e.ix)},Ei.prototype.resetZoom=function(t){void 0===t&&(t=this.qx),r.zd(t,Ei,"resetZoom:newscale");var e=this.g;null===e||t<e.Ah||t>e.zh||(e.scale=t)},Ei.prototype.canResetZoom=function(t){void 0===t&&(t=this.qx),r.zd(t,Ei,"canResetZoom:newscale");var e=this.g;return!(null===e||t<e.Ah||t>e.zh)&&e.ix},Ei.prototype.zoomToFit=function(){var t=this.g;if(null!==t){var e=t.scale,i=t.position;e===this.bA&&!isNaN(this.zz)&&t.te.L(this.aA)?(t.scale=this.zz,t.position=this.oD,this.bA=NaN,this.aA=te):(this.zz=e,this.oD=i.copy(),t.zoomToFit(),this.bA=t.scale,this.aA=t.te.copy())}},Ei.prototype.canZoomToFit=function(){var t=this.g;return null!==t&&t.ix},Ei.prototype.scrollToPart=function(t){void 0===t&&(t=null),null!==t&&r.G(t,Ch,Ei,"part");var e=this.g;if(null!==e){if(null===t){try{null!==this.ej&&(this.ej.next()?t=this.ej.value:this.ej=null)}catch(t){this.ej=null}null===t&&(0<e.Yl.count?this.ej=e.Yl.i:0<e.selection.count&&(this.ej=e.selection.i),null!==this.ej&&this.ej.next()&&(t=this.ej.value))}if(null!==t){var i=e.Ka;i.Tn("Scroll To Part");var n=this.CJ;if(0<n){var o=function t(e,i,n){if(i.isVisible())return n;if(i instanceof Ac)t(e,i.Xe,n);else if(i instanceof Rc){var o=i.W;null!==o&&t(e,o,n),null!==(i=i.Z)&&t(e,i,n)}else i instanceof Fc&&(o=i.Wb,null!==o&&t(e,o,n),o=i.Gk(),null!==o&&(o.uc||o.Fq||n.push(o),t(e,o,n))),i=i.Da,null!==i&&(i.ad||i.By||n.push(i),t(e,i,n));return n}(this,t,[t]),a=function(){e.Hb();for(var t=o.pop();0<o.length&&t instanceof Fc&&t.uc&&(!(t instanceof xf)||t.ad);)t=o.pop();0<o.length?(t instanceof Ch&&e.kG(t.Y),t instanceof Fc&&!t.uc&&(t.uc=!0),t instanceof xf&&!t.ad&&(t.ad=!0)):(t instanceof Ch&&e.FE(t.Y),e.nB("LayoutCompleted",s)),e.Yc("Scroll To Part")},s=function(){setTimeout(a,(i.isEnabled?i.duration:0)+n)};e.Yw("LayoutCompleted",s),a()}else{var l=e.position.copy();e.FE(t.Y),l.Oc(e.position)&&i.Gh()}}}},Ei.prototype.canScrollToPart=function(t){return void 0===t&&(t=null),(null===t||t instanceof Ch)&&(null!==(t=this.g)&&(0!==t.selection.count||0!==t.Yl.count)&&(t.pe&&t.qe))},Ei.prototype.collapseTree=function(t){void 0===t&&(t=null);var e=this.g;if(null!==e)try{e.Hb("Collapse Tree"),e.Ka.Tn("Collapse Tree");var i=new et(Fc);if(null!==t&&t.uc)t.collapseTree(),i.add(t);else for(var n=e.selection.i;n.next();){var o=n.value;o instanceof Fc&&((t=o).uc&&(t.collapseTree(),i.add(t)))}e.Aa("TreeCollapsed",i)}finally{e.Yc("Collapse Tree")}},Ei.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var e=this.g;if(null===e||e.hb)return!1;if(null!==t){if(!(t instanceof Fc&&t.uc))return!1;if(0<t.Bx().count)return!0}else for(t=e.selection.i;t.next();)if((e=t.value)instanceof Fc&&e.uc&&0<e.Bx().count)return!0;return!1},Ei.prototype.expandTree=function(t){void 0===t&&(t=null);var e=this.g;if(null!==e)try{e.Hb("Expand Tree"),e.Ka.Tn("Expand Tree");var i=new et(Fc);if(null===t||t.uc)for(var n=e.selection.i;n.next();){var o=n.value;o instanceof Fc&&((t=o).uc||(t.expandTree(),i.add(t)))}else t.expandTree(),i.add(t);e.Aa("TreeExpanded",i)}finally{e.Yc("Expand Tree")}},Ei.prototype.canExpandTree=function(t){void 0===t&&(t=null);var e=this.g;if(null===e||e.hb)return!1;if(null!==t){if(!(t instanceof Fc)||t.uc)return!1;if(0<t.Bx().count)return!0}else for(t=e.selection.i;t.next();)if((e=t.value)instanceof Fc&&!e.uc&&0<e.Bx().count)return!0;return!1},Ei.prototype.groupSelection=function(){var t=this.g;if(null!==t){var e=t.$;if(e instanceof Ci){var i=this.zE;if(null!==i){var n=null;try{t.jc="wait",t.Hb("Group"),t.Aa("ChangingSelection");for(var o=new et(Ch),a=t.selection.i;a.next();){var s=a.value;s.fe()&&s.canGroup()&&o.add(s)}for(var l=new et(Ch),h=o.i;h.next();){for(var u=h.value,c=(a=!1,o.i);c.next();)if(u.oi(c.value)){a=!0;break}a||l.add(u)}if(0<l.count){var f=l.first().Da;if(null!==f)for(;null!==f;){o=!1;for(var d=l.i;d.next();)if(!d.value.oi(f)){o=!0;break}if(!o)break;f=f.Da}if(i instanceof xf)cl(i),null!==(n=i.copy())&&t.add(n);else if(e.QA(i)){var p=e.copyNodeData(i);r.Pa(p)&&(e.Il(p),n=t.Ax(p))}if(null!==n){null!==f&&this.isValidMember(f,n)&&(n.Da=f);for(var y=l.i;y.next();){var v=y.value;this.isValidMember(n,v)&&(v.Da=n)}t.select(n)}}t.Aa("ChangedSelection"),t.Aa("SelectionGrouped",n)}finally{t.Yc("Group"),t.jc=""}}}}},Ei.prototype.canGroupSelection=function(){var t=this.g;if(null===t||t.hb||t.Df||!t.Dp||!t.ax||!(t.$ instanceof Ci)||null===this.zE)return!1;for(t=t.selection.i;t.next();){var e=t.value;if(e.fe()&&e.canGroup())return!0}return!1},Ei.prototype.isValidMember=function(t,e){if(null===e||t===e||e instanceof Rc)return!1;if(null!==t){if(t===e||t.oi(e))return!1;var i=t.$A;if(null!==i&&!i(t,e)||null===t.data&&null!==e.data||null!==t.data&&null===e.data)return!1}return null===(i=this.$A)||i(t,e)},Ei.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var e=this.g;if(null!==e){var i=e.$;if(i instanceof Ci)try{e.jc="wait",e.Hb("Ungroup"),e.Aa("ChangingSelection");var n=new et(xf);if(null!==t)n.add(t);else for(var o=e.selection.i;o.next();){var r=o.value;r instanceof xf&&((t=r).canUngroup()&&n.add(t))}if(0<n.count){e.kx();for(var a=n.i;a.next();){var s=a.value;s.expandSubGraph();var l=s.Da,h=null!==l&&null!==l.data?i.qb(l.data):void 0,u=new et(Ch);u.Nc(s.vc);for(var c=u.i;c.next();){var f=c.value;if(f.ib=!0,!(f instanceof Rc)){var d=f.data;null!==d?i.yB(d,h):f.Da=l}}e.remove(s)}}e.Aa("ChangedSelection"),e.Aa("SelectionUngrouped",n,u)}finally{e.Yc("Ungroup"),e.jc=""}}},Ei.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var e=this.g;if(null===e||e.hb||e.Df||!e.hn||!e.hx||!(e.$ instanceof Ci))return!1;if(null!==t){if(!(t instanceof xf))return!1;if(t.canUngroup())return!0}else for(t=e.selection.i;t.next();)if((e=t.value)instanceof xf&&e.canUngroup())return!0;return!1},Ei.prototype.addTopLevelParts=function(t,e){for(var i=!0,n=_i(t).i;n.next();){var o=n.value;null!==o.Da&&(!e||this.isValidMember(null,o)?o.Da=null:i=!1)}return i},Ei.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var e=this.g;if(null!==e)try{e.Hb("Collapse SubGraph"),e.Ka.Tn("Collapse SubGraph");var i=new et(xf);if(null!==t&&t.ad)t.collapseSubGraph(),i.add(t);else for(var n=e.selection.i;n.next();){var o=n.value;o instanceof xf&&((t=o).ad&&(t.collapseSubGraph(),i.add(t)))}e.Aa("SubGraphCollapsed",i)}finally{e.Yc("Collapse SubGraph")}},Ei.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var e=this.g;if(null===e||e.hb)return!1;if(null!==t)return!!(t instanceof xf&&t.ad);for(t=e.selection.i;t.next();)if((e=t.value)instanceof xf&&e.ad)return!0;return!1},Ei.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var e=this.g;if(null!==e)try{e.Hb("Expand SubGraph"),e.Ka.Tn("Expand SubGraph");var i=new et(xf);if(null===t||t.ad)for(var n=e.selection.i;n.next();){var o=n.value;o instanceof xf&&((t=o).ad||(t.expandSubGraph(),i.add(t)))}else t.expandSubGraph(),i.add(t);e.Aa("SubGraphExpanded",i)}finally{e.Yc("Expand SubGraph")}},Ei.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var e=this.g;if(null===e||e.hb)return!1;if(null!==t)return t instanceof xf&&!t.ad;for(t=e.selection.i;t.next();)if((e=t.value)instanceof xf&&!e.ad)return!0;return!1},Ei.prototype.editTextBlock=function(t){void 0===t&&(t=null),null!==t&&r.G(t,Ll,Ei,"editTextBlock");var e=this.g;if(null!==e){var i=e.fb.HB;if(null!==i){if(null===t){t=null;for(var n=e.selection.i;n.next();){var o=n.value;if(o.canEdit()){t=o;break}}if(null===t)return;t=t.Ut(function(t){return t instanceof Ll&&t.uA})}null!==t&&(e.$a=null,i.Xg=t,e.$a=i)}}},Ei.prototype.canEditTextBlock=function(t){void 0===t&&(t=null);var e=this.g;if(null===e||e.hb||e.Df||!e.gx||null===e.fb.HB)return!1;if(null!==t){if(!(t instanceof Ll))return!1;if(null!==(t=t.U)&&t.canEdit())return!0}else for(e=e.selection.i;e.next();)if((t=e.value).canEdit()&&null!==(t=t.Ut(function(t){return t instanceof Ll&&t.uA})))return!0;return!1},Ei.prototype.showContextMenu=function(t){var e=this.g;if(null!==e){var i=e.fb.mA;if(null!==i&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==(t=i.findObjectWithContextMenu(t)))){var n=new ii,o=null;t instanceof ls?o=t.Wa(k):e.BI||(o=new ut((o=e.rb).x+o.width/2,o.y+o.height/2)),null!==o&&(n.g=e,n.hf=e.FG(o),n.da=o,n.left=!1,n.right=!0,n.up=!0,e.R=n),e.$a=i,ho(i,!1,t)}}},Ei.prototype.canShowContextMenu=function(t){var e=this.g;if(null===e)return!1;var i=e.fb.mA;return null!==i&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==i.findObjectWithContextMenu(t))},r.defineProperty(Ei,{EH:"copiesClipboardData"},function(){return this.rC},function(t){r.j(t,"boolean",Ei,"copiesClipboardData"),this.rC=t}),r.defineProperty(Ei,{FH:"copiesConnectedLinks"},function(){return this.sC},function(t){r.j(t,"boolean",Ei,"copiesConnectedLinks"),this.sC=t}),r.defineProperty(Ei,{TE:"deletesConnectedLinks"},function(){return this.MC},function(t){r.j(t,"boolean",Ei,"deletesConnectedLinks"),this.MC=t}),r.defineProperty(Ei,{HH:"copiesTree"},function(){return this.wC},function(t){r.j(t,"boolean",Ei,"copiesTree"),this.wC=t}),r.defineProperty(Ei,{OH:"deletesTree"},function(){return this.NC},function(t){r.j(t,"boolean",Ei,"deletesTree"),this.NC=t}),r.defineProperty(Ei,{ME:"copiesParentKey"},function(){return this.vC},function(t){r.j(t,"boolean",Ei,"copiesParentKey"),this.vC=t}),r.defineProperty(Ei,{LE:"copiesGroupKey"},function(){return this.uC},function(t){r.j(t,"boolean",Ei,"copiesGroupKey"),this.uC=t}),r.defineProperty(Ei,{zE:"archetypeGroupData"},function(){return this.hC},function(t){null!==t&&r.G(t,Object,Ei,"archetypeGroupData");var e=this.g;null!==e&&((e=e.$)instanceof Ci&&(t instanceof xf||e.QA(t)||r.k("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+t))),this.hC=t}),r.defineProperty(Ei,{$A:"memberValidation"},function(){return this.wl},function(t){null!==t&&r.j(t,"function",Ei,"memberValidation"),this.wl=t}),r.defineProperty(Ei,{qx:"defaultScale"},function(){return this.JC},function(t){r.zd(t,Ei,"defaultScale"),0<t||r.k("defaultScale must be larger than zero, not: "+t),this.JC=t}),r.defineProperty(Ei,{Cy:"zoomFactor"},function(){return this.pE},function(t){r.zd(t,Ei,"zoomFactor"),1<t||r.k("zoomFactor must be larger than 1.0, not: "+t),this.pE=t}),r.defineProperty(Ei,{CJ:"scrollToPartPause"},function(){return this.OD},function(t){r.zd(t,Ei,"scrollToPartPause"),this.OD=t}),r.ga("Tool",Hi),Hi.prototype.Sc=function(t){this.aa=t},Hi.prototype.toString=function(){return""!==this.name?this.name+" Tool":r.pf(Object.getPrototypeOf(this))},Hi.prototype.updateAdornments=function(){},Hi.prototype.canStart=function(){return this.isEnabled},Hi.prototype.doStart=function(){},Hi.prototype.doActivate=function(){this.sa=!0},Hi.prototype.doDeactivate=function(){this.sa=!1},Hi.prototype.doStop=function(){},Hi.prototype.doCancel=function(){this.stopTool()},Hi.prototype.stopTool=function(){var t=this.g;null!==t&&t.$a===this&&(t.$a=null,t.jc="")},Hi.prototype.doMouseDown=function(){!this.sa&&this.canStart()&&this.doActivate()},Hi.prototype.doMouseMove=function(){},Hi.prototype.doMouseUp=function(){this.stopTool()},Hi.prototype.doMouseWheel=function(){},Hi.prototype.canStartMultiTouch=function(){return!0},Hi.prototype.standardPinchZoomStart=function(){var t=this.g;if(null!==t){var e=t.R,i=e.Dx(0,r.xb(NaN,NaN)),n=e.Dx(1,r.xb(NaN,NaN));if(i.I()&&n.I()&&(this.doCancel(),t.gu("hasGestureZoom"))){t.AD=t.scale;var o=n.x-i.x,a=n.y-i.y;t.TD=Math.sqrt(o*o+a*a),e.bubbles=!1}r.v(i),r.v(n)}},Hi.prototype.standardPinchZoomMove=function(){var t=this.g;if(null!==t){var e=t.R,i=e.Dx(0,r.xb(NaN,NaN)),n=e.Dx(1,r.xb(NaN,NaN));if(i.I()&&n.I()&&(this.doCancel(),t.gu("hasGestureZoom"))){var o=n.x-i.x,a=n.y-i.y,s=(a=Math.sqrt(o*o+a*a)/t.TD,o=new ut((Math.min(n.x,i.x)+Math.max(n.x,i.x))/2,(Math.min(n.y,i.y)+Math.max(n.y,i.y))/2),a=t.AD*a,t.pb);if(a!==t.scale&&s.canResetZoom(a)){var l=t.pm;t.pm=o,s.resetZoom(a),t.pm=l}e.bubbles=!1}r.v(i),r.v(n)}},Hi.prototype.doKeyDown=function(){var t=this.g;null!==t&&"Esc"===t.R.key&&this.doCancel()},Hi.prototype.doKeyUp=function(){},Hi.prototype.startTransaction=Hi.prototype.Hb=function(t){void 0===t&&(t=this.name),this.Lf=null;var e=this.g;return null!==e&&e.Hb(t)},Hi.prototype.stopTransaction=Hi.prototype.Rk=function(){var t=this.g;return null!==t&&(null===this.Lf?t.fm():t.Yc(this.Lf))},Hi.prototype.standardMouseSelect=function(){var t=this.g;if(null!==t&&t.Af){var e=t.R,i=t.Xt(e.da,!1);if(null!==i){if(r.yh?e.Cu:e.control){for(t.Aa("ChangingSelection"),e=i;null!==e&&!e.canSelect();)e=e.Da;null!==e&&(e.ib=!e.ib),t.Aa("ChangedSelection")}else if(e.shift){if(!i.ib){for(t.Aa("ChangingSelection"),e=i;null!==e&&!e.canSelect();)e=e.Da;null!==e&&(e.ib=!0),t.Aa("ChangedSelection")}}else if(!i.ib){for(e=i;null!==e&&!e.canSelect();)e=e.Da;null!==e&&t.select(e)}}else!e.left||(r.yh?e.Cu:e.control)||e.shift||t.kx()}},Hi.prototype.standardMouseClick=function(t,e){void 0===t&&(t=null),void 0===e&&(e=function(t){return!t.layer.Pc});var i=this.g;if(null===i)return!1;var n=i.R,o=i.Le(n.da,t,e);return n.Ae=o,Ki(o,n,i),n.tc},Hi.prototype.standardMouseOver=function(){var t=this.g;if(null!==t){var e=t.R;if(null!==e.g&&!0!==t.Ka.rc){var i=t.cb;t.cb=!0;var n=t.eh?t.Le(e.da,null,null):null;e.Ae=n;var o=!1;if(n!==t.to){var r=t.to,a=r;for(t.to=n,this.doCurrentObjectChanged(r,n),e.tc=!1;null!==r;){var s=r.Eu;if(null!==s){if(n===r)break;if(null!==n&&n.am(r))break;if(s(e,r,n),o=!0,e.tc)break}r=r.Q}for(r=a,e.tc=!1;null!==n;){if(null!==(s=n.Du)){if(r===n)break;if(null!==r&&r.am(n))break;if(s(e,n,r),o=!0,e.tc)break}n=n.Q}n=t.to}if(null!==n){for(r=n,a="";null!==r&&""===(a=r.cursor);)r=r.Q;for(t.jc=a,e.tc=!1,r=n;null!==r&&(null===(n=r.dB)||(n(e,r),o=!0,!e.tc));)r=r.Q}else t.jc="",null!==(n=t.dB)&&(n(e),o=!0);o&&t.Ne(),t.cb=i}}},Hi.prototype.doCurrentObjectChanged=function(){},Hi.prototype.standardMouseWheel=function(){var t=this.g;if(null!==t){var e=t.R,i=e.Ck;if(0!==i&&t.te.I()){var n=t.pb;if(((o=t.fb.Fu)===In&&!e.shift||o===Bn&&e.control)&&(0<i?n.canIncreaseZoom():n.canDecreaseZoom()))o=t.pm,t.pm=e.hf,0<i?n.increaseZoom():n.decreaseZoom(),t.pm=o,e.bubbles=!1;else if(o===In&&e.shift||o===Bn&&!e.control){n=t.position.copy();var o=0<i?i:-i,a=e.event.deltaMode,s=e.event.deltaX,l=e.event.deltaY,h="pixel";if((r.bq||r.cq||r.PA)&&(a=1,0<s&&(s=3),0>s&&(s=-3),0<l&&(l=3),0>l&&(l=-3)),void 0===a||void 0===s||void 0===l||0===s&&0===l||e.shift)!e.shift&&t.qe?(o=3*o*(a=t.Tu),0<i?t.scroll("pixel","up",o):t.scroll("pixel","down",o)):e.shift&&t.pe&&(o=3*o*(a=t.Su),0<i?t.scroll("pixel","left",o):t.scroll("pixel","right",o));else{switch(a){case 0:h="pixel";break;case 1:h="line";break;case 2:h="page";break;default:h="pixel"}0!==s&&t.pe&&(0<s?t.scroll(h,"left",-s):t.scroll(h,"right",s)),0!==l&&t.qe&&(0<l?t.scroll(h,"up",-l):t.scroll(h,"down",l))}t.position.L(n)||(e.bubbles=!1)}}}},Hi.prototype.standardWaitAfter=function(t,e){r.j(t,"number",Hi,"standardWaitAfter:delay"),this.cancelWaitAfter();var i=this,n=e.copy();this.Ww=r.setTimeout(function(){i.doWaitAfter(n)},t)},Hi.prototype.cancelWaitAfter=function(){-1!==this.Ww&&r.clearTimeout(this.Ww),this.Ww=-1},Hi.prototype.doWaitAfter=function(){},Hi.prototype.findToolHandleAt=function(t,e){var i=this.g;return null===i?null:null===(i=i.Le(t,function(t){for(;null!==t&&!(t.Q instanceof Ac);)t=t.Q;return t}))?null:i.U.yd===e?i:null},Hi.prototype.isBeyondDragSize=function(t,e){var i=this.g;if(null===i)return!1;void 0===t&&(t=i.Ec.hf),void 0===e&&(e=i.R.hf);var n=(o=i.fb.SH).width,o=o.height;return i.Ec.yj&&(n+=6,o+=6),Math.abs(e.x-t.x)>n||Math.abs(e.y-t.y)>o},r.u(Hi,{g:"diagram"},function(){return this.aa}),r.defineProperty(Hi,{name:"name"},function(){return this.Rb},function(t){r.j(t,"string",Hi,"name"),this.Rb=t}),r.defineProperty(Hi,{isEnabled:"isEnabled"},function(){return this.kf},function(t){r.j(t,"boolean",Hi,"isEnabled"),this.kf=t}),r.defineProperty(Hi,{sa:"isActive"},function(){return this.bD},function(t){r.j(t,"boolean",Hi,"isActive"),this.bD=t}),r.defineProperty(Hi,{Lf:"transactionResult"},function(){return this.jE},function(t){null!==t&&r.j(t,"string",Hi,"transactionResult"),this.jE=t}),r.La(Wi,Hi),r.ga("DraggingTool",Wi),r.defineProperty(Wi,{zF:"isCopyEnabled"},function(){return this.fD},function(t){r.j(t,"boolean",Wi,"isCopyEnabled"),this.fD=t}),r.defineProperty(Wi,{GH:"copiesEffectiveCollection"},function(){return this.tC},function(t){r.j(t,"boolean",Wi,"copiesEffectiveCollection"),this.tC=t}),r.defineProperty(Wi,{TH:"dragsTree"},function(){return this.SC},function(t){r.j(t,"boolean",Wi,"dragsTree"),this.SC=t}),r.defineProperty(Wi,{qu:"isGridSnapEnabled"},function(){return this.Sr},function(t){r.j(t,"boolean",Wi,"isGridSnapEnabled"),this.Sr=t}),r.defineProperty(Wi,{wI:"isComplexRoutingRealtime"},function(){return this.eD},function(t){r.j(t,"boolean",Wi,"isComplexRoutingRealtime"),this.eD=t}),r.defineProperty(Wi,{yI:"isGridSnapRealtime"},function(){return this.jD},function(t){r.j(t,"boolean",Wi,"isGridSnapRealtime"),this.jD=t}),r.defineProperty(Wi,{qF:"gridSnapCellSize"},function(){return this.oz},function(t){r.G(t,dt,Wi,"gridSnapCellSize"),this.oz.L(t)||(this.oz=t=t.S())}),r.defineProperty(Wi,{hI:"gridSnapCellSpot"},function(){return this.pz},function(t){r.G(t,Mt,Wi,"gridSnapCellSpot"),this.pz.L(t)||(this.pz=t=t.S())}),r.defineProperty(Wi,{iI:"gridSnapOrigin"},function(){return this.qz},function(t){r.G(t,ut,Wi,"gridSnapOrigin"),this.qz.L(t)||(this.qz=t=t.S())}),r.defineProperty(Wi,{rj:"dragsLink"},function(){return this.RC},function(t){r.j(t,"boolean",Wi,"dragsLink"),this.RC=t}),r.defineProperty(Wi,{tn:"currentPart"},function(){return this.BC},function(t){null!==t&&r.G(t,Ch,Wi,"currentPart"),this.BC=t}),r.defineProperty(Wi,{ec:"copiedParts"},function(){return this.qC},function(t){this.qC=t}),r.defineProperty(Wi,{$b:"draggedParts"},function(){return this.QC},function(t){this.QC=t}),r.u(Wi,{aL:"draggingParts"},function(){return null!==this.ec?this.ec.Jj():null!==this.$b?this.$b.Jj():this.SG}),r.defineProperty(Wi,{ld:"draggedLink"},function(){return this.ez},function(t){null!==t&&r.G(t,Rc,Wi,"draggedLink"),this.ez!==t&&(this.ez=t,null!==t?(this.rw=t.lc,this.sw=t.Ic):this.sw=this.rw=null)}),r.defineProperty(Wi,{Hx:"isDragOutStarted"},function(){return this.hD},function(t){this.hD=t}),r.defineProperty(Wi,{Qk:"startPoint"},function(){return this.Mw},function(t){r.G(t,ut,Wi,"startPoint"),this.Mw.L(t)||(this.Mw=t=t.S())}),r.defineProperty(Wi,{PE:"delay"},function(){return this.zo},function(t){r.j(t,"number",Wi,"delay"),this.zo=t}),Wi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.hb&&!t.Jt||!t.Kl&&!t.xk&&!t.Jt||!t.Af)return!1;var e=t.R;return!(!e.left||t.$a!==this&&(!this.isBeyondDragSize()||e.yj&&e.timestamp-t.Ec.timestamp<this.zo))&&null!==this.findDraggablePart()},Wi.prototype.findDraggablePart=function(){var t=this.g;if(null===t)return null;if(null===(t=t.Xt(t.Ec.da,!1)))return null;for(;null!==t&&!t.canSelect();)t=t.Da;return null!==t&&(t.canMove()||t.canCopy())?t:null},Wi.prototype.standardMouseSelect=function(){var t=this.g;if(null!==t&&t.Af){var e=t.Xt(t.Ec.da,!1);if(null!==e){for(;null!==e&&!e.canSelect();)e=e.Da;this.tn=e,this.tn.ib||(t.Aa("ChangingSelection"),e=t.R,(r.yh?e.Cu:e.control)||e.shift||Br(t),this.tn.ib=!0,t.Aa("ChangedSelection"))}}},Wi.prototype.doActivate=function(){var t=this.g;if(null!==t){null===this.tn&&this.standardMouseSelect();var e=this.tn;null!==e&&(e.canMove()||e.canCopy())&&(this.sa=!0,this.op.set(t.position),Ui(this,t.selection),this.Qj.length=0,this.$b=this.computeEffectiveCollection(t.selection),t.Zu=!0,Qi(this,this.$b),this.Hb("Drag"),this.Qk=t.Ec.da,t.ef=!0,t.Jt&&(this.Hx=!0,this.xr=!1,Gn=this,Vn=this.g,this.doSimulatedDragOut()))}},Wi.prototype.computeEffectiveCollection=function(t){var e=null!==this.g&&this.g.$a===this,i=new ht(Ch);if(null===t)return i;for(var n=t.i;n.next();)$i(this,i,n.value,e);if(null!==this.ld&&this.rj)return i;for(n=t.i;n.next();)(t=n.value)instanceof Rc&&(null===(e=t.W)||i.contains(e)?null===(e=t.Z)||i.contains(e)||i.remove(t):i.remove(t));return i},Wi.prototype.doDeactivate=function(){this.sa=!1;var t=this.g;if(null!==t&&ya(t),Yi(this),Zi(this,this.$b),this.$b=this.tn=null,this.xr=this.Hx=!1,0<Rn.count){for(var e=Rn.length,i=0;i<e;i++){var n=Rn.ea(i);on(n),nn(n),Yi(n),null!==n.g&&ya(n.g)}Rn.clear()}on(this),this.op.m(NaN,NaN),Gn=Vn=null,nn(this),t.ef=!1,t.jc="",t.Zu=!1,this.Rk()},Wi.prototype.doCancel=function(){nn(this),sn(this);var t=this.g;null!==t&&this.op.I()&&(t.position=this.op),this.stopTool()},Wi.prototype.doKeyDown=function(){var t=this.g;null!==t&&(null!==(t=t.R)&&this.sa&&("Esc"===t.key?this.doCancel():this.doMouseMove()))},Wi.prototype.doKeyUp=function(){var t=this.g;null!==t&&null!==t.R&&this.sa&&this.doMouseMove()},Wi.prototype.moveParts=function(t,e,i){if(null!==t&&(r.G(t,ht,Wi,"moveParts:parts"),0!==t.count)){var n=r.K(),o=r.K();o.assign(e),isNaN(o.x)&&(o.x=0),isNaN(o.y)&&(o.y=0),(e=this.Pw)||Qi(this,t);for(var a=new et(Kn),s=new et(st),l=t.i;l.next();){var h=l.key;if(h.fe()){var u=an(this,h,t);if(null!==u)a.add(new Kn(h,l.value,u));else if(!i||h.canMove()){u=l.value.point,n.assign(u);var c=new ut,f=this.computeMove(h,n.add(o),t,c);h.location=f,l.value.sG=c.Hj(u)}}else l.key instanceof Rc&&s.add(l.Va)}for(i=a.i;i.next();)u=(a=i.value).info.point,n.assign(u),a.Qc.location=n.add(a.jI.sG);for(i=r.K(),u=r.K(),s=s.i;s.next();)(a=(l=s.value).key)instanceof Rc&&(a.si?(h=a.W,c=a.Z,null!==this.ld&&this.rj?(l=l.value.point,t.add(a,Ji(this,o)),h=o.x-l.x,l=o.y-l.y,a.Nk(h,l)):(null!==h&&(i.assign(h.location),null!==(f=t.ka(h))&&i.Hj(f.point)),null!==c&&(u.assign(c.location),null!==(f=t.ka(c))&&u.Hj(f.point)),null!==h&&null!==c?i.Oc(u)?(l=l.value.point,(h=n).assign(i),h.Hj(l),t.add(a,Ji(this,i)),a.Nk(h.x,h.y)):(a.si=!1,a.Vb()):(l=l.value.point,c=null!==h?i:null!==c?u:o,t.add(a,Ji(this,c)),h=c.x-l.x,l=c.y-l.y,a.Nk(h,l)))):null!==a.W&&null!==a.Z||(l=l.value.point,t.add(a,Ji(this,o)),h=o.x-l.x,l=o.y-l.y,a.Nk(h,l)));r.v(n),r.v(o),r.v(i),r.v(u),e||(wr(this.g),Zi(this,t))}},Wi.prototype.computeMove=function(t,e,i,n){if(void 0===n&&(n=new ut),n.assign(e),null===t)return n;void 0===i&&(i=null);var o=e;if(this.qu&&(this.yI||null===i||null!==this.g&&this.g.R.up)&&((i=o=r.K()).assign(e),null!==t)&&null!==(s=this.g)){var a=s.Bn,s=(l=this.qF).width,l=l.height,h=(u=this.iI).x,u=u.y,c=this.hI;if(null!==a){var f=a.Ex;isNaN(s)&&(s=f.width),isNaN(l)&&(l=f.height),a=a.pF,isNaN(h)&&(h=a.x),isNaN(u)&&(u=a.y)}(a=r.xb(0,0)).Xu(0,0,s,l,c),Ve(e.x,e.y,h+a.x,u+a.y,s,l,i),r.v(a)}return i=null!==t.UE?t.UE(t,e,o):o,s=(l=t.$I).x,isNaN(s)&&(s=t.location.x),l=l.y,isNaN(l)&&(l=t.location.y),h=(a=t.UI).x,isNaN(h)&&(h=t.location.x),a=a.y,isNaN(a)&&(a=t.location.y),n.m(Math.max(s,Math.min(i.x,h)),Math.max(l,Math.min(i.y,a))),o!==e&&r.v(o),n},Wi.prototype.doDragOver=function(){},Wi.prototype.doDropOnto=function(){},Wi.prototype.doMouseMove=function(){if(this.sa){var t=this.g;null!==t&&null!==this.tn&&null!==this.$b&&(this.mayCopy()?(t.jc="copy",en(this,!1),Qi(this,this.ec),rn(this,this.ec,!1),Zi(this,this.ec)):this.mayMove()?(nn(this),rn(this,this.$b,!0)):this.mayDragOut()?(t.jc="no-drop",en(this,!1),rn(this,this.ec,!1)):nn(this),hn(this,t.R.da))}},Wi.prototype.doMouseUp=function(){if(this.sa){var t=this.g;if(null!==t){var e=!1,i=this.mayCopy();if(i&&null!==this.ec?(nn(this),en(this,!0),Qi(this,this.ec),rn(this,this.ec,!1),Zi(this,this.ec),null!==this.ec&&t.nG(this.ec.Jj())):(e=!0,nn(this),this.mayMove()&&(rn(this,this.$b,!0),hn(this,t.R.da))),this.xr=!0,pn(this,t.R.da),this.sa){if(this.ec=null,e&&null!==this.$b)for(e=this.$b.i;e.next();){var n=e.key;n instanceof Fc&&(null===(n=n.Da)||null===n.placeholder||this.$b.contains(n)||n.placeholder.H())}t.Fc(),Zi(this,this.$b),this.Lf=i?"Copy":"Move",t.Aa(i?"SelectionCopied":"SelectionMoved",t.selection)}this.stopTool()}}},Wi.prototype.mayCopy=function(){if(!this.zF)return!1;var t=this.g;if(null===t||t.hb||t.Df||!t.Dp||!t.xk||(r.yh?!t.R.alt:!t.R.control))return!1;for(t=t.selection.i;t.next();){var e=t.value;if(e.fe()&&e.canCopy())return!0}return!(null===this.ld||!this.rj||!this.ld.canCopy())},Wi.prototype.mayDragOut=function(){if(!this.zF)return!1;var t=this.g;if(null===t||!t.Jt||!t.xk||t.Kl)return!1;for(t=t.selection.i;t.next();){var e=t.value;if(e.fe()&&e.canCopy())return!0}return!(null===this.ld||!this.rj||!this.ld.canCopy())},Wi.prototype.mayMove=function(){var t=this.g;if(null===t||t.hb||!t.Kl)return!1;for(t=t.selection.i;t.next();){var e=t.value;if(e.fe()&&e.canMove())return!0}return!(null===this.ld||!this.rj||!this.ld.canMove())};var vn,mn,gn,bn,xn,wn,kn,Mn,Sn,Tn,Pn,Nn,Cn,An,Fn,Dn,Ln,jn,zn,Bn,In,On,En,qn,Rn=new et(Wi),Gn=null,Vn=null;function _n(t,e,i){if(null===t.ec&&(null!==(n=t.g)&&!n.hb&&!n.Df)){n.cb=!i,n.Lq=!i,t.Qk=n.R.da,i=n.Mp(e,n,!0),tn(e,a=r.Kf());var n=a.x+a.width/2,o=a.y+a.height/2;r.Eb(a);var a=t.Mw,s=new ht(Ch),l=r.K();for(e=e.i;e.next();){var h=e.value,u=i.ka(h);h.fe()&&h.canCopy()?(h=h.location,l.m(a.x-(n-h.x),a.y-(o-h.y)),u.location=l,u.af(),s.add(u,Ji(t,l))):h instanceof Rc&&h.canCopy()&&(u.Nk(a.x-n,a.y-o),s.add(u,Ji(t)))}r.v(l),t.ec=s,Ui(t,s.Jj()),null!==t.ld&&(n=(i=t.ld).Vn,i.Nk(t.Qk.x-(n.x+n.width/2),t.Qk.y-(n.y+n.height/2)))}}function Hn(t){this.point=t,this.sG=Zt}function Kn(t,e,i){this.Qc=t,this.info=e,this.jI=i}function Wn(){0<arguments.length&&r.nd(Wn),Hi.call(this),this.KD=100,this.mD=!1;var t=new Rc,e=new Ml;e.ff=!0,e.stroke="blue",t.add(e),(e=new Ml).Eq="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.ag="Tool",this.dE=t,t=new Fc,(e=new Ml).Vd="",e.Db="Rectangle",e.fill=null,e.stroke="magenta",e.mb=2,e.Ca=se,t.add(e),t.gm=!1,t.ag="Tool",this.bE=t,this.cE=e,t=new Fc,(e=new Ml).Vd="",e.Db="Rectangle",e.fill=null,e.stroke="magenta",e.mb=2,e.Ca=se,t.add(e),t.gm=!1,t.ag="Tool",this.eE=t,this.fE=e,this.JD=this.HD=this.DD=this.CD=this.ED=null,this.iD=!0,this.fH=new ht(ls,"boolean"),this.LD=this.ul=this.ZD=null}function Un(t,e,i,n,o){if(e===i)return!0;if(null===e||null===i)return!1;for(var r=e.he;r.next();){var a=r.value;if(a!==n&&(!o||a.bc)&&a.Z===e&&((a=a.W)!==e&&Un(t,a,i,n,o)))return!0}return!1}function Jn(){0<arguments.length&&r.nd(Jn),Wn.call(this),this.name="Linking",this.jC={},this.iC=null,this.ba=vn,this.UD=null}function $n(){0<arguments.length&&r.nd($n),Wn.call(this),this.name="Relinking";var t=new Ml;t.Db="Diamond",t.Ca=he,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.Oe=0,this.WC=t,(t=new Ml).Db="Diamond",t.Ca=he,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.Oe=-1,this.gE=t,this.gc=null,this.FD=new pt}function Yn(t,e,i,n,o){null!==t.g&&(null!==e?(t.copyPortProperties(e,i,t.Wd,t.Zn,!1),t.g.add(t.Wd)):t.g.remove(t.Wd),null!==n?(t.copyPortProperties(n,o,t.Xd,t.$n,!0),t.g.add(t.Xd)):t.g.remove(t.Xd))}function Xn(){0<arguments.length&&r.nd(Xn),Hi.call(this),this.name="LinkReshaping";var t=new Ml;t.Db="Rectangle",t.Ca=le,t.fill="lightblue",t.stroke="dodgerblue",this.kl=t,(t=new Ml).Db="Diamond",t.Ca=le,t.fill="lightblue",t.stroke="dodgerblue",this.sD=t,this.MD=3,this.Oy=this.gc=null,this.cp=new ut,this.uw=null}function Qn(t,e,i,n,o,r){return r?Math.abs(e.y-i.y)<t.Eh&&Math.abs(i.y-n.y)<t.Eh&&Math.abs(n.y-o.y)<t.Eh:Math.abs(e.x-i.x)<t.Eh&&Math.abs(i.x-n.x)<t.Eh&&Math.abs(n.x-o.x)<t.Eh}function Zn(){0<arguments.length&&r.nd(Zn),Hi.call(this),this.name="Resizing",this.Yh=new dt(1,1).freeze(),this.Xh=new dt(9999,9999).freeze(),this.Nj=new dt(NaN,NaN).freeze(),this.Sr=!1,this.Jc=null;var t=new Ml;t.oh=k,t.Db="Rectangle",t.Ca=le,t.fill="lightblue",t.stroke="dodgerblue",t.mb=1,t.cursor="pointer",this.kl=t,this.gc=null,this.cp=new ut,this.BD=new dt,this.GD=new ut,this.lz=new dt(0,0),this.kz=new dt(1/0,1/0),this.jz=new dt(1,1),this.yD=!0}function to(){0<arguments.length&&r.nd(to),Hi.call(this),this.name="Rotating",this.SD=45,this.RD=2,this.Jc=null;var t=new Ml;t.Db="Ellipse",t.Ca=he,t.fill="lightblue",t.stroke="dodgerblue",t.mb=1,t.cursor="pointer",this.kl=t,this.gc=null,this.tw=0,this.ND=new ut}function eo(){Hi.call(this),0<arguments.length&&r.nd(eo),this.name="ClickSelecting"}function io(){Hi.call(this),0<arguments.length&&r.nd(io),this.name="Action",this.ho=null}function no(){Hi.call(this),0<arguments.length&&r.nd(no),this.name="ClickCreating",this.um=null,this.gD=!0,this.VC=new ut(0,0)}function oo(){this.lE=this.qD=this.sz=this.Pz=null}function ro(t,e,i){this.text=t,this.IE=e,this.visible=i}function ao(){Hi.call(this),0<arguments.length&&r.nd(ao),this.name="ContextMenu",this.AC=this.Wy=this.xC=null,this.wD=new ut,this.Yy=this.Am=null;var t=this;this.Wz=function(){t.stopTool()},function(t){if((i=new oo).show=function(t,e,i){i.showDefaultContextMenu()},i.Cn=function(t,e){e.hideDefaultContextMenu()},t.Am=i,t.Wz=function(){t.stopTool()},!1===r.OE){var i=r.createElement("div"),n=r.createElement("div");i.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",n.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var o=r.createElement("style");e.document.getElementsByTagName("head")[0].appendChild(o),o.sheet.insertRule(".goCXul { list-style: none; }",0),o.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),o.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),i.addEventListener("contextmenu",so,!1),i.addEventListener("selectstart",so,!1),n.addEventListener("contextmenu",so,!1),e.document.body&&(e.document.body.appendChild(i),e.document.body.appendChild(n)),r.Ot=i,r.Nt=n,r.OE=!0}}(this)}function so(t){return t.preventDefault(),!1}function lo(t){var e=t.g;if(null!==e)if(t.sa){var i=t.Pl;if(null!==i){if(!(i instanceof oo)){var n=e.Le(e.R.da,null,null);null!==n&&n.am(i)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.$a=t,t.doMouseUp())}}else t.canStart()&&(ho(t,!0),t.sa||t.stopTool())}function ho(t,e,i){if(void 0===i&&(i=null),e&&t.standardMouseSelect(),!t.standardMouseClick())if(t.sa=!0,e=t.Am,null===i&&(i=t.findObjectWithContextMenu()),null!==i){var n=i.contextMenu;null!==n?(t.ox=i instanceof ls?i:null,t.showContextMenu(n,t.ox)):null!==e&&t.showContextMenu(e,t.ox)}else null!==e&&t.showContextMenu(e,null)}function uo(){Hi.call(this),0<arguments.length&&r.nd(uo),this.name="DragSelecting",this.zo=175,this.lD=!1;var t=new Ch;t.ag="Tool",t.gm=!1;var e=new Ml;e.name="SHAPE",e.Db="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.wm=t}function co(){Hi.call(this),0<arguments.length&&r.nd(co),this.name="Panning",this.Gz=new ut,this.Mj=!1;var t=this;this.WD=function(){e.document.removeEventListener("scroll",t.WD,!1),t.stopTool()}}function fo(){0<arguments.length&&r.nd(fo),Hi.call(this),this.name="TextEditing",this.Uz=this.qk=null,this.VD=Nn,this.Dl=null,this.Ta=An,this.Gs=null,this.tD=1,this.PD=!0;var t=new oo;this.CC=null,this.KC=t,this.Zy=null,function(t,e){var i=r.createElement("textarea");t.Zy=i,i.addEventListener("input",function(){if(null!==t.Xg){var e=t.WI(this.value),i=this.RJ;this.style.width=20+e.za.width*i+"px",this.style.height=10+e.za.height*i+"px",this.rows=e.UA}},!1),i.addEventListener("keydown",function(e){if(null!==t.Xg){var i=e.which;13===i?(!1===t.Xg.Kx&&e.preventDefault(),t.acceptText(Pn)):9===i?(t.acceptText(Tn),e.preventDefault()):27===i&&(t.doCancel(),null!==t.g&&t.g.doFocus())}},!1),i.addEventListener("focus",function(){yo(t)},!1),i.addEventListener("blur",function(){vo(t)},!1),e.SB=function(){return i.value},e.XA=i,e.show=function(t,e,n){if(n.state===jn)i.style.border="3px solid red",i.focus();else{var o=t.Wa(k),r=e.position,a=e.scale,s=t.sj()*a;s<n.QF&&(s=n.QF);var l=t.Ja.width*s+6,h=t.Ja.height*s+2,u=(o.x-r.x)*a,o=(o.y-r.y)*a;i.value=t.text,e.qj.style.font=t.font,i.style.position=" absolute",i.style.zIndex="100",i.style.font="inherit",i.style.fontSize=" "+100*s+"%",i.style.lineHeight=" normal",i.style.width=" "+l+"px",i.style.height=" "+h+"px",i.style.left=" "+((u-l/2|0)-1)+"px",i.style.top=" "+((o-h/2|0)-1)+"px",i.style.text="align: "+t.textAlign,i.style.margin=" 0",i.style.padding=" 1px",i.style.border=" 0",i.style.outline=" none",i.style.white="space: pre-wrap",i.style.overflow=" hidden",i.RJ=s,e.qj.appendChild(i),i.focus(),n.qy&&(i.select(),i.setSelectionRange(0,9999))}},e.Cn=function(t){t.qj.removeChild(i)}}(this,t)}function po(t){var e=t.Xg,i=t.g,n=t.oj;if(null!==e&&null!==n){var o=e.text,r="";n instanceof oo?null!==n.SB&&(r=n.SB()):r="function"==typeof(r=n.value)?r():r,t.isValidText(e,o,r)?(t.Hb(t.name),t.Ta=zn,t.Lf=t.name,e.text=r,null!==e.yG&&e.yG(e,o,r),null!==i&&i.Aa("TextEdited",e,o),t.Rk(),t.stopTool(),null!==i&&i.doFocus()):(t.Ta=jn,null!==e.wA&&e.wA(t,o,r),n instanceof oo?n.show(e,i,t):(null===t.Gs&&(t.Gs=n.style.border,n.style.border="3px solid red"),"function"==typeof n.focus&&n.focus()))}}function yo(t){if(null!==t.oj&&t.state!==An){var e=t.Zy;t.Ta===Fn&&(t.Ta=Dn),"function"==typeof e.select&&t.qy&&(e.select(),e.setSelectionRange(0,9999))}}function vo(t){if(null!==t.oj&&t.state!==An){var e=t.Zy;"function"==typeof e.focus&&e.focus(),"function"==typeof e.select&&t.qy&&(e.select(),e.setSelectionRange(0,9999))}}function mo(){Hi.call(this),this.name="ToolManager",this.VG=new et(Hi),this.WG=new et(Hi),this.XG=new et(Hi),this.ZC=this.$C=850,this.PC=new dt(2,2).Ha(),this.hE=5e3,this.xD=Bn,this.XC=On,this.Cv=this.DC=null,this.fn=-1}function go(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.sa?t.tF:t.pI,e.R)}function bo(t,e,i,n){r.j(e,"string",mo,"replaceStandardTool:name"),r.G(n,et,mo,"replaceStandardTool:list"),null!==i&&(r.G(i,Hi,mo,"replaceStandardTool:newtool"),i.g&&i.g!==t.g&&r.k("Cannot share tools between Diagrams: "+i.toString()),i.name=e,i.Sc(t.g)),t.findTool(e)?t.replaceTool(e,i):null!==i&&n.add(i)}function xo(){this.EC=wo,this.qr=this.rr=this.aa=null,this.tm=this.sr=this.tr=0,this.ko=this.rc=this.Po=this.$j=!1,this.pl=this.kf=!0,this.Av=this.zv=this.zC=null,this.yC=0,this.Bv=null,this.pv=new nt("string"),this.gz=600,this.YG=new ut(0,0),this.mC=this.lC=this.kE=!1,this.Rm=new ht(ls,jo)}function wo(t,e,i,n){return 1>(t/=n/2)?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}function ko(t){if(t.kf&&(t.pv.clear(),t.rc))if(t.ko){if(0===t.tm){var e=+new Date;t.tm=e,requestAnimationFrame(function(){if(!1!==t.rc&&!t.$j&&t.tm===e){var i=t.aa;i.tj("temporaryPixelRatio")&&(i.pk=1),er(i),t.rc=!1,i.Aa("AnimationStarting"),function(t,e){var i;function n(){if(!1!==r.$j&&r.tm===e){var t=+new Date,i=t>y?u:t-p;To(r),No(r,o,d,a,i,u),r.zv&&r.zv(),xr(o),Po(r),t>y?Co(r):requestAnimationFrame(n)}}void 0===i&&(i=new l);var o=t.aa;if(null!==o){var r=t,a=i.cL||t.EC,s=i.BL||null,h=i.CL||null,u=i.duration||t.gz,c=t.YG;for(i=t.Rm.i;i.next();){var f=i.value.start.position;f instanceof ut&&(f.I()||f.assign(c))}t.zC=a,t.zv=s,t.Av=h,t.yC=u,t.Bv=t.Rm;var d=t.Bv;for(i=d.i;i.next();)(s=i.value.end)["position:placeholder"]&&((h=i.key.findVisibleNode())instanceof xf&&null!==h.placeholder&&(h=h.placeholder,(c=h.Wa(g)).x+=h.padding.left,c.y+=h.padding.top,s["position:placeholder"]=c));t.$j=!0,To(t),No(t,o,d,a,0,u),xr(t.aa),Po(t);var p=+new Date,y=p+u;r.tm===e&&requestAnimationFrame(function(){n()})}}(t,e)}})}}else t.rc=!1}function Mo(t,e,i,n,o,r){if(!(!t.rc||"position"===i&&n.L(o)||e instanceof Ch&&!e.xF)){if((a=t.Rm).contains(e)){var a,s=(a=a.ka(e)).start,h=a.end;void 0===s[i]&&(s[i]=So(n)),a.nx&&void 0!==h[i]?a.Tt[i]=So(o):(r||(a.Tt[i]=So(o)),h[i]=So(o)),r&&0===i.indexOf("position:")&&e instanceof Ch&&(a.Tt.location=So(e.location))}else s=new l,h=new l,s[i]=So(n),h[i]=So(o),n=h,(o=s.position)instanceof ut&&!o.I()&&t.pv.contains("Expand SubGraph")&&o.assign(n.position),s=new jo(s,h,r),r&&0===i.indexOf("position:")&&e instanceof Ch&&(s.Tt.location=So(e.location)),a.add(e,s);t.ko=!0}}function So(t){return t instanceof ut?t.copy():t instanceof dt?t.copy():t}function To(t){if(!t.Po){var e=t.aa;t.kE=e.cb,t.lC=e.Pe,t.mC=e.Zu,e.cb=!0,e.Pe=!0,e.Zu=!0,t.Po=!0}}function Po(t){var e=t.aa;e.cb=t.kE,e.Pe=t.lC,e.Zu=t.mC,t.Po=!1}function No(t,e,i,n,o,r){for(i=i.i;i.next();){var a,s=i.key,l=(h=i.value).start,h=h.end;for(a in h)"position"===a&&(h["position:placeholder"]||h["position:node"])||void 0===Jo[a]||Jo[a](s,l[a],h[a],n,o,r)}n=e.OA,e.OA=!0,a=t.EC,0!==t.tr&&0!==t.sr&&(i=t.tr,e.vb=a(o,i,t.sr-i,r)),null!==t.rr&&null!==t.qr&&(i=t.rr,t=t.qr,e.jb=new ut(a(o,i.x,t.x-i.x,r),a(o,i.y,t.y-i.y,r))),e.OA=n}function Co(t){t.$j=!1,t.ko=!1,To(t);for(var e=t.aa,i=t.zC,n=t.yC,o=t.Bv.i;o.next();){var r,a=o.key,s=o.value,l=s.start,h=s.end,u=s.Tt;for(r in h)if(void 0!==Jo[r]){var c=r;!s.nx||"position:node"!==c&&"position:placeholder"!==c||(c="position"),Jo[c](a,l[r],void 0!==u[r]?u[r]:s.nx?l[r]:h[r],i,n,n)}s.nx&&void 0!==u.location&&a instanceof Ch&&(a.location=u.location),s.iy&&a instanceof Ch&&a.Cd(!1)}for(i=t.aa.links;i.next();)null!==(n=i.value).ip&&(n.points=n.ip,n.ip=null);e.Tx.clear(),e.pk=null,e.Fc(),e.oa(),e.cg(),gr(e),Po(t),t.Av&&t.Av(),t.tm=0,t.Bv=null,t.Av=null,t.zv=null,t.rr=null,t.qr=null,t.tr=0,t.sr=0,t.Rm=new ht(ls,jo),e.Aa("AnimationFinished"),e.Ne()}function Ao(t,e,i){var n=e.Y,o=i.Y,r=null;if(i instanceof xf&&(r=i.placeholder),null!==r?((n=r.Wa(g)).x+=r.padding.left,n.y+=r.padding.top,Mo(t,e,"position",n,e.position,!1)):Mo(t,e,"position",new ut(o.x+o.width/2-n.width/2,o.y+o.height/2-n.height/2),e.position,!1),Mo(t,e,"scale",.01,e.scale,!1),e instanceof xf)for(e=e.vc;e.next();)(r=e.value)instanceof Fc&&Ao(t,r,i)}function Fo(t,e,i){if(e.isVisible()){var n=null;if(i instanceof xf&&(n=i.placeholder),null!==n?Mo(t,e,"position:placeholder",e.position,n,!0):Mo(t,e,"position:node",e.position,i,!0),Mo(t,e,"scale",e.scale,.01,!0),t.rc&&((n=t.Rm).contains(e)&&(n.ka(e).iy=!0)),e instanceof xf)for(e=e.vc;e.next();)(n=e.value)instanceof Fc&&Fo(t,n,i)}}function Do(t,e,i){t.rc&&(null===t.rr&&e.I()&&null===t.qr&&(t.rr=e.copy()),t.qr=i.copy(),t.ko=!0)}function Lo(t,e,i){t.rc&&t.aa.Fn&&(0===t.tr&&0===t.sr&&(t.tr=e),t.sr=i,t.ko=!0)}function jo(t,e,i){this.start=t,this.end=e,this.Tt=new l,this.nx=i,this.iy=!1}Wi.prototype.getDraggingSource=function(){return Gn},Wi.prototype.mayDragIn=function(){var t=this.g;if(null===t||!t.xE||t.hb||t.Df||!t.Dp)return!1;var e=Gn;return null!==e&&null!==e.g&&e.g.$.Rl===t.$.Rl},Wi.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.g;t.Ka.Gh(),xr(t),t.Ka.Gh(),null!==(t=Gn)&&null!==t.g&&(t.g.jc="copy")}},Wi.prototype.doSimulatedDragLeave=function(){null!==Gn&&Gn.doSimulatedDragOut(),this.doCancel()},Wi.prototype.doSimulatedDragOver=function(){var t=this.g;if(null!==t){var e=Gn;null!==e&&null!==e.$b&&this.mayDragIn()&&(t.jc="copy",_n(this,e.$b.Jj(),!1),rn(this,this.ec,!1),hn(this,t.R.da))}},Wi.prototype.doSimulatedDrop=function(){var t=this.g;if(null!==t){var e=Gn;if(null!==e){var i=e.g;e.xr=!0,nn(this),this.mayDragIn()&&(this.Hb("Drop"),_n(this,e.$b.Jj(),!0),rn(this,this.ec,!1),null!==this.ec&&t.nG(this.ec.Jj()),pn(this,t.R.da),t.Fc(),e=t.selection,null!==this.ec?this.Lf="ExternalCopy":e=new nt(Ch),this.ec=null,t.doFocus(),t.Aa("ExternalObjectsDropped",e,i),this.Rk())}}},Wi.prototype.doSimulatedDragOut=function(){var t=this.g;null!==t&&(this.mayCopy()||this.mayMove()?t.jc="":t.jc="no-drop")},r.ga("DraggingInfo",Hn),r.La(Wn,Hi),r.ga("LinkingBaseTool",Wn),Wn.prototype.doStop=function(){var t=this.g;null!==t&&ya(t),this.Tg=this.Sg=this.Rg=this.Qg=this.mc=null,this.zy.clear(),this.Jf=null},r.defineProperty(Wn,{XF:"portGravity"},function(){return this.KD},function(t){r.j(t,"number",Wn,"portGravity"),0<=t&&(this.KD=t)}),r.defineProperty(Wn,{eq:"isUnconnectedLinkValid"},function(){return this.mD},function(t){r.j(t,"boolean",Wn,"isUnconnectedLinkValid"),this.mD=t}),r.defineProperty(Wn,{vf:"temporaryLink"},function(){return this.dE},function(t){r.G(t,Rc,Wn,"temporaryLink"),this.dE=t}),r.defineProperty(Wn,{Wd:"temporaryFromNode"},function(){return this.bE},function(t){r.G(t,Fc,Wn,"temporaryFromNode"),this.bE=t}),r.defineProperty(Wn,{Zn:"temporaryFromPort"},function(){return this.cE},function(t){r.G(t,ls,Wn,"temporaryFromPort"),this.cE=t}),r.defineProperty(Wn,{Xd:"temporaryToNode"},function(){return this.eE},function(t){r.G(t,Fc,Wn,"temporaryToNode"),this.eE=t}),r.defineProperty(Wn,{$n:"temporaryToPort"},function(){return this.fE},function(t){r.G(t,ls,Wn,"temporaryToPort"),this.fE=t}),r.defineProperty(Wn,{mc:"originalLink"},function(){return this.ED},function(t){null!==t&&r.G(t,Rc,Wn,"originalLink"),this.ED=t}),r.defineProperty(Wn,{Qg:"originalFromNode"},function(){return this.CD},function(t){null!==t&&r.G(t,Fc,Wn,"originalFromNode"),this.CD=t}),r.defineProperty(Wn,{Rg:"originalFromPort"},function(){return this.DD},function(t){null!==t&&r.G(t,ls,Wn,"originalFromPort"),this.DD=t}),r.defineProperty(Wn,{Sg:"originalToNode"},function(){return this.HD},function(t){null!==t&&r.G(t,Fc,Wn,"originalToNode"),this.HD=t}),r.defineProperty(Wn,{Tg:"originalToPort"},function(){return this.JD},function(t){null!==t&&r.G(t,ls,Wn,"originalToPort"),this.JD=t}),r.defineProperty(Wn,{Sd:"isForwards"},function(){return this.iD},function(t){r.j(t,"boolean",Wn,"isForwards"),this.iD=t}),r.u(Wn,{zy:"validPortsCache"},function(){return this.fH}),r.defineProperty(Wn,{Jf:"targetPort"},function(){return this.ZD},function(t){null!==t&&r.G(t,ls,Wn,"targetPort"),this.ZD=t}),Wn.prototype.copyPortProperties=function(t,e,i,n,o){if(null!==t&&null!==e&&null!==i&&null!==n){n.Ca=e.Y.size,o?(n.Bb=e.Bb,n.nm=e.nm):(n.Ab=e.Ab,n.Ul=e.Ul),i.Ff=k;var a=r.K();i.location=e.Wa(k,a),r.v(a),n.angle=e.Vl(),null!==this.ey&&this.ey(t,e,i,n,o)}},Wn.prototype.setNoTargetPortProperties=function(t,e,i){null!==e&&(e.Ca=se,e.Ab=v,e.Bb=v),null!==t&&null!==this.g&&(t.location=this.g.R.da),null!==this.ey&&this.ey(null,null,t,e,i)},Wn.prototype.doMouseDown=function(){this.sa&&this.doMouseMove()},Wn.prototype.doMouseMove=function(){if(this.sa){var t=this.g;if(null!==t){if(this.Jf=this.findTargetPort(this.Sd),null!==this.Jf&&this.Jf.U instanceof Fc){var e=this.Jf.U;this.Sd?this.copyPortProperties(e,this.Jf,this.Xd,this.$n,!0):this.copyPortProperties(e,this.Jf,this.Wd,this.Zn,!1)}else this.Sd?this.setNoTargetPortProperties(this.Xd,this.$n,!0):this.setNoTargetPortProperties(this.Wd,this.Zn,!1);(t.pe||t.qe)&&t.tA(t.R.hf)}}},Wn.prototype.findValidLinkablePort=function(t,e){if(null===t)return null;var i=t.U;if(!(i instanceof Fc))return null;for(;null!==t;){var n=e?t.AG:t.fF;if(!0===n&&(null!==t.Vd||t instanceof Fc)&&(e?this.isValidTo(i,t):this.isValidFrom(i,t)))return t;if(!1===n)break;t=t.Q}return null},Wn.prototype.findTargetPort=function(t){var e=(a=this.g).R.da;0>=(o=this.XF)&&(o=.1);var i=this,n=a.vn(e,o,function(e){return i.findValidLinkablePort(e,t)},null,!0),o=1/0,a=null;for(n=n.i;n.next();){var s=n.value,l=s.U;if(l instanceof Fc){var h=s.Wa(k,r.K()),u=e.x-h.x,c=e.y-h.y;r.v(h),(h=u*u+c*c)<o&&(null!==(u=this.zy.ka(s))?u&&(a=s,o=h):t&&this.isValidLink(this.Qg,this.Rg,l,s)||!t&&this.isValidLink(l,s,this.Sg,this.Tg)?(this.zy.add(s,!0),a=s,o=h):this.zy.add(s,!1))}}return null!==a&&((e=a.U)instanceof Fc&&(null===e.layer||e.layer.Kt))?a:null},Wn.prototype.isValidFrom=function(t,e){if(null===t||null===e)return this.eq;if(null!==this.g&&this.g.$a===this&&(null!==t.layer&&!t.layer.Kt||!0!==e.fF))return!1;var i=e.AA;if(1/0>i){if(null!==this.mc&&t===this.Qg&&e===this.Rg)return!0;var n=e.Vd;if(null===n&&(n=""),t.zx(n).count>=i)return!1}return!0},Wn.prototype.isValidTo=function(t,e){if(null===t||null===e)return this.eq;if(null!==this.g&&this.g.$a===this&&(null!==t.layer&&!t.layer.Kt||!0!==e.AG))return!1;var i=e.VJ;if(1/0>i){if(null!==this.mc&&t===this.Sg&&e===this.Tg)return!0;var n=e.Vd;if(null===n&&(n=""),t.Mg(n).count>=i)return!1}return!0},Wn.prototype.isInSameNode=function(t,e){if(null===t||null===e)return!1;if(t===e)return!0;var i=t.U,n=e.U;return null!==i&&i===n},Wn.prototype.isLinked=function(t,e){if(null===t||null===e)return!1;var i=t.U;if(!(i instanceof Fc))return!1;var n=t.Vd;null===n&&(n="");var o=e.U;if(!(o instanceof Fc))return!1;var r=e.Vd;for(null===r&&(r=""),o=o.Mg(r);o.next();)if((r=o.value).W===i&&r.Ng===n)return!0;return!1},Wn.prototype.isValidLink=function(t,e,i,n){if(!this.isValidFrom(t,e)||!this.isValidTo(i,n)||!(null===e||null===n||(e.$H&&n.UJ||!this.isInSameNode(e,n))&&(e.ZH&&n.TJ||!this.isLinked(e,n)))||null!==this.mc&&(null!==t&&this.isLabelDependentOnLink(t,this.mc)||null!==i&&this.isLabelDependentOnLink(i,this.mc))||null!==t&&null!==i&&(null===t.data&&null!==i.data||null!==t.data&&null===i.data)||!this.isValidCycle(t,i,this.mc))return!1;if(null!==t){var o=t.Sx;if(null!==o&&!o(t,e,i,n,this.mc))return!1}return!(null!==i&&null!==(o=i.Sx)&&!o(t,e,i,n,this.mc))&&(null===(o=this.Sx)||o(t,e,i,n,this.mc))},Wn.prototype.isLabelDependentOnLink=function(t,e){if(null===t)return!1;var i=t.Wb;if(null===i)return!1;if(i===e)return!0;var n=new nt(Fc);return n.add(t),function t(e,i,n,o){if(i===n)return!0;var r=i.W;if(null!==r&&r.Cf&&(o.add(r),t(e,r.Wb,n,o)))return!0;i=i.Z;return!(null===i||!i.Cf||(o.add(i),!t(e,i.Wb,n,o)))}(this,i,e,n)},Wn.prototype.isValidCycle=function(t,e,i){if(void 0===i&&(i=null),null===t||null===e)return this.eq;var n=null!==this.g?this.g.aK:Oo;if(n!==Oo){if(n===Go){if(null!==(n=i||this.vf)&&!n.bc)return!0;for(n=e.he;n.next();){var o=n.value;if(o!==i&&o.bc&&o.Z===e)return!1}return!Un(this,t,e,i,!0)}if(n===Vo){if(null!==(n=i||this.vf)&&!n.bc)return!0;for(n=t.he;n.next();)if((o=n.value)!==i&&o.bc&&o.W===t)return!1;return!Un(this,t,e,i,!0)}if(n===Eo)return t===e?t=!0:((n=new nt(Fc)).add(e),t=function t(e,i,n,o,r){if(n===o)return!0;if(null===n||null===o||i.contains(n))return!1;i.add(n);for(var a=n.he;a.next();){var s=a.value;if(s!==r&&s.Z===n&&((s=s.W)!==n&&t(e,i,s,o,r)))return!0}return!1}(this,n,t,e,i)),!t;if(n===qo)return!Un(this,t,e,i,!1);if(n===Ro)return t===e?t=!0:((n=new nt(Fc)).add(e),t=function t(e,i,n,o,r){if(n===o)return!0;if(null===n||null===o||i.contains(n))return!1;i.add(n);for(var a=n.he;a.next();){var s=a.value;if(s!==r){var l=s.W,s=s.Z,l=l===n?s:l;if(l!==n&&t(e,i,l,o,r))return!0}}return!1}(this,n,t,e,i)),!t}return!0},r.defineProperty(Wn,{Sx:"linkValidation"},function(){return this.ul},function(t){null!==t&&r.j(t,"function",Wn,"linkValidation"),this.ul=t}),r.defineProperty(Wn,{ey:"portTargeted"},function(){return this.LD},function(t){null!==t&&r.j(t,"function",Wn,"portTargeted"),this.LD=t}),r.La(Jn,Wn),r.ga("LinkingTool",Jn),Jn.Either=vn=r.p(Jn,"Either",0),Jn.ForwardsOnly=mn=r.p(Jn,"ForwardsOnly",0),Jn.BackwardsOnly=gn=r.p(Jn,"BackwardsOnly",0),r.defineProperty(Jn,{BE:"archetypeLinkData"},function(){return this.jC},function(t){null!==t&&r.G(t,Object,Jn,"archetypeLinkData"),t instanceof ls&&r.G(t,Rc,Jn,"archetypeLinkData"),this.jC=t}),r.defineProperty(Jn,{AE:"archetypeLabelNodeData"},function(){return this.iC},function(t){null!==t&&r.G(t,Object,Jn,"archetypeLabelNodeData"),t instanceof ls&&r.G(t,Fc,Jn,"archetypeLabelNodeData"),this.iC=t}),r.defineProperty(Jn,{direction:"direction"},function(){return this.ba},function(t){r.ob(t,Jn,Jn,"direction"),this.ba=t}),r.defineProperty(Jn,{vG:"startObject"},function(){return this.UD},function(t){null!==t&&r.G(t,ls,Jn,"startObject"),this.UD=t}),Jn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.hb||t.Df||!t.Kt)return!1;var e=t.$;return!(!(e instanceof Ci||e instanceof Li)||!t.R.left||t.$a!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()},Jn.prototype.findLinkablePort=function(){var t=this.g;if(null===t)return null;var e=this.vG;if(null===e&&(e=t.Le(t.Ec.da,null,null)),null===e||!(e.U instanceof Fc))return null;if((t=this.direction)===vn||t===mn){var i=this.findValidLinkablePort(e,!1);if(null!==i)return this.Sd=!0,i}return t!==vn&&t!==gn||null===(i=this.findValidLinkablePort(e,!0))?null:(this.Sd=!1,i)},Jn.prototype.doActivate=function(){var t=this.g;if(null!==t){var e=this.findLinkablePort();null!==e&&(this.Hb(this.name),t.ef=!0,t.jc="pointer",this.Sd?(null===this.Xd||this.Xd.location.I()||(this.Xd.location=t.R.da),this.Rg=e,(e=this.Rg.U)instanceof Fc&&(this.Qg=e),this.copyPortProperties(this.Qg,this.Rg,this.Wd,this.Zn,!1)):(null===this.Wd||this.Wd.location.I()||(this.Wd.location=t.R.da),this.Tg=e,(e=this.Tg.U)instanceof Fc&&(this.Sg=e),this.copyPortProperties(this.Sg,this.Tg,this.Xd,this.$n,!0)),t.add(this.Wd),t.add(this.Xd),null!==this.vf&&(null!==this.Wd&&(this.vf.W=this.Wd),null!==this.Xd&&(this.vf.Z=this.Xd),this.vf.bc=this.isNewTreeLink(),this.vf.Vb(),t.add(this.vf)),this.sa=!0)}},Jn.prototype.doDeactivate=function(){this.sa=!1;var t=this.g;null!==t&&(t.remove(this.vf),t.remove(this.Wd),t.remove(this.Xd),t.ef=!1,t.jc="",this.Rk())},Jn.prototype.doStop=function(){Wn.prototype.doStop.call(this),this.vG=null},Jn.prototype.doMouseUp=function(){if(this.sa){var t=this.g;if(null===t)return;var e=this.Lf=null,i=null,n=null,o=null,r=this.Jf=this.findTargetPort(this.Sd);if(null!==r){var a=r.U;a instanceof Fc&&(this.Sd?(null!==this.Qg&&(e=this.Qg,i=this.Rg),n=a,o=r):(e=a,i=r,null!==this.Sg&&(n=this.Sg,o=this.Tg)))}else this.Sd?null!==this.Qg&&this.eq&&(e=this.Qg,i=this.Rg):null!==this.Sg&&this.eq&&(n=this.Sg,o=this.Tg);null!==e||null!==n?null!==(a=this.insertLink(e,i,n,o))?(null===r&&(this.Sd?a.Op=t.R.da:a.Np=t.R.da),t.Af&&t.select(a),this.Lf=this.name,t.Aa("LinkDrawn",a)):(t.$.GE(),this.doNoLink(e,i,n,o)):this.Sd?this.doNoLink(this.Qg,this.Rg,null,null):this.doNoLink(null,null,this.Sg,this.Tg)}this.stopTool()},Jn.prototype.isNewTreeLink=function(){var t=this.BE;if(null===t)return!0;if(t instanceof Rc)return t.bc;var e=this.g;return null===e||(null===(e=ta(e,t=e.fu(t)))||e.bc)},Jn.prototype.insertLink=function(t,e,i,n){var o=this.g;if(null===o)return null;var a=o.$;if(a instanceof Li){var s=t;if(e=i,o.Ud||(s=i,e=t),null!==s&&null!==e)return a.ri(e.data,a.qb(s.data)),e.wn()}else if(a instanceof Ci)if(s="",null!==t&&(null===e&&(e=t),null===(s=e.Vd)&&(s="")),e="",null!==i&&(null===n&&(n=i),null===(e=n.Vd)&&(e="")),(n=this.BE)instanceof Rc){if(cl(n),null!==(a=n.copy()))return a.W=t,a.Ng=s,a.Z=i,a.Hh=e,o.add(a),(t=this.AE)instanceof Fc&&(cl(t),null!==(t=t.copy())&&(t.Wb=a,o.add(t))),a}else if(null!==n&&(n=a.mx(n),r.Pa(n)))return null!==t&&a.wB(n,a.qb(t.data)),a.xB(n,s),null!==i&&a.CB(n,a.qb(i.data)),a.DB(n,e),a.Gt(n),null===(t=this.AE)||t instanceof Fc||(t=a.copyNodeData(t),r.Pa(t)&&(a.Il(t),void 0!==(t=a.qb(t))&&a.vE(n,t))),o.Xf(n);return null},Jn.prototype.doNoLink=function(){},r.La($n,Wn),r.ga("RelinkingTool",$n),$n.prototype.updateAdornments=function(t){if(null!==t&&t instanceof Rc){var e="RelinkFrom",i=null;if(t.ib&&null!==this.g&&!this.g.hb){var n=t.Uu;null!==n&&t.canRelinkFrom()&&t.Y.I()&&t.isVisible()&&n.Y.I()&&n.Aj()&&(null===(i=t.Sp(e))&&(i=this.makeAdornment(n,!1),t.Hl(e,i)))}null===i&&t.Ej(e),e="RelinkTo",i=null,t.ib&&null!==this.g&&!this.g.hb&&(null!==(n=t.Uu)&&t.canRelinkTo()&&t.Y.I()&&t.isVisible()&&n.Y.I()&&n.Aj()&&(null===(i=t.Sp(e))&&(i=this.makeAdornment(n,!0),t.Hl(e,i)))),null===i&&t.Ej(e)}},$n.prototype.makeAdornment=function(t,e){var i=new Ac;i.type=Ks;var n=e?this.SJ:this.YH;return null!==n&&i.add(n.copy()),i.tb=t,i},r.defineProperty($n,{YH:"fromHandleArchetype"},function(){return this.WC},function(t){null!==t&&r.G(t,ls,$n,"fromHandleArchetype"),this.WC=t}),r.defineProperty($n,{SJ:"toHandleArchetype"},function(){return this.gE},function(t){null!==t&&r.G(t,ls,$n,"toHandleArchetype"),this.gE=t}),r.u($n,{handle:"handle"},function(){return this.gc}),$n.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.hb||t.Df||!t.jn)return!1;var e=t.$;return!(!(e instanceof Ci||e instanceof Li)||!t.R.left)&&(null===(e=this.findToolHandleAt(t.Ec.da,"RelinkFrom"))&&(e=this.findToolHandleAt(t.Ec.da,"RelinkTo")),null!==e)},$n.prototype.doActivate=function(){var t=this.g;if(null!==t){if(null===this.mc){var e=this.findToolHandleAt(t.Ec.da,"RelinkFrom");if(null===e&&(e=this.findToolHandleAt(t.Ec.da,"RelinkTo")),null===e)return;var i=e.U;if(!(i instanceof Ac&&i.Xe instanceof Rc))return;this.gc=e,this.Sd=null===i||"RelinkTo"===i.yd,this.mc=i.Xe}this.Hb(this.name),t.ef=!0,t.jc="pointer",this.Rg=this.mc.lc,this.Qg=this.mc.W,this.Tg=this.mc.Ic,this.Sg=this.mc.Z,this.FD.set(this.mc.Y),null!==this.mc&&0<this.mc.qa&&(null===this.mc.W&&(null!==this.Zn&&(this.Zn.Ca=ae),null!==this.Wd&&(this.Wd.location=this.mc.l(0))),null===this.mc.Z&&(null!==this.$n&&(this.$n.Ca=ae),null!==this.Xd&&(this.Xd.location=this.mc.l(this.mc.qa-1)))),this.copyPortProperties(this.Qg,this.Rg,this.Wd,this.Zn,!1),this.copyPortProperties(this.Sg,this.Tg,this.Xd,this.$n,!0),t.add(this.Wd),t.add(this.Xd),null!==this.vf&&(null!==this.Wd&&(this.vf.W=this.Wd),null!==this.Xd&&(this.vf.Z=this.Xd),this.copyLinkProperties(this.mc,this.vf),this.vf.Vb(),t.add(this.vf)),this.sa=!0}},$n.prototype.copyLinkProperties=function(t,e){if(null!==t&&null!==e){e.Cp=t.Cp,e.pA=t.pA;var i=t.$e;i!==Yh&&i!==$h||(i=Uh),e.$e=i,e.px=t.px,e.bc=t.bc,e.points=t.points,e.ny=t.ny,e.Bq=t.Bq,e.Ab=t.Ab,e.Ul=t.Ul,e.du=t.du,e.eu=t.eu,e.Bb=t.Bb,e.nm=t.nm,e.av=t.av,e.bv=t.bv}},$n.prototype.doDeactivate=function(){this.sa=!1;var t=this.g;null!==t&&(t.remove(this.vf),t.remove(this.Wd),t.remove(this.Xd),t.ef=!1,t.jc="",this.Rk())},$n.prototype.doStop=function(){Wn.prototype.doStop.call(this),this.gc=null},$n.prototype.doMouseUp=function(){if(this.sa){var t=this.g;if(null===t)return;this.Lf=null;var e=this.Qg,i=this.Rg,n=this.Sg,o=this.Tg,r=this.mc;if(this.Jf=this.findTargetPort(this.Sd),null!==this.Jf){var a=this.Jf.U;a instanceof Fc&&(this.Sd?(n=a,o=this.Jf):(e=a,i=this.Jf))}else this.eq?this.Sd?o=n=null:i=e=null:r=null;null!==r?(this.reconnectLink(r,this.Sd?n:e,this.Sd?o:i,this.Sd),null===this.Jf&&(this.Sd?r.Op=t.R.da:r.Np=t.R.da,r.Vb()),t.Af&&(r.ib=!0),this.Lf=this.name,t.Aa("LinkRelinked",r,this.Sd?this.Tg:this.Rg)):this.doNoRelink(this.mc,this.Sd),tf(this.mc,this.FD)}this.stopTool()},$n.prototype.reconnectLink=function(t,e,i,n){return null!==this.g&&(i=null!==i&&null!==i.Vd?i.Vd:"",n?(t.Z=e,t.Hh=i):(t.W=e,t.Ng=i),!0)},$n.prototype.doNoRelink=function(){},r.La(Xn,Hi),r.ga("LinkReshapingTool",Xn),Xn.None=bn=r.p(Xn,"None",0),Xn.Horizontal=xn=r.p(Xn,"Horizontal",1),Xn.Vertical=wn=r.p(Xn,"Vertical",2),Xn.All=kn=r.p(Xn,"All",3),Xn.prototype.getReshapingBehavior=Xn.prototype.kF=function(t){return t&&t.Jz?t.Jz:bn},Xn.prototype.setReshapingBehavior=Xn.prototype.Wu=function(t,e){r.G(t,ls,Xn,"setReshapingBehavior:obj"),r.ob(e,Xn,Xn,"setReshapingBehavior:behavior"),t.Jz=e},Xn.prototype.updateAdornments=function(t){if(null!==t&&t instanceof Rc){if(t.ib&&null!==this.g&&!this.g.hb){var e=t.path;if(null!==e&&t.canReshape()&&t.Y.I()&&t.isVisible()&&e.Y.I()&&e.Aj()){var i=t.Sp(this.name);if(null!==i&&i.zD===t.qa&&i.oE===t.Qu||null!==(i=this.makeAdornment(e))&&(i.zD=t.qa,i.oE=t.Qu,t.Hl(this.name,i)),null!==i)return void(i.location=t.position)}}t.Ej(this.name)}},Xn.prototype.makeAdornment=function(t){var e=t.U,i=e.qa,n=e.ac,o=null;if(null!==e.points&&1<i){(o=new Ac).type=Ks;i=e.Yt;var r=e.Ox,a=n?1:0;if(e.Qu&&e.$e!==Jh)for(var s=i+a;s<r-a;s++){var l=this.makeResegmentHandle(t,s);null!==l&&(l.Oe=s,l.tB=.5,l.AA=999,o.add(l))}for(s=i+1;s<r;s++)if(null!==(l=this.makeHandle(t,s))){if(l.Oe=s,s!==i)if(s===i+1&&n){a=e.l(i);var h=e.l(i+1);we(a.x,h.x)&&we(a.y,h.y)&&(h=e.l(i-1)),we(a.x,h.x)?(this.Wu(l,wn),l.cursor="n-resize"):we(a.y,h.y)&&(this.Wu(l,xn),l.cursor="w-resize")}else s===r-1&&n?(a=e.l(r-1),h=e.l(r),we(a.x,h.x)&&we(a.y,h.y)&&(a=e.l(r+1)),we(a.x,h.x)?(this.Wu(l,wn),l.cursor="n-resize"):we(a.y,h.y)&&(this.Wu(l,xn),l.cursor="w-resize")):s!==r&&(this.Wu(l,kn),l.cursor="move");o.add(l)}o.tb=t}return o},Xn.prototype.makeHandle=function(){var t=this.iu;return null===t?null:t.copy()},r.defineProperty(Xn,{iu:"handleArchetype"},function(){return this.kl},function(t){null!==t&&r.G(t,ls,Xn,"handleArchetype"),this.kl=t}),Xn.prototype.makeResegmentHandle=function(){var t=this.ZI;return null===t?null:t.copy()},r.defineProperty(Xn,{ZI:"midHandleArchetype"},function(){return this.sD},function(t){null!==t&&r.G(t,ls,Xn,"midHandleArchetype"),this.sD=t}),r.u(Xn,{handle:"handle"},function(){return this.gc}),r.u(Xn,{It:"adornedLink"},function(){return this.Oy}),Xn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||t.hb||!t.bx||!t.R.left)&&null!==this.findToolHandleAt(t.Ec.da,this.name)},Xn.prototype.doActivate=function(){var t=this.g;if(null!==t&&(this.gc=this.findToolHandleAt(t.Ec.da,this.name),null!==this.gc)){var e=this.gc.U.Xe;if(e instanceof Rc){if(this.Oy=e,t.ef=!0,this.Hb(this.name),e.Qu&&999===this.gc.AA){var i=e.points.copy(),n=this.gc.Wa(k);if(i.Rd(this.gc.Oe+1,n),e.ac&&i.Rd(this.gc.Oe+1,n),e.points=i,e.ee(),this.gc=this.findToolHandleAt(t.Ec.da,this.name),null===this.gc)return void this.doDeactivate()}this.cp=e.l(this.gc.Oe),this.uw=e.points.copy(),this.sa=!0}}},Xn.prototype.doDeactivate=function(){this.Rk(),this.Oy=this.gc=null;var t=this.g;null!==t&&(t.ef=!1),this.sa=!1},Xn.prototype.doCancel=function(){var t=this.It;null!==t&&(t.points=this.uw),this.stopTool()},Xn.prototype.doMouseMove=function(){var t=this.g;this.sa&&null!==t&&(t=this.computeReshape(t.R.da),this.reshape(t))},Xn.prototype.doMouseUp=function(){var t=this.g;if(this.sa&&null!==t){var e=this.computeReshape(t.R.da);if(this.reshape(e),null!==(e=this.It)&&e.Qu){var i=this.handle.Oe,n=e.l(i-1),o=e.l(i),a=e.l(i+1);if(e.ac){if(i>e.Yt+1&&i<e.Ox-1){var s=e.l(i-2);if(Math.abs(n.x-o.x)<this.Eh&&Math.abs(n.y-o.y)<this.Eh&&(Qn(this,s,n,o,a,!0)||Qn(this,s,n,o,a,!1))){var l=e.points.copy();Qn(this,s,n,o,a,!0)?(l.kg(i-2,new ut(s.x,(a.y+s.y)/2)),l.kg(i+1,new ut(a.x,(a.y+s.y)/2))):(l.kg(i-2,new ut((a.x+s.x)/2,s.y)),l.kg(i+1,new ut((a.x+s.x)/2,a.y))),l.dd(i),l.dd(i-1),e.points=l,e.ee()}else s=e.l(i+2),Math.abs(o.x-a.x)<this.Eh&&Math.abs(o.y-a.y)<this.Eh&&(Qn(this,n,o,a,s,!0)||Qn(this,n,o,a,s,!1))&&(l=e.points.copy(),Qn(this,n,o,a,s,!0)?(l.kg(i-1,new ut(n.x,(n.y+s.y)/2)),l.kg(i+2,new ut(s.x,(n.y+s.y)/2))):(l.kg(i-1,new ut((n.x+s.x)/2,n.y)),l.kg(i+2,new ut((n.x+s.x)/2,s.y))),l.dd(i+1),l.dd(i),e.points=l,e.ee())}}else s=r.K(),je(n.x,n.y,a.x,a.y,o.x,o.y,s)&&s.Bf(o)<this.Eh*this.Eh&&((l=e.points.copy()).dd(i),e.points=l,e.ee()),r.v(s)}t.Fc(),this.Lf=this.name,t.Aa("LinkReshaped",this.It,this.uw)}this.stopTool()},r.defineProperty(Xn,{Eh:"resegmentingDistance"},function(){return this.MD},function(t){r.j(t,"number",Xn,"resegmentingDistance"),this.MD=t}),Xn.prototype.reshape=function(t){var e=this.It;e.jm();var i=this.handle.Oe,n=this.kF(this.handle);if(e.ac)if(i===e.Yt+1)i=e.Yt+1,n===wn?(e.ca(i,e.l(i-1).x,t.y),e.ca(i+1,e.l(i+2).x,t.y)):n===xn&&(e.ca(i,t.x,e.l(i-1).y),e.ca(i+1,t.x,e.l(i+2).y));else if(i===e.Ox-1)i=e.Ox-1,n===wn?(e.ca(i-1,e.l(i-2).x,t.y),e.ca(i,e.l(i+1).x,t.y)):n===xn&&(e.ca(i-1,t.x,e.l(i-2).y),e.ca(i,t.x,e.l(i+1).y));else{n=i;var o=e.l(n),a=e.l(n-1),s=e.l(n+1);we(a.x,o.x)&&we(o.y,s.y)?(we(a.x,e.l(n-2).x)&&!we(a.y,e.l(n-2).y)?(e.w(n,t.x,a.y),i++,n++):e.ca(n-1,t.x,a.y),we(s.y,e.l(n+2).y)&&!we(s.x,e.l(n+2).x)?e.w(n+1,s.x,t.y):e.ca(n+1,s.x,t.y)):we(a.y,o.y)&&we(o.x,s.x)?(we(a.y,e.l(n-2).y)&&!we(a.x,e.l(n-2).x)?(e.w(n,a.x,t.y),i++,n++):e.ca(n-1,a.x,t.y),we(s.x,e.l(n+2).x)&&!we(s.y,e.l(n+2).y)?e.w(n+1,t.x,s.y):e.ca(n+1,t.x,s.y)):we(a.x,o.x)&&we(o.x,s.x)?(we(a.x,e.l(n-2).x)&&!we(a.y,e.l(n-2).y)?(e.w(n,t.x,a.y),i++,n++):e.ca(n-1,t.x,a.y),we(s.x,e.l(n+2).x)&&!we(s.y,e.l(n+2).y)?e.w(n+1,t.x,s.y):e.ca(n+1,t.x,s.y)):we(a.y,o.y)&&we(o.y,s.y)&&(we(a.y,e.l(n-2).y)&&!we(a.x,e.l(n-2).x)?(e.w(n,a.x,t.y),i++,n++):e.ca(n-1,a.x,t.y),we(s.y,e.l(n+2).y)&&!we(s.x,e.l(n+2).x)?e.w(n+1,s.x,t.y):e.ca(n+1,s.x,t.y)),e.ca(i,t.x,t.y)}else e.ca(i,t.x,t.y),o=e.W,a=e.lc,null!==o&&(null!==(n=o.findVisibleNode())&&n!==o&&(a=(o=n).port)),1===i&&e.computeSpot(!0,a).Td()&&(n=a.Wa(k,r.K()),o=e.getLinkPointFromPoint(o,a,n,t,!0,r.K()),e.ca(0,o.x,o.y),r.v(n),r.v(o)),o=e.Z,a=e.Ic,null!==o&&(null!==(n=o.findVisibleNode())&&n!==o&&(a=(o=n).port)),i===e.qa-2&&e.computeSpot(!1,a).Td()&&(n=a.Wa(k,r.K()),o=e.getLinkPointFromPoint(o,a,n,t,!1,r.K()),e.ca(e.qa-1,o.x,o.y),r.v(n),r.v(o));e.nj()},Xn.prototype.computeReshape=function(t){var e=this.It,i=this.handle.Oe;switch(this.kF(this.handle)){case kn:return t;case wn:return new ut((e=e.l(i)).x,t.y);case xn:return e=e.l(i),new ut(t.x,e.y);default:case bn:return e.l(i)}},r.u(Xn,{EL:"originalPoint"},function(){return this.cp}),r.u(Xn,{FL:"originalPoints"},function(){return this.uw}),r.La(Zn,Hi),r.ga("ResizingTool",Zn),Zn.prototype.updateAdornments=function(t){if(!(null===t||t instanceof Rc)){if(t.ib&&null!==this.g&&!this.g.hb)if(null!==(a=t.gG)&&t.canResize()&&t.Y.I()&&t.isVisible()&&a.Y.I()&&a.Aj()){var e=t.Sp(this.name);if(null!==e&&e.tb===a||(e=this.makeAdornment(a)),null!==e){var i=a.Vl();e.angle=i;var n=a.Wa(e.Ff,r.K()),o=a.sj();if(e.location=n,r.v(n),null!==(n=e.placeholder)){var a=a.Ja,s=r.mm();s.m(a.width*o,a.height*o),n.Ca=s,r.Hk(s)}return this.updateResizeHandles(e,i),void t.Hl(this.name,e)}}t.Ej(this.name)}},Zn.prototype.makeAdornment=function(t){var e=null;if(null===(e=t.U.fG)){(e=new Ac).type=Rs,e.Ff=k;var i=new Mf;i.ff=!0,e.add(i),e.add(this.makeHandle(t,g)),e.add(this.makeHandle(t,x)),e.add(this.makeHandle(t,P)),e.add(this.makeHandle(t,S)),e.add(this.makeHandle(t,N)),e.add(this.makeHandle(t,A)),e.add(this.makeHandle(t,F)),e.add(this.makeHandle(t,C))}else if(cl(e),null===(e=e.copy()))return null;return e.tb=t,e},Zn.prototype.makeHandle=function(t,e){var i=this.iu;return null===i?null:((i=i.copy()).alignment=e,i)},Zn.prototype.updateResizeHandles=function(t,e){if(null!==t)if(!t.alignment.Zc()&&("pointer"===t.cursor||0<t.cursor.indexOf("resize")))t:{var i=t.alignment;i.Td()&&(i=k);var n=e;if(0>=i.x)n=0>=i.y?n+225:1<=i.y?n+135:n+180;else if(1<=i.x)0>=i.y?n+=315:1<=i.y&&(n+=45);else if(0>=i.y)n+=270;else{if(!(1<=i.y))break t;n+=90}0>n?n+=360:360<=n&&(n-=360),t.cursor=22.5>n?"e-resize":67.5>n?"se-resize":112.5>n?"s-resize":157.5>n?"sw-resize":202.5>n?"w-resize":247.5>n?"nw-resize":292.5>n?"n-resize":337.5>n?"ne-resize":"e-resize"}else if(t instanceof Ys)for(i=t.elements;i.next();)this.updateResizeHandles(i.value,e)},r.defineProperty(Zn,{iu:"handleArchetype"},function(){return this.kl},function(t){null!==t&&r.G(t,ls,Zn,"handleArchetype"),this.kl=t}),r.u(Zn,{handle:"handle"},function(){return this.gc}),r.defineProperty(Zn,{tb:"adornedObject"},function(){return this.Jc},function(t){null!==t&&r.G(t,ls,Zn,"adornedObject"),this.Jc=t}),Zn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||t.hb||!t.Lt||!t.R.left)&&null!==this.findToolHandleAt(t.Ec.da,this.name)},Zn.prototype.doActivate=function(){var t=this.g;null!==t&&(this.gc=this.findToolHandleAt(t.Ec.da,this.name),null!==this.gc&&(this.Jc=this.gc.U.tb,this.cp.set(this.tb.Wa(this.handle.alignment.VF())),this.GD.set(this.Jc.U.location),this.BD.set(this.Jc.Ca),this.jz=this.computeCellSize(),this.lz=this.computeMinSize(),this.kz=this.computeMaxSize(),t.ef=!0,this.yD=t.Ka.isEnabled,t.Ka.isEnabled=!1,this.Hb(this.name),this.sa=!0))},Zn.prototype.doDeactivate=function(){var t=this.g;null!==t&&(this.Rk(),this.Jc=this.gc=null,this.sa=t.ef=!1,t.Ka.isEnabled=this.yD)},Zn.prototype.doCancel=function(){null!==this.tb&&(this.tb.Ca=this.WF,this.tb.U.location=this.jJ),this.stopTool()},Zn.prototype.doMouseMove=function(){var t=this.g;if(this.sa&&null!==t){var e=this.lz,i=this.kz,n=this.jz,o=this.tb.iF(t.R.da,r.K()),a=this.computeReshape();e=this.computeResize(o,this.handle.alignment,e,i,n,a);this.resize(e),t.cg(),r.v(o)}},Zn.prototype.doMouseUp=function(){var t=this.g;if(this.sa&&null!==t){var e=this.lz,i=this.kz,n=this.jz,o=this.tb.iF(t.R.da,r.K()),a=this.computeReshape();e=this.computeResize(o,this.handle.alignment,e,i,n,a);this.resize(e),r.v(o),t.Fc(),this.Lf=this.name,t.Aa("PartResized",this.tb,this.WF)}this.stopTool()},Zn.prototype.resize=function(t){var e=this.g;if(null!==e){var i=this.tb,n=i.U;i.Ca=t.size,n.af(),t=this.tb.Wa(this.handle.alignment.VF()),n instanceof xf?((i=new et(Ch)).add(n),e.moveParts(i,this.cp.copy().Hj(t),!0)):n.location=n.location.copy().Hj(t).add(this.cp)}},Zn.prototype.computeResize=function(t,e,i,n,o,a){e.Td()&&(e=k);var s=this.tb.Ja,l=s.x,h=s.y,u=s.x+s.width,c=s.y+s.height,f=1;if(!a){f=s.width;var d=s.height;0>=f&&(f=1),0>=d&&(d=1),f=d/f}return d=r.K(),Ve(t.x,t.y,l,h,o.width,o.height,d),t=s.copy(),0>=e.x?0>=e.y?(t.x=Math.max(d.x,u-n.width),t.x=Math.min(t.x,u-i.width),t.width=Math.max(u-t.x,i.width),t.y=Math.max(d.y,c-n.height),t.y=Math.min(t.y,c-i.height),t.height=Math.max(c-t.y,i.height),a||(f<(e=t.height/t.width)?(t.height=f*t.width,t.y=c-t.height):(t.width=t.height/f,t.x=u-t.width))):1<=e.y?(t.x=Math.max(d.x,u-n.width),t.x=Math.min(t.x,u-i.width),t.width=Math.max(u-t.x,i.width),t.height=Math.max(Math.min(d.y-h,n.height),i.height),a||(f<(e=t.height/t.width)?t.height=f*t.width:(t.width=t.height/f,t.x=u-t.width))):(t.x=Math.max(d.x,u-n.width),t.x=Math.min(t.x,u-i.width),t.width=u-t.x,a||(t.height=f*t.width,t.y=h+.5*(c-h-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(d.x-l,n.width),i.width),t.y=Math.max(d.y,c-n.height),t.y=Math.min(t.y,c-i.height),t.height=Math.max(c-t.y,i.height),a||(f<(e=t.height/t.width)?(t.height=f*t.width,t.y=c-t.height):t.width=t.height/f)):1<=e.y?(t.width=Math.max(Math.min(d.x-l,n.width),i.width),t.height=Math.max(Math.min(d.y-h,n.height),i.height),a||(f<(e=t.height/t.width)?t.height=f*t.width:t.width=t.height/f)):(t.width=Math.max(Math.min(d.x-l,n.width),i.width),a||(t.height=f*t.width,t.y=h+.5*(c-h-t.height))):0>=e.y?(t.y=Math.max(d.y,c-n.height),t.y=Math.min(t.y,c-i.height),t.height=c-t.y,a||(t.width=t.height/f,t.x=l+.5*(u-l-t.width))):1<=e.y&&(t.height=Math.max(Math.min(d.y-h,n.height),i.height),a||(t.width=t.height/f,t.x=l+.5*(u-l-t.width))),r.v(d),t},Zn.prototype.computeReshape=function(){var t=Wa;return this.tb instanceof Ml&&(t=Nl(this.tb)),!(t===Xa||t===Qa||null!==this.g&&this.g.R.shift)},Zn.prototype.computeMinSize=function(){var t=this.tb.qi.copy(),e=this.qi;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},Zn.prototype.computeMaxSize=function(){var t=this.tb.Gf.copy(),e=this.Gf;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},Zn.prototype.computeCellSize=function(){var t=new dt(NaN,NaN),e=this.tb.U;if(null!==e){var i=e.uJ;!isNaN(i.width)&&0<i.width&&(t.width=i.width),!isNaN(i.height)&&0<i.height&&(t.height=i.height)}return i=this.Gp,isNaN(t.width)&&!isNaN(i.width)&&0<i.width&&(t.width=i.width),isNaN(t.height)&&!isNaN(i.height)&&0<i.height&&(t.height=i.height),e=this.g,(isNaN(t.width)||isNaN(t.height))&&e&&(null!==(i=e.fb.ue)&&i.qu&&(i=i.qF,isNaN(t.width)&&!isNaN(i.width)&&0<i.width&&(t.width=i.width),isNaN(t.height)&&!isNaN(i.height)&&0<i.height&&(t.height=i.height)),null!==(e=e.Bn)&&e.visible&&this.qu&&(i=e.Ex,isNaN(t.width)&&!isNaN(i.width)&&0<i.width&&(t.width=i.width),isNaN(t.height)&&!isNaN(i.height)&&0<i.height&&(t.height=i.height))),(isNaN(t.width)||0===t.width||1/0===t.width)&&(t.width=1),(isNaN(t.height)||0===t.height||1/0===t.height)&&(t.height=1),t},r.defineProperty(Zn,{qi:"minSize"},function(){return this.Yh},function(t){if(r.G(t,dt,Zn,"minSize"),!this.Yh.L(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.Yh.m(e,t)}}),r.defineProperty(Zn,{Gf:"maxSize"},function(){return this.Xh},function(t){if(r.G(t,dt,Zn,"maxSize"),!this.Xh.L(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.Xh.m(e,t)}}),r.defineProperty(Zn,{Gp:"cellSize"},function(){return this.Nj},function(t){r.G(t,dt,Zn,"cellSize"),this.Nj.L(t)||this.Nj.assign(t)}),r.defineProperty(Zn,{qu:"isGridSnapEnabled"},function(){return this.Sr},function(t){r.j(t,"boolean",Zn,"isGridSnapEnabled"),this.Sr=t}),r.u(Zn,{WF:"originalDesiredSize"},function(){return this.BD}),r.u(Zn,{jJ:"originalLocation"},function(){return this.GD}),r.La(to,Hi),r.ga("RotatingTool",to),to.prototype.updateAdornments=function(t){if(null!==t){if(t instanceof Rc){var e=t.qB;if(e===t||e===t.path||e.ff)return}if(t.ib&&null!==this.g&&!this.g.hb&&(null!==(e=t.qB)&&t.canRotate()&&t.Y.I()&&t.isVisible()&&e.Y.I()&&e.Aj())){var i=t.Sp(this.name);if(null!==i&&i.tb===e||(i=this.makeAdornment(e)),null!==i){i.angle=e.Vl();var n=null,o=null;e===t||e===t.bg?(n=t.bg,o=t.Ff):(n=e,o=k);var a=n.Ja;for(o=r.xb(a.width*o.x+o.offsetX,a.height*o.y+o.offsetY);null!==n&&n!==e;)n.transform.nb(o),n=n.Q;n=o.y,a=Math.max(o.x-e.Ja.width,0);var s=r.K();return i.location=e.Wa(new Mt(1,0,50+a,n),s),r.v(s),r.v(o),void t.Hl(this.name,i)}}t.Ej(this.name)}},to.prototype.makeAdornment=function(t){var e=null;if(null===(e=t.U.xJ)){(e=new Ac).type=Es,e.Ff=k;var i=this.iu;null!==i&&e.add(i.copy())}else if(cl(e),null===(e=e.copy()))return null;return e.tb=t,e},r.defineProperty(to,{iu:"handleArchetype"},function(){return this.kl},function(t){null!==t&&r.G(t,ls,to,"handleArchetype"),this.kl=t}),r.u(to,{handle:"handle"},function(){return this.gc}),r.defineProperty(to,{tb:"adornedObject"},function(){return this.Jc},function(t){null!==t&&r.G(t,ls,to,"adornedObject"),this.Jc=t}),to.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||t.hb||!t.ex||!t.R.left)&&null!==this.findToolHandleAt(t.Ec.da,this.name)},to.prototype.doActivate=function(){var t=this.g;if(null!==t&&(this.gc=this.findToolHandleAt(t.Ec.da,this.name),null!==this.gc)){this.Jc=this.gc.U.tb;var e=this.Jc.U,i=e.bg;this.ND=this.Jc===e||this.Jc===i?i.Wa(e.Ff):this.Jc.Wa(k),this.tw=this.Jc.angle,t.ef=!0,t.rA=!0,this.Hb(this.name),this.sa=!0}},to.prototype.doDeactivate=function(){var t=this.g;null!==t&&(this.Rk(),this.Jc=this.gc=null,this.sa=t.ef=!1)},to.prototype.doCancel=function(){var t=this.g;null!==t&&(t.rA=!1),this.rotate(this.tw),this.stopTool()},to.prototype.doMouseMove=function(){var t=this.g;this.sa&&null!==t&&(t=this.computeRotate(t.R.da),this.rotate(t))},to.prototype.doMouseUp=function(){var t=this.g;if(this.sa&&null!==t){t.rA=!1;var e=this.computeRotate(t.R.da);this.rotate(e),t.Fc(),this.Lf=this.name,t.Aa("PartRotated",this.Jc,this.tw)}this.stopTool()},to.prototype.rotate=function(t){null!==this.Jc&&(this.Jc.angle=t)},to.prototype.computeRotate=function(t){t=this.ND.Pb(t),null!==(e=this.Jc.Q)&&(360<=(t-=e.Vl())?t-=360:0>t&&(t+=360));var e=Math.min(Math.abs(this.LJ),180),i=Math.min(Math.abs(this.KJ),e/2);return(null===this.g||!this.g.R.shift)&&0<e&&0<i&&(t%e<i?t=Math.floor(t/e)*e:t%e>e-i&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},r.defineProperty(to,{LJ:"snapAngleMultiple"},function(){return this.SD},function(t){r.j(t,"number",to,"snapAngleMultiple"),this.SD=t}),r.defineProperty(to,{KJ:"snapAngleEpsilon"},function(){return this.RD},function(t){r.j(t,"number",to,"snapAngleEpsilon"),this.RD=t}),r.u(to,{DL:"originalAngle"},function(){return this.tw}),r.La(eo,Hi),r.ga("ClickSelectingTool",eo),eo.prototype.canStart=function(){return!(!this.isEnabled||null===this.g||this.isBeyondDragSize())},eo.prototype.doMouseUp=function(){this.sa&&(this.standardMouseSelect(),!this.standardMouseClick()&&null!==this.g&&this.g.R.yj&&this.g.fb.doToolTip()),this.stopTool()},r.La(io,Hi),r.ga("ActionTool",io),io.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t)return!1;var e=t.R,i=t.Le(e.da,function(t){for(;null!==t.Q&&!t.Fx;)t=t.Q;return t});return null!==i&&(!!i.Fx&&(this.ho=i,t.to=t.Le(e.da,null,null),!0))},io.prototype.doMouseDown=function(){if(this.sa){var t=this.g.R,e=this.ho;null!==e&&(t.Ae=e,null!==e.rE&&e.rE(t,e))}else this.canStart()&&this.doActivate()},io.prototype.doMouseMove=function(){if(this.sa){var t=this.g.R,e=this.ho;null!==e&&(t.Ae=e,null!==e.sE&&e.sE(t,e))}},io.prototype.doMouseUp=function(){if(this.sa){var t=this.g,e=t.R,i=this.ho;if(null===i)return;e.Ae=i,null!==i.tE&&i.tE(e,i),this.isBeyondDragSize()||Ki(i,e,t)}this.stopTool()},io.prototype.doCancel=function(){if(null!==(t=this.g)){var t=t.R,e=this.ho;if(null===e)return;t.Ae=e,null!==e.qE&&e.qE(t,e)}this.stopTool()},io.prototype.doStop=function(){this.ho=null},r.La(no,Hi),r.ga("ClickCreatingTool",no),no.prototype.canStart=function(){if(!this.isEnabled||null===this.eA)return!1;var t=this.g;if(null===t||t.hb||t.Df||!t.Dp||!t.R.left||this.isBeyondDragSize())return!1;if(this.xI){if(1===t.R.re&&(this.VC=t.R.hf.copy()),2!==t.R.re||this.isBeyondDragSize(this.VC))return!1}else if(1!==t.R.re)return!1;return t.$a===this||null===t.Xt(t.R.da,!0)},no.prototype.doMouseUp=function(){var t=this.g;this.sa&&null!==t&&this.insertPart(t.R.da),this.stopTool()},no.prototype.insertPart=function(t){var e=this.g;if(null===e)return null;var i=this.eA;if(null===i)return null;this.Hb(this.name);var n=null;return i instanceof Ch?i.fe()&&(cl(i),null!==(n=i.copy())&&e.add(n)):null!==i&&(i=e.$.copyNodeData(i),r.Pa(i)&&(e.$.Il(i),n=e.vh(i))),null!==n&&(n.location=t,e.Af&&e.select(n)),e.Fc(),this.Lf=this.name,e.Aa("PartCreated",n),this.Rk(),n},r.defineProperty(no,{eA:"archetypeNodeData"},function(){return this.um},function(t){null!==t&&r.G(t,Object,no,"archetypeNodeData"),this.um=t}),r.defineProperty(no,{xI:"isDoubleClick"},function(){return this.gD},function(t){r.j(t,"boolean",no,"isDoubleClick"),this.gD=t}),r.ga("HTMLInfo",oo),r.defineProperty(oo,{XA:"mainElement"},function(){return this.qD},function(t){null!==t&&r.G(t,HTMLElement,oo,"mainElement"),this.qD=t}),r.defineProperty(oo,{show:"show"},function(){return this.Pz},function(t){this.Pz!==t&&(null!==t&&r.j(t,"function",oo,"show"),this.Pz=t)}),r.defineProperty(oo,{Cn:"hide"},function(){return this.sz},function(t){this.sz!==t&&(null!==t&&r.j(t,"function",oo,"hide"),this.sz=t)}),r.defineProperty(oo,{SB:"valueFunction"},function(){return this.lE},function(t){this.lE=t}),r.La(ao,Hi),r.ga("ContextMenuTool",ao),ao.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||this.isBeyondDragSize()||!t.R.right)&&!!(null!==this.Am&&t.R.yj||null!==this.findObjectWithContextMenu())},ao.prototype.doStart=function(){var t=this.g;null!==t&&this.wD.set(t.Ec.da)},ao.prototype.doStop=function(){this.hideContextMenu(),this.ox=null},ao.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var e=this.g;if(null===e)return null;var i=e.R,n=null;if(t instanceof Qo||(n=t instanceof ls?t:e.Le(i.da,null,function(t){return!t.layer.Pc})),null!==n){for(t=n;null!==t;){if(null!==t.contextMenu)return t;t=t.Q}if(null!==this.Am&&e.R.yj)return n.U}else if(null!==e.contextMenu)return e;return null},ao.prototype.doActivate=function(){},ao.prototype.doMouseDown=function(){Hi.prototype.doMouseDown.call(this),null!==this.g&&this.g.fb.gf.contains(this)&&lo(this)},ao.prototype.doMouseUp=function(){lo(this)},ao.prototype.doMouseMove=function(){this.sa&&null!==this.g&&this.g.fb.doMouseMove()},ao.prototype.showContextMenu=function(t,e){if(null!==e&&r.G(e,ls,ao,"showContextMenu:obj"),null!==(i=this.g)){if(t!==this.Pl&&this.hideContextMenu(),t instanceof Ac){if(t.ag="Tool",t.gm=!1,t.scale=1/i.scale,t.yd=this.name,null!==t.placeholder&&(t.placeholder.scale=i.scale),i.add(t),null!==e){var i=null,n=e.Tl();null!==n&&(i=n.data),t.tb=e,t.data=i}else t.data=i.$;t.af(),this.positionContextMenu(t,e)}else t instanceof oo&&t.show(e,i,this);this.Pl=t}},ao.prototype.positionContextMenu=function(t){if(null===t.placeholder){var e=this.g;if(null!==e){var i=e.R.da.copy(),n=t.za,o=e.rb;e.R.yj&&(i.x-=n.width),i.x+n.width>o.right&&(i.x-=n.width+5),i.x<o.x&&(i.x=o.x),i.y+n.height>o.bottom&&(i.y-=n.height+5),i.y<o.y&&(i.y=o.y),t.position=i}}},ao.prototype.hideContextMenu=function(){var t=this.g;if(null!==t){var e=this.Pl;null!==e&&(e instanceof Ac?(t.remove(e),null!==this.Wy&&this.Wy.Ej(e.yd),e.data=null,e.tb=null):e instanceof oo&&(null!==e.Cn?e.Cn(t,this):null!==e.XA&&(e.XA.style.display="none")),this.Pl=null,this.standardMouseOver())}},ao.prototype.showDefaultContextMenu=function(){var t=this.g;if(null!==t){null===this.Yy&&(this.Yy=function(t){return null===t.g?null:((t=new et(ro)).add(new ro("Copy",function(t){t.pb.copySelection()},function(t){return t.pb.canCopySelection()})),t.add(new ro("Cut",function(t){t.pb.cutSelection()},function(t){return t.pb.canCutSelection()})),t.add(new ro("Delete",function(t){t.pb.deleteSelection()},function(t){return t.pb.canDeleteSelection()})),t.add(new ro("Paste",function(t){t.pb.pasteSelection(t.R.da)},function(t){return t.pb.canPasteSelection()})),t.add(new ro("Select All",function(t){t.pb.selectAll()},function(t){return t.pb.canSelectAll()})),t.add(new ro("Undo",function(t){t.pb.undo()},function(t){return t.pb.canUndo()})),t.add(new ro("Redo",function(t){t.pb.redo()},function(t){return t.pb.canRedo()})),t.add(new ro("Scroll To Part",function(t){t.pb.scrollToPart()},function(t){return t.pb.canScrollToPart()})),t.add(new ro("Zoom To Fit",function(t){t.pb.zoomToFit()},function(t){return t.pb.canZoomToFit()})),t.add(new ro("Reset Zoom",function(t){t.pb.resetZoom()},function(t){return t.pb.canResetZoom()})),t.add(new ro("Group Selection",function(t){t.pb.groupSelection()},function(t){return t.pb.canGroupSelection()})),t.add(new ro("Ungroup Selection",function(t){t.pb.ungroupSelection()},function(t){return t.pb.canUngroupSelection()})),t.add(new ro("Edit Text",function(t){t.pb.editTextBlock()},function(t){return t.pb.canEditTextBlock()})),t)}(this)),r.Ot.innerHTML="",r.Nt.addEventListener("click",this.Wz,!1);var e=this,i=r.createElement("ul");i.className="goCXul",r.Ot.appendChild(i),i.innerHTML="";for(var n=this.Yy.i;n.next();){var o=n.value,a=o.visible;if("function"==typeof o.IE&&("function"!=typeof a||a(t))){(a=r.createElement("li")).className="goCXli";var s=r.createElement("a");s.className="goCXa",s.href="#",s.QG=o.IE,s.addEventListener("click",function(i){return this.QG(t),e.stopTool(),i.preventDefault(),!1},!1),s.textContent=o.text,a.appendChild(s),i.appendChild(a)}}r.Ot.style.display="block",r.Nt.style.display="block"}},ao.prototype.hideDefaultContextMenu=function(){null!==this.Pl&&this.Pl===this.Am&&(r.Ot.style.display="none",r.Nt.style.display="none",r.Nt.removeEventListener("click",this.Wz,!1),this.Pl=null)},r.defineProperty(ao,{Pl:"currentContextMenu"},function(){return this.xC},function(t){this.xC=t,this.Wy=t instanceof Ac?t.Xe:null}),r.defineProperty(ao,{$K:"defaultTouchContextMenu"},function(){return this.Am},function(t){this.Am=t}),r.defineProperty(ao,{ox:"currentObject"},function(){return this.AC},function(t){null!==t&&r.G(t,ls,ao,"currentObject"),this.AC=t}),r.u(ao,{zL:"mouseDownPoint"},function(){return this.wD}),r.La(uo,Hi),r.ga("DragSelectingTool",uo),uo.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||!t.Af)return!1;var e=t.R;return!(!e.left||t.$a!==this&&(!this.isBeyondDragSize()||e.timestamp-t.Ec.timestamp<this.PE||null!==t.Xt(e.da,!0)))},uo.prototype.doActivate=function(){var t=this.g;null!==t&&(this.sa=!0,t.ef=!0,t.cb=!0,t.add(this.rh),this.doMouseMove())},uo.prototype.doDeactivate=function(){var t=this.g;null!==t&&(ya(t),t.remove(this.rh),t.cb=!1,this.sa=t.ef=!1)},uo.prototype.doMouseMove=function(){var t=this.g;if(null!==t&&this.sa&&null!==this.rh){var e=this.computeBoxBounds(),i=this.rh.Bd("SHAPE");null===i&&(i=this.rh.Ad()),i.Ca=e.size,this.rh.position=e.position,(t.pe||t.qe)&&t.tA(t.R.hf)}},uo.prototype.doMouseUp=function(){if(this.sa){var t=this.g;t.remove(this.rh);try{t.jc="wait",this.selectInRect(this.computeBoxBounds())}finally{t.jc=""}}this.stopTool()},uo.prototype.computeBoxBounds=function(){var t=this.g;return null===t?new pt(0,0,0,0):new pt(t.Ec.da,t.R.da)},uo.prototype.selectInRect=function(t){var e=this.g;if(null!==e){var i=e.R;if(e.Aa("ChangingSelection"),t=e.Fk(t,null,function(t){return t instanceof Ch&&t.canSelect()},this.EI),r.yh?i.Cu:i.control)if(i.shift)for(t=t.i;t.next();)(i=t.value).ib&&(i.ib=!1);else for(t=t.i;t.next();)(i=t.value).ib=!i.ib;else{if(!i.shift){i=new et(Ch);for(var n=e.selection.i;n.next();){var o=n.value;t.contains(o)||i.add(o)}for(i=i.i;i.next();)i.value.ib=!1}for(t=t.i;t.next();)(i=t.value).ib||(i.ib=!0)}e.Aa("ChangedSelection")}},r.defineProperty(uo,{PE:"delay"},function(){return this.zo},function(t){r.j(t,"number",uo,"delay"),this.zo=t}),r.defineProperty(uo,{EI:"isPartialInclusion"},function(){return this.lD},function(t){r.j(t,"boolean",uo,"isPartialInclusion"),this.lD=t}),r.defineProperty(uo,{rh:"box"},function(){return this.wm},function(t){null!==t&&r.G(t,Ch,uo,"box"),this.wm=t}),r.La(co,Hi),r.ga("PanningTool",co),co.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||!t.pe&&!t.qe||!t.R.left||t.$a!==this&&!this.isBeyondDragSize())},co.prototype.doActivate=function(){var t=this.g;null!==t&&(this.Mj?(t.R.bubbles=!0,e.document.addEventListener("scroll",this.WD,!1)):(t.jc="move",t.ef=!0,this.Gz=t.position.copy()),this.sa=!0)},co.prototype.doDeactivate=function(){var t=this.g;null!==t&&(t.jc="",this.sa=t.ef=!1)},co.prototype.doCancel=function(){var t=this.g;null!==t&&(t.position=this.Gz,t.ef=!1),this.stopTool()},co.prototype.doMouseMove=function(){this.move()},co.prototype.doMouseUp=function(){this.move(),this.stopTool()},co.prototype.move=function(){var t=this.g;if(this.sa&&t)if(this.Mj)t.R.bubbles=!0;else{var e=t.position,i=t.Ec.da,n=t.R.da,o=e.x+i.x-n.x;i=e.y+i.y-n.y;t.pe||(o=e.x),t.qe||(i=e.y),t.position=new ut(o,i)}},r.defineProperty(co,{bubbles:"bubbles"},function(){return this.Mj},function(t){r.j(t,"boolean",co,"bubbles"),this.Mj=t}),r.u(co,{GL:"originalPosition"},function(){return this.Gz}),r.ga("TextEditingTool",fo),r.La(fo,Hi),fo.LostFocus=Mn=r.p(fo,"LostFocus",0),fo.MouseDown=Sn=r.p(fo,"MouseDown",1),fo.Tab=Tn=r.p(fo,"Tab",2),fo.Enter=Pn=r.p(fo,"Enter",3),fo.SingleClick=r.p(fo,"SingleClick",0),fo.SingleClickSelected=Nn=r.p(fo,"SingleClickSelected",1),fo.DoubleClick=Cn=r.p(fo,"DoubleClick",2),fo.StateNone=An=r.p(fo,"StateNone",0),fo.StateActive=Fn=r.p(fo,"StateActive",1),fo.StateEditing=Dn=r.p(fo,"StateEditing",2),fo.StateValidating=Ln=r.p(fo,"StateValidating",3),fo.StateInvalid=jn=r.p(fo,"StateInvalid",4),fo.StateValidated=zn=r.p(fo,"StateValidated",5),r.defineProperty(fo,{Xg:"textBlock"},function(){return this.Uz},function(t){null!==t&&r.G(t,Ll,fo,"textBlock"),this.Uz=t}),r.defineProperty(fo,{oj:"currentTextEditor"},function(){return this.CC},function(t){this.CC=t}),r.defineProperty(fo,{MH:"defaultTextEditor"},function(){return this.KC},function(t){this.KC=t}),r.defineProperty(fo,{wG:"starting"},function(){return this.VD},function(t){r.ob(t,fo,fo,"starting"),this.VD=t}),fo.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.hb||!t.R.left||this.isBeyondDragSize())return!1;var e=t.Le(t.R.da);return!!(null!==e&&e instanceof Ll&&e.uA&&e.U.canEdit())&&!(null===(e=e.U)||this.wG===Nn&&!e.ib||this.wG===Cn&&2>t.R.re)},fo.prototype.doStart=function(){this.sa||null===this.Xg||this.doActivate()},fo.prototype.doActivate=function(){if(!this.sa){var t=this.g;if(null!==t){var e=this.Xg;if(null===e&&(e=t.Le(t.R.da)),null!==e&&e instanceof Ll&&(this.Xg=e,null!==e.U)){this.sa=!0,this.Ta=Fn;var i=this.MH;null!==e.zG&&(i=e.zG),this.qk=this.Xg.copy();var n=new pt(this.Xg.Wa(g),this.Xg.Wa(P));t.kG(n),i instanceof oo?i.show(e,t,this):(i.style.position="absolute",i.style.zIndex="100",i.textEditingTool=this,"function"==typeof i.onActivate&&i.onActivate(),t.qj.appendChild(i),"function"==typeof i.focus&&i.focus(),"function"==typeof i.select&&this.qy&&(i.select(),i.setSelectionRange(0,9999))),this.oj=i}}}},fo.prototype.doCancel=function(){null!==this.Gs&&this.oj instanceof HTMLElement&&(this.oj.style.border=this.Gs,this.Gs=null),this.stopTool()},fo.prototype.doMouseUp=function(){!this.sa&&this.canStart()&&this.doActivate()},fo.prototype.doMouseDown=function(){this.sa&&this.acceptText(Sn)},fo.prototype.acceptText=function(t){switch(t){case Sn:this.Ta===zn?this.oj instanceof HTMLElement&&this.oj.focus():this.Ta!==Fn&&this.Ta!==jn&&this.Ta!==Dn||(this.Ta=Ln,po(this));break;case Mn:case Pn:case Tn:if(Pn===t&&!0===this.Uz.Kx)break;this.Ta!==Fn&&this.Ta!==jn&&this.Ta!==Dn||(this.Ta=Ln,po(this))}},fo.prototype.doDeactivate=function(){var t=this.g;if(null!==t){if(this.Ta=An,this.Xg=null,null!==this.oj){var e=this.oj;e instanceof oo?e.Cn(t,this):("function"==typeof e.onDeactivate&&e.onDeactivate(),null!==e&&t.qj.removeChild(e))}this.sa=!1}},fo.prototype.doFocus=function(){yo(this)},fo.prototype.doBlur=function(){vo(this)},fo.prototype.isValidText=function(t,e,i){r.G(t,Ll,fo,"isValidText:textblock");var n=this.IB;return!(null!==n&&!n(t,e,i))&&!(null!==(n=t.IB)&&!n(t,e,i))},r.defineProperty(fo,{IB:"textValidation"},function(){return this.Dl},function(t){null!==t&&r.j(t,"function",fo,"textValidation"),this.Dl=t}),r.defineProperty(fo,{QF:"minimumEditorScale"},function(){return this.tD},function(t){null!==t&&r.j(t,"number",fo,"minimumEditorScale"),this.tD=t}),r.defineProperty(fo,{qy:"selectsTextOnActivate"},function(){return this.PD},function(t){null!==t&&r.j(t,"boolean",fo,"selectsTextOnActivate"),this.PD=t}),r.defineProperty(fo,{state:"state"},function(){return this.Ta},function(t){this.Ta!==t&&(r.ob(t,fo,fo,"starting"),this.Ta=t)}),fo.prototype.measureTemporaryTextBlock=fo.prototype.WI=function(t){var e=this.qk;return e.text=t,ps(e,this.Xg.To,1/0),e},r.La(mo,Hi),r.ga("ToolManager",mo),mo.WheelScroll=Bn=r.p(mo,"WheelScroll",0),mo.WheelZoom=In=r.p(mo,"WheelZoom",1),mo.WheelNone=r.p(mo,"WheelNone",2),mo.GestureZoom=On=r.p(mo,"GestureZoom",3),mo.GestureCancel=En=r.p(mo,"GestureCancel",4),mo.GestureNone=qn=r.p(mo,"GestureNone",5),r.defineProperty(mo,{Fu:"mouseWheelBehavior"},function(){return this.xD},function(t){r.ob(t,mo,mo,"mouseWheelBehavior"),this.xD=t}),r.defineProperty(mo,{Wp:"gestureBehavior"},function(){return this.XC},function(t){r.ob(t,mo,mo,"gestureBehavior"),this.XC=t}),mo.prototype.initializeStandardTools=function(){this.hH=new io,this.ZF=new $n,this.NI=new Xn,this.iG=new Zn,this.zJ=new to,this.MF=new Jn,this.ue=new Wi,this.RH=new uo,this.kJ=new co,this.mA=new ao,this.HB=new fo,this.uH=new no,this.vH=new eo},mo.prototype.updateAdornments=function(t){var e=this.Ql;if(e instanceof Ac&&this.Cv===t){var i=e.tb;(null!==t?i.U===t:null===i)?this.showToolTip(e,i):this.hideToolTip()}},mo.prototype.doMouseDown=function(){var t=this.g;if(null!==t){var e=t.R;if(e.yj&&this.Wp===En&&(e.bubbles=!1),e.tu){if(this.cancelWaitAfter(),this.Wp===qn)return void(e.bubbles=!0);if(this.Wp===En)return;if(t.$a.canStartMultiTouch())return void t.$a.standardPinchZoomStart()}(i=t.ja).hA&&0!==i.ti&&r.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var i=this.gf.length,n=0;n<i;n++){var o=this.gf.ea(n);if(null===o.g&&o.Sc(this.g),o.canStart())return t.doFocus(),t.$a=o,void(t.$a===o&&(o.sa||o.doActivate(),o.doMouseDown()))}1===t.R.button&&(this.Fu===Bn?this.Fu=In:this.Fu===In&&(this.Fu=Bn)),this.doActivate(),this.standardWaitAfter(this.tF,e)}},mo.prototype.doMouseMove=function(){var t=this.g;if(null!==t){var e=t.R;if(e.tu){if(this.Wp===qn)return void(e.bubbles=!0);if(this.Wp===En)return;if(t.$a.canStartMultiTouch())return void t.$a.standardPinchZoomMove()}if(this.sa)for(var i=this.dg.length,n=0;n<i;n++){var o=this.dg.ea(n);if(null===o.g&&o.Sc(this.g),o.canStart())return t.doFocus(),t.$a=o,void(t.$a===o&&(o.sa||o.doActivate(),o.doMouseMove()))}go(this,t),null===(t=e.event)||"mousemove"!==t.type&&"pointermove"!==t.type&&t.cancelable||(e.bubbles=!0)}},mo.prototype.doCurrentObjectChanged=function(t,e){var i=this.Ql;null===i||null!==e&&i instanceof Ac&&(e===i||e.am(i))||this.hideToolTip()},mo.prototype.doWaitAfter=function(t){var e=this.g;null!==e&&e.Cb&&(this.doMouseHover(),this.sa||this.doToolTip(),t.yj&&!e.R.tc&&((t=t.copy()).button=2,t.buttons=2,e.R=t,e.tp=!0,e.doMouseUp()))},mo.prototype.doMouseHover=function(){var t=this.g;if(null!==t){var e=t.R;null===e.Ae&&(e.Ae=t.Le(e.da,null,null));var i=e.Ae;if(null!==i)for(e.tc=!1;null!==i&&(null===(t=this.sa?i.bB:i.cB)||(t(e,i),!e.tc));)i=i.Q;else null!==(i=this.sa?t.bB:t.cB)&&i(e)}},mo.prototype.doToolTip=function(){var t=this.g;if(null!==t){var e=t.R;if(null===e.Ae&&(e.Ae=t.Le(e.da,null,null)),null!==(e=e.Ae)){if(!((t=this.Ql)instanceof Ac)||e!==t&&!e.am(t)){for(;null!==e;){if(null!==(t=e.KB))return void this.showToolTip(t,e);e=e.Q}this.hideToolTip()}}else null!==(t=t.KB)?this.showToolTip(t,null):this.hideToolTip()}},mo.prototype.showToolTip=function(t,e){if(null!==e&&r.G(e,ls,mo,"showToolTip:obj"),null!==(i=this.g)){if(t!==this.Ql&&this.hideToolTip(),t instanceof Ac){if(t.ag="Tool",t.gm=!1,t.scale=1/i.scale,t.yd="ToolTip",null!==t.placeholder&&(t.placeholder.scale=i.scale),i.add(t),null!==e){var i=null,n=e.Tl();null!==n&&(i=n.data),t.tb=e,t.data=i}else t.data=i.$;t.af(),this.positionToolTip(t,e)}else t instanceof oo&&t!==this.Ql&&t.show(e,i,this);if(this.Ql=t,-1!==this.fn&&(r.clearTimeout(this.fn),this.fn=-1),0<(i=this.WJ)&&1/0!==i){var o=this;this.fn=r.setTimeout(function(){o.hideToolTip()},i)}}},mo.prototype.positionToolTip=function(t){if(null===t.placeholder){var e=this.g;if(null!==e){var i=e.R.da.copy(),n=t.za,o=e.rb;e.R.yj&&(i.x-=n.width),i.x+n.width>o.right&&(i.x-=n.width+5),i.x<o.x&&(i.x=o.x),i.y=i.y+20+n.height>o.bottom?i.y-(n.height+5):i.y+20,i.y<o.y&&(i.y=o.y),t.position=i}}},mo.prototype.hideToolTip=function(){-1!==this.fn&&(r.clearTimeout(this.fn),this.fn=-1);var t=this.g;if(null!==t){var e=this.Ql;null!==e&&(e instanceof Ac?(t.remove(e),null!==this.Cv&&this.Cv.Ej(e.yd),e.data=null,e.tb=null):e instanceof oo&&null!==e.Cn&&e.Cn(t,this),this.Ql=null)}},r.defineProperty(mo,{Ql:"currentToolTip"},function(){return this.DC},function(t){this.DC=t,this.Cv=null!==t&&t instanceof Ac?t.Xe:null}),mo.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.g;if(null!==t){if(this.sa)for(var e=this.eg.length,i=0;i<e;i++){var n=this.eg.ea(i);if(null===n.g&&n.Sc(this.g),n.canStart())return t.doFocus(),t.$a=n,void(t.$a===n&&(n.sa||n.doActivate(),n.doMouseUp()))}t.doFocus(),this.doDeactivate()}},mo.prototype.doMouseWheel=function(){this.standardMouseWheel()},mo.prototype.doKeyDown=function(){var t=this.g;null!==t&&t.pb.doKeyDown()},mo.prototype.doKeyUp=function(){var t=this.g;null!==t&&t.pb.doKeyUp()},mo.prototype.doCancel=function(){null!==Gn&&Gn.doCancel(),Hi.prototype.doCancel.call(this)},mo.prototype.findTool=function(t){r.j(t,"string",mo,"findTool:name");for(var e=this.gf.length,i=0;i<e;i++){var n=this.gf.ea(i);if(n.name===t)return n}for(e=this.dg.length,i=0;i<e;i++)if((n=this.dg.ea(i)).name===t)return n;for(e=this.eg.length,i=0;i<e;i++)if((n=this.eg.ea(i)).name===t)return n;return null},mo.prototype.replaceTool=function(t,e){r.j(t,"string",mo,"replaceTool:name"),null!==e&&(r.G(e,Hi,mo,"replaceTool:newtool"),e.g&&e.g!==this.g&&r.k("Cannot share tools between Diagrams: "+e.toString()),e.Sc(this.g));for(var i=this.gf.length,n=0;n<i;n++){var o=this.gf.ea(n);if(o.name===t)return null!==e?this.gf.kg(n,e):this.gf.dd(n),o}for(i=this.dg.length,n=0;n<i;n++)if((o=this.dg.ea(n)).name===t)return null!==e?this.dg.kg(n,e):this.dg.dd(n),o;for(i=this.eg.length,n=0;n<i;n++)if((o=this.eg.ea(n)).name===t)return null!==e?this.eg.kg(n,e):this.eg.dd(n),o;return null},r.u(mo,{gf:"mouseDownTools"},function(){return this.VG}),r.u(mo,{dg:"mouseMoveTools"},function(){return this.WG}),r.u(mo,{eg:"mouseUpTools"},function(){return this.XG}),r.defineProperty(mo,{pI:"hoverDelay"},function(){return this.$C},function(t){r.j(t,"number",mo,"hoverDelay"),this.$C=t}),r.defineProperty(mo,{tF:"holdDelay"},function(){return this.ZC},function(t){r.j(t,"number",mo,"holdDelay"),this.ZC=t}),r.defineProperty(mo,{SH:"dragSize"},function(){return this.PC},function(t){r.G(t,dt,mo,"dragSize"),this.PC=t.S()}),r.defineProperty(mo,{WJ:"toolTipDuration"},function(){return this.hE},function(t){r.j(t,"number",mo,"toolTipDuration"),this.hE=t}),r.defineProperty(mo,{hH:"actionTool"},function(){return this.findTool("Action")},function(t){bo(this,"Action",t,this.gf)}),r.defineProperty(mo,{ZF:"relinkingTool"},function(){return this.findTool("Relinking")},function(t){bo(this,"Relinking",t,this.gf)}),r.defineProperty(mo,{NI:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(t){bo(this,"LinkReshaping",t,this.gf)}),r.defineProperty(mo,{iG:"resizingTool"},function(){return this.findTool("Resizing")},function(t){bo(this,"Resizing",t,this.gf)}),r.defineProperty(mo,{zJ:"rotatingTool"},function(){return this.findTool("Rotating")},function(t){bo(this,"Rotating",t,this.gf)}),r.defineProperty(mo,{MF:"linkingTool"},function(){return this.findTool("Linking")},function(t){bo(this,"Linking",t,this.dg)}),r.defineProperty(mo,{ue:"draggingTool"},function(){return this.findTool("Dragging")},function(t){bo(this,"Dragging",t,this.dg)}),r.defineProperty(mo,{RH:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(t){bo(this,"DragSelecting",t,this.dg)}),r.defineProperty(mo,{kJ:"panningTool"},function(){return this.findTool("Panning")},function(t){bo(this,"Panning",t,this.dg)}),r.defineProperty(mo,{mA:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(t){bo(this,"ContextMenu",t,this.eg)}),r.defineProperty(mo,{HB:"textEditingTool"},function(){return this.findTool("TextEditing")},function(t){bo(this,"TextEditing",t,this.eg)}),r.defineProperty(mo,{uH:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(t){bo(this,"ClickCreating",t,this.eg)}),r.defineProperty(mo,{vH:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(t){bo(this,"ClickSelecting",t,this.eg)}),r.ga("AnimationManager",xo),xo.prototype.Sc=function(t){this.aa=t},r.u(xo,{CK:"animationReasons"},function(){return this.pv}),xo.prototype.canStart=function(){return!0},xo.prototype.prepareAutomaticAnimation=xo.prototype.Tn=function(t){this.kf&&(this.pl||this.aa.Fn)&&(this.pv.add(t),this.canStart(t)&&(this.$j&&this.Gh(),this.rc=!0))},xo.prototype.stopAnimation=xo.prototype.Gh=function(){!0===this.rc&&(this.rc=!1,this.tm=0,this.ko&&this.aa.Ne()),this.$j&&this.kf&&Co(this)},r.defineProperty(xo,{isEnabled:"isEnabled"},function(){return this.kf},function(t){r.j(t,"boolean",xo,"isEnabled"),this.kf=t}),r.defineProperty(xo,{duration:"duration"},function(){return this.gz},function(t){r.j(t,"number",xo,"duration"),1>t&&r.Fa(t,">= 1",xo,"duration"),this.gz=t}),r.u(xo,{df:"isAnimating"},function(){return this.$j}),r.u(xo,{FI:"isTicking"},function(){return this.Po}),r.defineProperty(xo,{DF:"isInitial"},function(){return this.pl},function(t){r.j(t,"boolean",xo,"isInitial"),this.pl=t});var zo,Bo,Io,Oo,Eo,qo,Ro,Go,Vo,_o,Ho,Ko,Wo,Uo,Jo={opacity:function(t,e,i,n,o,r){t.opacity=n(o,e,i-e,r)},position:function(t,e,i,n,o,r){o!==r?t.vy(n(o,e.x,i.x-e.x,r),n(o,e.y,i.y-e.y,r)):t.position=new ut(n(o,e.x,i.x-e.x,r),n(o,e.y,i.y-e.y,r))},"position:node":function(t,e,i,n,o,r){var a=t.Y,s=i.Y;i=s.x+s.width/2-a.width/2,a=s.y+s.height/2-a.height/2,o!==r?t.vy(n(o,e.x,i-e.x,r),n(o,e.y,a-e.y,r)):t.position=new ut(n(o,e.x,i-e.x,r),n(o,e.y,a-e.y,r))},"position:placeholder":function(t,e,i,n,o,r){o!==r?t.vy(n(o,e.x,i.x-e.x,r),n(o,e.y,i.y-e.y,r)):t.position=new ut(n(o,e.x,i.x-e.x,r),n(o,e.y,i.y-e.y,r))},scale:function(t,e,i,n,o,r){t.scale=n(o,e,i-e,r)},visible:function(t,e,i,n,o,r){t.visible=o!==r?e:i}};function $o(){0<arguments.length&&r.nd($o),r.oc(this),this.aa=null,this.zb=new et(Ch),this.Rb="",this.Bc=1,this.xz=!1,this.yl=this.$z=this.al=this.$k=this.Zk=this.Yk=this.Wk=this.Xk=this.Vk=this.cl=this.Uk=this.bl=this.Tk=this.Sk=!0,this.uz=!1,this.vw=[]}function Yo(t,e,i,n){if(t.visible&&0!==t.Bc){1!==t.Bc&&(e.globalAlpha=t.Bc);var o=t.vw;o.length=0;for(var r=i.scale,a=(t=t.zb.n).length,s=n.length,l=0;l<a;l++){var h=t[l];if(Pc(h)){if(h instanceof Rc)if((c=h).ac&&o.push(c),!1===c.Mf)continue;var u,c=jh(h,h.Y);t:{u=c;for(var f=n,d=s,p=2/r,y=4/r,v=0;v<d;v++){var m=f[v];if(0!==m.width&&0!==m.height&&u.vF(m.x-p,m.y-p,m.width+y,m.height+y)){u=!0;break t}}u=!1}u&&(1<c.width*r||1<c.height*r?h.ve(e,i):qh(h,e))}}e.globalAlpha=1}}function Xo(t,e,i){if(e=function(t,e,i){var n=i.eo;if(isNaN(n))return e;var o=(t=t.zb).count;if(1>=o)return e;if(0>e&&(e=t.indexOf(i)),0>e)return-1;for(var r=e-1,a=NaN;0<=r&&(a=t.ea(r).eo,isNaN(a));)r--;for(var s=e+1,l=NaN;s<o&&(l=t.ea(s).eo,isNaN(l));)s++;if(!isNaN(a)&&a>n)for(;;){if(-1===r||a<=n){if(++r===e)break;return t.dd(e),t.Rd(r,i),r}for(a=NaN;0<=--r&&(a=t.ea(r).eo,isNaN(a)););}else if(!isNaN(l)&&l<n)for(;;){if(s===o||l>=n){if(--s===e)break;return t.dd(e),t.Rd(s,i),s}for(l=NaN;++s<o&&(l=t.ea(s).eo,isNaN(l)););}return e}(t,e,i),i instanceof xf&&null!==i&&isNaN(i.eo)){if(0!==i.vc.count){for(var n=-1,o=t.zb.n,r=o.length,a=0;a<r;a++){var s=o[a];if(s===i&&(e=a,0<=n))break;if(0>n&&s.Da===i&&(n=a,0<=e))break}!(0>n)&&n<e&&((o=t.zb).dd(e),o.Rd(n,i))}null!==(i=i.Da)&&Xo(t,-1,i)}}function Qo(t){1<arguments.length&&r.k("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),r.oc(this),oh=[],this.Vc=!0,this.gC=new xo,this.gC.Sc(this),this.Ld=17,this.Vr=!1,this.Kz="default";var i=this;null!==e.document.body?tr(this):e.document.addEventListener("DOMContentLoaded",function t(){e.document.removeEventListener("DOMContentLoaded",t,!1),tr(i)},!1),this.dc=new et($o),this.Mb=this.Jb=0,this.mk=this.Nb=this.jf=this.Cb=null,this.eG(),this.Mo=null,this.dG(),this.jb=new ut(NaN,NaN).freeze(),this.vb=1,this.Uv=new ut(NaN,NaN).freeze(),this.Vv=NaN,this.mw=1e-4,this.kw=100,this.kd=new kt,this.Xw=new ut(NaN,NaN).freeze(),this.Mv=new pt(NaN,NaN,NaN,NaN).freeze(),this.Ew=new wt(0,0,0,0).freeze(),this.Fw=_o,this.Iw=!0,this.Bw=this.zw=null,this.vm=zo,this.qo=m,this.nl=zo,this.Jo=m,this.Wv=this.Tv=g,this.De=!0,this.Qr=!1,this.vg=new nt(Ch),this.hl=new ht(Rc,pt),this.wr=!0,this.Tq=250,this.lo=-1,this.rv=new wt(16,16,16,16).freeze(),this.ur=this.Tf=!1,this.Eo=!0,this.Li=new ii,this.wd=new ii,this.Yb=new ii,this.hh=this.zi=null,this.tp=!1,this.bz=this.cz=null,this.Py=e.PointerEvent&&(r.bq||r.cq||r.PA)&&e.navigator&&!1!==e.navigator.msPointerEnabled,ua(this),this.bp=new nt(Fc),this.El=new nt(xf),this.Vo=new nt(Rc),this.zb=new nt(Ch),this.aw=!0,this.Sw=Ko,this.cD=!1,this.Uw=Oo,this.Xy=this.$y=this.Vz=null,this.yv="",this.pr="auto",this.Di=this.gj=this.Vi=this.pw=this.Wi=this.Xi=this.Yi=this.Ci=this.Ii=this.Ai=null,this.Ez=!1,this.Iz={},this.ep=[null,null],this.Uy=null,this.Lq=this.az=this.Qz=this.QD=this.fj=!1,this.nD=!0,this.wz=this.$d=!1,this.ne=null;var n=this;this.uD=function(t){if(t.$===n.$&&n.Ua){n.Ua=!1;try{var e=t.Dc;""===t.tf&&e===$t&&Or(n,t.object,t.propertyName)}finally{n.Ua=!0}}},this.vD=function(t){!function(t,e){if(e.$===t.$){var i=e.Dc,n=e.propertyName;if(i===Jt&&"S"===n[0])if("StartingFirstTransaction"===n)(i=t.fb).gf.each(function(e){e.Sc(t)}),i.dg.each(function(e){e.Sc(t)}),i.eg.each(function(e){e.Sc(t)}),t.$d||t.dh||(t.ur=!0,t.Eo&&(t.Tf=!0));else if("StartingUndo"===n||"StartingRedo"===n){var o=t.Ka;o.df&&!t.cb&&o.Gh(),t.Aa("ChangingSelection")}else"StartedTransaction"===n&&((o=t.Ka).df&&!t.cb&&o.Gh());else if(t.Ua){t.Ua=!1;try{var a=e.tf;if(""!==a)if(i===$t){if("linkFromKey"===a){var s=e.object,l=t.Xf(s);if(null!==l){var h=e.newValue,u=t.Ke(h);l.W=u}}else if("linkToKey"===a)s=e.object,null!==(l=t.Xf(s))&&(h=e.newValue,u=t.Ke(h),l.Z=u);else if("linkFromPortId"===a){if(s=e.object,null!==(l=t.Xf(s))){var c=e.newValue;"string"==typeof c&&(l.Ng=c)}}else if("linkToPortId"===a)s=e.object,null!==(l=t.Xf(s))&&("string"==typeof(c=e.newValue)&&(l.Hh=c));else if("nodeGroupKey"===a){var s=e.object,f=t.vh(s);if(null!==f){var d=e.newValue;if(void 0!==d){var p=t.Ke(d);f.Da=p instanceof xf?p:null}else f.Da=null}}else if("linkLabelKeys"===a){if(s=e.object,null!==(l=t.Xf(s))){var y=e.oldValue,v=e.newValue;if(r.isArray(y))for(var m=r.Za(y),g=0;g<m;g++){var b=r.Ba(y,g),u=t.Ke(b);null!==u&&(u.Wb=null)}if(r.isArray(v))for(m=r.Za(v),g=0;g<m;g++)b=r.Ba(v,g),null!==(u=t.Ke(b))&&(u.Wb=l)}}else if("nodeParentKey"===a){var x=e.object,w=t.Ke(e.newValue),k=t.Ax(x);if(null!==k){var M=k.wn();null!==M?null===w?t.remove(M):t.Ud?M.W=w:M.Z=w:Yr(t,w,k)}}else if("parentLinkCategory"===a){var x=e.object,k=t.Ax(x),S=e.newValue;null!==k&&"string"==typeof S&&(null!==(M=k.wn())&&(M.yd=S))}else if("nodeCategory"===a){var s=e.object,T=t.vh(s),S=e.newValue;null!==T&&"string"==typeof S&&(T.yd=S)}else if("linkCategory"===a){var s=e.object,P=t.Xf(s),S=e.newValue;null!==P&&"string"==typeof S&&(P.yd=S)}else if("nodeDataArray"===a){var N=e.oldValue;ea(t,N);var C=e.newValue;Hr(t,C)}else"linkDataArray"===a&&(N=e.oldValue,ea(t,N),C=e.newValue,Xr(t,C));t.pi=!0}else i===Yt?(C=e.newValue,"nodeDataArray"===a&&r.Pa(C)?Kr(t,C):"linkDataArray"===a&&r.Pa(C)?Qr(t,C):"linkLabelKeys"===a&&mi(C)&&(l=t.Xf(e.object),u=t.Ke(C),null!==l&&null!==u&&(u.Wb=l)),t.pi=!0):i===Xt?(N=e.oldValue,"nodeDataArray"===a&&r.Pa(N)?ia(t,N):"linkDataArray"===a&&r.Pa(N)?ia(t,N):"linkLabelKeys"===a&&mi(N)&&(null!==(u=t.Ke(N))&&(u.Wb=null)),t.pi=!0):i===Jt&&("SourceChanged"===a?null!==e.object?Or(t,e.object,e.propertyName):(t.$J(),t.IG()):"ModelDisplaced"===a&&t.em());else if(i===$t){var A=e.propertyName,s=e.object;s===t.$?"nodeKeyProperty"!==A&&"nodeCategoryProperty"!==A&&"linkFromKeyProperty"!==A&&"linkToKeyProperty"!==A&&"linkFromPortIdProperty"!==A&&"linkToPortIdProperty"!==A&&"linkLabelKeysProperty"!==A&&"nodeIsGroupProperty"!==A&&"nodeGroupKeyProperty"!==A&&"nodeParentKeyProperty"!==A&&"linkCategoryProperty"!==A||t.ja.lb||t.em():Or(t,s,A),t.pi=!0}else if(i===Yt||i===Xt)(function(t,e){var i=e.Dc===Yt,n=i?e.Cj:e.Dj,o=i?e.newValue:e.oldValue,r=t.Hm.ka(e.object);if(Array.isArray(r))for(var a=0;a<r.length;a++){var s=r[a];if(i)dl(s,o,n);else{var l=n;if(!(0>l)){var h=l;fl(s)&&h++,s.rf(h,!0),pl(s,h,l)}}}})(t,e),t.pi=!0;else if(i===Jt){"FinishedUndo"!==n&&"FinishedRedo"!==n||(t.Aa("ChangedSelection"),wr(t)),o=t.Ka,"RolledBackTransaction"===n&&o.Gh(),t.ur=!0,t.cg(),0===t.ja.ti&&ko(o),"CommittedTransaction"===n&&t.ja.yz&&(t.bh=Math.min(t.bh,t.ja.uj-1));var F=e.HF;F&&(Ir(t),t.Tx.clear()),!t.Ez&&F&&(t.Ez=!0,r.setTimeout(function(){t.$a.standardMouseOver(),t.Ez=!1},10))}}finally{t.Ua=!0}}}}(n,t)},this.nE=!0,this.bh=-2,this.Ei=new ht(Object,Ch),this.Oj=new ht(Object,Rc),this.Hm=new ht(Object,Array),this.dp=new ht("string",Array),this.Hz=new et(th),this.Oi=!1,this.Tk=this.Sk=this.hv=this.kf=!0,this.jv=this.iv=!1,this.ov=this.mv=this.al=this.$k=this.Zk=this.Yk=this.Wk=this.Xk=this.Vk=this.lv=this.cl=this.Uk=this.bl=!0,this.eh=this.kD=!1,this.nv=this.kv=this.Rv=this.Qv=!0,this.Hw=this.Dw=16,this.Mz=this.Cw=!1,this.ct=this.Gw=null,this.Nz=this.Oz=0,this.mf=new wt(5).freeze(),this.Kw=new nt(Ch).freeze(),this.lw=999999999,this.Sv=new nt(Ch).freeze(),this.ol=this.Em=this.Zj=!0,this.ll=this.Yj=!1,this.le=null,this.dl=!0,this.dh=!1,this.UG=new nt(Rc),this.aD=new nt(rf),this.Kd=null,this.AD=1,this.TD=0,this.nh={scale:1,position:new ut,bounds:new pt,isScroll:!1},this.mE=new pt(NaN,NaN,NaN,NaN).freeze(),this.Fv=new pt(NaN,NaN,NaN,NaN).freeze(),this.bw=!1,this.Hv=null,this.ww=new nt(Ca),ir(this),this.gw=this.Ov=this.qw=this.HC=this.GC=this.IC=this.fk=this.jl=this.Zi=null,Zo(this),this.td=null,this.Nv=!1,this.to=null,this.fb=new mo,this.fb.initializeStandardTools(),this.$a=this.Pt=this.fb,this.pb=new Ei,this.$=new Ci,this.fj=!0,this.Sb=new Sf,this.fj=!1,this.TC=this.fz=null,this.Hd=1,this.pk=null;var o=r.vfo.split(".");!0!==r.tx.licenseKey&&"1"===o[0]&&7>parseInt(o[1],10)&&(r.trace("Warning: You have entered a license key for GoJS version 1.7 or later, but this library is version "+r.vfo+". This license key will do nothing until you upgrade to GoJS 1.7 or later."),r.tx.licenseKey=!0),this.Uh=1,this.ek=0,this.dw=new ut,this.Xz=500,this.qv=new ut,this.lt=null,this.bk=!1,this.preventDefault=this.hy=this.oq=this.pq=this.nq=this.mq=this.On=this.Qn=this.Pn=this.Mn=this.Nn=this.TB=this.LB=this.MB=this.NB=this.Al=this.Zs=this.zl=this.Ys=null,this.Yv=!1,this.ml=new Ta,void 0!==t&&Pa(this,t),this.Vc=!1}function Zo(t){t.Zi=new ht("string",Ch);var e=new Fc,i=new Ll;i.bind(new ji("text","",Pi)),e.add(i),t.IC=e,t.Zi.add("",e),e=new Fc,(i=new Ll).stroke="brown",i.bind(new ji("text","",Pi)),e.add(i),t.Zi.add("Comment",e),(e=new Fc).gm=!1,e.fA=!1,(i=new Ml).Db="Ellipse",i.fill="black",i.stroke=null,i.Ca=new dt(3,3).Ha(),e.add(i),t.Zi.add("LinkLabel",e),t.jl=new ht("string",xf),(e=new xf).vB="GROUPPANEL",e.type=qs,(i=new Ll).font="bold 12pt sans-serif",i.bind(new ji("text","",Pi)),e.add(i),(i=new Ys(Gs)).name="GROUPPANEL";var n=new Ml;n.Db="Rectangle",n.fill="rgba(128,128,128,0.2)",n.stroke="black",i.add(n),(n=new Mf).padding=new wt(5,5,5,5).Ha(),i.add(n),e.add(i),t.GC=e,t.jl.add("",e),t.fk=new ht("string",Rc),e=new Rc,(i=new Ml).ff=!0,e.add(i),(i=new Ml).Eq="Standard",i.fill="black",i.stroke=null,i.mb=0,e.add(i),t.HC=e,t.fk.add("",e),e=new Rc,(i=new Ml).ff=!0,i.stroke="brown",e.add(i),t.fk.add("Comment",e),(e=new Ac).type=Gs,(i=new Ml).fill=null,i.stroke="dodgerblue",i.mb=3,e.add(i),(i=new Mf).margin=new wt(1.5,1.5,1.5,1.5).Ha(),e.add(i),t.qw=e,t.Ov=e,(e=new Ac).type=Ks,(i=new Ml).ff=!0,i.fill=null,i.stroke="dodgerblue",i.mb=3,e.add(i),t.gw=e}function tr(t){var i=r.createElement("p");i.style.width="100%",i.style.height="200px",i.style.boxSizing="content-box";var n=r.createElement("div");n.style.position="absolute",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.style.boxSizing="content-box",n.appendChild(i),e.document.body.appendChild(n);var o=i.offsetWidth;n.style.overflow="scroll",o===(i=i.offsetWidth)&&(i=n.clientWidth),e.document.body.removeChild(n),0!==(n=o-i)||r.BF||(n=11),t.Ld=n,(n=r.createElement("div")).dir="rtl",n.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",n.textContent="A",e.document.body.appendChild(n),o="reverse",0<n.scrollLeft?o="default":(n.scrollLeft=1,0===n.scrollLeft&&(o="negative")),e.document.body.removeChild(n),t.Kz=o}function er(t){if(null!==t.Cb){var e=t.Nb;if(0!==e.clientWidth&&0!==e.clientHeight){var i=t.ll?t.Ld:0,n=t.Yj?t.Ld:0,o=t.Hd;t.Hd=t.computePixelRatio(),t.Hd!==o&&(t.Qr=!0,t.Ne()),e.clientWidth===t.Jb+i&&e.clientHeight===t.Mb+n||(t.Em=!0,t.De=!0,null!==(e=t.Sb)&&e.Mx&&t.Ml===zo&&(t.ur=!0,e.J()),t.$d||t.Ne())}}}function ir(t){var e=new $o;e.name="Background",t.Ft(e),(e=new $o).name="",t.Ft(e),(e=new $o).name="Foreground",t.Ft(e),(e=new $o).name="Adornment",e.Pc=!0,t.Ft(e),(e=new $o).name="Tool",e.Pc=!0,e.yF=!0,t.Ft(e),(e=new $o).name="Grid",e.Af=!1,e.Ug=!1,e.Pc=!0,t.kH(e,t.Vt("Background"))}function nr(t){t.td=new Ys(Ws),t.td.name="GRID";var e=new Ml;e.Db="LineH",e.stroke="lightgray",e.mb=.5,e.interval=1,t.td.add(e),(e=new Ml).Db="LineH",e.stroke="gray",e.mb=.5,e.interval=5,t.td.add(e),(e=new Ml).Db="LineH",e.stroke="gray",e.mb=1,e.interval=10,t.td.add(e),(e=new Ml).Db="LineV",e.stroke="lightgray",e.mb=.5,e.interval=1,t.td.add(e),(e=new Ml).Db="LineV",e.stroke="gray",e.mb=.5,e.interval=5,t.td.add(e),(e=new Ml).Db="LineV",e.stroke="gray",e.mb=1,e.interval=10,t.td.add(e),(e=new Ch).add(t.td),e.ag="Grid",e.eo=0,e.RA=!1,e.xF=!1,e.Ug=!1,e.WA="GRID",t.add(e),t.zb.remove(e),t.td.visible=!1}function or(){this.aa.isEnabled?this.aa.QH(this):Fr(this.aa)}function rr(t){this.aa.isEnabled?(this.aa.Mz=!0,this.aa.Oz=t.target.scrollTop,this.aa.Nz=t.target.scrollLeft):Fr(this.aa)}function ar(t){if(t.eF.I()){var e=t.eF.copy();return e.Zw(t.padding),e}for(var i=!0,n=t.dc.n,o=n.length,r=0;r<o;r++){if((a=n[r]).visible&&(!a.Pc||a.yF))for(var a,s=(a=a.zb.n).length,l=0;l<s;l++){var h=a[l];h.RA&&h.isVisible()&&((h=h.Y).I()&&(i?(i=!1,e=h.copy()):e.Ih(h)))}}return i&&(e=new pt(0,0,0,0)),e.Zw(t.padding),e}function sr(t,e){if((e||t.dh)&&!t.Vc&&null!==t.Cb&&!t.Ka.df&&t.te.I()){t.Vc=!0;var i=t.vm;e&&t.nl!==zo&&(i=t.nl);var n=i!==zo?lr(t,i):t.scale,o=(i=t.rb.copy(),t.Jb/n),r=t.Mb/n,a=null,s=t.Ka;s.rc&&(a=t.jb.copy()),t.position.Qa();var l=t.qo;e&&!l.$c()&&t.Jo.$c()&&(l=t.Jo),hr(t,t.jb,t.te,o,r,l,e),t.position.freeze(),null!==a&&Do(s,a,t.jb),o=t.scale,t.scale=n,t.Vc=!1,(n=t.rb).Oc(i)||t.Ju(i,n,o,t.scale,!1)}}function lr(t,e){var i=t.pb.qx;if(null===t.Cb)return i;if(t.Zj&&ra(t,t.sh()),!(o=t.te).I())return i;var n=o.width,o=o.height,r=t.Jb,a=t.Mb,s=r/n,l=a/o;return e===Bo?((n=Math.min(l,s))>i&&(n=i),n<t.Ah&&(n=t.Ah),n>t.zh&&(n=t.zh),n):e===Io?((n=l>s?(a-t.Ld)/o:(r-t.Ld)/n)>i&&(n=i),n<t.Ah&&(n=t.Ah),n>t.zh&&(n=t.zh),n):t.scale}function hr(t,e,i,n,o,r,a){var s=e.x,l=e.y;(a||t.sB===_o)&&(r.$c()&&(n>i.width&&(s=i.x+(r.x*i.width+r.offsetX)-(r.x*n-r.offsetX)),o>i.height&&(l=i.y+(r.y*i.height+r.offsetY)-(r.y*o-r.offsetY))),r=t.oy,a=n-i.width,n<i.width+r.left+r.right?(s=Math.min(s+n/2,i.right+Math.max(a,r.right)-n/2),s=Math.max(s,i.left-Math.max(a,r.left)+n/2),s-=n/2):s>i.left?s=i.left:s<i.right-n&&(s=i.right-n),n=o-i.height,o<i.height+r.top+r.bottom?(l=Math.min(l+o/2,i.bottom+Math.max(n,r.bottom)-o/2),l=Math.max(l,i.top-Math.max(n,r.top)+o/2),l-=o/2):l>i.top?l=i.top:l<i.bottom-o&&(l=i.bottom-o)),e.x=isFinite(s)?s:-t.padding.left,e.y=isFinite(l)?l:-t.padding.top,null!==t.YF&&(t=t.YF(t,e),e.x=t.x,e.y=t.y)}function ur(t,e,i,n){for(void 0===i&&(i=null),void 0===n&&(n=null),wr(t),t=t.dc.Gn;t.next();){var o=t.value;if(o.visible&&!o.Pc&&null!==(o=o.Le(e,i,n)))return o}return null}function cr(t,e,i,n,o){n.g=e,n.event=i,o?vr(t,i,n):(n.hf=e.Yb.hf,n.da=e.Yb.da),t=0,i.ctrlKey&&(t+=1),i.altKey&&(t+=2),i.shiftKey&&(t+=4),i.metaKey&&(t+=8),n.md=t,n.button=i.button,void 0===i.buttons||r.ru||(n.buttons=i.buttons),r.yh&&0===i.button&&i.ctrlKey&&(n.button=2),n.Dk=!1,n.up=!1,n.re=1,n.Ck=0,n.tc=!1,n.bubbles=!1,n.timestamp=Date.now(),n.tu=!1,n.If=fr(i),n.Ae=null}function fr(t){var e=t.target.aa;if(!e){var i=t.path;i||"function"!=typeof t.zH||(i=t.zH()),i&&i[0]&&(e=i[0].aa)}return e||null}function dr(t,e,i,n){var o=t.wd;return t.wd=t.Yb,t.Yb=o,o.g=t,vr(t,i,o),o.button=0,o.buttons=1,i=0,e.ctrlKey&&(i+=1),e.altKey&&(i+=2),e.shiftKey&&(i+=4),e.metaKey&&(i+=8),o.md=i,o.Dk=!0,o.up=!1,o.re=1,o.Ck=0,o.tc=!1,o.bubbles=!0,o.event=e,o.timestamp=Date.now(),o.tu=n,o.If=fr(e),o.Ae=null,n||(t.Li=o.copy()),Gn=null,o}function pr(t,i,n,o){var r=t.wd;t.wd=t.Yb,t.Yb=r;var a=null;return r.g=t,null!==n?((a=e.document.elementFromPoint(n.clientX,n.clientY))&&a.aa?a=a.aa:(n=void 0!==i.targetTouches?i.targetTouches[0]:i,a=t),r.If=a,vr(t,n,r)):null!==t.wd?(r.da=t.wd.da,r.hf=t.wd.hf,r.If=t.wd.If):null!==t.Li&&(r.da=t.Li.da,r.hf=t.Li.hf,r.If=t.Li.If),r.button=0,r.buttons=1,t=0,i.ctrlKey&&(t+=1),i.altKey&&(t+=2),i.shiftKey&&(t+=4),i.metaKey&&(t+=8),r.md=t,r.Dk=!1,r.up=!1,r.re=1,r.Ck=0,r.tc=!1,r.bubbles=!1,r.event=i,r.timestamp=Date.now(),r.tu=o,r.Ae=null,r}function yr(t,e){return!!t.bubbles||(void 0!==e.stopPropagation&&e.stopPropagation(),e.preventDefault(),e.cancelBubble=!0,!1)}function vr(t,e,i){var n=t.Cb,o=t.Jb,a=t.Mb,s=0,l=0;null!==n&&(n=n.getBoundingClientRect(),s=e.clientX-o/n.width*n.left,l=e.clientY-a/n.height*n.top),i.hf.m(s,l),null!==t.kd?(e=r.xb(s,l),t.kd.wh(e),i.da.assign(e),r.v(e)):i.da.m(s,l)}function mr(t,e,i,n){var o=null;if(void 0!==e.targetTouches){if(2>e.targetTouches.length)return;o=e.targetTouches[i]}else{if(null===t.ep[0])return;o=t.ep[i]}i=t.Cb,e=t.Jb,t=t.Mb;var r=0,a=0;null!==i&&null!==o&&(i=i.getBoundingClientRect(),r=o.clientX-e/i.width*i.left,a=o.clientY-t/i.height*i.top),n.m(r,a)}function gr(t){t.$d||wr(t),t.Zj&&ra(t,t.sh())}function br(t,e){t.Ka.df||t.Vc||!t.Em||Fr(t)||(e&&wr(t),sr(t,!1))}function xr(t){if(!t.$d&&(t.Tf=!1,null!==t.Nb)){t.$d=!0;var e=t.Ka,i=t.Hz;if(!e.Po&&0!==i.length){for(var n=i.n,o=n.length,a=0;a<o;a++){var s=n[a];Fs(s,!1),s.H()}i.clear()}0<(i=t.aD).count&&(i.each(function(t){t.RB()}),i.clear()),n=i=!1,e.df&&(n=!0,i=t.cb,t.cb=!0),e.rc||er(t),br(t,!1),null!==t.td&&(t.td.visible&&!t.Nv&&(zr(t),t.Nv=!0),!t.td.visible&&t.Nv&&(t.Nv=!1)),wr(t),o=!1,t.dh&&!t.dl||(t.dh?la(t,!t.ur):(t.Hb("Initial Layout"),!1===e.isEnabled&&e.Gh(),la(t,!1)),o=!0),t.ur=!1,wr(t),t.Qz||e.df||gr(t),br(t,!0),o&&(t.dh||function(t){var e=t.dc.n;if(t.Hf(e,e.length,t),t.nl!==zo?t.scale=lr(t,t.nl):t.vm!==zo?t.scale=lr(t,t.vm):(e=t.tI,isFinite(e)&&0<e&&(t.scale=e)),(e=t.sI).I())t.position=e;else{(e=r.K()).Wn(t.te,t.rI);var i=t.rb,i=r.lg(0,0,i.width,i.height),n=r.K();n.Wn(i,t.uI),n.m(e.x-n.x,e.y-n.y),t.position=n,r.Eb(i),r.v(n),r.v(e),Pr(t),br(t,!0),sr(t,!0)}t.Aa("InitialLayoutCompleted"),zr(t)}(t),t.Aa("LayoutCompleted")),wr(t),o&&!t.dh&&(t.dh=!0,t.Yc("Initial Layout"),t.cb||t.ja.clear(),r.setTimeout(function(){t.pi=!1},1)),Tr(t),ko(e),t.ve(t.jf),n&&(t.cb=i),t.$d=!1}}function wr(t){if((t.$d||!t.Ka.df)&&0!==t.vg.count){for(var e=0;23>e;e++){var i=t.vg.i;if(null===i||0===t.vg.count)break;t.vg=new nt(Ch),t.RB(i,t.vg)}t.ig.each(function(t){t instanceof xf&&0!=(65536&t.ya)!=!1&&(t.ya^=65536)})}}function kr(t,e){for(var i=r.eb(),n=r.eb(),o=e.vc;o.next();){var a=o.value;a.isVisible()&&(a instanceof xf?(As(a)||Ds(a)||Mc(a))&&kr(t,a):a instanceof Rc?a.W===e||a.Z===e?n.push(a):i.push(a):(ps(a,1/0,1/0),a.ic()))}o=i.length;for(var s=0;s<o;s++)ps(a=i[s],1/0,1/0),a.ic();for(r.ta(i),ps(e,1/0,1/0),e.ic(),o=n.length,s=0;s<o;s++)ps(a=n[s],1/0,1/0),a.ic();r.ta(n)}function Mr(t,e,i,n,o,a,s,l,h,u){null===t.Nb&&r.k("No div specified"),null===t.Cb&&r.k("No canvas specified"),void 0===s&&(s=null),void 0===l&&(l=null),void 0===h&&(h=!1),void 0===u&&(u=!1),Cr(t),t.jf.He(!0),Nr(t),t.wz=!0;var c=t.vb;t.vb=o;var f=t.dc.n,d=f.length;try{var p=new pt(a.x,a.y,n.width/o,n.height/o),y=p.copy();y.Zw(i),zr(t,y),wr(t),t.Hf(f,d,t,p);var v=t.Hd;e.setTransform(1,0,0,1,0,0),e.scale(v,v),e.clearRect(0,0,n.width,n.height),null!==l&&""!==l&&(e.fillStyle=l,e.fillRect(0,0,n.width,n.height));var m,g=r.Wg();if(g.reset(),g.translate(i.left,i.top),g.scale(o),0===a.x&&0===a.y||g.translate(-a.x,-a.y),e.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy),r.bf(g),Sr(t,e),null!==s){var b=new nt(Ch),x=s.i;for(x.reset();x.next();){var w=x.value;!1===u&&"Grid"===w.layer.name||null===w||b.add(w)}m=function(i){var n=h;if(i.visible&&0!==i.Bc&&(void 0===n&&(n=!0),n||!i.Pc)){var o=(n=i.zb.n).length;if(0!==o){1!==i.Bc&&(e.globalAlpha=i.Bc),(i=i.vw).length=0;for(var r=t.scale,a=0;a<o;a++){var s=n[a];if(Pc(s)&&b.contains(s)){if(s instanceof Rc){var l=s;if(l.ac&&i.push(l),!1===l.Mf)continue}1<(l=s.Y).width*r||1<l.height*r?s.ve(e,t):qh(s,e)}}e.globalAlpha=1}}}}else if(!h&&u){var k=t.Bn.U,M=k.layer;m=function(i){i===M?k.ve(e,t):i.ve(e,t,h)}}else m=function(i){i.ve(e,t,h)};for(i=0;i<d;i++)m(f[i]);t.wz=!1,t.ml?t.ml.om(t)&&t.Hv():t.Hr=function(){return new ut(0,0)}}finally{t.vb=c,t.jf.He(!0),Nr(t),t.Hf(f,d,t),zr(t)}}function Sr(t,e){var i=t.mk;null!==i&&(void 0!==i.imageSmoothingEnabled&&e.ty(!!i.imageSmoothingEnabled),void 0!==(i=i.defaultFont)&&null!==i&&(e.font=i))}function Tr(t){if(0===t.ja.ti&&0!==t.hl.count){for(;0<t.hl.count;){var e=t.hl;for(t.hl=new ht(Rc,pt),e=e.i;e.next();){var i=e.key;tf(i,e.value),i.Me()}}t.oa()}}function Pr(t){!1===t.Em&&(t.Em=!0)}function Nr(t){!1===t.ol&&(t.ol=!0)}function Cr(t){!1!==t.Qr&&(t.Qr=!1,Ar(t,t.Jb,t.Mb))}function Ar(t,e,i){var n=t.Cb,o=e*(r=t.Hd),r=i*r;n.width===o&&n.height===r||(n.width=o,n.height=r,n.style.width=e+"px",n.style.height=i+"px",t.De=!0,t.jf.He(!0))}function Fr(t){var e=t.Cb;if(null===e)return!0;var i=t.Nb,n=t.Jb,o=t.Mb,a=t.mE.copy();if(!a.I())return!0;var s=!1,l=t.ll?t.Ld:0,h=t.Yj?t.Ld:0,u=i.clientWidth||n+l;i=i.clientHeight||o+h;u===n+l&&i===o+h||(t.ll=!1,t.Yj=!1,h=l=0,t.Jb=u,t.Mb=i,s=t.Qr=!0),t.Em=!1;var c=t.rb,f=t.te,d=0,p=0,y=0,v=0,m=(u=c.width,i=c.height,t.oy);t.kA.$c()?(f.width>u&&(d=m.left,p=m.right),f.height>i&&(y=m.top,v=m.bottom)):(d=m.left,p=m.right,y=m.top,v=m.bottom);m=f.width+d+p;var g=f.height+y+v,b=(d=f.x-d,c.x),x=(p=f.right+p,c.right+l),w=(y=f.y-y,c.y),k=(v=f.bottom+v,c=c.bottom+h,"1px"),M="1px",S=(f=t.scale,!(m<u+l)),T=!(g<i+h);t.sB===_o&&(S||T)&&(S&&t.HA&&t.pe&&(k=1,d+1<b&&(k=Math.max((b-d)*f+t.Jb,k)),p>x+1&&(k=Math.max((p-x)*f+t.Jb,k)),u+l+1<m&&(k=Math.max((m-u+l)*f+t.Jb,k)),k=k.toString()+"px"),T&&t.IA&&t.qe&&(M=1,y+1<w&&(M=Math.max((w-y)*f+t.Mb,M)),v>c+1&&(M=Math.max((v-c)*f+t.Mb,M)),i+h+1<g&&(M=Math.max((g-i+h)*f+t.Mb,M)),M=M.toString()+"px"));var P="1px"!==M;if((S="1px"!==k)&&P||!S&&!P||(T=!(g<i+h),P&&(x-=t.Ld),S&&(c-=t.Ld),m<u+l||!t.HA||!t.pe||(k=1,d+1<b&&(k=Math.max((b-d)*f+t.Jb,k)),p>x+1&&(k=Math.max((p-x)*f+t.Jb,k)),u+1<m&&(k=Math.max((m-u)*f+t.Jb,k)),k=k.toString()+"px"),l=(S="1px"!==k)!==t.Yj?t.Mb-t.Ld:t.Mb,T&&t.IA&&t.qe&&(M=1,y+1<w&&(M=Math.max((w-y)*f+l,M)),v>c+1&&(M=Math.max((v-c)*f+l,M)),i+1<g&&(M=Math.max((g-i)*f+l,M)),M=M.toString()+"px"),P="1px"!==M),t.Cw&&S===t.Yj&&P===t.ll)return n===t.Jb&&o===t.Mb||t.cg(),!1;if(S!==t.Yj&&(t.Mb="1px"===k?t.Mb+t.Ld:Math.max(t.Mb-t.Ld,1),s=!0),t.Yj=S,t.ct.style.width=k,P!==t.ll&&(t.Jb="1px"===M?t.Jb+t.Ld:Math.max(t.Jb-t.Ld,1),s=!0,t.Vr&&(l=r.K(),P?(e.style.left=t.Ld+"px",t.position=l.m(t.jb.x+t.Ld/t.scale,t.jb.y)):(e.style.left="0px",t.position=l.m(t.jb.x-t.Ld/t.scale,t.jb.y)),r.v(l))),t.ll=P,t.ct.style.height=M,l=(e=t.Gw).scrollLeft,t.HA&&t.pe&&(u+1<m?l=(t.position.x-d)*f:d+1<b?l=e.scrollWidth-e.clientWidth:p>x+1&&(l=t.position.x*f)),t.Vr)switch(t.Kz){case"negative":l=-(e.scrollWidth-l-e.clientWidth);break;case"reverse":l=e.scrollWidth-l-e.clientWidth}return e.scrollLeft=l,t.IA&&t.qe&&(i+1<g?e.scrollTop=(t.position.y-y)*f:y+1<w?e.scrollTop=e.scrollHeight-e.clientHeight:v>c+1&&(e.scrollTop=t.position.y*f)),s&&(t.Qr=!0),u=t.Jb,i=t.Mb,e.style.width=u+(t.ll?t.Ld:0)+"px",e.style.height=i+(t.Yj?t.Ld:0)+"px",t.Mz=!1,n===u&&o===i&&!t.Ka.rc||(c=t.rb,t.Ju(a,c,f,t.scale,s),!1)}function Dr(t,e,i){var n=e.layer;null!==n&&n.g===t&&(e.ib=!1,e.Og=!1,e.J(Mh),i&&e.un(),0<=(i=n.rf(-1,e,!1))&&t.cd(Xt,"parts",n,e,null,i,null),null!==(t=e.Px)&&t(e,n,null))}function Lr(t,e,i){if(r.G(e,$o,Qo,"addLayer:layer"),null!==e.g&&e.g!==t&&r.k("Cannot share a Layer with another Diagram: "+e+" of "+e.g),null===i?null!==e.g&&r.k("Cannot add an existing Layer to this Diagram again: "+e):(r.G(i,$o,Qo,"addLayer:existingLayer"),i.g!==t&&r.k("Existing Layer must be in this Diagram: "+i+" not in "+i.g),e===i&&r.k("Cannot move a Layer before or after itself: "+e)),e.g!==t){e=e.name,i=(t=t.dc).count;for(var n=0;n<i;n++)t.ea(n).name===e&&r.k("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}function jr(t,e,i){if(t.Vc||t.$d)t.vb=i,(i=t.Ka).rc&&Lo(i,e,t.vb);else if(t.Vc=!0,null===t.Cb)t.vb=i;else{var n=t.rb.copy(),o=t.Jb,a=t.Mb;n.width=t.Jb/e,n.height=t.Mb/e;var s=t.pm.x,l=t.pm.y,h=t.kA;isNaN(s)&&(h.xj()?h.vj(I)?s=0:h.vj(O)&&(s=o-1):s=h.$c()?h.x*(o-1):o/2),isNaN(l)&&(h.xj()?h.vj(B)?l=0:h.vj(E)&&(l=a-1):l=h.$c()?h.y*(a-1):a/2),null!==t.jG&&(i=t.jG(t,i)),i<t.Ah&&(i=t.Ah),i>t.zh&&(i=t.zh),o=r.xb(t.jb.x+s/e-s/i,t.jb.y+l/e-l/i),t.position=o,r.v(o),t.vb=i,t.Ju(n,t.rb,e,i,!1),t.Vc=!1,sr(t,!1),(i=t.Ka).rc&&Lo(i,e,t.vb),t.oa(),Pr(t)}}function zr(t,e){void 0===e&&(e=null);var i=t.td;if(null!==i&&i.visible){for(var n=r.mm(),o=1,a=1,s=i.xa.n,l=s.length,h=0;h<l;h++){var u=s[h],c=u.interval;2>c||(il(u.Db)?a=a*c/_e(a,c):o=o*c/_e(o,c))}if(s=i.Ex,n.m(a*s.width,o*s.height),s=a=h=l=0,null!==e)l=e.width,h=e.height,a=e.x,s=e.y;else{for(o=r.Kf(),a=t.rb,o.m(a.x,a.y,a.width,a.height),s=t.ww.i;s.next();)(a=s.value.rb).I()&&xt(o,a.x,a.y,a.width,a.height);if(!o.I())return void r.Eb(o);l=o.width,h=o.height,a=o.x,s=o.y,r.Eb(o)}i.width=l+2*n.width,i.height=h+2*n.height,o=r.K(),Ve(a,s,0,0,n.width,n.height,o),o.offset(-n.width,-n.height),r.Hk(n),i.U.location=o,r.v(o)}}function Br(t){if(0<(t=t.selection).count){for(var e=t.xc(),i=e.length,n=0;n<i;n++)e[n].ib=!1;t.Qa(),t.clear(),t.freeze()}}function Ir(t){var e=t.pi;t.nE!==e&&(t.nE=e,t.Aa("Modified"))}function Or(t,e,i){if("string"==typeof i){if(null!==(n=t.vh(e)))n.Ib(i),t.$ instanceof Li&&(null!==(n=t.Xf(e))&&n.Ib(i));else{for(var n=null,o=t.Hm.i;o.next();){for(var a=o.value,s=0;s<a.length;s++){var l=a[s].WH(e);null!==l&&(null===n&&(n=r.eb()),n.push(l))}if(null!==n)break}if(null!==n){for(o=0;o<n.length;o++)n[o].Ib(i);r.ta(n)}}e===t.$.Mk&&t.IG(i)}}function Er(t,e){var i=e.dk;if(r.isArray(i)){var n=t.Hm.ka(i);if(null===n)(n=[]).push(e),t.Hm.add(i,n);else{for(i=0;i<n.length;i++)if(n[i]===e)return;n.push(e)}}}function qr(t,e){var i=e.dk;if(r.isArray(i)){var n=t.Hm.ka(i);if(null!==n)for(var o=0;o<n.length;o++)if(n[o]===e){n.splice(o,1),0===n.length&&t.Hm.remove(i);break}}}function Rr(t,e){for(var i=e.xa.n,n=i.length,o=0;o<n;o++){var r=i[o];r instanceof th&&Gr(t,r)}}function Gr(t,e){var i=e.element;if(null!==i&&i instanceof HTMLImageElement){var n=e.Te;if(null!==n&&(n.Go instanceof Event&&null!==e.Ue&&e.Ue(e,n.Go),!0===n.Tr&&(null!==e.ji&&e.ji(e,n.Lz),null!==e.g&&e.g.Hz.add(e))),i=i.src,null===(n=t.dp.ka(i)))(n=[]).push(e),t.dp.add(i,n);else{for(i=0;i<n.length;i++)if(n[i]===e)return;n.push(e)}}}function Vr(t,e){for(var i=e.xa.n,n=i.length,o=0;o<n;o++){var r=i[o];r instanceof th&&_r(t,r)}}function _r(t,e){if(null!==(i=e.element)&&i instanceof HTMLImageElement){var i=i.src,n=t.dp.ka(i);if(null!==n)for(var o=0;o<n.length;o++)if(n[o]===e){n.splice(o,1),0===n.length&&t.dp.remove(i);break}}}function Hr(t,e){if(null!==e){for(var i=t.$,n=i instanceof Ci,o=r.Za(e),a=0;a<o;a++){var s=r.Ba(e,a);i.Ie(s)?Kr(t,s,!1):n&&Qr(t,s)}if(n||i instanceof Li){for(a=0;a<o;a++)s=r.Ba(e,a),i.Ie(s)&&$r(t,s);if(n)for(i=t.links;i.next();)Gc(i.value)}aa(t,!1)}}function Kr(t,e,i){if(void 0!==e&&null!==e&&!t.ja.lb&&!t.Ei.contains(e)){void 0===i&&(i=!0);var n=t.CA(e),o=Jr(t,e,n);if(null!==o&&(cl(o),null!==(o=o.copy()))){var r=t.Pe;t.Pe=!0,o.yi=n,o.Zd=e,t.add(o),o.Zd=null,o.data=e,i&&$r(t,e),t.Pe=r}}}r.ga("Layer",$o),$o.prototype.Sc=function(t){this.aa=t},$o.prototype.toString=function(t){void 0===t&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var i=0,n=0,o=0,a=0,s=0,l=this.zb.i;l.next();){var h=l.value;h instanceof xf?o++:h instanceof Fc?n++:h instanceof Rc?a++:h instanceof Ac?s++:i++}if(l="",0<i&&(l+=i+" Parts "),0<n&&(l+=n+" Nodes "),0<o&&(l+=o+" Groups "),0<a&&(l+=a+" Links "),0<s&&(l+=s+" Adornments "),1<t)for(t=this.zb.i;t.next();)l+="\n    "+(i=t.value).toString(),null!==(n=i.data)&&r.Pd(n)&&(l+=" #"+r.Pd(n)),i instanceof Fc?l+=" "+Pi(n):i instanceof Rc&&(l+=" "+Pi(i.W)+" "+Pi(i.Z));return e+" "+this.zb.count+": "+l},$o.prototype.findObjectAt=$o.prototype.Le=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),!1===this.yl)return null;var n=!1;null!==this.g&&this.g.rb.Ia(t)&&(n=!0);for(var o=r.K(),a=this.zb.n,s=a.length;s--;){var l=a[s];if((!0!==n||!1!==Pc(l))&&l.isVisible()&&(o.assign(t),ft(o,l.ph),null!==(l=l.Le(o,e,i))&&(null!==e&&(l=e(l)),null!==l&&(null===i||i(l)))))return r.v(o),l}return r.v(o),null},$o.prototype.findObjectsAt=$o.prototype.Wt=function(t,e,i,n){if(void 0===e&&(e=null),void 0===i&&(i=null),n instanceof et||n instanceof nt||(n=new nt(ls)),!1===this.yl)return n;var o=!1;null!==this.g&&this.g.rb.Ia(t)&&(o=!0);for(var a=r.K(),s=this.zb.n,l=s.length;l--;){var h=s[l];if((!0!==o||!1!==Pc(h))&&h.isVisible()){a.assign(t),ft(a,h.ph);var u=h;h.Wt(a,e,i,n)&&(null!==e&&(u=e(u)),null===u||null!==i&&!i(u)||(n instanceof nt&&n.add(u),n instanceof et&&n.add(u)))}}return r.v(a),n},$o.prototype.findObjectsIn=$o.prototype.Fk=function(t,e,i,n,o){if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),o instanceof et||o instanceof nt||(o=new nt(ls)),!1===this.yl)return o;var r=!1;null!==this.g&&this.g.rb.Ak(t)&&(r=!0);for(var a=this.zb.n,s=a.length;s--;){var l=a[s];if((!0!==r||!1!==Pc(l))&&l.isVisible()){var h=l;l.Fk(t,e,i,n,o)&&(null!==e&&(h=e(h)),null===h||null!==i&&!i(h)||(o instanceof nt&&o.add(h),o instanceof et&&o.add(h)))}}return o},$o.prototype.xA=function(t,e,i,n,o,r,a){if(!1===this.yl)return o;for(var s=this.zb.n,l=s.length;l--;){var h=s[l];if((!0!==a||!1!==Pc(h))&&r(h)&&h.isVisible()){var u=h;h.Fk(t,e,i,n,o)&&(null!==e&&(u=e(u)),null===u||null!==i&&!i(u)||(o instanceof nt&&o.add(u),o instanceof et&&o.add(u)))}}return o},$o.prototype.findObjectsNear=$o.prototype.vn=function(t,e,i,n,o,a){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof et||o instanceof nt)&&(a=o),o=!0),a instanceof et||a instanceof nt||(a=new nt(ls)),!1===this.yl)return a;var s=!1;null!==this.g&&this.g.rb.Ia(t)&&(s=!0);for(var l=r.K(),h=r.K(),u=this.zb.n,c=u.length;c--;){var f=u[c];if((!0!==s||!1!==Pc(f))&&f.isVisible()){l.assign(t),ft(l,f.ph),h.m(t.x+e,t.y),ft(h,f.ph);var d=f;f.vn(l,h,i,n,o,a)&&(null!==i&&(d=i(d)),null===d||null!==n&&!n(d)||(a instanceof nt&&a.add(d),a instanceof et&&a.add(d)))}}return r.v(l),r.v(h),a},(i=$o.prototype).Hf=function(t,e){if(this.visible){var i;i=void 0===e?t.rb:e;for(var n=this.zb.n,o=n.length,r=0;r<o;r++){var a=n[r];if(a.pD=r,!(a instanceof Rc&&!1===a.Mf)){if(a instanceof Ac){var s=a;if(null!==s.Xe)continue}if(bt(a.Y,i))for(a.Hf(!0),Ah(a),a=a.$w;a.next();)ps(s=a.value,1/0,1/0),s.ic(),s.Hf(!0);else a.Hf(!1),null!==a.$w&&0<a.$w.count&&Ah(a)}}}},i.ve=function(t,e,i){if(this.visible&&0!==this.Bc&&(void 0===i&&(i=!0),i||!this.Pc)){var n=(i=this.zb.n).length;if(0!==n){1!==this.Bc&&(t.globalAlpha=this.Bc);var o=this.vw;o.length=0;for(var r=e.scale,a=0;a<n;a++){var s=i[a];if(Pc(s)){if(s instanceof Rc){var l=s;if(l.ac&&o.push(l),!1===l.Mf)continue}1<(l=s.Y).width*r||1<l.height*r?s.ve(t,e):qh(s,t)}}t.globalAlpha=1}}},i.h=function(t,e,i,n,o){var r=this.g;null!==r&&r.cd($t,t,this,e,i,n,o)},i.Zp=function(t,e,i){var n=this.zb;if(e.ew=this,t>=n.count)t=n.count;else if(n.ea(t)===e)return-1;return n.Rd(t,e),e.ju(i),null!==(n=this.g)&&(i?n.oa():n.Zp(e)),Xo(this,t,e),t},i.rf=function(t,e,i){if(!i&&e.layer!==this&&null!==e.layer)return e.layer.rf(t,e,i);var n=this.zb;if(0>t||t>=n.length){if(0>(t=n.indexOf(e)))return-1}else if(n.ea(t)!==e&&0>(t=n.indexOf(e)))return-1;return e.ku(i),n.dd(t),null!==(n=this.g)&&(i?n.oa():n.rf(e)),e.ew=null,t},i.clear=function(){for(var t=this.zb.xc(),e=t.length,i=0;i<e;i++)t[i].Hf(!1),this.rf(-1,t[i],!1)},r.u($o,{Pk:"parts"},function(){return this.zb.i}),r.u($o,{JL:"partsBackwards"},function(){return this.zb.Gn}),r.u($o,{g:"diagram"},function(){return this.aa}),r.defineProperty($o,{name:"name"},function(){return this.Rb},function(t){r.j(t,"string",$o,"name");var e=this.Rb;if(e!==t){var i=this.g;if(null!==i)for(""===e&&r.k("Cannot rename default Layer to: "+t),i=i.Qx;i.next();)i.value.name===t&&r.k("Layer.name is already present in this diagram: "+t);for(this.Rb=t,this.h("name",e,t),t=this.zb.i;t.next();)t.value.ag=this.Rb}}),r.defineProperty($o,{opacity:"opacity"},function(){return this.Bc},function(t){var e=this.Bc;e!==t&&(r.j(t,"number",$o,"opacity"),(0>t||1<t)&&r.Fa(t,"0 <= value <= 1",$o,"opacity"),this.Bc=t,this.h("opacity",e,t),null!==(t=this.g)&&t.oa())}),r.defineProperty($o,{Pc:"isTemporary"},function(){return this.xz},function(t){var e=this.xz;e!==t&&(r.j(t,"boolean",$o,"isTemporary"),this.xz=t,this.h("isTemporary",e,t))}),r.defineProperty($o,{visible:"visible"},function(){return this.$z},function(t){var e=this.$z;if(e!==t){for(r.j(t,"boolean",$o,"visible"),this.$z=t,this.h("visible",e,t),e=this.zb.i;e.next();)e.value.Cd(t);null!==(t=this.g)&&t.oa()}}),r.defineProperty($o,{Ug:"pickable"},function(){return this.yl},function(t){var e=this.yl;e!==t&&(r.j(t,"boolean",$o,"pickable"),this.yl=t,this.h("pickable",e,t))}),r.defineProperty($o,{yF:"isBoundsIncluded"},function(){return this.uz},function(t){this.uz!==t&&(this.uz=t,null!==this.g&&this.g.Fc())}),r.defineProperty($o,{xk:"allowCopy"},function(){return this.Sk},function(t){var e=this.Sk;e!==t&&(r.j(t,"boolean",$o,"allowCopy"),this.Sk=t,this.h("allowCopy",e,t))}),r.defineProperty($o,{hn:"allowDelete"},function(){return this.Tk},function(t){var e=this.Tk;e!==t&&(r.j(t,"boolean",$o,"allowDelete"),this.Tk=t,this.h("allowDelete",e,t))}),r.defineProperty($o,{gx:"allowTextEdit"},function(){return this.bl},function(t){var e=this.bl;e!==t&&(r.j(t,"boolean",$o,"allowTextEdit"),this.bl=t,this.h("allowTextEdit",e,t))}),r.defineProperty($o,{ax:"allowGroup"},function(){return this.Uk},function(t){var e=this.Uk;e!==t&&(r.j(t,"boolean",$o,"allowGroup"),this.Uk=t,this.h("allowGroup",e,t))}),r.defineProperty($o,{hx:"allowUngroup"},function(){return this.cl},function(t){var e=this.cl;e!==t&&(r.j(t,"boolean",$o,"allowUngroup"),this.cl=t,this.h("allowUngroup",e,t))}),r.defineProperty($o,{Kt:"allowLink"},function(){return this.Vk},function(t){var e=this.Vk;e!==t&&(r.j(t,"boolean",$o,"allowLink"),this.Vk=t,this.h("allowLink",e,t))}),r.defineProperty($o,{jn:"allowRelink"},function(){return this.Xk},function(t){var e=this.Xk;e!==t&&(r.j(t,"boolean",$o,"allowRelink"),this.Xk=t,this.h("allowRelink",e,t))}),r.defineProperty($o,{Kl:"allowMove"},function(){return this.Wk},function(t){var e=this.Wk;e!==t&&(r.j(t,"boolean",$o,"allowMove"),this.Wk=t,this.h("allowMove",e,t))}),r.defineProperty($o,{bx:"allowReshape"},function(){return this.Yk},function(t){var e=this.Yk;e!==t&&(r.j(t,"boolean",$o,"allowReshape"),this.Yk=t,this.h("allowReshape",e,t))}),r.defineProperty($o,{Lt:"allowResize"},function(){return this.Zk},function(t){var e=this.Zk;e!==t&&(r.j(t,"boolean",$o,"allowResize"),this.Zk=t,this.h("allowResize",e,t))}),r.defineProperty($o,{ex:"allowRotate"},function(){return this.$k},function(t){var e=this.$k;e!==t&&(r.j(t,"boolean",$o,"allowRotate"),this.$k=t,this.h("allowRotate",e,t))}),r.defineProperty($o,{Af:"allowSelect"},function(){return this.al},function(t){var e=this.al;e!==t&&(r.j(t,"boolean",$o,"allowSelect"),this.al=t,this.h("allowSelect",e,t))}),r.ga("Diagram",Qo),Qo.prototype.clear=Qo.prototype.clear=function(){var t=null;null!==this.td&&(t=this.td.U),this.$.clear();for(var e=this.dc.length,i=0;i<e;i++)this.dc.n[i].clear();this.vg.clear(),this.hl.clear(),this.bp.clear(),this.El.clear(),this.Vo.clear(),this.zb.clear(),this.Ei.clear(),this.Oj.clear(),this.Hm.clear(),this.Kw.Qa(),this.Kw.clear(),this.Kw.freeze(),this.Sv.Qa(),this.Sv.clear(),this.Sv.freeze(),qi=this.to=null,Ri="",this.Fv=new pt(NaN,NaN,NaN,NaN).freeze(),null!==t&&(this.add(t),this.zb.remove(t)),this.oa()},Qo.prototype.reset=Qo.prototype.reset=function(){this.Vc=!0,this.clear(),this.dc=new et($o),this.eG(),this.dG(),this.jb=new ut(NaN,NaN).freeze(),this.vb=1,this.Uv=new ut(NaN,NaN).freeze(),this.Vv=NaN,this.mw=1e-4,this.kw=100,this.Xw=new ut(NaN,NaN).freeze(),this.Mv=new pt(NaN,NaN,NaN,NaN).freeze(),this.Ew=new wt(0,0,0,0).freeze(),this.Fw=_o,this.Iw=!0,this.Bw=this.zw=null,this.vm=zo,this.qo=m,this.nl=zo,this.Jo=m,this.Wv=this.Tv=g,this.Tq=250,this.rv=new wt(16,16,16,16).freeze(),this.aw=!0,this.Sw=Ko,this.Uw=Oo,this.pr="auto",this.Di=this.gj=this.Vi=this.pw=this.Wi=this.Xi=this.Yi=this.Ci=this.Ii=this.Ai=null,this.Oi=!1,this.Tk=this.Sk=this.hv=this.kf=!0,this.jv=this.iv=!1,this.nv=this.kv=this.Rv=this.Qv=this.ov=this.mv=this.al=this.$k=this.Zk=this.Yk=this.Wk=this.Xk=this.Vk=this.lv=this.cl=this.Uk=this.bl=!0,this.Hw=this.Dw=16,this.mf=new wt(5).freeze(),this.lw=999999999,this.le=null,this.bw=!1,Zo(this),this.td=null,this.fb=new mo,this.fb.initializeStandardTools(),this.$a=this.Pt=this.fb,this.pb=new Ei,this.fj=!0,ir(this),this.Sb=new Sf,this.fj=!1,this.$=new Ci,this.dh=!1,this.Eo=!0,this.Vc=this.Tf=!1,this.oa(),this.hh=this.zi=null,ua(this),this.yv=""},Qo.prototype.hc=function(t){t.Ge===Qo?this.Ml=t:r.Ij(this,t)},Qo.prototype.toString=function(t){void 0===t&&(t=0);var e="";if(this.qj&&this.qj.id&&(e=this.qj.id),e='Diagram "'+e+'"',0>=t)return e;for(var i=this.dc.i;i.next();)e+="\n  "+i.value.toString(t-1);return e},Qo.fromDiv=function(t){var i=t;return"string"==typeof t&&(i=e.document.getElementById(t)),i instanceof HTMLDivElement&&i.aa instanceof Qo?i.aa:null},r.defineProperty(Qo,{qj:"div"},function(){return this.Nb},function(t){if(null!==t&&r.G(t,HTMLDivElement,Qo,"div"),this.Nb!==t){oh=[];var i=this.Nb;null!==i?(i.aa=void 0,i.innerHTML="",null!==this.Cb&&(this.Cb.removeEventListener("touchstart",this.NB,!1),this.Cb.removeEventListener("touchmove",this.MB,!1),this.Cb.removeEventListener("touchend",this.LB,!1),this.Cb.Od.aa=null),null!==(i=this.fb)&&(i.gf.each(function(t){t.cancelWaitAfter()}),i.dg.each(function(t){t.cancelWaitAfter()}),i.eg.each(function(t){t.cancelWaitAfter()})),i.cancelWaitAfter(),this.$a.doCancel(),this.jf=this.Cb=null,e.removeEventListener("resize",this.TB,!1),e.removeEventListener("mousemove",this.Nn,!0),e.removeEventListener("mousedown",this.Mn,!0),e.removeEventListener("mouseup",this.Pn,!0),e.removeEventListener("wheel",this.Qn,!0),e.removeEventListener("mouseout",this.On,!0)):this.dh=!1,this.Nb=null,null!==t&&((i=t.aa)&&(i.qj=null),Pa(this,t),this.Mu())}}),Qo.prototype.computePixelRatio=function(){if(null!==this.pk)return this.pk;var t=this.jf;return(e.devicePixelRatio||1)/(t.ua.webkitBackingStorePixelRatio||t.ua.mozBackingStorePixelRatio||t.ua.msBackingStorePixelRatio||t.ua.oBackingStorePixelRatio||t.ua.backingStorePixelRatio||1)},Qo.prototype.doMouseMove=function(){this.$a.doMouseMove()},Qo.prototype.doMouseDown=function(){this.$a.doMouseDown()},Qo.prototype.doMouseUp=function(){this.$a.doMouseUp()},Qo.prototype.doMouseWheel=function(){this.$a.doMouseWheel()},Qo.prototype.doKeyDown=function(){this.$a.doKeyDown()},Qo.prototype.doKeyUp=function(){this.$a.doKeyUp()},Qo.prototype.doFocus=function(){this.focus()},Qo.prototype.focus=Qo.prototype.focus=function(){if(this.Cb)if(this.DJ)this.Cb.focus();else{var t=e.scrollX||e.pageXOffset,i=e.scrollY||e.pageYOffset;this.Cb.focus(),e.scrollTo(t,i)}},Qo.prototype.diagramScroll=Qo.prototype.QH=function(t){if(this.Mz&&null!==this.Cb){this.Cw=!0;var e,i=this.te,n=this.rb,o=this.oy,a=i.x-o.left,s=i.y-o.top,l=i.width+o.left+o.right,h=i.height+o.top+o.bottom,u=i.right+o.right,c=(o=i.bottom+o.bottom,n.x),f=(i=n.y,n.width),d=n.height,p=n.right,y=n.bottom;n=this.scale;if(e=t.scrollLeft,this.Vr)switch(this.Kz){case"negative":e=e+t.scrollWidth-t.clientWidth;break;case"reverse":e=t.scrollWidth-e-t.clientWidth}var v=e;f<l||d<h?(e=r.xb(this.position.x,this.position.y),this.pe&&this.Nz!==v&&(e.x=v/n+a,this.Nz=v),this.qe&&this.Oz!==t.scrollTop&&(e.y=t.scrollTop/n+s,this.Oz=t.scrollTop),this.position=e,r.v(e),this.Em=this.Cw=!1):(e=r.K(),t.aH&&this.pe&&(a<c&&(this.position=e.m(v+a,this.position.y)),u>p&&(this.position=e.m(-(this.Gw.scrollWidth-this.Jb)+v-this.Jb/n+u,this.position.y))),t.bH&&this.qe&&(s<i&&(this.position=e.m(this.position.x,t.scrollTop+s)),o>y&&(this.position=e.m(this.position.x,-(this.Gw.scrollHeight-this.Mb)+t.scrollTop-this.Mb/n+o))),r.v(e),Nr(this),this.Em=this.Cw=!1,i=this.te,n=this.rb,u=i.right,p=n.right,o=i.bottom,y=n.bottom,a=i.x,c=n.x,s=i.y,i=n.y,f>=l&&a>=c&&u<=p&&(this.ct.style.width="1px"),d>=h&&s>=i&&o<=y&&(this.ct.style.height="1px"))}},Qo.prototype.computeBounds=Qo.prototype.sh=function(){return 0<this.vg.count&&wr(this),ar(this)},Qo.prototype.computePartsBounds=function(t,e){void 0===e&&(e=!1);for(var i=null,n=t.i;n.next();){var o=n.value;!e&&o instanceof Rc||(o.af(),null===i?i=o.Y.copy():i.Ih(o.Y))}return null===i?new pt(NaN,NaN,0,0):i},Qo.prototype.zoomToFit=Qo.prototype.zoomToFit=function(){this.scale=lr(this,Bo)},Qo.prototype.zoomToRect=function(t,e){void 0===e&&(e=Bo);var i=t.width,n=t.height;if(!(0===i||0===n||isNaN(i)&&isNaN(n))){var o=1;if(e===Bo||e===Io)if(isNaN(i))o=this.rb.height*this.scale/n;else if(isNaN(n))o=this.rb.width*this.scale/i;else{o=this.Jb;var r=this.Mb;o=e===Io?r/n>o/i?(r-(this.Yj?this.Ld:0))/n:(o-(this.ll?this.Ld:0))/i:Math.min(r/n,o/i)}this.scale=o,this.position=new ut(t.x,t.y)}},r.defineProperty(Qo,{OA:null},function(){return this.Vc},function(t){this.Vc=t}),Qo.prototype.alignDocument=function(t,e){this.Zj&&ra(this,this.sh());var i=this.te,n=this.rb;this.position=new ut(i.x+(t.x*i.width+t.offsetX)-(e.x*n.width-e.offsetX),i.y+(t.y*i.height+t.offsetY)-(e.y*n.height-e.offsetY))},Qo.prototype.findPartAt=Qo.prototype.Xt=function(t,e){var i=e?ur(this,t,function(t){return t.U},function(t){return t.canSelect()}):ur(this,t,function(t){return t.U});return i instanceof Ch?i:null},Qo.prototype.findObjectAt=Qo.prototype.Le=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),wr(this);for(var n=this.dc.Gn;n.next();){var o=n.value;if(o.visible&&null!==(o=o.Le(t,e,i)))return o}return null},Qo.prototype.findObjectsAt=Qo.prototype.Wt=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),n instanceof et||n instanceof nt||(n=new nt(ls)),wr(this);for(var o=this.dc.Gn;o.next();){var r=o.value;r.visible&&r.Wt(t,e,i,n)}return n},Qo.prototype.findObjectsIn=Qo.prototype.Fk=function(t,e,i,n,o){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),o instanceof et||o instanceof nt||(o=new nt(ls)),wr(this);for(var r=this.dc.Gn;r.next();){var a=r.value;a.visible&&a.Fk(t,e,i,n,o)}return o},Qo.prototype.xA=function(t,e,i,n,o,r){var a=new nt(ls);wr(this);for(var s=this.dc.Gn;s.next();){var l=s.value;l.visible&&l.xA(t,e,i,n,a,o,r)}return a},Qo.prototype.findObjectsNear=Qo.prototype.vn=function(t,e,i,n,o,r){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof et||o instanceof nt)&&(r=o),o=!0),r instanceof et||r instanceof nt||(r=new nt(ls)),wr(this);for(var a=this.dc.Gn;a.next();){var s=a.value;s.visible&&s.vn(t,e,i,n,o,r)}return r},Qo.prototype.acceptEvent=function(t){var e=this.wd;return this.wd=this.Yb,this.Yb=e,cr(this,this,t,e,t instanceof MouseEvent),e},Qo.prototype.HI=function(t){if(!this.aa.isEnabled)return!1;var e=this.aa.Yb;switch(cr(this.aa,this.aa,t,e,!1),e.key=String.fromCharCode(t.which),e.Dk=!0,t.which){case 8:e.key="Backspace";break;case 33:e.key="PageUp";break;case 34:e.key="PageDown";break;case 35:e.key="End";break;case 36:e.key="Home";break;case 37:e.key="Left";break;case 38:e.key="Up";break;case 39:e.key="Right";break;case 40:e.key="Down";break;case 45:e.key="Insert";break;case 46:e.key="Del";break;case 48:e.key="0";break;case 187:case 61:case 107:e.key="Add";break;case 189:case 173:case 109:e.key="Subtract";break;case 27:e.key="Esc"}return this.aa.doKeyDown(),yr(e,t)},Qo.prototype.II=function(t){if(!this.aa.isEnabled)return!1;var e=this.aa.Yb;switch(cr(this.aa,this.aa,t,e,!1),e.key=String.fromCharCode(t.which),e.up=!0,t.which){case 8:e.key="Backspace";break;case 33:e.key="PageUp";break;case 34:e.key="PageDown";break;case 35:e.key="End";break;case 36:e.key="Home";break;case 37:e.key="Left";break;case 38:e.key="Up";break;case 39:e.key="Right";break;case 40:e.key="Down";break;case 45:e.key="Insert";break;case 46:e.key="Del"}return this.aa.doKeyUp(),yr(e,t)},Qo.prototype.Hr=function(t){if(null===(n=this.Cb))return new ut(0,0);var e=this.Jb,i=this.Mb,n=n.getBoundingClientRect();e=t.clientX-e/n.width*n.left;return t=t.clientY-i/n.height*n.top,null!==this.kd?(ft(t=new ut(e,t),this.kd),t):new ut(e,t)},Qo.prototype.invalidateDocumentBounds=Qo.prototype.Fc=function(){this.Zj||(this.Zj=!0,this.Ne(!0))},Qo.prototype.redraw=Qo.prototype.Mu=function(){this.Vc||this.$d||(this.oa(),Pr(this),Nr(this),this.Fc(),this.cg())},Qo.prototype.isUpdateRequested=function(){return this.Tf},Qo.prototype.delayInitialization=function(t){void 0===t&&(t=null);var e=this.Ka,i=e.isEnabled;e.Gh(),e.isEnabled=!1,xr(this),this.dh=!1,e.isEnabled=i,null!==t&&r.setTimeout(t,1)},Qo.prototype.requestUpdate=Qo.prototype.Ne=function(t){if(void 0===t&&(t=!1),!0!==this.Tf&&!(this.Vc||!1===t&&this.$d)){this.Tf=!0;var e=this;requestAnimationFrame(function(){e.Tf&&e.cg()})}},Qo.prototype.maybeUpdate=Qo.prototype.cg=function(){this.Eo&&!this.Tf||(this.Eo&&(this.Eo=!1),xr(this))},r.u(Qo,{Fn:null},function(){return this.dh}),Qo.prototype.RB=function(t,e){for(t.reset();t.next();){var i=t.value;!i.fe()||i instanceof xf||(i.bm()?(ps(i,1/0,1/0),i.ic()):e.add(i))}for(t.reset();t.next();)(i=t.value)instanceof xf&&i.isVisible()&&kr(this,i);for(t.reset();t.next();)(i=t.value)instanceof Rc&&i.isVisible()&&(i.bm()?(ps(i,1/0,1/0),i.ic()):e.add(i));for(t.reset();t.next();)(i=t.value)instanceof Ac&&i.isVisible()&&(i.bm()?(ps(i,1/0,1/0),i.ic()):e.add(i))},Qo.prototype.Hf=function(t,e,i,n){var o=this.Ka;if(this.ol||o.df)for(o=0;o<e;o++)t[o].Hf(i,n)},Qo.prototype.ve=function(t,e){void 0===e&&(e=null),null===this.Nb&&r.k("No div specified");var i=this.Cb;if(null===i&&r.k("No canvas specified"),!(l=this.Ka).rc&&(Cr(this),"0"!==this.Nb.style.opacity)){var n=t!==this.jf,o=this.dc.n,a=o.length,s=this;if(this.Hf(o,a,s),n)t.He(!0),Nr(this);else if(!this.De&&null===e&&!l.$j)return;a=this.jb;var l,h=this.vb,u=Math.round(a.x*h)/h,c=Math.round(a.y*h)/h;for((l=this.kd).reset(),1!==h&&l.scale(h),0===a.x&&0===a.y||l.translate(-u,-c),h=this.Hd,r.Dn?(i.width=i.width,t.He(!0),t.scale(h,h)):(t.setTransform(1,0,0,1,0,0),t.scale(h,h),t.clearRect(0,0,this.Jb,this.Mb)),t.setTransform(1,0,0,1,0,0),t.scale(h,h),t.transform(l.m11,l.m12,l.m21,l.m22,l.dx,l.dy),i=null!==e?function(i){var n=e;if(i.visible&&0!==i.Bc){var o=i.zb.n,r=o.length;if(0!==r){1!==i.Bc&&(t.globalAlpha=i.Bc),(i=i.vw).length=0;for(var a=s.scale,l=0;l<r;l++){var h=o[l];if(Pc(h)&&!n.contains(h)){if(h instanceof Rc){var u=h;if(u.ac&&i.push(u),!1===u.Mf)continue}1<(u=h.Y).width*a||1<u.height*a?h.ve(t,s):qh(h,t)}}t.globalAlpha=1}}}:function(e){e.ve(t,s)},Sr(this,t),a=o.length,u=0;u<a;u++)t.setTransform(1,0,0,1,0,0),t.scale(h,h),t.transform(l.m11,l.m12,l.m21,l.m22,l.dx,l.dy),i(o[u]);this.ml?this.ml.om(this)&&this.Hv():this.Hr=function(){return new ut(0,0)},n?(this.jf.He(!0),Nr(this)):this.De=this.ol=!1}},Qo.prototype.getRenderingHint=Qo.prototype.tj=function(t){return this.mk[t]},Qo.prototype.setRenderingHint=Qo.prototype.IJ=function(t,e){this.mk[t]=e,this.Mu()},Qo.prototype.resetRenderingHints=Qo.prototype.eG=function(){this.mk=new l,this.mk.drawShadows=!0,this.mk.textGreeking=!0,this.mk.viewportOptimizations=!(r.BF||r.bq||r.cq),this.mk.temporaryPixelRatio=!0,this.mk.pictureRatioOptimization=!0},Qo.prototype.getInputOption=Qo.prototype.gu=function(t){return this.Mo[t]},Qo.prototype.setInputOption=function(t,e){this.Mo[t]=e},Qo.prototype.resetInputOptions=Qo.prototype.dG=function(){this.Mo=new l,this.Mo.extraTouchArea=10,this.Mo.extraTouchThreshold=10,this.Mo.hasGestureZoom=!0},Qo.prototype.setProperties=function(t){r.Vu(this,t)},Qo.prototype.oa=function(t){if(void 0===t&&(t=null),null===t)this.De=!0,this.Ne();else{var e=this.rb;null!==t&&t.I()&&e.Zf(t)&&(this.De=!0,this.Ne())}for(e=this.ww.i;e.next();)e.value.oa(t)},Qo.prototype.wF=function(t,e){if(!0!==this.De){this.De=!0;var i=!0===this.tj("temporaryPixelRatio");if(!0===this.tj("viewportOptimizations")&&this.sB!==Ho&&this.oy.wx(0,0,0,0)&&e.width===t.width&&e.height===t.height){var n=this.scale,o=r.Kf(),a=Math.max(t.x,e.x),s=Math.max(t.y,e.y),l=Math.min(t.x+t.width,e.x+e.width),h=Math.min(t.y+t.height,e.y+e.height);if(o.x=a,o.y=s,o.width=Math.max(0,l-a)*n,o.height=Math.max(0,h-s)*n,0<o.width&&0<o.height){if(!this.$d&&(this.Tf=!1,null!==this.Nb))if(this.$d=!0,Tr(this),this.te.I()||ra(this,this.sh()),null!==(m=this.Cb)){var u=this.Hd,c=(s=this.Jb*u,l=this.Mb*u,a=this.scale*u,n=Math.round(Math.round(e.x*a)-Math.round(t.x*a)),a=Math.round(Math.round(e.y*a)-Math.round(t.y*a)),h=this.fz,this.TC);h.width!==s&&(h.width=s),h.height!==l&&(h.height=l),c.clearRect(0,0,s,l);h=190*this.Hd;var f=70*this.Hd,d=Math.max(n,0),p=Math.max(a,0),y=Math.floor(s-d),v=Math.floor(l-p);c.ty(!1),c.drawImage(m.Od,d,p,y,v,0,0,y,v),this.ml.om(this)&&c.clearRect(0,0,h,f);var m=r.eb(),g=(c=r.eb(),v=Math.abs(n),y=Math.abs(a),0===d?0:s-v);d=r.xb(g,0),v=r.xb(v+g,l);c.push(new pt(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y)));var b=this.kd;b.reset(),b.scale(u,u),1!==this.vb&&b.scale(this.vb),(0!==(u=this.jb).x||0!==u.y)&&isFinite(u.x)&&isFinite(u.y)&&b.translate(-u.x,-u.y),ft(d,b),ft(v,b),m.push(new pt(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y))),g=0===p?0:l-y,d.m(0,g),v.m(s,y+g),c.push(new pt(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y))),ft(d,b),ft(v,b),m.push(new pt(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y))),this.ml.om(this)&&(s=0<n?0:-n,l=0<a?0:-a,d.m(s,l),v.m(h+s,f+l),c.push(new pt(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y))),ft(d,b),ft(v,b),m.push(new pt(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y)))),r.v(d),r.v(v),br(this,!1),function(t,e,i,n,o){if(null===t.Nb&&r.k("No div specified"),null===(l=t.Cb)&&r.k("No canvas specified"),!t.Ka.rc){var a=t.jf;if(t.De){Cr(t);var s=t.Hd;r.Dn?(l.width=l.width,a.He(!0)):(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,t.Jb*s,t.Mb*s)),a.ty(!1),a.drawImage(t.fz.Od,0<n?0:Math.round(-n),0<o?0:Math.round(-o)),o=t.jb;var l=t.vb,h=Math.round(o.x*l)/l,u=Math.round(o.y*l)/l;for((n=t.kd).reset(),1!==l&&n.scale(l),0===o.x&&0===o.y||n.translate(-h,-u),a.save(),a.beginPath(),o=i.length,l=0;l<o;l++)0!==(h=i[l]).width&&0!==h.height&&a.rect(Math.floor(h.x),Math.floor(h.y),Math.ceil(h.width),Math.ceil(h.height));for(a.clip(),a.setTransform(1,0,0,1,0,0),a.scale(s,s),a.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),o=(i=t.dc.n).length,t.Hf(i,o,t),Sr(t,a),l=0;l<o;l++)Yo(i[l],a,t,e);a.restore(),a.He(!0),t.ml?t.ml.om(t)&&t.Hv():t.Hr=function(){return new ut(0,0)},t.ol=!1,t.De=!1,t.hy()}}}(this,m,c,n,a),r.ta(m),r.ta(c),this.$d=!1}}else this.cg();r.Eb(o),i&&(this.pk=1,this.cg(),this.pk=null,this.hy())}else i?(this.pk=1,this.cg(),this.pk=null,this.hy()):this.cg()}},Qo.prototype.add=Qo.prototype.add=function(t){if(r.G(t,Ch,Qo,"add:part"),(e=t.g)!==this){null!==e&&r.k("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),this.Lq&&(t.sl="Tool");var e,i=t.ag;null===(e=this.Vt(i))&&(e=this.Vt("")),null===e&&r.k('Cannot add a Part when unable find a Layer named "'+i+'" and there is no default Layer'),t.layer!==e&&(0<=(i=e.Zp(99999999,t,t.g===this))&&this.cd(Yt,"parts",e,null,t,null,i),e.Pc||this.Fc(),t.J(kh),null!==(i=t.Px)&&i(t,null,e))}},Qo.prototype.Zp=function(t){if(t instanceof Fc){if(this.bp.add(t),t instanceof xf){var e=t.Da;null===e?this.El.add(t):e.Zo.add(t),null!==(e=t.Sb)&&(e.g=this)}}else t instanceof Rc?this.Vo.add(t):t instanceof Ac||this.zb.add(t);var i=this;rl(t,function(t){Rr(i,t)}),(t instanceof Ac||t instanceof xf&&null!==t.Lb)&&t.H(),null!==(e=t.data)&&(t instanceof Ac||(t instanceof Rc?this.Oj.add(e,t):this.Ei.add(e,t)),rl(t,function(t){Er(i,t)})),!0!==Ds(t)&&!0!==Mc(t)||this.vg.add(t),Eh(t,!0,this),Cc(t)?(t.Y.I()&&this.oa(jh(t,t.Y)),this.Fc()):t.isVisible()&&t.Y.I()&&this.oa(jh(t,t.Y)),this.Ne()},Qo.prototype.rf=function(t){if(t.Mt(),t instanceof Fc){if(this.bp.remove(t),t instanceof xf){var e=t.Da;null===e?this.El.remove(t):e.Zo.remove(t),null!==(e=t.Sb)&&(e.g=null)}}else t instanceof Rc?this.Vo.remove(t):t instanceof Ac||this.zb.remove(t);var i=this;rl(t,function(t){Vr(i,t)}),null!==(e=t.data)&&(t instanceof Ac||(t instanceof Rc?this.Oj.remove(e):this.Ei.remove(e)),rl(t,function(t){qr(i,t)})),this.vg.remove(t),Cc(t)?(t.Y.I()&&this.oa(jh(t,t.Y)),this.Fc()):t.isVisible()&&t.Y.I()&&this.oa(jh(t,t.Y)),this.Ne()},Qo.prototype.remove=Qo.prototype.remove=function(t){r.G(t,Ch,Qo,"remove:part"),Dr(this,t,!0)},Qo.prototype.removeParts=Qo.prototype.oB=function(t,e){if(r.isArray(t))for(var i=r.Za(t),n=0;n<i;n++){var o=r.Ba(t,n);e&&!o.canDelete()||this.remove(o)}else for((o=new nt(Ch)).Nc(t),i=o.i;i.next();)o=i.value,e&&!o.canDelete()||this.remove(o)},Qo.prototype.copyParts=Qo.prototype.Mp=function(t,e,i){return this.pb.Mp(t,e,i)},Qo.prototype.moveParts=Qo.prototype.moveParts=function(t,e,i){r.G(e,ut,Qo,"moveParts:offset");var n=this.fb;if(null!==n){null===(n=n.ue)&&(n=new Wi).Sc(this);var o=new ht(Ch);if(null!==t)t=t.i;else{for(t=this.Pk;t.next();)$i(n,o,t.value,i);for(t=this.ig;t.next();)$i(n,o,t.value,i);t=this.links}for(;t.next();)$i(n,o,t.value,i);n.moveParts(o,e,i)}},Qo.prototype.addLayer=Qo.prototype.Ft=function(t){Lr(this,t,null),t.Sc(this);var e=this.dc,i=e.count-1;if(!t.Pc)for(;0<=i&&e.ea(i).Pc;)i--;e.Rd(i+1,t),null!==this.ne&&this.cd(Yt,"layers",this,null,t,null,i+1),this.oa(),this.Fc()},Qo.prototype.addLayerBefore=Qo.prototype.kH=function(t,e){Lr(this,t,e),t.Sc(this);var i=this.dc,n=i.indexOf(t);0<=n&&(i.remove(t),null!==this.ne&&this.cd(Xt,"layers",this,t,null,n,null));for(var o=i.count,r=0;r<o;r++)if(i.ea(r)===e){i.Rd(r,t);break}null!==this.ne&&this.cd(Yt,"layers",this,null,t,null,r),this.oa(),0>n&&this.Fc()},Qo.prototype.addLayerAfter=function(t,e){Lr(this,t,e),t.Sc(this);var i=this.dc,n=i.indexOf(t);0<=n&&(i.remove(t),null!==this.ne&&this.cd(Xt,"layers",this,t,null,n,null));for(var o=i.count,r=0;r<o;r++)if(i.ea(r)===e){i.Rd(r+1,t);break}null!==this.ne&&this.cd(Yt,"layers",this,null,t,null,r+1),this.oa(),0>n&&this.Fc()},Qo.prototype.removeLayer=function(t){if(r.G(t,$o,Qo,"removeLayer:layer"),t.g!==this&&r.k("Cannot remove a Layer from another Diagram: "+t+" of "+t.g),""!==t.name){var e=this.dc,i=e.indexOf(t);if(e.remove(t)){for(e=t.zb.copy().i;e.next();){var n=e.value,o=n.ag;n.ag=o!==t.name?o:""}null!==this.ne&&this.cd(Xt,"layers",this,t,null,i,null),this.oa(),this.Fc()}}},Qo.prototype.findLayer=Qo.prototype.Vt=function(t){for(var e=this.Qx;e.next();){var i=e.value;if(i.name===t)return i}return null},Qo.prototype.addModelChangedListener=Qo.prototype.mH=function(t){r.j(t,"function",Qo,"addModelChangedListener:listener"),null===this.hh&&(this.hh=new et("function")),this.hh.add(t),this.$.gn(t)},Qo.prototype.removeModelChangedListener=function(t){r.j(t,"function",Qo,"removeModelChangedListener:listener"),null!==this.hh&&(this.hh.remove(t),0===this.hh.count&&(this.hh=null)),this.$.Nu(t)},Qo.prototype.addChangedListener=Qo.prototype.gn=function(t){r.j(t,"function",Qo,"addChangedListener:listener"),null===this.zi&&(this.zi=new et("function")),this.zi.add(t)},Qo.prototype.removeChangedListener=Qo.prototype.Nu=function(t){r.j(t,"function",Qo,"removeChangedListener:listener"),null!==this.zi&&(this.zi.remove(t),0===this.zi.count&&(this.zi=null))},Qo.prototype.jx=function(t){if(this.cb||this.ja.rF(t),t.Dc!==Jt&&(this.pi=!0),null!==this.zi)for(var e=this.zi,i=e.length,n=0;n<i;n++)e.ea(n)(t)},Qo.prototype.raiseChangedEvent=Qo.prototype.cd=function(t,e,i,n,o,r,a){void 0===r&&(r=null),void 0===a&&(a=null);var s=new oi;s.g=this,s.Dc=t,s.propertyName=e,s.object=i,s.oldValue=n,s.Dj=r,s.newValue=o,s.Cj=a,this.jx(s)},Qo.prototype.raiseChanged=Qo.prototype.h=function(t,e,i,n,o){this.cd($t,t,this,e,i,n,o)},r.u(Qo,{Ka:"animationManager"},function(){return this.gC}),r.u(Qo,{ja:"undoManager"},function(){return this.ne.ja}),r.defineProperty(Qo,{cb:"skipsUndoManager"},function(){return this.fj},function(t){r.j(t,"boolean",Qo,"skipsUndoManager"),this.fj=t,this.ne.fj=t}),r.defineProperty(Qo,{rA:"delaysLayout"},function(){return this.az},function(t){this.az=t}),Qo.prototype.mn=function(t,e){if(null!==t&&t.g===this){var i=this.Pe;try{this.Pe=!0;var n=t.Dc;if(n===$t){var o,a=t.object,s=t.propertyName,l=t.ka(e);if(r.Ma(a,s,l),a instanceof ls)null!==(p=a.U)&&p.ee();this.pi=!0}else if(n===Yt){var h=t.object,u=t.Cj;a=t.newValue;if(h instanceof Ys){if("number"==typeof u&&a instanceof ls){o=a;var c=h;e?c.rf(u):c.Rd(u,o),null!==(p=h.U)&&p.ee()}else if("number"==typeof u&&a instanceof wl){var f=a;c=h;e?f.xe?c.cG(u):c.aG(u):(f.xe?c.de(f.index):c.ce(f.index)).Lp(f)}}else if(h instanceof $o){var d=!0===t.Dj;if("number"==typeof u&&a instanceof Ch){var p=a,y=h;e?(p.ib=!1,p.Og=!1,p.ee(),y.rf(d?u:-1,p,d)):y.Zp(u,p,d)}}else if(h instanceof Qo){if("number"==typeof u&&a instanceof $o){var v=a;e?this.dc.dd(u):((n=v).Sc(this),this.dc.Rd(u,n))}}else r.k("unknown ChangedEvent.Insert object: "+t.toString());this.pi=!0}else n===Xt?(h=t.object,u=t.Dj,a=t.oldValue,h instanceof Ys?"number"==typeof u&&a instanceof ls?(c=h,e?c.Rd(u,a):c.rf(u)):"number"==typeof u&&a instanceof wl&&(f=a,c=h,e?(f.xe?c.de(f.index):c.ce(f.index)).Lp(f):f.xe?c.cG(u):c.aG(u)):h instanceof $o?(d=!0===t.Cj,"number"==typeof u&&a instanceof Ch&&(p=a,y=h,e?y.Zp(u,p,d):(p.ib=!1,p.Og=!1,p.ee(),y.rf(d?u:-1,p,d)))):h instanceof Qo?"number"==typeof u&&a instanceof $o&&(v=a,e?((n=v).Sc(this),this.dc.Rd(u,n)):this.dc.dd(u)):r.k("unknown ChangedEvent.Remove object: "+t.toString()),this.pi=!0):n!==Jt&&r.k("unknown ChangedEvent: "+t.toString())}finally{this.Pe=i}}},Qo.prototype.startTransaction=Qo.prototype.Hb=function(t){return this.ja.Hb(t)},Qo.prototype.commitTransaction=Qo.prototype.Yc=function(t){return this.ja.Yc(t)},Qo.prototype.rollbackTransaction=Qo.prototype.fm=function(){return this.ja.fm()},Qo.prototype.commit=function(t,e){var i=e;void 0===i&&(i="");var n=this.cb;null===i&&(this.cb=!0,i=""),this.ja.Hb(i);var o=!1;try{t(this),o=!0}finally{o?this.ja.Yc(i):this.ja.fm(),this.cb=n}},Qo.prototype.updateAllTargetBindings=Qo.prototype.IG=function(t){void 0===t&&(t="");for(var e=this.Pk;e.next();)e.value.Ib(t);for(e=this.ig;e.next();)e.value.Ib(t);for(e=this.links;e.next();)e.value.Ib(t)},Qo.prototype.updateAllRelationshipsFromData=Qo.prototype.$J=function(){for(var t=this.$,e=new nt,i=t.hg,n=0;n<i.length;n++){var o=i[n];e.add(o)}var r=[];for(this.ig.each(function(t){null===t.data||e.contains(t.data)||r.push(t.data)}),this.Pk.each(function(t){null===t.data||e.contains(t.data)||r.push(t.data)}),r.forEach(function(e){bi(t,e,!1)}),n=0;n<i.length;n++){o=i[n];var a=this.vh(o);null===a&&gi(t,o,!1)}if(t instanceof Ci){var s=new nt;for(i=t.Pg,n=0;n<i.length;n++)o=i[n],s.add(o);var l=[];for(this.links.each(function(t){null===t.data||s.contains(t.data)||l.push(t.data)}),l.forEach(function(e){Fi(t,e,!1)}),n=0;n<i.length;n++)o=i[n],null===(a=this.Xf(o))&&Ai(t,o,!1)}for(n=this.Pk;n.next();)(a=n.value).updateRelationshipsFromData();for(n=this.ig;n.next();)n.value.updateRelationshipsFromData();for(n=this.links;n.next();)(a=n.value).updateRelationshipsFromData()},Qo.prototype.Ju=function(t,e,i,n,o){t.L(e)||(void 0===o&&(o=!1),o||Pr(this),Nr(this),null===(n=this.Sb)||!n.Mx||this.Ml!==zo||o||t.width===e.width&&t.height===e.height||n.J(),n=this.$a,!0===this.eh&&n instanceof mo&&(this.R.da=this.OB(this.R.hf),go(n,this)),this.Vc||this.wF(t,e),zr(this),this.nh.scale=i,this.nh.position.x=t.x,this.nh.position.y=t.y,this.nh.bounds.set(t),this.nh.isScroll=o,this.Aa("ViewportBoundsChanged",this.nh,t),this.SA&&this.links.each(function(t){t.Zl&&t.Y.Zf(e)&&t.Vb()}))},Qo.prototype.clearSelection=Qo.prototype.kx=function(){var t=0<this.selection.count;t&&this.Aa("ChangingSelection"),Br(this),t&&this.Aa("ChangedSelection")},Qo.prototype.select=Qo.prototype.select=function(t){null!==t&&(r.G(t,Ch,Qo,"select:part"),t.layer.g===this&&(!t.ib||1<this.selection.count)&&(this.Aa("ChangingSelection"),Br(this),t.ib=!0,this.Aa("ChangedSelection")))},Qo.prototype.selectCollection=Qo.prototype.nG=function(t){if(this.Aa("ChangingSelection"),Br(this),r.isArray(t))for(var e=r.Za(t),i=0;i<e;i++){var n=r.Ba(t,i);n instanceof Ch||r.k("Diagram.selectCollection given something that is not a Part: "+n),n.ib=!0}else for(t=t.i;t.next();)(n=t.value)instanceof Ch||r.k("Diagram.selectCollection given something that is not a Part: "+n),n.ib=!0;this.Aa("ChangedSelection")},Qo.prototype.clearHighlighteds=Qo.prototype.tH=function(){var t=this.Yl;if(0<t.count){for(var e=t.xc(),i=e.length,n=0;n<i;n++)e[n].Og=!1;t.Qa(),t.clear(),t.freeze()}},Qo.prototype.highlight=function(t){null!==t&&t.layer.g===this&&(r.G(t,Ch,Qo,"highlight:part"),!t.Og||1<this.Yl.count)&&(this.tH(),t.Og=!0)},Qo.prototype.highlightCollection=function(t){for(var e=new nt(Ch).Nc(t),i=this.Yl.copy().jy(e).i;i.next();)(t=i.value).Og=!1;for(e=e.i;e.next();)(t=e.value)instanceof Ch||r.k("Diagram.highlightCollection given something that is not a Part: "+t),t.Og=!0},Qo.prototype.scroll=Qo.prototype.scroll=function(t,e,i){void 0===i&&(i=1);var n="up"===e||"down"===e,o=0;if("pixel"===t)o=i;else if("line"===t)o=i*(n?this.Tu:this.Su);else if("page"===t)t=n?this.rb.height:this.rb.width,0!==(t*=this.scale)&&(o=Math.max(t-(n?this.Tu:this.Su),0),o*=i);else{if("document"===t)return o=this.te,n=this.rb,i=r.K(),"up"===e?this.position=i.m(n.x,o.y):"left"===e?this.position=i.m(o.x,n.y):"down"===e?this.position=i.m(n.x,o.bottom-n.height):"right"===e&&(this.position=i.m(o.right-n.width,n.y)),void r.v(i);r.k("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}o/=this.scale,i=this.position.copy(),"up"===e?i.y=this.position.y-o:"down"===e?i.y=this.position.y+o:"left"===e?i.x=this.position.x-o:"right"===e?i.x=this.position.x+o:r.k("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),this.position=i},Qo.prototype.scrollToRect=Qo.prototype.kG=function(t){var e=this.rb;e.Ak(t)||((t=t.Nl).x-=e.width/2,t.y-=e.height/2,this.position=t)},Qo.prototype.centerRect=Qo.prototype.FE=function(t){var e=this.rb;(t=t.Nl).x-=e.width/2,t.y-=e.height/2,this.position=t},Qo.prototype.transformDocToView=Qo.prototype.FG=function(t){var e=this.kd;e.reset(),1!==this.vb&&e.scale(this.vb);var i=this.jb;return(0!==i.x||0!==i.y)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),t.copy().transform(this.kd)},Qo.prototype.transformViewToDoc=Qo.prototype.OB=function(t){var e=this.kd;e.reset(),1!==this.vb&&e.scale(this.vb);var i=this.jb;return(0!==i.x||0!==i.y)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),ft(t.copy(),this.kd)},Qo.None=zo=r.p(Qo,"None",0),Qo.Uniform=Bo=r.p(Qo,"Uniform",1),Qo.UniformToFill=Io=r.p(Qo,"UniformToFill",2),Qo.CycleAll=Oo=r.p(Qo,"CycleAll",10),Qo.CycleNotDirected=Eo=r.p(Qo,"CycleNotDirected",11),Qo.CycleNotDirectedFast=qo=r.p(Qo,"CycleNotDirectedFast",12),Qo.CycleNotUndirected=Ro=r.p(Qo,"CycleNotUndirected",13),Qo.CycleDestinationTree=Go=r.p(Qo,"CycleDestinationTree",14),Qo.CycleSourceTree=Vo=r.p(Qo,"CycleSourceTree",15),Qo.DocumentScroll=_o=r.p(Qo,"DocumentScroll",1),Qo.InfiniteScroll=Ho=r.p(Qo,"InfiniteScroll",2),Qo.TreeParentCollapsed=Ko=r.p(Qo,"TreeParentCollapsed",21),Qo.AllParentsCollapsed=Wo=r.p(Qo,"AllParentsCollapsed",22),Qo.AnyParentsCollapsed=Uo=r.p(Qo,"AnyParentsCollapsed",23),r.defineProperty(Qo,{aK:"validCycle"},function(){return this.Uw},function(t){var e=this.Uw;e!==t&&(r.ob(t,Qo,Qo,"validCycle"),this.Uw=t,this.h("validCycle",e,t))}),r.u(Qo,{Qx:"layers"},function(){return this.dc.i}),r.defineProperty(Qo,{Df:"isModelReadOnly"},function(){var t=this.ne;return null!==t&&t.hb},function(t){var e=this.ne;null!==e&&(e.hb=t)}),r.defineProperty(Qo,{hb:"isReadOnly"},function(){return this.Oi},function(t){var e=this.Oi;e!==t&&(r.j(t,"boolean",Qo,"isReadOnly"),this.Oi=t,this.h("isReadOnly",e,t))}),r.defineProperty(Qo,{isEnabled:"isEnabled"},function(){return this.kf},function(t){var e=this.kf;e!==t&&(r.j(t,"boolean",Qo,"isEnabled"),this.kf=t,this.h("isEnabled",e,t))}),r.defineProperty(Qo,{cA:"allowClipboard"},function(){return this.hv},function(t){var e=this.hv;e!==t&&(r.j(t,"boolean",Qo,"allowClipboard"),this.hv=t,this.h("allowClipboard",e,t))}),r.defineProperty(Qo,{xk:"allowCopy"},function(){return this.Sk},function(t){var e=this.Sk;e!==t&&(r.j(t,"boolean",Qo,"allowCopy"),this.Sk=t,this.h("allowCopy",e,t))}),r.defineProperty(Qo,{hn:"allowDelete"},function(){return this.Tk},function(t){var e=this.Tk;e!==t&&(r.j(t,"boolean",Qo,"allowDelete"),this.Tk=t,this.h("allowDelete",e,t))}),r.defineProperty(Qo,{Jt:"allowDragOut"},function(){return this.iv},function(t){var e=this.iv;e!==t&&(r.j(t,"boolean",Qo,"allowDragOut"),this.iv=t,this.h("allowDragOut",e,t))}),r.defineProperty(Qo,{xE:"allowDrop"},function(){return this.jv},function(t){var e=this.jv;e!==t&&(r.j(t,"boolean",Qo,"allowDrop"),this.jv=t,this.h("allowDrop",e,t))}),r.defineProperty(Qo,{gx:"allowTextEdit"},function(){return this.bl},function(t){var e=this.bl;e!==t&&(r.j(t,"boolean",Qo,"allowTextEdit"),this.bl=t,this.h("allowTextEdit",e,t))}),r.defineProperty(Qo,{ax:"allowGroup"},function(){return this.Uk},function(t){var e=this.Uk;e!==t&&(r.j(t,"boolean",Qo,"allowGroup"),this.Uk=t,this.h("allowGroup",e,t))}),r.defineProperty(Qo,{hx:"allowUngroup"},function(){return this.cl},function(t){var e=this.cl;e!==t&&(r.j(t,"boolean",Qo,"allowUngroup"),this.cl=t,this.h("allowUngroup",e,t))}),r.defineProperty(Qo,{Dp:"allowInsert"},function(){return this.lv},function(t){var e=this.lv;e!==t&&(r.j(t,"boolean",Qo,"allowInsert"),this.lv=t,this.h("allowInsert",e,t))}),r.defineProperty(Qo,{Kt:"allowLink"},function(){return this.Vk},function(t){var e=this.Vk;e!==t&&(r.j(t,"boolean",Qo,"allowLink"),this.Vk=t,this.h("allowLink",e,t))}),r.defineProperty(Qo,{jn:"allowRelink"},function(){return this.Xk},function(t){var e=this.Xk;e!==t&&(r.j(t,"boolean",Qo,"allowRelink"),this.Xk=t,this.h("allowRelink",e,t))}),r.defineProperty(Qo,{Kl:"allowMove"},function(){return this.Wk},function(t){var e=this.Wk;e!==t&&(r.j(t,"boolean",Qo,"allowMove"),this.Wk=t,this.h("allowMove",e,t))}),r.defineProperty(Qo,{bx:"allowReshape"},function(){return this.Yk},function(t){var e=this.Yk;e!==t&&(r.j(t,"boolean",Qo,"allowReshape"),this.Yk=t,this.h("allowReshape",e,t))}),r.defineProperty(Qo,{Lt:"allowResize"},function(){return this.Zk},function(t){var e=this.Zk;e!==t&&(r.j(t,"boolean",Qo,"allowResize"),this.Zk=t,this.h("allowResize",e,t))}),r.defineProperty(Qo,{ex:"allowRotate"},function(){return this.$k},function(t){var e=this.$k;e!==t&&(r.j(t,"boolean",Qo,"allowRotate"),this.$k=t,this.h("allowRotate",e,t))}),r.defineProperty(Qo,{Af:"allowSelect"},function(){return this.al},function(t){var e=this.al;e!==t&&(r.j(t,"boolean",Qo,"allowSelect"),this.al=t,this.h("allowSelect",e,t))}),r.defineProperty(Qo,{yE:"allowUndo"},function(){return this.mv},function(t){var e=this.mv;e!==t&&(r.j(t,"boolean",Qo,"allowUndo"),this.mv=t,this.h("allowUndo",e,t))}),r.defineProperty(Qo,{ix:"allowZoom"},function(){return this.ov},function(t){var e=this.ov;e!==t&&(r.j(t,"boolean",Qo,"allowZoom"),this.ov=t,this.h("allowZoom",e,t))}),r.defineProperty(Qo,{IA:"hasVerticalScrollbar"},function(){return this.Rv},function(t){var e=this.Rv;e!==t&&(r.j(t,"boolean",Qo,"hasVerticalScrollbar"),this.Rv=t,Pr(this),this.oa(),this.h("hasVerticalScrollbar",e,t),sr(this,!1))}),r.defineProperty(Qo,{HA:"hasHorizontalScrollbar"},function(){return this.Qv},function(t){var e=this.Qv;e!==t&&(r.j(t,"boolean",Qo,"hasHorizontalScrollbar"),this.Qv=t,Pr(this),this.oa(),this.h("hasHorizontalScrollbar",e,t),sr(this,!1))}),r.defineProperty(Qo,{pe:"allowHorizontalScroll"},function(){return this.kv},function(t){var e=this.kv;e!==t&&(r.j(t,"boolean",Qo,"allowHorizontalScroll"),this.kv=t,this.h("allowHorizontalScroll",e,t),sr(this,!1))}),r.defineProperty(Qo,{qe:"allowVerticalScroll"},function(){return this.nv},function(t){var e=this.nv;e!==t&&(r.j(t,"boolean",Qo,"allowVerticalScroll"),this.nv=t,this.h("allowVerticalScroll",e,t),sr(this,!1))}),r.defineProperty(Qo,{Su:"scrollHorizontalLineChange"},function(){return this.Dw},function(t){var e=this.Dw;e!==t&&(r.j(t,"number",Qo,"scrollHorizontalLineChange"),0>t&&r.Fa(t,">= 0",Qo,"scrollHorizontalLineChange"),this.Dw=t,this.h("scrollHorizontalLineChange",e,t))}),r.defineProperty(Qo,{Tu:"scrollVerticalLineChange"},function(){return this.Hw},function(t){var e=this.Hw;e!==t&&(r.j(t,"number",Qo,"scrollVerticalLineChange"),0>t&&r.Fa(t,">= 0",Qo,"scrollVerticalLineChange"),this.Hw=t,this.h("scrollVerticalLineChange",e,t))}),r.defineProperty(Qo,{R:"lastInput"},function(){return this.Yb},function(t){this.Yb=t}),r.defineProperty(Qo,{Ec:"firstInput"},function(){return this.Li},function(t){this.Li=t}),r.defineProperty(Qo,{jc:"currentCursor"},function(){return this.yv},function(t){""===t&&(t=this.pr);var e=this.yv;if(e!==t){r.j(t,"string",Qo,"currentCursor");var i=this.Cb,n=this.Nb;null!==i&&(this.yv=t,i.style.cursor=t,n.style.cursor=t,i.style.cursor===e&&(i.style.cursor="-webkit-"+t,n.style.cursor="-webkit-"+t,i.style.cursor===e&&(i.style.cursor="-moz-"+t,n.style.cursor="-moz-"+t,i.style.cursor===e&&(i.style.cursor=t,n.style.cursor=t))))}}),r.defineProperty(Qo,{RK:"defaultCursor"},function(){return this.pr},function(t){""===t&&(t="auto");var e=this.pr;e!==t&&(r.j(t,"string",Qo,"defaultCursor"),this.pr=t,this.h("defaultCursor",e,t))}),r.defineProperty(Qo,{click:"click"},function(){return this.Ai},function(t){var e=this.Ai;e!==t&&(null!==t&&r.j(t,"function",Qo,"click"),this.Ai=t,this.h("click",e,t))}),r.defineProperty(Qo,{Rt:"doubleClick"},function(){return this.Ii},function(t){var e=this.Ii;e!==t&&(null!==t&&r.j(t,"function",Qo,"doubleClick"),this.Ii=t,this.h("doubleClick",e,t))}),r.defineProperty(Qo,{lA:"contextClick"},function(){return this.Ci},function(t){var e=this.Ci;e!==t&&(null!==t&&r.j(t,"function",Qo,"contextClick"),this.Ci=t,this.h("contextClick",e,t))}),r.defineProperty(Qo,{dB:"mouseOver"},function(){return this.Yi},function(t){var e=this.Yi;e!==t&&(null!==t&&r.j(t,"function",Qo,"mouseOver"),this.Yi=t,this.h("mouseOver",e,t))}),r.defineProperty(Qo,{cB:"mouseHover"},function(){return this.Xi},function(t){var e=this.Xi;e!==t&&(null!==t&&r.j(t,"function",Qo,"mouseHover"),this.Xi=t,this.h("mouseHover",e,t))}),r.defineProperty(Qo,{bB:"mouseHold"},function(){return this.Wi},function(t){var e=this.Wi;e!==t&&(null!==t&&r.j(t,"function",Qo,"mouseHold"),this.Wi=t,this.h("mouseHold",e,t))}),r.defineProperty(Qo,{dJ:"mouseDragOver"},function(){return this.pw},function(t){var e=this.pw;e!==t&&(null!==t&&r.j(t,"function",Qo,"mouseDragOver"),this.pw=t,this.h("mouseDragOver",e,t))}),r.defineProperty(Qo,{aB:"mouseDrop"},function(){return this.Vi},function(t){var e=this.Vi;e!==t&&(null!==t&&r.j(t,"function",Qo,"mouseDrop"),this.Vi=t,this.h("mouseDrop",e,t))}),r.defineProperty(Qo,{KB:"toolTip"},function(){return this.gj},function(t){var e=this.gj;e!==t&&(this.gj=t,this.h("toolTip",e,t))}),r.defineProperty(Qo,{contextMenu:"contextMenu"},function(){return this.Di},function(t){var e=this.Di;e!==t&&(this.Di=t,this.h("contextMenu",e,t))}),r.defineProperty(Qo,{pb:"commandHandler"},function(){return this.Uy},function(t){var e=this.Uy;e!==t&&(r.G(t,Ei,Qo,"commandHandler"),null!==t.g&&r.k("Cannot share CommandHandlers between Diagrams: "+t.toString()),null!==e&&e.Sc(null),this.Uy=t,t.Sc(this))}),r.defineProperty(Qo,{fb:"toolManager"},function(){return this.Vz},function(t){var e=this.Vz;e!==t&&(r.G(t,mo,Qo,"toolManager"),null!==t.g&&r.k("Cannot share ToolManagers between Diagrams: "+t.toString()),null!==e&&e.Sc(null),this.Vz=t,t.Sc(this))}),r.defineProperty(Qo,{Pt:"defaultTool"},function(){return this.$y},function(t){var e=this.$y;e!==t&&(r.G(t,Hi,Qo,"defaultTool"),this.$y=t,this.$a===e&&(this.$a=t))}),r.defineProperty(Qo,{$a:"currentTool"},function(){return this.Xy},function(t){var e=this.Xy;null!==e&&(e.sa&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),null===t&&(t=this.Pt),null!==t&&(r.G(t,Hi,Qo,"currentTool"),this.Xy=t,t.Sc(this),t.doStart())}),r.u(Qo,{selection:"selection"},function(){return this.Kw}),r.defineProperty(Qo,{VI:"maxSelectionCount"},function(){return this.lw},function(t){if((e=this.lw)!==t)if(r.j(t,"number",Qo,"maxSelectionCount"),0<=t&&!isNaN(t)){if(this.lw=t,this.h("maxSelectionCount",e,t),!this.ja.lb&&0<(t=this.selection.count-t)){this.Aa("ChangingSelection");for(var e=this.selection.xc(),i=0;i<t;i++)e[i].ib=!1;this.Aa("ChangedSelection")}}else r.Fa(t,">= 0",Qo,"maxSelectionCount")}),r.defineProperty(Qo,{hJ:"nodeSelectionAdornmentTemplate"},function(){return this.qw},function(t){var e=this.qw;e!==t&&(r.G(t,Ac,Qo,"nodeSelectionAdornmentTemplate"),this.qw=t,this.h("nodeSelectionAdornmentTemplate",e,t))}),r.defineProperty(Qo,{kI:"groupSelectionAdornmentTemplate"},function(){return this.Ov},function(t){var e=this.Ov;e!==t&&(r.G(t,Ac,Qo,"groupSelectionAdornmentTemplate"),this.Ov=t,this.h("groupSelectionAdornmentTemplate",e,t))}),r.defineProperty(Qo,{OI:"linkSelectionAdornmentTemplate"},function(){return this.gw},function(t){var e=this.gw;e!==t&&(r.G(t,Ac,Qo,"linkSelectionAdornmentTemplate"),this.gw=t,this.h("linkSelectionAdornmentTemplate",e,t))}),r.u(Qo,{Yl:"highlighteds"},function(){return this.Sv}),r.defineProperty(Qo,{pi:"isModified"},function(){var t=this.ja;return t.isEnabled?null!==t.pj||this.Yv&&this.bh!==t.uj:this.Yv},function(t){if(this.Yv!==t){r.j(t,"boolean",Qo,"isModified"),this.Yv=t;var e=this.ja;!t&&e.isEnabled&&(this.bh=e.uj),t||Ir(this)}}),r.defineProperty(Qo,{$:"model"},function(){return this.ne},function(t){var e=this.ne;if(e!==t){r.G(t,ri,Qo,"model"),this.$a.doCancel(),null!==e&&e.ja!==t.ja&&e.ja.CF&&r.k("Do not replace a Diagram.model while a transaction is in progress."),this.Ka.Gh(),this.kx(),this.dh=!1,this.Eo=!0,this.bh=-2,this.Tf=!1;var i=this.$d;this.$d=!0,this.Ka.Tn("Model"),null!==e&&(null!==this.hh&&this.hh.each(function(t){e.Nu(t)}),e.Nu(this.vD),e instanceof Ci&&ea(this,e.Pg),ea(this,e.hg)),this.ne=t,t.gn(this.uD),Hr(this,t.hg),t instanceof Ci&&Xr(this,t.Pg),t.Nu(this.uD),t.gn(this.vD),null!==this.hh&&this.hh.each(function(e){t.gn(e)}),this.$d=i,this.Vc||this.oa(),null!==e&&(t.ja.isEnabled=e.ja.isEnabled)}}),r.defineProperty(Qo,{Ua:null},function(){return this.nD},function(t){this.nD=t}),r.u(Qo,{Tx:null},function(){return this.UG}),r.defineProperty(Qo,{Pe:"skipsModelSourceBindings"},function(){return this.QD},function(t){this.QD=t}),r.defineProperty(Qo,{Zu:null},function(){return this.Qz},function(t){this.Qz=t}),Qo.prototype.rebuildParts=Qo.prototype.em=function(){for(var t=this.gB.i;t.next();){var e=t.value,i=t.key;(!e.fe()||e instanceof xf)&&r.k('Invalid node template in Diagram.nodeTemplateMap: template for "'+i+'" must be a Node or a simple Part, not a Group or Link: '+e)}for(t=this.GA.i;t.next();)e=t.value,i=t.key,e instanceof xf||r.k('Invalid group template in Diagram.groupTemplateMap: template for "'+i+'" must be a Group, not a normal Node or Link: '+e);for(t=this.VA.i;t.next();)e=t.value,i=t.key,e instanceof Rc||r.k('Invalid link template in Diagram.linkTemplateMap: template for "'+i+'" must be a Link, not a normal Node or simple Part: '+e);for(t=r.eb(),e=this.selection.i;e.next();)(i=e.value.data)&&t.push(i);e=r.eb();for(var n=this.Yl.i;n.next();)(i=n.value.data)&&e.push(i);for(i=r.eb(),n=this.ig.i;n.next();){var o=n.value;null!==o.data&&(i.push(o.data),i.push(o.location))}for(n=this.links.i;n.next();)null!==(o=n.value).data&&(i.push(o.data),i.push(o.location));for(n=this.Pk.i;n.next();)null!==(o=n.value).data&&(i.push(o.data),i.push(o.location));for((n=this.$)instanceof Ci&&ea(this,n.Pg),ea(this,n.hg),Hr(this,n.hg),n instanceof Ci&&Xr(this,n.Pg),n=0;n<t.length;n++)null!==(o=this.vh(t[n]))&&(o.ib=!0);for(n=0;n<e.length;n++)null!==(o=this.vh(e[n]))&&(o.Og=!0);for(n=0;n<i.length;n+=2)null!==(o=this.vh(i[n]))&&(o.location=i[n+1]);r.ta(t),r.ta(e),r.ta(i)},Qo.prototype.CA=function(t){return this.$.CA(t)};var Wr=!1,Ur=!1;function Jr(t,e,i){var n=!1,o=t.$;return o instanceof Ci&&(n=o.QA(e)),n?null===(e=t.GA.ka(i))&&(null===(e=t.GA.ka(""))&&(Ur||(Ur=!0,r.trace('No Group template found for category "'+i+'"'),r.trace("  Using default group template")),e=t.GC)):null===(e=t.gB.ka(i))&&(null===(e=t.gB.ka(""))&&(Wr||(Wr=!0,r.trace('No Node template found for category "'+i+'"'),r.trace("  Using default node template")),e=t.IC)),e}function $r(t,e){var i=t.$;if(i instanceof Ci||i instanceof Li){var n=i.qb(e);if(void 0!==n){var o=ki(i,n),a=t.vh(e);if(null!==o&&null!==a){for(o=o.i;o.next();){var s=o.value;if(i instanceof Ci){var l=i;if(l.Ie(s)){if(a instanceof xf&&l.yn(s)===n){var h=a;null!==(s=t.vh(s))&&(s.Da=h)}}else{var u=t.Xf(s);if(null!==u&&a instanceof Fc&&(h=a,l.Wl(s)===n&&(u.W=h),l.Xl(s)===n&&(u.Z=h),s=l.Ik(s),r.isArray(s)))for(l=0;l<r.Za(s);l++)if(r.Ba(s,l)===n){h.Wb=u;break}}}else i instanceof Li&&((u=i).Ie(s)&&a instanceof Fc&&(h=a,u.An(s)===n&&Yr(t,h,s=t.Ax(s))))}wi(i,n)}i instanceof Ci?void 0!==(i=i.yn(e))&&((i=t.Ke(i))instanceof xf&&(a.Da=i)):i instanceof Li&&(void 0!==(i=i.An(e))&&a instanceof Fc&&(h=a,Yr(t,a=t.Ke(i),h)))}}}function Yr(t,e,i){if(null!==e&&null!==i){var n=t.fb.MF,o=e,r=i;if(t.Ud){for(e=r.he;e.next();)if(e.value.Z===r)return}else for(r=e,e=(o=i).he;e.next();)if(e.value.W===o)return;if((null===n||!Un(n,o,r,null,!0))&&(null!==(e=ta(t,n=t.fu(i.data)))&&(cl(e),null!==(e=e.copy())))){var a=t.Pe;t.Pe=!0,e.yi=n,e.Zd=i.data,e.W=o,e.Z=r,t.add(e),e.Zd=null,e.data=i.data,t.Pe=a}}}function Xr(t,e){if(null!==e){for(var i=r.Za(e),n=0;n<i;n++){Qr(t,r.Ba(e,n))}aa(t,!1)}}function Qr(t,e){if(void 0!==e&&null!==e&&!t.ja.lb&&!t.Oj.contains(e)){var i=ta(t,n=t.fu(e));if(null!==i&&(cl(i),null!==(i=i.copy()))){var n,o=t.Pe;if(t.Pe=!0,i.yi=n,i.Zd=e,""!==(a=(n=t.$).cI(e))&&(i.Ng=a),void 0!==(a=n.Wl(e))&&((a=t.Ke(a))instanceof Fc&&(i.W=a)),""!==(a=n.gI(e))&&(i.Hh=a),void 0!==(a=n.Xl(e))&&((a=t.Ke(a))instanceof Fc&&(i.Z=a)),n=n.Ik(e),r.isArray(n))for(var a=r.Za(n),s=0;s<a;s++){var l=r.Ba(n,s);null!==(l=t.Ke(l))&&(l.Wb=i)}t.add(i),i.Zd=null,i.data=e,t.Pe=o}}}Qo.prototype.fu=function(t){var e=this.$,i="";return e instanceof Ci?i=e.fu(t):e instanceof Li&&(i=e.eI(t)),i};var Zr=!1;function ta(t,e){var i=t.VA.ka(e);return null===i&&(null===(i=t.VA.ka(""))&&(Zr||(Zr=!0,r.trace('No Link template found for category "'+e+'"'),r.trace("  Using default link template")),i=t.HC)),i}function ea(t,e){for(var i=r.Za(e),n=0;n<i;n++){ia(t,r.Ba(e,n))}}function ia(t,e){if(void 0!==e&&null!==e){var i=t.vh(e);if(null!==i){Dr(t,i,!1);var n=t.$;if(n instanceof Ci&&i instanceof Fc){var o=n.qb(i.data);if(void 0!==o){for(var r=i.he;r.next();)xi(n,o,r.value.data);if(i.Cf&&(null!==(r=i.Wb)&&xi(n,o,r.data)),i instanceof xf)for(i=i.vc;i.next();)r=i.value.data,n.Ie(r)&&xi(n,o,r)}}else if(n instanceof Li&&i instanceof Fc){if(null!==(r=t.Xf(i.data))){r.ib=!1,r.Og=!1;var a=r.layer;if(null!==a){var s=a.rf(-1,r,!1);0<=s&&t.cd(Xt,"parts",a,r,null,s,null),null!==(s=r.Px)&&s(r,a,null)}}for(r=t.Ud,i=i.he;i.next();)a=i.value,a=(r?a.Z:a.W).data,n.Ie(a)&&xi(n,o,a)}}}}function na(t,e,i){for(var n in i){var o=e[n],a=i[n];if(r.isArray(a)){if(!r.isArray(o)||o.length<a.length)return!1;for(var s=0;s<o.length;s++){var l=o[s],h=a[s];if(void 0!==h&&!oa(t,l,h))return!1}}else if(!oa(t,o,a))return!1}return!0}function oa(t,e,i){if("function"==typeof i){if(!i(e))return!1}else if(i instanceof RegExp){if(!e||!i.test(e.toString()))return!1}else if(r.Pa(e)&&r.Pa(i)){if(!na(t,e,i))return!1}else if(e!==i)return!1;return!0}function ra(t,e){t.Zj=!1;var i=t.Fv;i.L(e)||(e=e.S(),t.Fv=e,sr(t,!1),t.Aa("DocumentBoundsChanged",null,i.copy()),Pr(t))}function aa(t,e){for(var i=t.El.i;i.next();)sa(t,i.value,e);null!==t.Sb&&(e?t.Sb.sf=!1:t.Sb.J())}function sa(t,e,i){if(null!==e){for(var n=e.Zo.i;n.next();)sa(t,n.value,i);null!==e.Sb&&(i?e.Sb.sf=!1:e.Sb.J())}}function la(t,e){if(t.dl&&!t.az){var i=t.Ua;t.Ua=!0;try{var n=t.ja.ti;0===n&&t.Hb("Layout");var o=t.Ka;1>=n&&!o.df&&!o.rc&&(e||o.Tn("Layout")),t.dl=!1;for(var r=t.El.i;r.next();)ha(t,r.value,e,n);var a=t.Sb;a.sf||(!e||a.GF||0===n?(a.doLayout(t),wr(t),a.sf=!0):t.dl=!0)}finally{0===n&&t.Yc("Layout"),t.dl=!a.sf,t.Ua=i}}}function ha(t,e,i,n){if(null!==e){for(var o=e.Zo.i;o.next();)ha(t,o.value,i,n);null===(o=e.Sb)||o.sf||(!i||o.GF||0===n?(e.Rn=!e.location.I(),o.doLayout(e),e.J(Sh),kr(t,e),o.sf=!0):t.dl=!0)}}function ua(t){function e(t){var e=t.toLowerCase(),o=new et("function");i.add(t,o),i.add(e,o),n.add(t,t),n.add(e,t)}var i=new ht("string",et),n=new ht("string","string");e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),t.cz=i,t.bz=n}function ca(t,e){var i=t.bz.ka(e);return null!==i?i:t.bz.ka(e.toLowerCase())}function fa(t,e){var i=t.cz.ka(e);return null!==i?i:null!==(i=t.cz.ka(e.toLowerCase()))?i:(r.k("Unknown DiagramEvent name: "+e),null)}function da(t,e,i,n){if(null===t.Kd&&(t.Kd=new af),t.Kd.lu||t.Kd.group!==i||t.Kd.FB!==n){if(null===i){(e=t.computeOccupiedArea()).Yf(100,100),t.Kd.initialize(e),e=r.Kf();for(var o=t.ig;o.next();){var a=o.value,s=a.layer;null!==s&&s.visible&&!s.Pc&&pa(t,a,n,e)}}else for(0<i.vc.count&&((e=t.computePartsBounds(i.vc,!1)).Yf(20,20),t.Kd.initialize(e)),e=r.Kf(),o=i.vc;o.next();)(a=o.value)instanceof Fc&&pa(t,a,n,e);r.Eb(e),t.Kd.group=i,t.Kd.FB=n,t.Kd.lu=!1}else e&&uf(t.Kd);return t.Kd}function pa(t,e,i,n){if(e!==i)if(e.isVisible()&&e.fA&&!e.Cf){i=e.getAvoidableRect(n),n=t.Kd.Hp,e=t.Kd.Fp;for(var o=i.x+i.width,r=i.y+i.height,a=i.x;a<o;a+=n){for(var s=i.y;s<r;s+=e)hf(t.Kd,a,s);hf(t.Kd,a,r)}for(s=i.y;s<r;s+=e)hf(t.Kd,o,s);hf(t.Kd,o,r)}else if(e instanceof xf)for(e=e.vc;e.next();)(o=e.value)instanceof Fc&&pa(t,o,i,n)}function ya(t){-1!==t.lo&&(r.clearTimeout(t.lo),t.lo=-1)}function va(t,e){var i=t.position,n=t.EE;if(0>=n.top&&0>=n.left&&0>=n.right&&0>=n.bottom)return i;var o=t.rb,a=t.scale,s=(o=r.lg(0,0,o.width*a,o.height*a),r.xb(0,0));if(e.x>=o.x&&e.x<o.x+n.left){var l=0|(l=Math.max(t.Su,1));s.x-=l,e.x<o.x+n.left/2&&(s.x-=l),e.x<o.x+n.left/4&&(s.x-=4*l)}else e.x<=o.x+o.width&&e.x>o.x+o.width-n.right&&(l=Math.max(t.Su,1),l|=0,s.x+=l,e.x>o.x+o.width-n.right/2&&(s.x+=l),e.x>o.x+o.width-n.right/4&&(s.x+=4*l));return e.y>=o.y&&e.y<o.y+n.top?(l=Math.max(t.Tu,1),l|=0,s.y-=l,e.y<o.y+n.top/2&&(s.y-=l),e.y<o.y+n.top/4&&(s.y-=4*l)):e.y<=o.y+o.height&&e.y>o.y+o.height-n.bottom&&(l=Math.max(t.Tu,1),l|=0,s.y+=l,e.y>o.y+o.height-n.bottom/2&&(s.y+=l),e.y>o.y+o.height-n.bottom/4&&(s.y+=4*l)),s.Oc(Zt)||(i=new ut(i.x+s.x/a,i.y+s.y/a)),r.Eb(o),r.v(s),i}Qo.prototype.findPartForKey=Qo.prototype.XH=function(t){if(null===t||void 0===t)return null;var e=this.$.we(t);return null!==e?this.Ei.ka(e):this.$ instanceof Ci&&null!==(e=this.$.Tp(t))?this.Oj.ka(e):null},Qo.prototype.findNodeForKey=Qo.prototype.Ke=function(t){return null===t||void 0===t?null:null===(t=this.$.we(t))?null:(t=this.Ei.ka(t))instanceof Fc?t:null},Qo.prototype.findPartForData=Qo.prototype.vh=function(t){if(null===t)return null;var e=this.Ei.ka(t);return null!==e?e:e=this.Oj.ka(t)},Qo.prototype.findNodeForData=Qo.prototype.Ax=function(t){return null===t?null:(t=this.Ei.ka(t))instanceof Fc?t:null},Qo.prototype.findLinkForData=Qo.prototype.Xf=function(t){return null===t?null:this.Oj.ka(t)},Qo.prototype.findNodesByExample=function(t){for(var e=new nt(Fc),i=this.bp.i;i.next();){var n=i.value,o=n.data;if(null!==o)for(var a=0;a<arguments.length;a++){var s=arguments[a];if(r.Pa(s)&&na(this,o,s)){e.add(n);break}}}return e.i},Qo.prototype.findLinksByExample=function(t){for(var e=new nt(Rc),i=this.Vo.i;i.next();){var n=i.value,o=n.data;if(null!==o)for(var a=0;a<arguments.length;a++){var s=arguments[a];if(r.Pa(s)&&na(this,o,s)){e.add(n);break}}}return e.i},r.defineProperty(Qo,{AL:"nodeTemplate"},function(){return this.Zi.ka("")},function(t){var e=this.Zi.ka("");e!==t&&(r.G(t,Ch,Qo,"nodeTemplate"),this.Zi.add("",t),this.h("nodeTemplate",e,t),this.ja.lb||this.em())}),r.defineProperty(Qo,{gB:"nodeTemplateMap"},function(){return this.Zi},function(t){var e=this.Zi;e!==t&&(r.G(t,ht,Qo,"nodeTemplateMap"),this.Zi=t,this.h("nodeTemplateMap",e,t),this.ja.lb||this.em())}),r.defineProperty(Qo,{eL:"groupTemplate"},function(){return this.jl.ka("")},function(t){var e=this.jl.ka("");e!==t&&(r.G(t,xf,Qo,"groupTemplate"),this.jl.add("",t),this.h("groupTemplate",e,t),this.ja.lb||this.em())}),r.defineProperty(Qo,{GA:"groupTemplateMap"},function(){return this.jl},function(t){var e=this.jl;e!==t&&(r.G(t,ht,Qo,"groupTemplateMap"),this.jl=t,this.h("groupTemplateMap",e,t),this.ja.lb||this.em())}),r.defineProperty(Qo,{pL:"linkTemplate"},function(){return this.fk.ka("")},function(t){var e=this.fk.ka("");e!==t&&(r.G(t,Rc,Qo,"linkTemplate"),this.fk.add("",t),this.h("linkTemplate",e,t),this.ja.lb||this.em())}),r.defineProperty(Qo,{VA:"linkTemplateMap"},function(){return this.fk},function(t){var e=this.fk;e!==t&&(r.G(t,ht,Qo,"linkTemplateMap"),this.fk=t,this.h("linkTemplateMap",e,t),this.ja.lb||this.em())}),r.defineProperty(Qo,{BI:null},function(){return this.eh},function(t){this.eh=t}),r.defineProperty(Qo,{ef:"isMouseCaptured"},function(){return this.kD},function(t){var i=this.Cb;null!==i&&(t?(this.R.bubbles=!1,this.Py?(i.removeEventListener("pointermove",this.nq,!1),i.removeEventListener("pointerdown",this.mq,!1),i.removeEventListener("pointerup",this.pq,!1),i.removeEventListener("pointerout",this.oq,!1),e.addEventListener("pointermove",this.nq,!0),e.addEventListener("pointerdown",this.mq,!0),e.addEventListener("pointerup",this.pq,!0),e.addEventListener("pointerout",this.oq,!0)):(i.removeEventListener("mousemove",this.Nn,!1),i.removeEventListener("mousedown",this.Mn,!1),i.removeEventListener("mouseup",this.Pn,!1),i.removeEventListener("mouseout",this.On,!1),e.addEventListener("mousemove",this.Nn,!0),e.addEventListener("mousedown",this.Mn,!0),e.addEventListener("mouseup",this.Pn,!0),e.addEventListener("mouseout",this.On,!0)),i.removeEventListener("wheel",this.Qn,!1),e.addEventListener("wheel",this.Qn,!0),e.addEventListener("selectstart",this.preventDefault,!1)):(this.Py?(e.removeEventListener("pointermove",this.nq,!0),e.removeEventListener("pointerdown",this.mq,!0),e.removeEventListener("pointerup",this.pq,!0),e.removeEventListener("pointerout",this.oq,!0),i.addEventListener("pointermove",this.nq,!1),i.addEventListener("pointerdown",this.mq,!1),i.addEventListener("pointerup",this.pq,!1),i.addEventListener("pointerout",this.oq,!1)):(e.removeEventListener("mousemove",this.Nn,!0),e.removeEventListener("mousedown",this.Mn,!0),e.removeEventListener("mouseup",this.Pn,!0),e.removeEventListener("mouseout",this.On,!0),i.addEventListener("mousemove",this.Nn,!1),i.addEventListener("mousedown",this.Mn,!1),i.addEventListener("mouseup",this.Pn,!1),i.addEventListener("mouseout",this.On,!1)),e.removeEventListener("wheel",this.Qn,!0),e.removeEventListener("selectstart",this.preventDefault,!1),i.addEventListener("wheel",this.Qn,!1)),this.kD=t)}),r.defineProperty(Qo,{position:"position"},function(){return this.jb},function(t){var e=this.jb;if(!e.L(t)){r.G(t,ut,Qo,"position");var i=this.rb.copy();if(t=t.copy(),!this.Vc&&null!==this.Cb){this.Vc=!0;var n=this.scale;hr(this,t,this.te,this.Jb/n,this.Mb/n,this.qo,!1),this.Vc=!1}this.jb=t.S(),(t=this.Ka).rc&&Do(t,e,this.jb),this.Vc||this.Ju(i,this.rb,this.vb,this.vb,!1)}}),r.defineProperty(Qo,{sI:"initialPosition"},function(){return this.Uv},function(t){this.Uv.L(t)||(r.G(t,ut,Qo,"initialPosition"),this.Uv=t.S())}),r.defineProperty(Qo,{tI:"initialScale"},function(){return this.Vv},function(t){this.Vv!==t&&(r.j(t,"number",Qo,"initialScale"),this.Vv=t)}),r.defineProperty(Qo,{Bn:"grid"},function(){return null===this.td&&nr(this),this.td},function(t){var e=this.td;if(e!==t){null===e&&(nr(this),e=this.td),r.G(t,Ys,Qo,"grid"),t.type!==Ws&&r.k("Diagram.grid must be a Panel of type Panel.Grid");var i=e.Q;null!==i&&i.remove(e),this.td=t,t.name="GRID",null!==i&&i.add(t),zr(this),this.oa(),this.h("grid",e,t)}}),r.u(Qo,{rb:"viewportBounds"},function(){var t=this.mE;if(null===this.Cb)return t;var e=this.jb,i=this.vb;return t.m(e.x,e.y,Math.max(this.Jb,0)/i,Math.max(this.Mb,0)/i),t}),r.defineProperty(Qo,{eF:"fixedBounds"},function(){return this.Mv},function(t){var e=this.Mv;e.L(t)||(r.G(t,pt,Qo,"fixedBounds"),-1/0!==t.width&&1/0!==t.height&&-1/0!==t.height||r.k("fixedBounds width/height must not be Infinity"),this.Mv=t=t.S(),this.Fc(),this.h("fixedBounds",e,t))}),r.defineProperty(Qo,{oy:"scrollMargin"},function(){return this.Ew},function(t){"number"==typeof t?t=new wt(t):r.G(t,wt,Qo,"scrollMargin");var e=this.Ew;e.L(t)||(this.Ew=t=t.S(),this.h("scrollMargin",e,t),this.Mu())}),r.defineProperty(Qo,{sB:"scrollMode"},function(){return this.Fw},function(t){var e=this.Fw;e!==t&&(r.ob(t,Qo,Qo,"scrollMode"),this.Fw=t,t===_o&&sr(this,!1),this.h("scrollMode",e,t))}),r.defineProperty(Qo,{DJ:"scrollsPageOnFocus"},function(){return this.Iw},function(t){var e=this.Iw;e!==t&&(r.j(t,"boolean",Qo,"scrollsPageOnFocus"),this.Iw=t,this.h("scrollsPageOnFocus",e,t))}),r.defineProperty(Qo,{YF:"positionComputation"},function(){return this.zw},function(t){var e=this.zw;e!==t&&(null!==t&&r.j(t,"function",Qo,"positionComputation"),this.zw=t,sr(this,!1),this.h("positionComputation",e,t))}),r.defineProperty(Qo,{jG:"scaleComputation"},function(){return this.Bw},function(t){var e=this.Bw;e!==t&&(null!==t&&r.j(t,"function",Qo,"scaleComputation"),this.Bw=t,jr(this,this.scale,this.scale),this.h("scaleComputation",e,t))}),r.u(Qo,{te:"documentBounds"},function(){return this.Fv}),r.defineProperty(Qo,{SA:"isVirtualized"},function(){return this.bw},function(t){var e=this.bw;e!==t&&(r.j(t,"boolean",Qo,"isVirtualized"),this.bw=t,this.h("isVirtualized",e,t))}),r.defineProperty(Qo,{scale:"scale"},function(){return this.vb},function(t){var e=this.vb;r.zd(t,Qo,"scale"),e!==t&&jr(this,e,t)}),r.defineProperty(Qo,{Ml:"autoScale"},function(){return this.vm},function(t){var e=this.vm;e!==t&&(r.ob(t,Qo,Qo,"autoScale"),this.vm=t,this.h("autoScale",e,t),t!==zo&&sr(this,!1))}),r.defineProperty(Qo,{hL:"initialAutoScale"},function(){return this.nl},function(t){var e=this.nl;e!==t&&(r.ob(t,Qo,Qo,"initialAutoScale"),this.nl=t,this.h("initialAutoScale",e,t))}),r.defineProperty(Qo,{uI:"initialViewportSpot"},function(){return this.Wv},function(t){var e=this.Wv;e!==t&&(r.G(t,Mt,Qo,"initialViewportSpot"),t.$c()||r.k("initialViewportSpot must be a specific Spot: "+t),this.Wv=t,this.h("initialViewportSpot",e,t))}),r.defineProperty(Qo,{rI:"initialDocumentSpot"},function(){return this.Tv},function(t){var e=this.Tv;e!==t&&(r.G(t,Mt,Qo,"initialDocumentSpot"),t.$c()||r.k("initialViewportSpot must be a specific Spot: "+t),this.Tv=t,this.h("initialDocumentSpot",e,t))}),r.defineProperty(Qo,{Ah:"minScale"},function(){return this.mw},function(t){r.zd(t,Qo,"minScale");var e=this.mw;e!==t&&(0<t?(this.mw=t,this.h("minScale",e,t),t>this.scale&&(this.scale=t)):r.Fa(t,"> 0",Qo,"minScale"))}),r.defineProperty(Qo,{zh:"maxScale"},function(){return this.kw},function(t){r.zd(t,Qo,"maxScale");var e=this.kw;e!==t&&(0<t?(this.kw=t,this.h("maxScale",e,t),t<this.scale&&(this.scale=t)):r.Fa(t,"> 0",Qo,"maxScale"))}),r.defineProperty(Qo,{pm:"zoomPoint"},function(){return this.Xw},function(t){this.Xw.L(t)||(r.G(t,ut,Qo,"zoomPoint"),this.Xw=t=t.S())}),r.defineProperty(Qo,{kA:"contentAlignment"},function(){return this.qo},function(t){var e=this.qo;e.L(t)||(r.G(t,Mt,Qo,"contentAlignment"),this.qo=t=t.S(),this.h("contentAlignment",e,t),sr(this,!1))}),r.defineProperty(Qo,{iL:"initialContentAlignment"},function(){return this.Jo},function(t){var e=this.Jo;e.L(t)||(r.G(t,Mt,Qo,"initialContentAlignment"),this.Jo=t=t.S(),this.h("initialContentAlignment",e,t))}),r.defineProperty(Qo,{padding:"padding"},function(){return this.mf},function(t){"number"==typeof t?t=new wt(t):r.G(t,wt,Qo,"padding");var e=this.mf;e.L(t)||(this.mf=t=t.S(),this.Fc(),this.h("padding",e,t))}),r.u(Qo,{ig:"nodes"},function(){return this.bp.i}),r.u(Qo,{links:"links"},function(){return this.Vo.i}),r.u(Qo,{Pk:"parts"},function(){return this.zb.i}),Qo.prototype.findTopLevelNodesAndLinks=function(){for(var t=new nt(Ch),e=this.bp.i;e.next();){var i=e.value;i.dq&&t.add(i)}for(e=this.Vo.i;e.next();)(i=e.value).dq&&t.add(i);return t.i},Qo.prototype.findTopLevelGroups=function(){return this.El.i},r.defineProperty(Qo,{Sb:"layout"},function(){return this.le},function(t){var e=this.le;e!==t&&(r.G(t,Sf,Qo,"layout"),null!==e&&(e.g=null,e.group=null),this.le=t,t.g=this,t.group=null,this.dl=!0,this.h("layout",e,t),this.Ne())}),Qo.prototype.layoutDiagram=function(t){wr(this),t&&aa(this,!0),la(this,!1)},r.defineProperty(Qo,{Ud:"isTreePathToChildren"},function(){return this.aw},function(t){var e=this.aw;if(e!==t&&(r.j(t,"boolean",Qo,"isTreePathToChildren"),this.aw=t,this.h("isTreePathToChildren",e,t),!this.ja.lb))for(t=this.ig;t.next();)Oc(t.value)}),Qo.prototype.findTreeRoots=function(){for(var t=new et(Fc),e=this.ig;e.next();){var i=e.value;i.dq&&null===i.wn()&&t.add(i)}return t.i},r.defineProperty(Qo,{PB:"treeCollapsePolicy"},function(){return this.Sw},function(t){var e=this.Sw;e!==t&&(t!==Ko&&t!==Wo&&t!==Uo&&r.k("Unknown Diagram.treeCollapsePolicy: "+t),this.Sw=t,this.h("treeCollapsePolicy",e,t))}),r.defineProperty(Qo,{xh:null},function(){return this.cD},function(t){this.cD=t}),Qo.prototype.addDiagramListener=Qo.prototype.Yw=function(t,e){r.j(t,"string",Qo,"addDiagramListener:name"),r.j(e,"function",Qo,"addDiagramListener:listener");var i=fa(this,t);null!==i&&i.add(e)},Qo.prototype.removeDiagramListener=Qo.prototype.nB=function(t,e){r.j(t,"string",Qo,"removeDiagramListener:name"),r.j(e,"function",Qo,"addDiagramListener:listener");var i=fa(this,t);null!==i&&i.remove(e)},Qo.prototype.raiseDiagramEvent=Qo.prototype.Aa=function(t,e,i){var n=fa(this,t),o=new ni;if(o.g=this,null!==(t=ca(this,t))&&(o.name=t),void 0!==e&&(o.GB=e),void 0!==i&&(o.iB=i),1===(e=n.length))(n=n.ea(0))(o);else if(0!==e)for(i=n.xc(),t=0;t<e;t++)(n=i[t])(o);return o.cancel},Qo.prototype.isUnoccupied=Qo.prototype.fq=function(t,e){return void 0===e&&(e=null),da(this,!1,null,e).fq(t.x,t.y,t.width,t.height)},Qo.prototype.computeOccupiedArea=function(){return this.SA?this.rb.copy():this.Zj?ar(this):this.te.copy()},Qo.invalidatePositionArray=Qo.prototype.MA=function(t){null!==this.Kd&&!this.Kd.lu&&(void 0===t&&(t=null),null===t||t.fA&&!t.Cf)&&(this.Kd.lu=!0)},Qo.prototype.simulatedMouseMove=function(t,e,i){if(null!==Gn){var n=Gn.g;i instanceof Qo||(i=null);var o=Vn;return i!==o&&(null!==o&&o!==n&&null!==o.fb.ue&&(ya(o),Gn.Hx=!1,o.fb.ue.doSimulatedDragLeave()),Vn=i,null!==i&&i!==n&&null!==i.fb.ue&&(Xi(),o=i.fb.ue,Rn.contains(o)||Rn.add(o),i.fb.ue.doSimulatedDragEnter())),null!==i&&i!==n&&i.xE&&!i.hb&&i.Dp?(null!==(n=i.fb.ue)&&(null!==t?e=i.Hr(t):null===e&&(e=new ut),i.Yb.da=e,i.Yb.Dk=!1,i.Yb.up=!1,n.doSimulatedDragOver()),!0):!1}return!1},Qo.prototype.simulatedMouseUp=function(t,e,i,n){if(null!==Gn){null===n&&(n=e),e=Vn;var o=Gn.g;if(n!==e){if(null!==e&&e!==o&&null!==e.fb.ue)return ya(e),Gn.Hx=!1,e.fb.ue.doSimulatedDragLeave(),!1;Vn=n,null!==n&&null!==n.fb.ue&&(Xi(),e=n.fb.ue,Rn.contains(e)||Rn.add(e),n.fb.ue.doSimulatedDragEnter())}if(null===n)return Gn.doCancel(),!0;if(n!==this)return null!==t&&(i=n.Hr(t)),n.Yb.da=i,n.Yb.Dk=!1,n.Yb.up=!0,null!==(t=n.fb.ue)&&t.doSimulatedDrop(),null!==(t=Gn)&&(n=t.mayCopy(),t.Lf=n?"Copy":"Move",t.stopTool()),!0}return!1},r.defineProperty(Qo,{FK:"autoScrollInterval"},function(){return this.Tq},function(t){var e=this.Tq;r.zd(t,Qo,"scale"),e!==t&&(this.Tq=t,this.h("autoScrollInterval",e,t))}),r.defineProperty(Qo,{EE:"autoScrollRegion"},function(){return this.rv},function(t){"number"==typeof t?t=new wt(t):r.G(t,wt,Qo,"autoScrollRegion");var e=this.rv;e.L(t)||(this.rv=t=t.S(),this.Fc(),this.h("autoScrollRegion",e,t))}),Qo.prototype.doAutoScroll=Qo.prototype.tA=function(t){this.qv.assign(t),va(this,this.qv).Oc(this.position)?ya(this):function t(e){-1===e.lo&&(e.lo=r.setTimeout(function(){if(-1!==e.lo){ya(e);var i=e.R.event;if(null!==i){var n=va(e,e.qv);n.Oc(e.position)||(e.position=n,e.R.da=e.OB(e.qv),n=fr(i),e.simulatedMouseMove(i,null,n)||e.doMouseMove(),e.Zj=!0,ra(e,e.sh()),e.De=!0,e.cg(),t(e))}}},e.Tq))}(this)},Qo.prototype.makeSvg=Qo.prototype.makeSVG=function(t){return void 0===t&&(t=new l),t.context="svg",null!==(t=Sa(this,t))?t.km:null},Qo.prototype.makeImage=function(t){void 0===t&&(t=new l);var e=(t.document||document).createElement("img");return e.src=this.QI(t),e},Qo.prototype.makeImageData=Qo.prototype.QI=function(t){void 0===t&&(t=new l);var e,i=Sa(this,t);if(null!==i)switch(e=void 0===(e=t.returnType)?"string":e.toLowerCase()){case"imagedata":return i.Bk.getImageData(0,0,i.width,i.height);case"blob":if(i=i.Od,"function"!=typeof(e=t.callback)){r.k('Error: Diagram.makeImageData called with "returnType: toBlob", but no "callback" function property defined.');break}if("function"==typeof i.toBlob)return i.toBlob(e,t.type,t.details),"toBlob";if("function"==typeof i.msToBlob)return e(i.msToBlob()),"msToBlob";e(null);break;default:return i.toDataURL(t.type,t.details)}return""};var ma,ga,ba,xa,wa,ka,Ma=!1;function Sa(t,e){if(t.Ka.Gh(),t.cg(),null===t.Cb)return null;"object"!=typeof e&&r.k("properties argument must be an Object.");var i=!1,n=e.size||null,o=e.scale||null;void 0!==e.scale&&isNaN(e.scale)&&(o="NaN");var a=e.maxSize;void 0===e.maxSize&&(i=!0,a="svg"===e.context?new dt(1/0,1/0):new dt(2e3,2e3));var s=e.position||null,l=e.parts||null,h=void 0===e.padding?1:e.padding,u=e.background||null,c=e.omitTemporary;void 0===c&&(c=!0);var f=e.document||document,d=e.elementFinished||null,p=e.showTemporary;void 0===p&&(p=!c),void 0===(c=e.showGrid)&&(c=p),null!==n&&isNaN(n.width)&&isNaN(n.height)&&(n=null),"number"==typeof h?h=new wt(h):h instanceof wt||(h=new wt(0)),h.left=Math.max(h.left,0),h.right=Math.max(h.right,0),h.top=Math.max(h.top,0),h.bottom=Math.max(h.bottom,0),t.jf.He(!0);var y=new zt(null,f),v=y.Bk;if(!(n||o||l||s))return y.width=t.Jb+Math.ceil(h.left+h.right),y.height=t.Mb+Math.ceil(h.top+h.bottom),"svg"===e.context?(Mr(t,v=new Nt(y.Od,f,d),h,new dt(y.width,y.height),t.vb,t.jb,l,u,p,c),v):(t.wr=!1,Mr(t,v,h,new dt(y.width,y.height),t.vb,t.jb,l,u,p,c),t.wr=!0,y);var m=t.pb.qx,g=new ut(0,0),b=t.te.copy();if(b.PJ(t.padding),p)for(var x=!0,w=(x=t.dc.n).length,k=0;k<w;k++){if((M=x[k]).visible&&M.Pc)for(var M,S=(M=M.zb.n).length,T=0;T<S;T++){var P=M[T];P.RA&&P.isVisible()&&((P=P.Y).I()&&b.Ih(P))}}if(g.x=b.x,g.y=b.y,null!==l){var N;x=!0;for((w=l.i).reset();w.next();)(P=w.value)instanceof Ch&&(null!==(M=P.layer)&&!M.visible||null!==M&&!p&&M.Pc||!P.isVisible()||(P=P.Y).I()&&(x?(x=!1,N=P.copy()):N.Ih(P)));x&&(N=new pt(0,0,0,0)),b.width=N.width,b.height=N.height,g.x=N.x,g.y=N.y}return null!==s&&s.I()&&(g=s,o||(o=m)),x=P=0,null!==h&&(P=h.left+h.right,x=h.top+h.bottom),k=w=0,null!==n&&(w=n.width,k=n.height,isFinite(w)&&(w=Math.max(0,w-P)),isFinite(k)&&(k=Math.max(0,k-x))),N=s=0,null!==n&&null!==o?("NaN"===o&&(o=m),n.I()?(s=w,N=k):isNaN(k)?(s=w,N=b.height*o):(s=b.width*o,N=k)):null!==n?n.I()?(o=Math.min(w/b.width,k/b.height),s=w,N=k):isNaN(k)?(o=w/b.width,s=w,N=b.height*o):(o=k/b.height,s=b.width*o,N=k):null!==o?"NaN"===o&&a.I()?(o=Math.min((a.width-P)/b.width,(a.height-x)/b.height))>m?(o=m,s=b.width,N=b.height):(s=a.width,N=a.height):(s=b.width*o,N=b.height*o):(o=m,s=b.width,N=b.height),null!==h?(s+=P,N+=x):h=new wt(0),null!==a&&(n=a.width,a=a.height,"svg"!==e.context&&i&&!Ma&&(s>n||N>a)&&(r.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(s)+"x"+Math.ceil(N)+" vs 2000x2000) Consider increasing the max size."),Ma=!0),isNaN(n)&&(n=2e3),isNaN(a)&&(a=2e3),isFinite(n)&&(s=Math.min(s,n)),isFinite(a)&&(N=Math.min(N,a))),y.width=Math.ceil(s),y.height=Math.ceil(N),"svg"===e.context?(Mr(t,v=new Nt(y.Od,f,d),h,new dt(Math.ceil(s),Math.ceil(N)),o,g,l,u,p,c),v):(t.wr=!1,Mr(t,v,h,new dt(Math.ceil(s),Math.ceil(N)),o,g,l,u,p,c),t.wr=!0,y)}function Ta(){this.XD=null,this.eH="63ad05bbe23a1786468a4c741b6d2",this.Ji=this.eH===this._tk||null}function Pa(t,i){void 0!==i&&null!==i||r.k("Diagram setup requires an argument DIV."),null!==t.Nb&&r.k("Diagram has already completed setup."),"string"==typeof i?t.Nb=e.document.getElementById(i):i instanceof HTMLDivElement?t.Nb=i:r.k("No DIV or DIV id supplied: "+i),null===t.Nb&&r.k("Invalid DIV id; could not get element with id: "+i),void 0!==t.Nb.aa&&r.k("Invalid div id; div already has a Diagram associated with it."),"static"===e.getComputedStyle(t.Nb,null).position&&(t.Nb.style.position="relative"),t.Nb.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",t.Nb.style["-ms-touch-action"]="none",t.Nb.innerHTML="",t.Nb.aa=t,(o=new zt(t)).Od.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",void 0!==o.style&&(o.style.position="absolute",o.style.top="0px",o.style.left="0px","rtl"===e.getComputedStyle(t.Nb,null).getPropertyValue("direction")&&(t.Vr=!0),o.style.zIndex="2",o.style.bM="none",o.style.webkitUserSelect="none",o.style.MozUserSelect="none"),t.Jb=t.Nb.clientWidth||1,t.Mb=t.Nb.clientHeight||1,t.Cb=o,t.jf=o.Bk;var n=t.jf;t.Hd=t.computePixelRatio(),Ar(t,t.Jb,t.Mb),t.Hv=n[r.Kg("7eba17a4ca3b1a8346")][r.Kg("78a118b7")](n,r.om,4,4),t.Nb.insertBefore(o.Od,t.Nb.firstChild),(o=new zt(null)).width=1,o.height=1,t.fz=o,t.TC=o.Bk;var o=r.createElement("div"),a=r.createElement("div");o.style.position="absolute",o.style.overflow="auto",o.style.width=t.Jb+"px",o.style.height=t.Mb+"px",o.style.zIndex="1",a.style.position="absolute",a.style.width="1px",a.style.height="1px",t.Nb.appendChild(o),o.appendChild(a),o.onscroll=or,o.onmousedown=rr,o.ontouchstart=rr,o.aa=t,o.aH=!0,o.bH=!0,t.Gw=o,t.ct=a,t.hy=r.NE(function(){t.pk=null,t.oa()},300,!1),t.TB=r.NE(function(){er(t)},250,!1),t.preventDefault=function(t){return t.preventDefault(),!1},t.Nn=function(e){if(t.isEnabled){t.eh=!0;var i=t.wd;r.Dn&&i.yj?(e.preventDefault(),e.simulated=!0,t.lt=e):(t.wd=t.Yb,t.Yb=i,cr(t,t,e,i,!0),t.simulatedMouseMove(e,null,e.target.aa)||(t.doMouseMove(),t.$a.isBeyondDragSize()&&(t.Uh=0),yr(i,e)))}},t.Mn=function(e){if(t.isEnabled){t.eh=!0;var i=t.wd;r.Dn&&null!==t.lt?(t.lt=e,e.preventDefault()):r.Dn&&400>e.timeStamp-t.ek?e.preventDefault():t.bk?e.preventDefault():(t.wd=t.Yb,t.Yb=i,cr(t,t,e,i,!0),i.Dk=!0,i.re=e.detail,(r.bq||r.cq)&&(e.timeStamp-t.ek<t.Xz&&!t.$a.isBeyondDragSize()?t.Uh++:t.Uh=1,t.ek=e.timeStamp,i.re=t.Uh),t.Li=i,!0===i.Cr.simulated?(e.preventDefault(),e.simulated=!0):(Gn=null,t.doMouseDown(),t.Li=t.Li.copy(),1===e.button?e.preventDefault():yr(i,e)))}},t.Pn=function(e){if(t.isEnabled)if(t.bk&&2===e.button)e.preventDefault();else if(t.bk&&0===e.button&&(t.bk=!1),t.tp)e.preventDefault();else{t.eh=!0;var i=t.wd;if(r.Dn){if(400>e.timeStamp-t.ek)return void e.preventDefault();t.ek=e.timeStamp}r.Dn&&null!==t.lt?(t.lt=null,e.preventDefault()):(t.wd=t.Yb,t.Yb=i,cr(t,t,e,i,!0),i.up=!0,i.re=e.detail,(r.bq||r.cq)&&(i.re=t.Uh),i.bubbles=e.bubbles,i.If=fr(e),t.simulatedMouseUp(e,null,new ut,i.If)||(t.doMouseUp(),ya(t),yr(i,e)))}},t.Qn=function(e){if(t.isEnabled){var i=t.wd;t.wd=t.Yb,t.Yb=i,cr(t,t,e,i,!0),i.bubbles=!0;var n=0,o=0;void 0!==e.wheelDelta&&(o=0<e.wheelDelta?1:-1),void 0!==e.wheelDeltaY&&(o=0<e.wheelDeltaY?1:-1),void 0!==e.wheelDeltaX&&(n=0<e.wheelDeltaX?1:-1),void 0!==e.deltaY&&(o=0<e.deltaY?1:-1),void 0!==e.deltaX&&(n=0<e.deltaX?1:-1),i.Ck=0===o?-n:-o,t.doMouseWheel(),yr(i,e)}},t.On=function(){if(t.isEnabled){t.eh=!1;var e=t.$a;e.cancelWaitAfter(),e.standardMouseOver()}},t.NB=function(e){if(t.isEnabled){t.tp=!1,t.bk=!0;var i=dr(t,e,e.targetTouches[0],1<e.touches.length);t.doMouseDown(),yr(i,e)}},t.MB=function(e){if(t.isEnabled){var i=null;0<e.targetTouches.length?i=e.targetTouches[0]:0<e.changedTouches.length&&(i=e.changedTouches[0]);var n=pr(t,e,i,1<e.touches.length);t.simulatedMouseMove(i||e,null,n.If)||t.doMouseMove(),yr(n,e)}},t.LB=function(i){if(t.isEnabled)if(t.tp)i.preventDefault();else if(!(1<i.touches.length)){var n=null,o=null;0<i.targetTouches.length?o=i.targetTouches[0]:0<i.changedTouches.length&&(o=i.changedTouches[0]);var r=t.wd;if(t.wd=t.Yb,t.Yb=r,r.g=t,r.re=1,null!==o){null!==(n=e.document.elementFromPoint(o.clientX,o.clientY))&&n.aa instanceof Qo&&n.aa!==t&&vr(n.aa,o,r),vr(t,o,r);var a=o.screenX,s=o.screenY,l=t.dw;i.timeStamp-t.ek<t.Xz&&!(25<Math.abs(l.x-a)||25<Math.abs(l.y-s))?t.Uh++:t.Uh=1,r.re=t.Uh,t.ek=i.timeStamp,t.dw.m(a,s)}a=0,i.ctrlKey&&(a+=1),i.altKey&&(a+=2),i.shiftKey&&(a+=4),i.metaKey&&(a+=8),r.md=a,r.button=0,r.buttons=1,r.Dk=!1,r.up=!0,r.Ck=0,r.tc=!1,r.bubbles=!1,r.event=i,r.timestamp=Date.now(),r.If=null===n?fr(i):n.aa?n.aa:null,r.Ae=null,t.simulatedMouseUp(o||i,null,new ut,r.If)||t.doMouseUp(),yr(r,i),t.bk=!1}},t.mq=function(e){if(t.isEnabled){t.eh=!0,void 0===(i=t.Iz)[e.pointerId]&&(i[e.pointerId]=e);var i,n=!1;if(null!==(i=t.ep)[0]&&i[0].pointerId===e.pointerId)i[0]=e;else if(null!==i[1]&&i[1].pointerId===e.pointerId)i[1]=e,n=!0;else if(null===i[0])i[0]=e;else{if(null!==i[1])return void e.preventDefault();i[1]=e,n=!0}"touch"!==e.pointerType&&"pen"!==e.pointerType||(t.tp=!1,t.bk=!0),i=dr(t,e,e,n),"touch"!==e.pointerType&&(i.button=e.button,void 0===e.buttons||r.ru||(i.buttons=e.buttons),r.yh&&0===e.button&&e.ctrlKey&&(i.button=2)),t.doMouseDown(),1===e.button?e.preventDefault():yr(i,e)}},t.nq=function(e){if(t.isEnabled){t.eh=!0;var i=t.ep;if(null!==i[0]&&i[0].pointerId===e.pointerId)i[0]=e;else{if(null!==i[1]&&i[1].pointerId===e.pointerId)return void(i[1]=e);if(null!==i[0])return;i[0]=e}i[0].pointerId===e.pointerId&&(i=pr(t,e,e,null!==i[1]),"touch"!==e.pointerType&&(i.button=e.button,void 0===e.buttons||r.ru||(i.buttons=e.buttons),r.yh&&0===e.button&&e.ctrlKey&&(i.button=2)),t.simulatedMouseMove(e,null,i.If)||(t.doMouseMove(),yr(i,e)))}},t.pq=function(i){if(t.isEnabled){t.eh=!0;var n="touch"===i.pointerType||"pen"===i.pointerType,o=t.Iz;if(n&&t.tp)delete o[i.pointerId],i.preventDefault();else if(null!==(o=t.ep)[0]&&o[0].pointerId===i.pointerId){o[0]=null,o=t.wd,t.wd=t.Yb,t.Yb=o;var a=e.document.elementFromPoint(i.clientX,i.clientY);null!==a&&a.aa instanceof Qo&&a.aa!==t&&vr(a.aa,i,o),vr(t,i,o),o.g=t;var s=t.dw,l=n?25:10;i.timeStamp-t.ek<t.Xz&&!(Math.abs(s.x-i.screenX)>l||Math.abs(s.y-i.screenY)>l)?t.Uh++:t.Uh=1,o.re=t.Uh,t.ek=i.timeStamp,t.dw.m(i.screenX,i.screenY),s=0,i.ctrlKey&&(s+=1),i.altKey&&(s+=2),i.shiftKey&&(s+=4),i.metaKey&&(s+=8),o.md=s,o.button=i.button,void 0===i.buttons||r.ru||(o.buttons=i.buttons),r.yh&&0===i.button&&i.ctrlKey&&(o.button=2),o.Dk=!1,o.up=!0,o.Ck=0,o.tc=!1,o.bubbles=!0,o.event=i,o.timestamp=Date.now(),o.If=null===a?fr(i):a.aa?a.aa:null,o.Ae=null,t.simulatedMouseUp(i,null,new ut,o.If)||(t.doMouseUp(),ya(t),yr(o,i),n&&(t.bk=!1))}else null!==o[1]&&o[1].pointerId===i.pointerId&&(o[1]=null)}},t.oq=function(e){if(t.isEnabled){t.eh=!1;var i=t.Iz;i[e.pointerId]&&delete i[e.pointerId],null!==(i=t.ep)[0]&&i[0].pointerId===e.pointerId&&(i[0]=null),null!==i[1]&&i[1].pointerId===e.pointerId&&(i[1]=null),"touch"!==e.pointerType&&"pen"!==e.pointerType&&((e=t.$a).cancelWaitAfter(),e.standardMouseOver())}},n.He(!0),function(t){var i=t.Cb;t.Py?(i.addEventListener("pointerdown",t.mq,!1),i.addEventListener("pointermove",t.nq,!1),i.addEventListener("pointerup",t.pq,!1),i.addEventListener("pointerout",t.oq,!1)):(i.addEventListener("touchstart",t.NB,!1),i.addEventListener("touchmove",t.MB,!1),i.addEventListener("touchend",t.LB,!1),i.addEventListener("mousemove",t.Nn,!1),i.addEventListener("mousedown",t.Mn,!1),i.addEventListener("mouseup",t.Pn,!1),i.addEventListener("mouseout",t.On,!1)),i.addEventListener("wheel",t.Qn,!1),i.addEventListener("keydown",t.HI,!1),i.addEventListener("keyup",t.II,!1),i.addEventListener("selectstart",function(t){return t.preventDefault(),!1},!1),i.addEventListener("contextmenu",function(t){return t.preventDefault(),!1},!1),i.addEventListener("gesturechange",function(e){t.fb.Wp===En&&e.preventDefault()},!1),e.addEventListener("resize",t.TB,!1)}(t)}function Na(t){1<arguments.length&&r.k("Palette constructor can only take one optional argument, the DIV HTML element or its id."),Qo.call(this,t),this.Jt=!0,this.Kl=!1,this.hb=!0,this.kA=b,this.Sb=new jf}function Ca(t){1<arguments.length&&r.k("Overview constructor can only take one optional argument, the DIV HTML element or its id."),Qo.call(this,t),this.Ka.isEnabled=!1,this.Vc=!0,this.lk=null,this.Iv=!0,this.IJ("drawShadows",!1);var e=new Ch,i=new Ml;i.stroke="magenta",i.mb=2,i.fill="transparent",i.name="BOXSHAPE",e.gm=!0,e.vB="BOXSHAPE",e.WA="BOXSHAPE",e.hG="BOXSHAPE",e.cursor="move",e.add(i),this.wm=e,(i=new Ac).type=Rs,i.Ff=k;var n=new Mf;n.ff=!0,i.add(n),(n=new Ml).oh=k,n.Db="Rectangle",n.Ca=new dt(64,64),n.cursor="se-resize",n.alignment=P,i.add(n),e.fG=i,this.hn=this.xk=!1,this.Af=this.Lt=!0,this.EE=new wt(0,0,0,0),this.Sz=new zt(null),this.dH=this.Sz.Bk,this.fb.ue=new Fa,this.fb.iG=new Da;var o=this;this.click=function(){var t=o.lk;if(null!==t){var e=t.rb,i=o.R.da;t.position=new ut(i.x-e.width/2,i.y-e.height/2)}},this.UF=function(){Aa(o)},this.TF=function(){null!==o.lk&&(o.Fc(),o.oa())},this.Ml=Bo,this.Vc=!1}function Aa(t){var e=t.rh;if(null!==e&&null!==(i=t.lk)){t.De=!0;var i=i.rb,n=e.Uu,o=r.mm();o.m(i.width,i.height),n.Ca=o,r.Hk(o),t=2/t.scale,n instanceof Ml&&(n.mb=t),e.location=new ut(i.x-t/2,i.y-t/2)}}function Fa(){Wi.call(this),this.xl=null}function Da(){Zn.call(this)}function La(){this.gg=this.bd=this.Dd=this.Gc=0}function ja(t){1<arguments.length&&r.k("Brush constructor can take at most one optional argument, the Brush type."),r.oc(this),this.P=!1,void 0===t?(this.na=ma,this.oo="black"):"string"==typeof t?(this.na=ma,this.oo=t):(this.na=t,this.oo="black");var e=this.na;e===ga?(this.np=b,this.Co=T):this.Co=this.np=e===ba?k:v,this.Nw=0,this.Jv=NaN,this.ah=this.yw=this.$g=null,this.Vy=this.po=0}Qo.inherit=function(t,e){r.j(t,"function",Qo,"inherit"),r.j(e,"function",Qo,"inherit"),e.cH&&r.k("Cannot inherit from "+r.pf(e)),r.La(t,e)},Ta.prototype.om=function(t){if(t.jf.setTransform(t.Hd,0,0,t.Hd,0,0),null===this.Ji){var i="f",n=e[r.Kg("76a715b2f73f148a")][r.Kg("72ba13b5")];if(t=r.Kg,this.Ji=!0,e[t("7da7")]&&e[t("7da7")][t("76a115b6ed251eaf4692")]){var o;if(!(6>(o=t(o=e[t("7da7")][t("76a115b6ed251eaf4692")]).split(t("39e9"))).length)){var a=t(o[1]).split(".");if("7da71ca0"===o[4]){var s=t(r[t("6cae19")]).split(".");if(a[0]>s[0]||a[0]===s[0]&&a[1]>=s[1]){for(s=n[t("76ad18b4f73e")],a=n[t("73a612b6fb191d")](t("35e7"))+2;a<s;a++)i+=n[a];if(0>(n=i[t("73a612b6fb191d")](t(o[2])))&&t(o[2])!==t("7da71ca0ad381e90")&&(n=i[t("73a612b6fb191d")](t("76a715b2ef3e149757"))),0>n&&(n=i[t("73a612b6fb191d")](t("76a715b2ef3e149757"))),(this.Ji=!(0<=n&&n<i[t("73a612b6fb191d")](t("35"))))&&"#"===(i=t(o[2]))[0]){for(n=e.document[t("79ba13b2f7333e8846865a7d00")]("div"),a=o[0].replace(/[A-Za-z]/g,"");4>a.length;)a+="9";if(a=a.substr(a.length-4),o=""+["gsh","gsf"][parseInt(a.substr(0,1),10)%2],o+=["Header","Background","Display","Feedback"][parseInt(a.substr(0,1),10)%4],n[t("79a417a0f0181a8946")]=o,e.document[t("78a712aa")]){if(e.document[t("78a712aa")][t("7bb806b6ed32388c4a875b")](n),a=e[t("7dad0290ec3b0b91578e5b40007031bf")](n)[t("7dad0283f1390b81519f4645156528bf")](t("78a704b7e62456904c9b12701b6532a8")),e.document[t("78a712aa")][t("68ad1bbcf533388c4a875b")](n),a)if(-1!==a.indexOf(parseInt(i[1]+i[2],16))&&-1!==a.indexOf(parseInt(i[3]+i[4],16)))this.Ji=!1;else if(r.ru||r.bq||r.cq||r.PA)for(o="."+o,a=0;a<document.styleSheets.length;a++)for(var l in t=document.styleSheets[a].rules||document.styleSheets[a].cssRules)if(o===t[l].selectorText){this.Ji=!1;break}}else this.Ji=null,this.Ji=!1}}}}}else{for(s=n[t("76ad18b4f73e")],a=n[t("73a612b6fb191d")](t("35e7"))+2;a<s;a++)i+=n[a];n=i[t("73a612b6fb191d")](t("7da71ca0ad381e90")),this.Ji=!(0<=n&&n<i[t("73a612b6fb191d")](t("35")))}}return 0<this.Ji&&this!==this.XD},Ta.prototype.t=function(){this.XD=null},r.La(Na,Qo),r.ga("Palette",Na),r.La(Ca,Qo),r.ga("Overview",Ca),Ca.prototype.computePixelRatio=function(){return 1},Ca.prototype.ve=function(){if((null===this.Nb&&r.k("No div specified"),null===this.Cb&&r.k("No canvas specified"),this.De)&&(null!==(l=this.lk)&&!l.Ka.df)){Cr(this),(null!==(e=l.Bn)&&e.visible&&isNaN(e.width)||isNaN(e.height))&&zr(l);var t=this.Cb,e=this.jf,i=this.Sz,n=this.dH;i.width=t.width,i.height=t.height,e.He(!0),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),(i=this.kd).reset(),1!==this.scale&&i.scale(this.scale),0===this.position.x&&0===this.position.y||i.translate(-this.position.x,-this.position.y),e.scale(this.Hd,this.Hd),e.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy);i=this.Iv;for(var o=this.rb,a=l.dc.n,s=a.length,l=0;l<s;l++){var h=e,u=o,c=i;if((f=a[l]).visible&&0!==f.Bc&&(void 0===c&&(c=!0),c||!f.Pc)){1!==f.Bc&&(h.globalAlpha=f.Bc);c=this.scale;for(var f,d=(f=f.zb.n).length,p=0;p<d;p++){var y=f[p],v=y.Y;v.Zf(u)&&(1<v.width*c||1<v.height*c?y.ve(h,this):qh(y,h))}h.globalAlpha=1}}for(n.drawImage(t.Od,0,0),n=(t=this.dc.n).length,l=0;l<n;l++)t[l].ve(e,this);this.De=this.ol=!1}},r.defineProperty(Ca,{hB:"observed"},function(){return this.lk},function(t){var e=this.lk;null!==t&&r.G(t,Qo,Ca,"observed"),t instanceof Ca&&r.k("Overview.observed Diagram may not be an Overview itself: "+t),e!==t&&(null!==e&&(this.remove(this.rh),e.nB("ViewportBoundsChanged",this.UF),e.nB("DocumentBoundsChanged",this.TF),e.ww.remove(this)),this.lk=t,null!==t&&(t.Yw("ViewportBoundsChanged",this.UF),t.Yw("DocumentBoundsChanged",this.TF),t.ww.add(this),this.add(this.rh),Aa(this)),this.Fc(),this.h("observed",e,t))}),r.defineProperty(Ca,{rh:"box"},function(){return this.wm},function(t){var e=this.wm;e!==t&&(this.wm=t,this.remove(e),this.add(this.wm),Aa(this),this.h("box",e,t))}),r.defineProperty(Ca,{bL:"drawsTemporaryLayers"},function(){return this.Iv},function(t){this.Iv!==t&&(this.Iv=t,this.Mu())}),Ca.prototype.sh=function(){var t=this.lk;return null===t?te:t.te},Ca.prototype.wF=function(){var t;!0!==this.De&&(this.De=!0,(t=this).Vc||t.$d||!1!==t.Tf||(t.Tf=!0,requestAnimationFrame(function(){if(t.Tf&&!t.$d&&(t.Tf=!1,null!==t.Nb)){if(t.$d=!0,wr(t),t.te.I()||ra(t,t.sh()),null===t.Nb&&r.k("No div specified"),null===t.Cb&&r.k("No canvas specified"),t.De&&null!==(e=t.lk)&&!e.Ka.df&&!e.Ka.rc){var e=t.jf,i=t.Sz;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.Cb.width,t.Cb.height),e.drawImage(i.Od,0,0),(i=t.kd).reset(),1!==t.scale&&i.scale(t.scale),0===t.position.x&&0===t.position.y||i.translate(-t.position.x,-t.position.y),e.scale(t.Hd,t.Hd),e.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy);for(var n=(i=t.dc.n).length,o=0;o<n;o++)i[o].ve(e,t);t.ol=!1,t.De=!1}t.$d=!1}})))},Ca.prototype.Ju=function(t,e,i,n,o){this.Vc||(Nr(this),this.oa(),Pr(this),this.Fc(),Aa(this),this.nh.scale=i,this.nh.position.x=t.x,this.nh.position.y=t.y,this.nh.bounds.set(t),this.nh.isScroll=o,this.Aa("ViewportBoundsChanged",this.nh,t))},r.La(Fa,Wi),Fa.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||!t.Kl||!t.Af)return!1;var e=t.hB;if(null===e)return!1;if(null===this.findDraggablePart()){var i=e.rb;this.xl=new ut(i.width/2,i.height/2),t=t.Ec.da,e.position=new ut(t.x-this.xl.x,t.y-this.xl.y)}return!0},Fa.prototype.doActivate=function(){this.xl=null,Wi.prototype.doActivate.call(this)},Fa.prototype.moveParts=function(){var t=this.g,e=t.hB;if(null!==e&&null!==(n=t.rh)){if(null===this.xl){var i=t.Ec.da,n=n.location;this.xl=new ut(i.x-n.x,i.y-n.y)}t=t.R.da,e.position=new ut(t.x-this.xl.x,t.y-this.xl.y)}},r.La(Da,Zn),Da.prototype.resize=function(t){var e=this.g.hB;if(null!==e){var i=e.rb.copy();e.position=t.position,(i.width!==t.width||i.height!==t.height)&&0<t.width&&0<t.height&&(e.scale=Math.min(i.width/t.width,i.height/t.height))}},r.ga("Brush",ja),ja.Solid=ma=r.p(ja,"Solid",0),ja.Linear=ga=r.p(ja,"Linear",1),ja.Radial=ba=r.p(ja,"Radial",2),ja.Pattern=xa=r.p(ja,"Pattern",4),ja.Lab=wa=r.p(ja,"Lab",5),ja.HSL=ka=r.p(ja,"HSL",6),ja.prototype.copy=function(){var t=new ja;return t.na=this.na,t.oo=this.oo,t.np=this.np.S(),t.Co=this.Co.S(),t.Nw=this.Nw,t.Jv=this.Jv,null!==this.$g&&(t.$g=this.$g.copy()),t.yw=this.yw,t},(i=ja.prototype).Ha=function(){return this.freeze(),Object.freeze(this),this},i.freeze=function(){return this.P=!0,null!==this.$g&&this.$g.freeze(),this},i.Qa=function(){return Object.isFrozen(this)&&r.k("cannot thaw constant: "+this),this.P=!1,null!==this.$g&&this.$g.Qa(),this},i.hc=function(t){t.Ge===ja?this.type=t:r.Ij(this,t)},i.toString=function(){var t="Brush(";if(this.type===ma)t+=this.color;else if(t=this.type===ga?t+"Linear ":this.type===ba?t+"Radial ":this.type===xa?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.yk)for(var e=this.yk.i;e.next();)t+=" "+e.key+":"+e.value;return t+")"},ja.prototype.addColorStop=ja.prototype.addColorStop=function(t,e){this.P&&r.ma(this),("number"!=typeof t||!isFinite(t)||1<t||0>t)&&r.Fa(t,"0 <= loc <= 1",ja,"addColorStop:loc"),r.j(e,"string",ja,"addColorStop:color"),null===this.$g&&(this.$g=new ht("number","string")),this.$g.add(t,e),this.na===ma&&(this.type=ga),this.ah=null},r.defineProperty(ja,{type:"type"},function(){return this.na},function(t){this.P&&r.ma(this,t),r.ob(t,ja,ja,"type"),this.na=t,this.start.Td()&&(t===ga?this.start=b:t===ba&&(this.start=k)),this.end.Td()&&(t===ga?this.end=T:t===ba&&(this.end=k)),this.ah=null}),r.defineProperty(ja,{color:"color"},function(){return this.oo},function(t){this.P&&r.ma(this,t),this.oo=t,this.ah=null}),r.defineProperty(ja,{start:"start"},function(){return this.np},function(t){this.P&&r.ma(this,t),r.G(t,Mt,ja,"start"),this.np=t.S(),this.ah=null}),r.defineProperty(ja,{end:"end"},function(){return this.Co},function(t){this.P&&r.ma(this,t),r.G(t,Mt,ja,"end"),this.Co=t.S(),this.ah=null}),r.defineProperty(ja,{$u:"startRadius"},function(){return this.Nw},function(t){this.P&&r.ma(this,t),r.zd(t,ja,"startRadius"),0>t&&r.Fa(t,">= zero",ja,"startRadius"),this.Nw=t,this.ah=null}),r.defineProperty(ja,{St:"endRadius"},function(){return this.Jv},function(t){this.P&&r.ma(this,t),r.zd(t,ja,"endRadius"),0>t&&r.Fa(t,">= zero",ja,"endRadius"),this.Jv=t,this.ah=null}),r.defineProperty(ja,{yk:"colorStops"},function(){return this.$g},function(t){this.P&&r.ma(this,t),this.$g=t,this.ah=null}),r.defineProperty(ja,{pattern:"pattern"},function(){return this.yw},function(t){this.P&&r.ma(this,t),this.yw=t,this.ah=null}),ja.randomColor=function(t,e){void 0===t&&(t=128),void 0===e&&(e=Math.max(t,255));var i=Math.abs(e-t),n=Math.floor(t+Math.random()*i).toString(16),o=Math.floor(t+Math.random()*i).toString(16);i=Math.floor(t+Math.random()*i).toString(16);return 2>n.length&&(n="0"+n),2>o.length&&(o="0"+o),2>i.length&&(i="0"+i),"#"+n+o+i};var za,Ba=new zt(null).Bk;ja.isValidColor=za=function(t){if("black"===t)return!0;if(""===t)return!1;Ba.fillStyle="#000000";var e=Ba.fillStyle;return Ba.fillStyle=t,Ba.fillStyle!==e||(Ba.fillStyle="#FFFFFF",e=Ba.fillStyle,Ba.fillStyle=t,Ba.fillStyle!==e)};var Ia,Oa,Ea=new La,qa=new La,Ra=new La,Ga=new La;function Va(t,e){switch(e){case wa:var i=100*Ha(Ea.Gc),n=100*Ha(Ea.Dd),o=100*Ha(Ea.bd);return Ra.Gc=.4124564*i+.3575761*n+.1804375*o,Ra.Dd=.2126729*i+.7151522*n+.072175*o,Ra.bd=.0193339*i+.119192*n+.9503041*o,Ra.gg=Ea.gg,i=as(Ra.Gc/rs[0]),n=as(Ra.Dd/rs[1]),o=as(Ra.bd/rs[2]),Ga.Gc=116*n-16,Ga.Dd=500*(i-n),Ga.bd=200*(n-o),Ga.gg=Ra.gg,Ga.Gc=Math.min(100,Math.max(0,Ga.Gc+100*t)),n=(i=(Ga.Gc+16)/116)-Ga.bd/200,Ra.Gc=rs[0]*ss(Ga.Dd/500+i),Ra.Dd=rs[1]*(Ga.Gc>os*ns?Math.pow(i,3):Ga.Gc/os),Ra.bd=rs[2]*ss(n),Ra.gg=Ga.gg,i=-.969266*Ra.Gc+1.8760108*Ra.Dd+.041556*Ra.bd,n=.0556434*Ra.Gc+-.2040259*Ra.Dd+1.0572252*Ra.bd,Ea.Gc=255*Ka((3.2404542*Ra.Gc+-1.5371385*Ra.Dd+-.4985314*Ra.bd)/100),Ea.Dd=255*Ka(i/100),Ea.bd=255*Ka(n/100),Ea.gg=Ra.gg,Ea.Gc=Math.round(Ea.Gc),255<Ea.Gc?Ea.Gc=255:0>Ea.Gc&&(Ea.Gc=0),Ea.Dd=Math.round(Ea.Dd),255<Ea.Dd?Ea.Dd=255:0>Ea.Dd&&(Ea.Dd=0),Ea.bd=Math.round(Ea.bd),255<Ea.bd?Ea.bd=255:0>Ea.bd&&(Ea.bd=0),"rgba("+Ea.Gc+", "+Ea.Dd+", "+Ea.bd+", "+Ea.gg+")";case ka:o=Ea.Gc/255;var a=Ea.Dd/255,s=Ea.bd/255,l=Math.max(o,a,s),h=l-(n=Math.min(o,a,s));n=(l+n)/2;if(0===h)i=o=0;else{switch(l){case o:i=(a-s)/h%6;break;case a:i=(s-o)/h+2;break;case s:i=(o-a)/h+4}0>(i*=60)&&(i+=360),o=h/(1-Math.abs(2*n-1))}return qa.Gc=Math.round(i),qa.Dd=Math.round(100*o),qa.bd=Math.round(100*n),qa.gg=Ea.gg,qa.bd=Math.min(100,Math.max(0,qa.bd+100*t)),"hsla("+qa.Gc+", "+qa.Dd+"%, "+qa.bd+"%, "+qa.gg+")";default:return r.k("Unknown color space: "+e),"rgba(0, 0, 0, 1)"}}function _a(t){Ba.clearRect(0,0,1,1),Ba.fillStyle="#000000";var e=Ba.fillStyle;Ba.fillStyle=t,Ba.fillStyle!==e?(Ba.fillRect(0,0,1,1),t=Ba.getImageData(0,0,1,1).data,Ea.Gc=t[0],Ea.Dd=t[1],Ea.bd=t[2],Ea.gg=t[3]/255):(Ba.fillStyle="#FFFFFF",Ba.fillStyle=t,Ea.Gc=0,Ea.Dd=0,Ea.bd=0,Ea.gg=1)}function Ha(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ka(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}ja.lighten=function(t){return Ia(t)},ja.prototype.lightenBy=function(t,e){this.P&&r.ma(this);var i=void 0===t||"number"!=typeof t?.2:t,n=void 0===e?wa:e;if(this.type===ma)_a(this.color),this.color=Va(i,n);else if((this.type===ga||this.type===ba)&&null!==this.yk)for(var o=this.yk.i;o.next();)_a(o.value),this.addColorStop(o.key,Va(i,n));return this},ja.lightenBy=Ia=function(t,e,i){return e=void 0===e||"number"!=typeof e?.2:e,i=void 0===i?wa:i,_a(t),Va(e,i)},ja.darken=function(t){return Oa(t)},ja.prototype.darkenBy=function(t,e){this.P&&r.ma(this);var i=void 0===t||"number"!=typeof t?.2:t,n=void 0===e?wa:e;if(this.type===ma)_a(this.color),this.color=Va(-i,n);else if((this.type===ga||this.type===ba)&&null!==this.yk)for(var o=this.yk.i;o.next();)_a(o.value),this.addColorStop(o.key,Va(-i,n));return this},ja.darkenBy=Oa=function(t,e,i){return e=void 0===e||"number"!=typeof e?.2:e,i=void 0===i?wa:i,_a(t),Va(-e,i)};var Wa,Ua,Ja,$a,Ya,Xa,Qa,Za,ts,es,is,ns=216/24389,os=24389/27,rs=[95.047,100,108.883];function as(t){return t>ns?Math.pow(t,1/3):(os*t+16)/116}function ss(t){var e=t*t*t;return e>ns?e:(116*t-16)/os}function ls(){r.oc(this),this.N=4225027,this.Bc=1,this.bj=null,this.Rb="",this.cc=this.Fb=null,this.jb=new ut(NaN,NaN).freeze(),this.Se=de,this.Yh=ae,this.Xh=ce,this.kd=new kt,this.sm=new kt,this.Ti=new kt,this.vb=this.Ao=1,this.mg=0,this.Fg=Ua,this.Nm=ee,this.ud=new pt(NaN,NaN,NaN,NaN).freeze(),this.pc=new pt(NaN,NaN,NaN,NaN).freeze(),this.Wc=new pt(0,0,NaN,NaN).freeze(),this.V=this.Ns=this.Os=null,this.rm=this.je=m,this.$s=0,this.dj=1,this.$q=0,this.Bi=1,this.pt=null,this.dt=-1/0,this.Ym=0,this.Zm=Zt,this.$m=Uh,this.ir="",this.yc=this.ia=null,this.mo=-1,this.dn=this.og=this.gl=this.mp=null,this.Jz=bn,this.Um=null}function hs(t){null===t.ia&&(t.ia=new $s)}function us(t,e,i,n,o,r,a){var s=.001,l=r.length;t.moveTo(e,i),s=o-i,0===(n-=e)&&(n=.001),o=s/n;for(var h=Math.sqrt(n*n+s*s),u=0,c=!0,f=0!==a;.1<=h;){if(f){for(s=r[u++%l],s-=a;0>s;)s+=r[u++%l],c=!c;f=!1}else s=r[u++%l];s>h&&(s=h);var d=Math.sqrt(s*s/(1+o*o));0>n&&(d=-d),e+=d,i+=o*d,c?t.lineTo(e,i):t.moveTo(e,i),h-=s,c=!c}}function cs(t,e,i){var n=t.Tl();if(null!==n)for(var o=t.yc.i;o.next();){var r=o.value,a=null;if(null!==r.Dq){if(null===(a=zi(r,n,t)))continue;r.yy(t,a,i,null)}else if(r.Lx){var s=e.g;null===s||s.Pe||r.yy(t,s.$.Mk,i,n)}else{var l=n.data;if(null===l)continue;null===(s=e.g)||s.Pe||r.yy(t,l,i,n)}a===t&&(null!==(s=n.yx(r.lm))&&r.JG(s,a,i))}}function fs(t,e,i,n,o){var r=t.ud,a=t.Ti;a.reset(),bs(t,a,e,i,n,o),t.Ti=a,r.x=e,r.y=i,r.width=n,r.height=o,a.su()||a.GG(r)}function ds(t,e,i,n){return!1!==t.Ug&&(n.multiply(t.transform),i?t.Zf(e,n):t.pn(e,n))}function ps(t,e,i,n,o){if(!1!==As(t)){var a=(s=t.margin).right+s.left,s=s.top+s.bottom;e=Math.max(e-a,0),i=Math.max(i-s,0),o=o||0,n=Math.max((n||0)-a,0),o=Math.max(o-s,0);a=t.angle,s=0,s=t.Ca;var l=0;t instanceof Ml&&(l=t.mb),90===a||270===a?(e=isFinite(s.height)?s.height+l:e,i=isFinite(s.width)?s.width+l:i):(e=isFinite(s.width)?s.width+l:e,i=isFinite(s.height)?s.height+l:i);s=n||0,l=o||0;var h=t instanceof Ys;switch(ws(t,!0)){case Wa:l=s=0,h&&(i=e=1/0);break;case Ya:isFinite(e)&&e>n&&(s=e),isFinite(i)&&i>o&&(l=i);break;case $a:isFinite(e)&&e>n&&(s=e),l=0,h&&(i=1/0);break;case Ja:isFinite(i)&&i>o&&(l=i),s=0,h&&(e=1/0)}h=t.Gf;var u=t.qi;s>h.width&&u.width<h.width&&(s=h.width),l>h.height&&u.height<h.height&&(l=h.height),n=Math.max(s/t.scale,u.width),o=Math.max(l/t.scale,u.height),h.width<n&&(n=Math.min(u.width,n)),h.height<o&&(o=Math.min(u.height,o)),e=Math.min(h.width,e),i=Math.min(h.height,i),e=Math.max(n,e),i=Math.max(o,i),90!==a&&270!==a||(s=e,e=i,i=s,s=n,n=o,o=s),t.ud.Qa(),t.Ln(e,i,n,o),t.ud.freeze(),t.ud.I()||r.k("Non-real measuredBounds has been set. Object "+t+", measuredBounds: "+t.ud.toString()),Fs(t,!1)}}function ys(t,e,i,n,o){var r=t.Y;if(r.x=e,r.y=i,r.width=n,r.height=o,!t.Ca.I()){r=t.ud,e=(i=t.margin).right+i.left;var a=i.top+i.bottom;switch(i=r.width+e,r=r.height+a,n+=e,o+=a,e=ws(t,!0),i===n&&r===o&&(e=Wa),e){case Wa:(i>n||r>o)&&(Fs(t,!0),ps(t,i>n?n:i,r>o?o:r));break;case Ya:Fs(t,!0),ps(t,n,o,0,0);break;case $a:Fs(t,!0),ps(t,n,r,0,0);break;case Ja:Fs(t,!0),ps(t,i,o,0,0)}}}function vs(t,e,i){var n=t.pc;0===n.width||0===n.height||isNaN(n.x)||isNaN(n.y)||(null!==t.cc&&(ms(t,e,t.cc,!0,!0),t.cc instanceof ja&&t.cc.type===ba?(e.beginPath(),e.rect(n.x,n.y,n.width,n.height),e.Lg(t.cc)):e.fillRect(n.x,n.y,n.width,n.height)),null!==t.Fb&&(ms(t,e,t.Fb,!0,!1),t.Fb instanceof ja&&t.Fb.type===ba?(e.beginPath(),e.rect(n.x,n.y,n.width,n.height),e.Lg(t.Fb)):e.fillRect(n.x,n.y,n.width,n.height)),t.Ek(e,i))}function ms(t,e,i,n,o){if(null!==i){var a=1,s=1;if("string"==typeof i)n?e.fillStyle=i:e.strokeStyle=i;else if(i.type===ma)n?e.fillStyle=i.color:e.strokeStyle=i.color;else{var l;a=(s=t.Ja).width,s=s.height;if(o){var h=t.Y;a=h.width,s=h.height}var u=e instanceof Bt;if(u&&i.ah&&(i.type===xa||i.po===a&&i.Vy===s))l=i.ah;else{var c=h=0,f=0,d=0,p=0,y=0;y=p=0;if(o&&(a=(h=t.Y).width,s=h.height,p=h.x,y=h.y),h=i.start.x*a+i.start.offsetX,c=i.start.y*s+i.start.offsetY,f=i.end.x*a+i.end.offsetX,d=i.end.y*s+i.end.offsetY,h+=p,f+=p,c+=y,d+=y,i.type===ga)l=e.createLinearGradient(h,c,f,d);else if(i.type===ba)y=isNaN(i.St)?Math.max(a,s)/2:i.St,isNaN(i.$u)?(p=0,y=Math.max(a,s)/2):p=i.$u,l=e.createRadialGradient(h,c,p,f,d,y);else if(i.type===xa)try{l=e.createPattern(i.pattern,"repeat")}catch(t){l=null}else r.Ed(i.type,"Brush type");if(i.type!==xa&&null!==(o=i.yk))for(o=o.i;o.next();)l.addColorStop(o.key,o.value);if(u&&(i.ah=l,null!==l&&(i.po=a,i.Vy=s),null===l&&i.type===xa&&-1!==i.po)){i.po=-1;var v=t.g;null!==v&&-1===i.po&&r.setTimeout(function(){v.Mu()},600)}}n?e.fillStyle=l:e.strokeStyle=l}}}function gs(t){if(0!=(2048&t.N)==!0){var e=t.kd;if(e.reset(),!t.pc.I()||!t.ud.I())return void Ns(t,!1);e.translate(t.pc.x,t.pc.y),e.translate(-t.za.x,-t.za.y);var i=t.Ja;bs(t,e,i.x,i.y,i.width,i.height),Ns(t,!1),Cs(t,!0)}0!=(4096&t.N)==!0&&(null===(e=t.Q)?(t.sm.set(t.kd),t.Ao=t.scale,Cs(t,!1)):null!==e.ph&&((i=t.sm).reset(),e.Yg()?i.multiply(e.sm):null!==e.Q&&i.multiply(e.Q.sm),i.multiply(t.kd),t.Ao=t.scale*e.Ao,Cs(t,!1)))}function bs(t,e,i,n,o,a){if(1!==t.scale&&e.scale(t.scale),0!==t.angle){var s=k;t.wj()&&t.Ff.$c()&&(s=t.Ff);var l=r.K();if(t instanceof Ch&&t.bg!==t)for(n=(i=t.bg).Ja,l.Xu(n.x,n.y,n.width,n.height,s),i.Ti.nb(l),l.offset(-i.za.x,-i.za.y),s=i.Q;null!==s&&s!==t;)s.Ti.nb(l),l.offset(-s.za.x,-s.za.y),s=s.Q;else l.Xu(i,n,o,a,s);e.rotate(t.angle,l.x,l.y),r.v(l)}}function xs(t){if(!1===Ds(t)){var e=t.Q;null!==e?e.H():t.wj()&&(null!==(e=t.g)&&(e.vg.add(t),t instanceof Fc&&t.$f(),e.Ne())),Ls(t,!0)}}function ws(t,e){var i=t.stretch,n=t.Q;return null!==n&&n.na===Vs?ks(t,n.de(t.Ub),n.ce(t.column),e):null!==n&&n.na===Gs&&n.Ad()===t?Ms(t,Ya,e):i===Ua?null!==n?n.na===Rs&&n.Ad()===t?Ms(t,Ya,e):Ms(t,(i=n.ae)===Ua?Wa:i,e):Ms(t,Wa,e):Ms(t,i,e)}function ks(t,e,i,n){var o=t.stretch;if(o!==Ua)return Ms(t,o,n);var r=o=null;switch(e.stretch){case Ja:r=!0;break;case Ya:r=!0}switch(i.stretch){case $a:o=!0;break;case Ya:o=!0}return e=t.Q.ae,null===o&&(o=e===$a||e===Ya),null===r&&(r=e===Ja||e===Ya),Ms(t,!0===o&&!0===r?Ya:!0===o?$a:!0===r?Ja:Wa,n)}function Ms(t,e,i){if(i)return e;if(e===Wa)return Wa;if((i=t.Ca).I())return Wa;if(t=t.angle,!isNaN(i.width))if(90!==t&&270!==t){if(e===$a)return Wa;if(e===Ya)return Ja}else{if(e===Ja)return Wa;if(e===Ya)return $a}if(!isNaN(i.height))if(90!==t&&270!==t){if(e===Ja)return Wa;if(e===Ya)return $a}else{if(e===$a)return Wa;if(e===Ya)return Ja}return e}function Ss(t,e){t.N=e?512|t.N:-513&t.N}function Ts(t){return 0!=(1024&t.N)}function Ps(t,e){t.N=e?1024|t.N:-1025&t.N}function Ns(t,e){t.N=e?2048|t.N:-2049&t.N}function Cs(t,e){t.N=e?4096|t.N:-4097&t.N}function As(t){return 0!=(8192&t.N)}function Fs(t,e){t.N=e?8192|t.N:-8193&t.N}function Ds(t){return 0!=(16384&t.N)}function Ls(t,e){t.N=e?16384|t.N:-16385&t.N}function js(t){var e=t.U;if(e instanceof Fc&&(null!==t.Vd||t===e.port)){var i=e.g;null===i||i.ja.lb||jc(e,t)}}function zs(t){var e=t.g;null===e||e.ja.lb||(t instanceof Ys?t instanceof Fc?t.$f():ol(t,t,function(t){js(t)}):js(t))}function Bs(t,e){if("string"==typeof e)if(t instanceof Ll)t.text=e;else if(t instanceof Ml)t.Db=e;else if(t instanceof th)t.source=e;else if(t instanceof Ys){null!==(s=o(Ys,e))?t.type=s:r.k("Unknown Panel type as an argument to GraphObject.make: "+e)}else t instanceof ja?null!==(s=o(ja,e))?t.type=s:r.k("Unknown Brush type as an argument to GraphObject.make: "+e):t instanceof He?null!==(s=o(He,e))?t.type=s:r.k("Unknown Geometry type as an argument to GraphObject.make: "+e):t instanceof Ze?null!==(s=o(Ze,e))?t.type=s:r.k("Unknown PathSegment type as an argument to GraphObject.make: "+e):r.k("Unable to use a string as an argument to GraphObject.make: "+e);else if(e instanceof ls)s=e,t instanceof Ys||r.k("A GraphObject can only be added to a Panel, not to: "+t),t.add(s);else if(e instanceof wl){var i,n=e,s=t;n.xe&&s.getRowDefinition?i=s.getRowDefinition(n.index):!n.xe&&s.getColumnDefinition?i=s.getColumnDefinition(n.index):r.k("A RowColumnDefinition can only be added to a Panel, not to: "+t),i.Lp(n)}else if(e instanceof a)"function"==typeof t.hc?t.hc(e):r.Ij(t,e);else if(e instanceof ji)t instanceof ls?t.bind(e):t instanceof wl?t.bind(e):r.k("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof Qe)t instanceof He?t.fc.add(e):r.k("A PathFigure can only be added to a Geometry, not to: "+t);else if(e instanceof Ze)t instanceof Qe?t.wb.add(e):r.k("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof Sf)t instanceof Qo?t.Sb=e:t instanceof xf?t.Sb=e:r.k("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(s=0;s<e.length;s++)Bs(t,e[s]);else if("object"==typeof e&&null!==e)if(t instanceof ja){for(s in i=new l,e)n=parseFloat(s),isNaN(n)?i[s]=e[s]:t.addColorStop(n,e[s]);r.Vu(t,i)}else if(t instanceof wl){for(s in void 0!==e.row?((void 0===(i=e.row)||null===i||1/0===i||isNaN(i)||0>i)&&r.k("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+i),t.xe=!0,t.index=i):void 0!==e.column&&((void 0===(i=e.column)||null===i||1/0===i||isNaN(i)||0>i)&&r.k("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+i),t.xe=!1,t.index=i),i=new l,e)"row"!==s&&"column"!==s&&(i[s]=e[s]);r.Vu(t,i)}else r.Vu(t,e);else r.k('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}r.mi(ls),r.ga("GraphObject",ls),ls.prototype.cloneProtected=function(t){t.N=6144|this.N,t.Bc=this.Bc,t.Rb=this.Rb,t.Fb=this.Fb,t.cc=this.cc,t.jb.assign(this.jb),t.Se=this.Se.S(),t.Yh=this.Yh.S(),t.Xh=this.Xh.S(),t.Ti=this.Ti.copy(),t.vb=this.vb,t.mg=this.mg,t.Fg=this.Fg,t.Nm=this.Nm.S(),t.ud.assign(this.ud),t.pc.assign(this.pc),t.Wc.assign(this.Wc),t.Ns=this.Ns,null!==this.V&&(t.V=this.V.copy()),t.je=this.je.S(),t.rm=this.rm.S(),t.$s=this.$s,t.dj=this.dj,t.$q=this.$q,t.Bi=this.Bi,t.pt=this.pt,t.dt=this.dt,t.Ym=this.Ym,t.Zm=this.Zm.S(),t.$m=this.$m,t.ir=this.ir,null!==this.ia&&(t.ia=this.ia.copy()),t.yc=this.yc,t.mo=this.mo,null!==this.gl&&(t.gl=r.Ol(this.gl)),null!==this.og&&(t.og=this.og.copy()),t.dn=this.dn},ls.prototype.addCopyProperty=ls.prototype.jH=function(t){var e=this.gl;if(r.isArray(e)){for(var i=0;i<e.length;i++)if(e[i]===t)return}else this.gl=e=[];e.push(t)},ls.prototype.ni=function(t){t.Os=null,t.Um=null,t.H()},ls.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),null!==this.gl)for(var e=0;e<this.gl.length;e++){var i=this.gl[e];t[i]=this[i]}return t},ls.prototype.copy=function(){return this.clone()},ls.prototype.hc=function(t){t.Ge===Rc?0===t.name.indexOf("Orient")?this.xq=t:r.k("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.Ge===ls?this.stretch=t:r.Ij(this,t)},ls.prototype.toString=function(){return r.pf(Object.getPrototypeOf(this))+"#"+r.Pd(this)},ls.None=Wa=r.p(ls,"None",0),ls.Default=Ua=r.p(ls,"Default",0),ls.Vertical=Ja=r.p(ls,"Vertical",4),ls.Horizontal=$a=r.p(ls,"Horizontal",5),ls.Fill=Ya=r.p(ls,"Fill",3),ls.Uniform=Xa=r.p(ls,"Uniform",1),ls.UniformToFill=Qa=r.p(ls,"UniformToFill",2),ls.FlipVertical=Za=r.p(ls,"FlipVertical",1),ls.FlipHorizontal=ts=r.p(ls,"FlipHorizontal",2),ls.FlipBoth=es=r.p(ls,"FlipBoth",3),ls.prototype.Qd=function(){if(null===this.V){var t=new bf;t.Wj=v,t.uk=v,t.Uj=10,t.sk=10,t.Tj=Vh,t.rk=Vh,t.Vj=0,t.tk=0,this.V=t}},ls.prototype.raiseChangedEvent=ls.prototype.cd=function(t,e,i,n,o,r,a){var s=this.U;if(null!==s&&(s.Un(t,e,i,n,o,r,a),Ts(this)&&i===this&&t===$t&&cs(this,s,e),i===s&&0!=(16777216&s.N)&&null!==s.data))for(i=(t=this.xa.n).length,n=0;n<i;n++)(o=t[n])instanceof Ys&&rl(o,function(t){null!==t.data&&0!=(16777216&t.N)&&t.Ib(e)})},ls.prototype.yx=function(t){return this.mo===t?this:null},ls.prototype.raiseChanged=ls.prototype.h=function(t,e,i){this.cd($t,t,this,e,i)},ls.prototype.cF=function(t,e,i){if(!1===this.Ug)return!1;var n=this.Ja;e=t.Bf(e);var o=!1;return i&&(o=c(t.x,t.y,0,0,0,n.height)<e||c(t.x,t.y,0,n.height,n.width,n.height)<e||c(t.x,t.y,n.width,n.height,n.width,0)<e||c(t.x,t.y,n.width,0,0,0)<e),i||(o=c(t.x,t.y,0,0,0,n.height)<e&&c(t.x,t.y,0,n.height,n.width,n.height)<e&&c(t.x,t.y,n.width,n.height,n.width,0)<e&&c(t.x,t.y,n.width,0,0,0)<e),o},ls.prototype.Yg=function(){return!0},ls.prototype.containsPoint=ls.prototype.Ia=function(t){var e=r.K();e.assign(t),this.transform.nb(e);var i=this.Y;if(!i.I())return r.v(e),!1;if(null!==(n=this.g)&&n.bk){var n,o=n.gu("extraTouchThreshold"),a=n.gu("extraTouchArea"),s=a/2,l=this.Ja,h=1/(n=this.sj()*n.scale);if(l.width*n<o&&l.height*n<o)return t=p(i.x-s*h,i.y-s*h,i.width+a*h,i.height+a*h,e.x,e.y),r.v(e),t}return(this instanceof Ac||this instanceof Ml?p(i.x-5,i.y-5,i.width+10,i.height+10,e.x,e.y):i.Ia(e))?(o=!1,o=!(this.og&&!this.og.Ia(e))&&(!(null===this.cc||!i.Ia(e))||(!(null===this.Fb||!this.Wc.Ia(t))||this.zk(t))),r.v(e),o):(r.v(e),!1)},ls.prototype.zk=function(t){var e=this.Ja;return p(0,0,e.width,e.height,t.x,t.y)},ls.prototype.containsRect=ls.prototype.Ak=function(t){if(0===this.angle)return this.Y.Ak(t);var e=this.Ja,i=(e=r.lg(0,0,e.width,e.height),this.transform),n=!1,o=r.xb(t.x,t.y);return e.Ia(i.wh(o))&&(o.m(t.x,t.bottom),e.Ia(i.wh(o))&&(o.m(t.right,t.bottom),e.Ia(i.wh(o))&&(o.m(t.right,t.y),e.Ia(i.wh(o))&&(n=!0)))),r.v(o),r.Eb(e),n},ls.prototype.containedInRect=ls.prototype.pn=function(t,e){if(void 0===e)return t.Ak(this.Y);var i=this.Ja,n=!1,o=r.xb(0,0);return t.Ia(e.nb(o))&&(o.m(0,i.height),t.Ia(e.nb(o))&&(o.m(i.width,i.height),t.Ia(e.nb(o))&&(o.m(i.width,0),t.Ia(e.nb(o))&&(n=!0)))),r.v(o),n},ls.prototype.intersectsRect=ls.prototype.Zf=function(t,e){if(void 0===e&&(e=this.transform,0===this.angle))return t.Zf(this.Y);var i=this.Ja,n=e,o=r.xb(0,0),a=r.xb(0,i.height),s=r.xb(i.width,i.height),l=r.xb(i.width,0),h=!1;if(t.Ia(n.nb(o))||t.Ia(n.nb(a))||t.Ia(n.nb(s))||t.Ia(n.nb(l)))h=!0;else{i=r.lg(0,0,i.width,i.height);var u=r.xb(t.x,t.y);i.Ia(n.wh(u))?h=!0:(u.m(t.x,t.bottom),i.Ia(n.wh(u))?h=!0:(u.m(t.right,t.bottom),i.Ia(n.wh(u))?h=!0:(u.m(t.right,t.y),i.Ia(n.wh(u))&&(h=!0)))),r.v(u),r.Eb(i),!h&&(Oe(t,o,a)||Oe(t,a,s)||Oe(t,s,l)||Oe(t,l,o))&&(h=!0)}return r.v(o),r.v(a),r.v(s),r.v(l),h},ls.prototype.getDocumentPoint=ls.prototype.Wa=function(t,e){if(void 0===e&&(e=new ut),t instanceof Mt){t.Td()&&r.k("getDocumentPoint:s Spot must be specific: "+t.toString());var i=this.Ja;e.m(t.x*i.width+t.offsetX,t.y*i.height+t.offsetY)}else e.set(t);return this.ph.nb(e),e},ls.prototype.getDocumentAngle=ls.prototype.Vl=function(){var t;return 1===(t=this.ph).m11&&0===t.m12?t=0:0>(t=180*Math.atan2(t.m12,t.m11)/Math.PI)&&(t+=360),t},ls.prototype.getDocumentScale=ls.prototype.sj=function(){if(0!=(4096&this.N)==!1)return this.Ao;var t=this.vb;return null!==this.Q?t*this.Q.sj():t},ls.prototype.getLocalPoint=ls.prototype.iF=function(t,e){return void 0===e&&(e=new ut),e.assign(t),this.ph.wh(e),e},ls.prototype.getNearestIntersectionPoint=ls.prototype.jF=function(t,e,i){return this.zn(t.x,t.y,e.x,e.y,i)},(i=ls.prototype).zn=function(t,e,i,n,o){var r=this.transform,a=1/(r.m11*r.m22-r.m12*r.m21),s=r.m22*a,l=-r.m12*a,h=-r.m21*a,u=r.m11*a,c=a*(r.m21*r.dy-r.m22*r.dx),f=a*(r.m12*r.dx-r.m11*r.dy);return null!==this.kn?Be((r=this.Y).left,r.top,r.right,r.bottom,t,e,i,n,o):(a=t*s+e*h+c,t=t*l+e*u+f,e=i*s+n*h+c,i=i*l+n*u+f,o.m(0,0),i=Be(0,0,(n=this.Ja).width,n.height,a,t,e,i,o),o.transform(r),i)},i.Ln=function(){},i.wj=function(){return!1},i.ic=function(t,e,i,n,o){this.Ni();var a=r.Kf();if(a.assign(this.pc),this.pc.Qa(),!1===Ds(this)){var s=this.pc;s.x=t,s.y=e,s.width=i,s.height=n}else this.mj(t,e,i,n);this.pc.freeze(),this.og=void 0===o?null:o,i=!1,void 0!==o?i=!0:null!==this.Q&&(o=this.Q.Wc,n=this.za,null!==this.kn&&(n=this.pc),i=e+n.height,n=t+n.width,i=!(0<=t+.05&&n<=o.width+.05&&0<=e+.05&&i<=o.height+.05),this instanceof Ll&&(t=this.Wc,this.jw>t.height||this.yf.Ee>t.width))&&(i=!0),this.N=i?256|this.N:-257&this.N,this.pc.I()||r.k("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.pc.toString()),this.Yx(a,this.pc),Ls(this,!1),r.Eb(a)},i.mj=function(){},i.Yx=function(t,e){var i=this.U;null!==i&&null!==i.g&&(i.Uu!==this&&i.gG!==this&&i.qB!==this||Tc(i,!0),this.oa(),vt(t,e)||(i.Lk(),this.Es(i)))},i.Es=function(t){null!==this.Vd&&(Tc(t,!0),t instanceof Fc&&jc(t,this))},r.defineProperty(ls,{Xn:"shadowVisible"},function(){return this.dn},function(t){var e=this.dn;e!==t&&(this.dn=t,this.oa(),this.h("shadowVisible",e,t))}),ls.prototype.ve=function(t,e){if(this.visible&&(0!==(h=this.pc).width&&0!==h.height&&!isNaN(h.x)&&!isNaN(h.y))){var i=this.opacity,n=1;if(1!==i){if(0===i)return;n=t.globalAlpha,t.globalAlpha=n*i}if(t instanceof Nt){t:if(this.visible){var o=null,r=t.Nx;if(this instanceof Ys&&(this.type===_s||this.type===Hs))vs(this,t,e);else{var a=this.pc;if(0!==a.width&&0!==a.height&&!isNaN(a.x)&&!isNaN(a.y)){var s=this.transform,l=this.Q;0!=(4096&this.N)==!0&&gs(this);var h=0!=(256&this.N),u=!1;if(this instanceof Ll&&(t.font=this.font),h){if(u=l.Yg()?l.Ja:l.Y,null!==this.og)var c=(p=this.og).x,f=p.y,d=p.width,p=p.height;else c=Math.max(a.x,u.x),f=Math.max(a.y,u.y),d=Math.min(a.right,u.right)-c,p=Math.min(a.bottom,u.bottom)-f;if(c>a.width+a.x||a.x>u.width+u.x||f>a.height+a.y||a.y>u.height+u.y)break t;u=!0,jt(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(c,f,d,p),t.clip()}if(this.wj()){var y=this;if(!y.isVisible())break t}t.uh.Tb=[1,0,0,1,0,0],this instanceof Ll&&1<this.UA&&jt(t,1,0,0,1,0,0),c=!1,this.wj()&&this.cm&&e.tj("drawShadows")&&(f=this.cn,t.EB(f.x*e.scale*e.Hd,f.y*e.scale*e.Hd,y.Eg),t.Yn(),t.shadowColor=y.bn),y=!1,this.U&&e.tj("drawShadows")&&(y=this.U.cm),!0===this.Xn?(t.Yn(),!1===c&&y&&(jt(t,1,0,0,1,0,0),t.bb(),c=!0)):!1===this.Xn&&t.im(),null!==this.cc&&(ms(this,t,this.cc,!0,!0),!1===c&&y&&(jt(t,1,0,0,1,0,0),t.bb(),c=!0),this.cc instanceof ja&&this.cc.type===ba?(t.beginPath(),t.rect(a.x,a.y,a.width,a.height),t.Lg(this.cc)):t.fillRect(a.x,a.y,a.width,a.height)),this instanceof Ys?jt(t,s.m11,s.m12,s.m21,s.m22,s.dx,s.dy):t.uh.Tb=[s.m11,s.m12,s.m21,s.m22,s.dx,s.dy],null!==this.Fb&&(!1===c&&y&&(jt(t,1,0,0,1,0,0),t.bb(),c=!0),s=a=0,f=(d=this.Ja).width,d=d.height,p=0,this instanceof Ml&&(a=(d=this.Sa.ab).x,s=d.y,f=d.width,d=d.height,p=this.ii),ms(this,t,this.Fb,!0,!1),this.Fb instanceof ja&&this.Fb.type===ba?(t.beginPath(),t.rect(a-p/2,s-p/2,f+p,d+p),t.Lg(this.Fb)):t.fillRect(a-p/2,s-p/2,f+p,d+p)),y&&(null!==this.Fb||null!==this.cc||null!==l&&0!=(512&l.N)||null!==l&&(l.type===Gs||l.type===Rs)&&l.Ad()!==this)?(Ss(this,!0),null===this.Xn&&t.im()):Ss(this,!1),this.Ek(t,e),y&&0!=(512&this.N)==!0&&t.Yn(),this.wj()&&y&&t.im(),h&&(t.restore(),u&&t.qf.pop()),this instanceof Ys&&(o=t.qf.pop()),!0===c&&t.qf.pop(),this instanceof Ll&&1<this.UA&&(o=t.qf.pop()),null!==t.VE&&(null===o&&(r===t.Nx?(jt(t,1,0,0,1,0,0),o=t.qf.pop()):o=t.Nx),t.VE(this,o))}}}}else{if(this instanceof Ys&&(this.type===_s||this.type===Hs))return vs(this,t,e),void(1!==i&&(t.globalAlpha=n));if(this instanceof Rc&&this.Bu(!1),o=this.transform,r=this.Q,0!=(4096&this.N)==!0&&gs(this),l=0!=(256&this.N),t.Jp&&(l=!1),this instanceof Ll&&(t.font=this.font),l){if(u=r.Yg()?r.Ja:r.Y,null!==this.og?(a=(c=this.og).x,s=c.y,y=c.width,c=c.height):(a=Math.max(h.x,u.x),s=Math.max(h.y,u.y),y=Math.min(h.right,u.right)-a,c=Math.min(h.bottom,u.bottom)-s),a>h.width+h.x||h.x>u.width+u.x||s>h.height+h.y||h.y>u.height+u.y)return void(1!==i&&(t.globalAlpha=n));t.save(),t.beginPath(),t.rect(a,s,y,c),t.clip()}if(this.wj()){if(!this.isVisible())return void(1!==i&&(t.globalAlpha=n));this.cm&&e.tj("drawShadows")&&(u=this.cn,t.EB(u.x*e.scale*e.Hd,u.y*e.scale*e.Hd,this.Eg),t.Yn(),t.shadowColor=this.bn)}u=!1,this.U&&e.tj("drawShadows")&&(u=this.U.cm),!0===this.Xn?t.Yn():!1===this.Xn&&t.im(),null!==this.cc&&(ms(this,t,this.cc,!0,!0),this.cc instanceof ja&&this.cc.type===ba?(t.beginPath(),t.rect(h.x,h.y,h.width,h.height),t.Lg(this.cc)):t.fillRect(h.x,h.y,h.width,h.height)),o.su()||t.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),u&&(null!==r&&0!=(512&r.N)||null!==r&&(r.type===Gs||r.type===Rs)&&r.Ad()!==this)&&null===this.Xn&&t.im(),null!==this.Fb&&(a=h=0,s=(y=this.Ja).width,y=y.height,c=0,this instanceof Ml&&(h=(y=this.Sa.ab).x,a=y.y,s=y.width,y=y.height,c=this.ii),ms(this,t,this.Fb,!0,!1),this.Fb instanceof ja&&this.Fb.type===ba?(t.beginPath(),t.rect(h-c/2,a-c/2,s+c,y+c),t.Lg(this.Fb)):t.fillRect(h-c/2,a-c/2,s+c,y+c)),u&&(null!==this.Fb||null!==this.cc||null!==r&&0!=(512&r.N)||null!==r&&(r.type===Gs||r.type===Rs)&&r.Ad()!==this)?(Ss(this,!0),null===this.Xn&&t.im()):Ss(this,!1),this.Ek(t,e),u&&0!=(512&this.N)==!0&&t.Yn(),this.wj()&&u&&t.im(),l?(t.restore(),this instanceof Ys?t.He(!0):t.He(!1)):o.su()||(r=1/(o.m11*o.m22-o.m12*o.m21),t.transform(o.m22*r,-o.m12*r,-o.m21*r,o.m11*r,r*(o.m21*o.dy-o.m22*o.dx),r*(o.m12*o.dx-o.m11*o.dy)))}1!==i&&(t.globalAlpha=n)}},ls.prototype.Ek=function(){},ls.prototype.isContainedBy=ls.prototype.am=function(t){if(t instanceof Ys)t:{if(this!==t&&null!==t)for(var e=this.Q;null!==e;){if(e===t){t=!0;break t}e=e.Q}t=!1}else t=!1;return t},ls.prototype.isVisibleObject=ls.prototype.Aj=function(){if(!this.visible)return!1;var t=this.Q;return null===t||t.Aj()},ls.prototype.isEnabledObject=ls.prototype.ou=function(){for(var t=this instanceof Ys?this:this.Q;null!==t&&t.isEnabled;)t=t.Q;return null===t},r.defineProperty(ls,{WE:"enabledChanged"},function(){return null!==this.ia?this.ia.Ar:null},function(t){hs(this);var e=this.ia.Ar;e!==t&&(null!==t&&r.j(t,"function",ls,"enabledChanged"),this.ia.Ar=t,this.h("enabledChanged",e,t))}),(i=ls.prototype).H=function(t){if(void 0===t&&(t=!1),!0!==As(this)){Fs(this,!0),Ls(this,!0);var e=this.Q;null===e||t||e.H()}},i.aq=function(){!0!==As(this)&&(Fs(this,!0),Ls(this,!0))},i.Ni=function(){0!=(2048&this.N)==!1&&(Ns(this,!0),Cs(this,!0))},i.LA=function(){Cs(this,!0)},i.oa=function(){var t=this.U;null!==t&&t.oa()},r.defineProperty(ls,{xq:"segmentOrientation"},function(){return this.$m},function(t){var e=this.$m;e!==t&&(this.$m=t,this.H(),this.h("segmentOrientation",e,t),t===Uh&&(this.angle=0))}),r.defineProperty(ls,{Oe:"segmentIndex"},function(){return this.dt},function(t){t=Math.round(t);var e=this.dt;e!==t&&(this.dt=t,this.H(),this.h("segmentIndex",e,t))}),r.defineProperty(ls,{tB:"segmentFraction"},function(){return this.Ym},function(t){isNaN(t)?t=0:0>t?t=0:1<t&&(t=1);var e=this.Ym;e!==t&&(this.Ym=t,this.H(),this.h("segmentFraction",e,t))}),r.defineProperty(ls,{uB:"segmentOffset"},function(){return this.Zm},function(t){var e=this.Zm;e.L(t)||(this.Zm=t=t.S(),this.H(),this.h("segmentOffset",e,t))}),r.defineProperty(ls,{stretch:"stretch"},function(){return this.Fg},function(t){var e=this.Fg;e!==t&&(this.Fg=t,this.H(),this.h("stretch",e,t))}),r.defineProperty(ls,{name:"name"},function(){return this.Rb},function(t){var e=this.Rb;e!==t&&(this.Rb=t,null!==this.U&&(this.U.Pm=null),this.h("name",e,t))}),r.defineProperty(ls,{opacity:"opacity"},function(){return this.Bc},function(t){var e=this.Bc;e!==t&&(r.j(t,"number",ls,"opacity"),(0>t||1<t)&&r.Fa(t,"0 <= value <= 1",ls,"opacity"),this.Bc=t,this.h("opacity",e,t),t=this.g,e=this.U,null!==t&&null!==e&&t.oa(jh(e,e.Y)))}),r.defineProperty(ls,{visible:"visible"},function(){return 0!=(1&this.N)},function(t){var e=0!=(1&this.N);e!==t&&(this.N^=1,this.h("visible",e,t),null!==(e=this.Q)?e.H():this.wj()&&this.Cd(t),this.oa(),zs(this))}),r.defineProperty(ls,{Ug:"pickable"},function(){return 0!=(2&this.N)},function(t){var e=0!=(2&this.N);e!==t&&(this.N^=2,this.h("pickable",e,t))}),r.defineProperty(ls,{ZH:"fromLinkableDuplicates"},function(){return 0!=(4&this.N)},function(t){var e=0!=(4&this.N);e!==t&&(this.N^=4,this.h("fromLinkableDuplicates",e,t))}),r.defineProperty(ls,{$H:"fromLinkableSelfNode"},function(){return 0!=(8&this.N)},function(t){var e=0!=(8&this.N);e!==t&&(this.N^=8,this.h("fromLinkableSelfNode",e,t))}),r.defineProperty(ls,{TJ:"toLinkableDuplicates"},function(){return 0!=(16&this.N)},function(t){var e=0!=(16&this.N);e!==t&&(this.N^=16,this.h("toLinkableDuplicates",e,t))}),r.defineProperty(ls,{UJ:"toLinkableSelfNode"},function(){return 0!=(32&this.N)},function(t){var e=0!=(32&this.N);e!==t&&(this.N^=32,this.h("toLinkableSelfNode",e,t))}),r.defineProperty(ls,{ff:"isPanelMain"},function(){return 0!=(64&this.N)},function(t){var e=0!=(64&this.N);e!==t&&(this.N^=64,this.H(),this.h("isPanelMain",e,t))}),r.defineProperty(ls,{Fx:"isActionable"},function(){return 0!=(128&this.N)},function(t){var e=0!=(128&this.N);e!==t&&(this.N^=128,this.h("isActionable",e,t))}),r.defineProperty(ls,{kn:"areaBackground"},function(){return this.cc},function(t){var e=this.cc;e!==t&&(t instanceof ja&&t.freeze(),this.cc=t,this.oa(),this.h("areaBackground",e,t))}),r.defineProperty(ls,{background:"background"},function(){return this.Fb},function(t){var e=this.Fb;e!==t&&(t instanceof ja&&t.freeze(),this.Fb=t,this.oa(),this.h("background",e,t))}),r.u(ls,{U:"part"},function(){if(this.wj())return this;if(null!==this.Um)return this.Um;var t;for(t=this.Q;t;){if(t instanceof Ch)return this.Um=t;t=t.Q}return null}),r.u(ls,{Q:"panel"},function(){return this.bj}),ls.prototype.hm=function(t){this.bj=t},r.u(ls,{layer:"layer"},function(){var t=this.U;return null!==t?t.layer:null},{configurable:!0}),r.u(ls,{g:"diagram"},function(){var t=this.U;return null!==t?t.g:null},{configurable:!0}),r.defineProperty(ls,{position:"position"},function(){return this.jb},function(t){var e=t.x,i=t.y,n=this.jb,o=n.x,r=n.y;(o===e||isNaN(o)&&isNaN(e))&&(r===i||isNaN(r)&&isNaN(i))?this.BB():(t=t.S(),this.AB(t,n)&&this.h("position",n,t))}),ls.prototype.BB=function(){},ls.prototype.AB=function(t){return this.jb=t,xs(this),this.Ni(),!0},ls.prototype.vy=function(t,e){this.jb.m(t,e),this.Ni()},r.u(ls,{Y:"actualBounds"},function(){return this.pc}),r.defineProperty(ls,{scale:"scale"},function(){return this.vb},function(t){var e=this.vb;e!==t&&(0>=t&&r.k("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.vb=t,this.Ni(),this.H(),this.h("scale",e,t))}),r.defineProperty(ls,{angle:"angle"},function(){return this.mg},function(t){var e=this.mg;e!==t&&(0>(t%=360)&&(t+=360),e!==t&&(this.mg=t,zs(this),this.H(),this.Ni(),this.h("angle",e,t)))}),r.defineProperty(ls,{Ca:"desiredSize"},function(){return this.Se},function(t){var e=t.width,i=t.height,n=this.Se,o=n.width,r=n.height;(o===e||isNaN(o)&&isNaN(e))&&(r===i||isNaN(r)&&isNaN(i))||(this.Se=t=t.S(),this.H(),this instanceof Ml&&this.Me(),this.h("desiredSize",n,t),Ts(this)&&(null!==(t=this.U)&&(cs(this,t,"width"),cs(this,t,"height"))))}),r.defineProperty(ls,{width:"width"},function(){return this.Se.width},function(t){var e=this.Se.width;e===t||isNaN(e)&&isNaN(t)||(e=this.Se,this.Se=t=new dt(t,this.Se.height).freeze(),this.H(),this instanceof Ml&&this.Me(),this.h("desiredSize",e,t),Ts(this)&&(null!==(t=this.U)&&cs(this,t,"width")))}),r.defineProperty(ls,{height:"height"},function(){return this.Se.height},function(t){var e=this.Se.height;e===t||isNaN(e)&&isNaN(t)||(e=this.Se,this.Se=t=new dt(this.Se.width,t).freeze(),this.H(),this instanceof Ml&&this.Me(),this.h("desiredSize",e,t),Ts(this)&&(null!==(t=this.U)&&cs(this,t,"height")))}),r.defineProperty(ls,{qi:"minSize"},function(){return this.Yh},function(t){var e=this.Yh;e.L(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.Yh=t,this.H(),this.h("minSize",e,t))}),r.defineProperty(ls,{Gf:"maxSize"},function(){return this.Xh},function(t){var e=this.Xh;e.L(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),this.Xh=t,this.H(),this.h("maxSize",e,t))}),r.u(ls,{za:"measuredBounds"},function(){return this.ud}),r.u(ls,{Ja:"naturalBounds"},function(){return this.Wc},{configurable:!0}),r.defineProperty(ls,{margin:"margin"},function(){return this.Nm},function(t){"number"==typeof t&&(t=new wt(t));var e=this.Nm;e.L(t)||(this.Nm=t=t.S(),this.H(),this.h("margin",e,t))}),r.u(ls,{transform:null},function(){return 0!=(2048&this.N)==!0&&gs(this),this.kd}),r.u(ls,{ph:null},function(){return 0!=(4096&this.N)==!0&&gs(this),this.sm}),r.defineProperty(ls,{alignment:"alignment"},function(){return this.je},function(t){var e=this.je;e.L(t)||(t.Td()&&!t.Zc()&&r.k("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.je=t=t.S(),xs(this),this.h("alignment",e,t))}),r.defineProperty(ls,{column:"column"},function(){return this.$q},function(t){t=Math.round(t);var e=this.$q;e!==t&&(0>t&&r.Fa(t,">= 0",ls,"column"),this.$q=t,this.H(),this.h("column",e,t))}),r.defineProperty(ls,{yH:"columnSpan"},function(){return this.Bi},function(t){t=Math.round(t);var e=this.Bi;e!==t&&(1>t&&r.Fa(t,">= 1",ls,"columnSpan"),this.Bi=t,this.H(),this.h("columnSpan",e,t))}),r.defineProperty(ls,{Ub:"row"},function(){return this.$s},function(t){t=Math.round(t);var e=this.$s;e!==t&&(0>t&&r.Fa(t,">= 0",ls,"row"),this.$s=t,this.H(),this.h("row",e,t))}),r.defineProperty(ls,{rowSpan:"rowSpan"},function(){return this.dj},function(t){t=Math.round(t);var e=this.dj;e!==t&&(1>t&&r.Fa(t,">= 1",ls,"rowSpan"),this.dj=t,this.H(),this.h("rowSpan",e,t))}),r.defineProperty(ls,{wy:"spanAllocation"},function(){return this.pt},function(t){var e=this.pt;e!==t&&(null!==t&&r.j(t,"function",ls,"spanAllocation"),this.pt=t,this.H(),this.h("spanAllocation",e,t))}),r.defineProperty(ls,{oh:"alignmentFocus"},function(){return this.rm},function(t){var e=this.rm;e.L(t)||(!t.Td()||t.Zc()||t.L(v)&&this instanceof Fc||r.k("GraphObject.alignmentFocus must be a real Spot or Spot.Default, not: "+t),this.rm=t=t.S(),this.H(),this.h("alignmentFocus",e,t))}),r.defineProperty(ls,{Vd:"portId"},function(){return this.Ns},function(t){var e=this.Ns;if(e!==t){var i=this.U;if(null===i||i instanceof Fc||(r.k("Cannot set portID on a Link: "+t),i=null),null!==e&&null!==i&&qc(i,this),this.Ns=t,null!==t&&i){i.Kk=!0,null===i.oe&&Ec(i);var n=this.Vd;null!==n&&i.oe.add(n,this)}this.h("portId",e,t)}}),r.defineProperty(ls,{Bb:"toSpot"},function(){return null!==this.V?this.V.uk:v},function(t){this.Qd();var e=this.V.uk;e.L(t)||(t=t.S(),this.V.uk=t,this.h("toSpot",e,t),js(this))}),r.defineProperty(ls,{nm:"toEndSegmentLength"},function(){return null!==this.V?this.V.sk:10},function(t){this.Qd();var e=this.V.sk;e!==t&&(0>t&&r.Fa(t,">= 0",ls,"toEndSegmentLength"),this.V.sk=t,this.h("toEndSegmentLength",e,t),js(this))}),r.defineProperty(ls,{av:"toEndSegmentDirection"},function(){return null!==this.V?this.V.rk:Vh},function(t){this.Qd();var e=this.V.rk;e!==t&&(r.Qt("GraphObject.toEndSegmentDirection","2.0"),this.V.rk=t,this.h("toEndSegmentDirection",e,t),js(this))}),r.defineProperty(ls,{bv:"toShortLength"},function(){return null!==this.V?this.V.tk:0},function(t){this.Qd();var e=this.V.tk;e!==t&&(this.V.tk=t,this.h("toShortLength",e,t),js(this))}),r.defineProperty(ls,{AG:"toLinkable"},function(){return null!==this.V?this.V.wt:null},function(t){this.Qd();var e=this.V.wt;e!==t&&(this.V.wt=t,this.h("toLinkable",e,t))}),r.defineProperty(ls,{VJ:"toMaxLinks"},function(){return null!==this.V?this.V.xt:1/0},function(t){this.Qd();var e=this.V.xt;e!==t&&(0>t&&r.Fa(t,">= 0",ls,"toMaxLinks"),this.V.xt=t,this.h("toMaxLinks",e,t))}),r.defineProperty(ls,{Ab:"fromSpot"},function(){return null!==this.V?this.V.Wj:v},function(t){this.Qd();var e=this.V.Wj;e.L(t)||(t=t.S(),this.V.Wj=t,this.h("fromSpot",e,t),js(this))}),r.defineProperty(ls,{Ul:"fromEndSegmentLength"},function(){return null!==this.V?this.V.Uj:10},function(t){this.Qd();var e=this.V.Uj;e!==t&&(0>t&&r.Fa(t,">= 0",ls,"fromEndSegmentLength"),this.V.Uj=t,this.h("fromEndSegmentLength",e,t),js(this))}),r.defineProperty(ls,{du:"fromEndSegmentDirection"},function(){return null!==this.V?this.V.Tj:Vh},function(t){this.Qd();var e=this.V.Tj;e!==t&&(r.Qt("GraphObject.fromEndSegmentDirection","2.0"),this.V.Tj=t,this.h("fromEndSegmentDirection",e,t),js(this))}),r.defineProperty(ls,{eu:"fromShortLength"},function(){return null!==this.V?this.V.Vj:0},function(t){this.Qd();var e=this.V.Vj;e!==t&&(this.V.Vj=t,this.h("fromShortLength",e,t),js(this))}),r.defineProperty(ls,{fF:"fromLinkable"},function(){return null!==this.V?this.V.Dr:null},function(t){this.Qd();var e=this.V.Dr;e!==t&&(this.V.Dr=t,this.h("fromLinkable",e,t))}),r.defineProperty(ls,{AA:"fromMaxLinks"},function(){return null!==this.V?this.V.Er:1/0},function(t){this.Qd();var e=this.V.Er;e!==t&&(0>t&&r.Fa(t,">= 0",ls,"fromMaxLinks"),this.V.Er=t,this.h("fromMaxLinks",e,t))}),r.defineProperty(ls,{cursor:"cursor"},function(){return this.ir},function(t){var e=this.ir;e!==t&&(r.j(t,"string",ls,"cursor"),this.ir=t,this.h("cursor",e,t))}),r.defineProperty(ls,{click:"click"},function(){return null!==this.ia?this.ia.Ai:null},function(t){hs(this);var e=this.ia.Ai;e!==t&&(null!==t&&r.j(t,"function",ls,"click"),this.ia.Ai=t,this.h("click",e,t))}),r.defineProperty(ls,{Rt:"doubleClick"},function(){return null!==this.ia?this.ia.Ii:null},function(t){hs(this);var e=this.ia.Ii;e!==t&&(null!==t&&r.j(t,"function",ls,"doubleClick"),this.ia.Ii=t,this.h("doubleClick",e,t))}),r.defineProperty(ls,{lA:"contextClick"},function(){return null!==this.ia?this.ia.Ci:null},function(t){hs(this);var e=this.ia.Ci;e!==t&&(null!==t&&r.j(t,"function",ls,"contextClick"),this.ia.Ci=t,this.h("contextClick",e,t))}),r.defineProperty(ls,{Du:"mouseEnter"},function(){return null!==this.ia?this.ia.vs:null},function(t){hs(this);var e=this.ia.vs;e!==t&&(null!==t&&r.j(t,"function",ls,"mouseEnter"),this.ia.vs=t,this.h("mouseEnter",e,t))}),r.defineProperty(ls,{Eu:"mouseLeave"},function(){return null!==this.ia?this.ia.ws:null},function(t){hs(this);var e=this.ia.ws;e!==t&&(null!==t&&r.j(t,"function",ls,"mouseLeave"),this.ia.ws=t,this.h("mouseLeave",e,t))}),r.defineProperty(ls,{dB:"mouseOver"},function(){return null!==this.ia?this.ia.Yi:null},function(t){hs(this);var e=this.ia.Yi;e!==t&&(null!==t&&r.j(t,"function",ls,"mouseOver"),this.ia.Yi=t,this.h("mouseOver",e,t))}),r.defineProperty(ls,{cB:"mouseHover"},function(){return null!==this.ia?this.ia.Xi:null},function(t){hs(this);var e=this.ia.Xi;e!==t&&(null!==t&&r.j(t,"function",ls,"mouseHover"),this.ia.Xi=t,this.h("mouseHover",e,t))}),r.defineProperty(ls,{bB:"mouseHold"},function(){return null!==this.ia?this.ia.Wi:null},function(t){hs(this);var e=this.ia.Wi;e!==t&&(null!==t&&r.j(t,"function",ls,"mouseHold"),this.ia.Wi=t,this.h("mouseHold",e,t))}),r.defineProperty(ls,{bJ:"mouseDragEnter"},function(){return null!==this.ia?this.ia.ts:null},function(t){hs(this);var e=this.ia.ts;e!==t&&(null!==t&&r.j(t,"function",ls,"mouseDragEnter"),this.ia.ts=t,this.h("mouseDragEnter",e,t))}),r.defineProperty(ls,{cJ:"mouseDragLeave"},function(){return null!==this.ia?this.ia.us:null},function(t){hs(this);var e=this.ia.us;e!==t&&(null!==t&&r.j(t,"function",ls,"mouseDragLeave"),this.ia.us=t,this.h("mouseDragLeave",e,t))}),r.defineProperty(ls,{aB:"mouseDrop"},function(){return null!==this.ia?this.ia.Vi:null},function(t){hs(this);var e=this.ia.Vi;e!==t&&(null!==t&&r.j(t,"function",ls,"mouseDrop"),this.ia.Vi=t,this.h("mouseDrop",e,t))}),r.defineProperty(ls,{rE:"actionDown"},function(){return null!==this.ia?this.ia.Iq:null},function(t){hs(this);var e=this.ia.Iq;e!==t&&(null!==t&&r.j(t,"function",ls,"actionDown"),this.ia.Iq=t,this.h("actionDown",e,t))}),r.defineProperty(ls,{sE:"actionMove"},function(){return null!==this.ia?this.ia.Jq:null},function(t){hs(this);var e=this.ia.Jq;e!==t&&(null!==t&&r.j(t,"function",ls,"actionMove"),this.ia.Jq=t,this.h("actionMove",e,t))}),r.defineProperty(ls,{tE:"actionUp"},function(){return null!==this.ia?this.ia.Kq:null},function(t){hs(this);var e=this.ia.Kq;e!==t&&(null!==t&&r.j(t,"function",ls,"actionUp"),this.ia.Kq=t,this.h("actionUp",e,t))}),r.defineProperty(ls,{qE:"actionCancel"},function(){return null!==this.ia?this.ia.Hq:null},function(t){hs(this);var e=this.ia.Hq;e!==t&&(null!==t&&r.j(t,"function",ls,"actionCancel"),this.ia.Hq=t,this.h("actionCancel",e,t))}),r.defineProperty(ls,{KB:"toolTip"},function(){return null!==this.ia?this.ia.gj:null},function(t){hs(this);var e=this.ia.gj;e!==t&&(this.ia.gj=t,this.h("toolTip",e,t))}),r.defineProperty(ls,{contextMenu:"contextMenu"},function(){return null!==this.ia?this.ia.Di:null},function(t){hs(this);var e=this.ia.Di;e!==t&&(this.ia.Di=t,this.h("contextMenu",e,t))}),ls.prototype.bind=ls.prototype.bind=function(t){t.Gg=this;var e=this.Tl();null!==e&&ul(e)&&r.k("Cannot add a Binding to a template that has already been copied: "+t),null===this.yc&&(this.yc=new et(ji)),this.yc.add(t)},ls.prototype.findTemplateBinder=ls.prototype.Tl=function(){for(var t=this instanceof Ys?this:this.Q;null!==t;){if(null!==t.el)return t;t=t.Q}return null},ls.prototype.setProperties=function(t){r.Vu(this,t)},ls.make=is=function(t,e){var i=arguments,o=null,a=null;if("function"==typeof t)a=t;else if("string"==typeof t){var s=Js.ka(t);"function"==typeof s?(o=s(i=r.Ol(arguments)),r.Pa(o)||r.k('GraphObject.make invoked object builder "'+t+'", but it did not return an Object')):a=n[t]}if(null===o&&(void 0!==a&&null!==a&&a.constructor||r.k("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),o=new a),s=1,o instanceof Qo&&1<i.length){var l=o;("string"==typeof(a=i[1])||a instanceof HTMLDivElement)&&(Pa(l,a),s++)}for(;s<i.length;s++)void 0===(a=i[s])?r.k("Undefined value at argument "+s+" for object being constructed by GraphObject.make: "+o):Bs(o,a);return o};var Is,Os,Es,qs,Rs,Gs,Vs,_s,Hs,Ks,Ws,Us,Js=new ht("string","function");function $s(){this.Ar=this.Di=this.gj=this.Hq=this.Kq=this.Jq=this.Iq=this.Vi=this.us=this.ts=this.Wi=this.Xi=this.Yi=this.ws=this.vs=this.Ci=this.Ii=this.Ai=null}function Ys(t){ls.call(this),void 0===t?this.na=Es:(r.ob(t,Ys,Ys,"type"),this.na=t),this.xa=new et(ls),this.mf=ee,this.na===Ws&&(this.En=!0),this.mr=m,this.Gi=Ua,this.na===Vs&&Xs(this),this.Ap=Xa,this.Mr=ue,this.Nr=Zt,this.Jr=0,this.Ir=100,this.Lr=10,this.Kr=0,this.el=this.Zd=this.Xj=this.Bm=this.Dm=null,this.as=NaN,this.xg=this.dk=null,this.Qo="category",this.wg=null,this.ij=new pt(NaN,NaN,NaN,NaN),this.qk=this.at=this.Bl=null,this.Lj=""}function Xs(t){t.Pj=ee,t.Ph=1,t.Fi=null,t.zm=null,t.Oh=1,t.Nh=null,t.ym=null,t.Xc=[],t.Uc=[],t.Xm=ml,t.xm=ml,t.hj=0,t.Ri=0}function Qs(t,e){e.N=6144|t.N,e.Bc=t.Bc,e.Fb=t.Fb,e.cc=t.cc,e.Se=t.Se.S(),e.Yh=t.Yh.S(),e.Xh=t.Xh.S(),e.Ti=t.Ti.copy(),e.vb=t.vb,e.mg=t.mg,e.Fg=t.Fg,e.Nm=t.Nm.S(),e.je=t.je.S(),e.rm=t.rm.S(),e.Ym=t.Ym,e.Zm=t.Zm.S(),e.$m=t.$m,null!==t.og&&(e.og=t.og.copy()),e.dn=t.dn,t instanceof Ll&&(e.Md=t.Md,e.sc=t.sc,e.qg=t.qg,e.Cl=t.Cl,e.pg=t.pg,e.Gl=t.Gl,e.Gm=t.Gm,e.ck=t.ck,e.ak=t.ak,e.$i=t.$i,e.kj=t.kj,e.yf.Sj=null,e.ei=t.ei,e.fi=t.fi,e.gh=t.gh,e.To=t.To,e.ug=t.ug,e.tg=t.tg,e.sg=t.sg,e.Cm=t.Cm)}function Zs(t,e,i,n){for(var o=n.length,r=t.Y,a=!0,s=0;s<o;s++){var l=n[s];if(void 0!==l)if(a)a=!1;else if(0!==l.Ya){if(i){if(l.position>r.height)continue}else if(l.position>r.width)continue;var h=l.zq;isNaN(h)&&(h=i?t.Ph:t.Oh);var u=l.yq;null===u&&(u=i?t.Fi:t.Nh),0!==h&&null!==u&&(ms(t,e,u,!1,!1),e.beginPath(),u=l.position+h,i?u>r.height&&(h-=u-r.height):u>r.width&&(h-=u-r.width),l=l.position+h/2,e.lineWidth=h,u=t.padding,i?(l+=u.top,h=u.left,u=r.width-u.right,e.moveTo(h,l),e.lineTo(u,l)):(l+=u.left,h=u.top,u=r.height-u.bottom,e.moveTo(l,h),e.lineTo(l,u)),e.stroke())}}}function tl(t,e,i,n,o){for(var r=n.length,a=t.Y,s=0;s<r;s++){var l=n[s];if(void 0!==l&&null!==l.background&&l.qA!==o&&0!==l.Ya){var h=i?a.height:a.width;if(!(l.position>h)){var u=l.Ze(),c=l.zq;isNaN(c)&&(c=i?t.Ph:t.Oh);var f=l.yq;null===f&&(f=i?t.Fi:t.Nh),null===f&&(c=0),u-=c,(c=l.position+c)+(u+=l.Ya)>h&&(u=h-c),0>=u||(h=t.padding,ms(t,e,l.background,!0,!1),i?e.fillRect(h.left,c+h.top,a.width-(h.left+h.right),u):e.fillRect(c+h.left,h.top,u,a.height-(h.top+h.bottom)))}}}}function el(t,e,i){if(0!=t%e)return!1;e=i.length;for(var n=0;n<e;n++)if(0==t%i[n])return!1;return!0}function il(t){return"LineV"===t||"BarV"===t}function nl(t){return null!==t.U?t.U.bg:null}function ol(t,e,i){if(i(t,e),e instanceof Ys)for(var n=(e=e.xa.n).length,o=0;o<n;o++)ol(t,e[o],i)}function rl(t,e){!function t(e,i,n){n(i);i=i.xa.n;for(var o=i.length,r=0;r<o;r++){var a=i[r];a instanceof Ys&&t(e,a,n)}}(t,t,e)}function al(t,e,i,n){for(var o=t.xa.n,r=o.length;r--;){var a=o[r];if(a.visible){var s=a.Y,l=t.Ja;s.x>l.width||s.y>l.height||0>s.x+s.width||0>s.y+s.height||(a instanceof Ys&&al(a,e,i,n),null!==e&&(a=e(a)),null===a||null!==i&&!i(a)||n.add(a))}}}function sl(t){var e=null;return t instanceof Ml&&((e=t.A)===m&&(e=null),null!==(t=t.of)&&null===e&&(e=t.A)),null===e&&(e=g),e}function ll(t){var e=null;return t instanceof Ml&&((e=t.B)===m&&(e=null),null!==(t=t.of)&&null===e&&(e=t.B)),null===e&&(e=P),e}function hl(t,e){t.N=e?16777216|t.N:-16777217&t.N}function ul(t){return null!==(t=t.el)&&t.P}function cl(t){var e=t.el;if(null===e)null!==t.data&&r.k("Template cannot have .data be non-null: "+t),t.el=e=new et(ji);else if(e.P)return;var i=new et(ls);hl(t,!1),ol(t,t,function(t,n){var o=n.yc;if(null!==o)for(Ps(n,!1),o=o.i;o.next();){var r=o.value;r.mode===Ti&&Ps(n,!0);var a=r.Dq;null!==a&&("/"===a&&hl(t,!0),null!==(a=zi(r,t,n))&&(i.add(a),null===a.mp&&(a.mp=new et(ji)),a.mp.add(r))),e.add(r)}if(n instanceof Ys&&n.type===Vs){if(0<n.Xc.length)for(r=(o=n.Xc).length,a=0;a<r;a++){var s=o[a];if(void 0!==s&&null!==s.yc)for(var l=s.yc.i;l.next();){var h=l.value;h.Gg=s,h.tt=2,h.vp=s.index,e.add(h)}}if(0<n.Uc.length)for(r=(o=n.Uc).length,a=0;a<r;a++)if(void 0!==(s=o[a])&&null!==s.yc)for(l=s.yc.i;l.next();)(h=l.value).Gg=s,h.tt=1,h.vp=s.index,e.add(h)}});for(var n=i.i;n.next();){var o=n.value;if(null!==o.mp){Ps(o,!0);for(var a=o.mp.i;a.next();){var s=a.value;null===o.yc&&(o.yc=new et(ji)),o.yc.add(s)}}o.mp=null}for(n=e.i;n.next();)if(null!==(a=(o=n.value).Gg)){o.Gg=null;var l=o.xy,h=l.indexOf(".");0<h&&a instanceof Ys&&(s=l.substring(0,h),l=l.substr(h+1),null!==(h=a.Bd(s))?(a=h,o.xy=l):r.trace('Warning: unable to find GraphObject named "'+s+'" for Binding: '+o.toString())),a instanceof wl?(o.lm=r.Pd(a.Q),a.Q.mo=o.lm):(o.lm=r.Pd(a),a.mo=o.lm)}e.freeze(),t instanceof Ch&&t.fe()&&t.af()}function fl(t){return!!(t.type===Rs||t.type===Gs||t.type===Ks||t.type===Vs&&0<t.xa.length&&(t=t.xa.ea(0),t.ff&&t instanceof Ys&&(t.type===_s||t.type===Hs)))}function dl(t,e,i){if(!(void 0===e||null===e||0>i)){var n;n=function(t,e){if(null===e)return"";var i=t.Qo,n="";if("function"==typeof i)n=i(e);else{if("string"!=typeof i||"object"!=typeof e)return"";if(""===i)return"";n=r.ub(e,i)}return void 0===n?"":"string"==typeof n?n:(r.k("Panel.getCategoryForItemData found a non-string category for "+e+": "+n),"")}(t,e);var o=t.GI,a=null;null!==o&&(a=o.ka(n)),null===a&&(gl||(gl=!0,r.trace('No item template Panel found for category "'+n+'" on '+t),r.trace("  Using default item template."),n=new Ys,(o=new Ll).bind(new ji("text","",Pi)),n.add(o),bl=n),a=bl),null!==(n=a)&&(cl(n),0!=(16777216&(n=n.copy()).N)&&(null!==(o=t.Tl())&&hl(o,!0)),"object"==typeof e&&(null===t.wg&&(t.wg=new ht(Object,Ys)),t.wg.add(e,n)),o=i,fl(t)&&o++,t.Rd(o,n),n.Zd=e,pl(t,o,i),n.Zd=null,n.data=e)}}function pl(t,e,i){for(t=t.xa;e<t.length;){var n=t.ea(e);if(n instanceof Ys){var o=e,r=i;n.type===_s?n.Ub=o:n.type===Hs&&(n.column=o),n.vu=r}e++,i++}}ls.getBuilders=function(){var t,e=new ht("string","function");for(t in Js)if(t!==t.toLowerCase()){var i=Js.ka(t);"function"==typeof i&&e.add(t,i)}return e.freeze(),e},ls.defineBuilder=Is=function(t,e){r.j(t,"string",ls,"defineBuilder:name"),r.j(e,"function",ls,"defineBuilder:func");var i=t.toLowerCase();""!==t&&"none"!==i&&t!==i||r.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+t),Js.add(t,e)},ls.takeBuilderArgument=Os=function(t,e,i){void 0===i&&(i=null);var n=t[1];if("function"==typeof i?i(n):"string"==typeof n)return t.splice(1,1),n;if(void 0===e)throw Error("no "+("function"==typeof i?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e},Is("Button",function(){var t=new ja(ga);t.addColorStop(0,"white"),t.addColorStop(1,"lightgray");var e=new ja(ga);return e.addColorStop(0,"white"),e.addColorStop(1,"dodgerblue"),(t=is(Ys,Gs,{Fx:!0,WE:function(t,e){var i=t.Bd("ButtonBorder");null!==i&&(i.fill=e?t._buttonFillNormal:t._buttonFillDisabled)},_buttonFillNormal:t,_buttonStrokeNormal:"gray",_buttonFillOver:e,_buttonStrokeOver:"blue",_buttonFillDisabled:"darkgray"},is(Ml,{name:"ButtonBorder",Db:"Rectangle",A:new Mt(0,0,2.761423749153968,2.761423749153968),B:new Mt(1,1,-2.761423749153968,-2.761423749153968),fill:t,stroke:"gray"}))).Du=function(t,e){if(e.ou()){var i=e.Bd("ButtonBorder");if(i instanceof Ml){var n=e._buttonFillOver;e._buttonFillNormal=i.fill,i.fill=n,n=e._buttonStrokeOver,e._buttonStrokeNormal=i.stroke,i.stroke=n}}},t.Eu=function(t,e){if(e.ou()){var i=e.Bd("ButtonBorder");i instanceof Ml&&(i.fill=e._buttonFillNormal,i.stroke=e._buttonStrokeNormal)}},t}),Is("TreeExpanderButton",function(){var t=is("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},is(Ml,{name:"ButtonIcon",Db:"MinusLine",Ca:le},new ji("figure","isTreeExpanded",function(t,e){var i=e.Q;return t?i._treeExpandedFigure:i._treeCollapsedFigure}).Xx()),{visible:!1},new ji("visible","isTreeLeaf",function(t){return!t}).Xx());return t.click=function(t,e){var i=e.U;if(i instanceof Ac&&(i=i.Xe),i instanceof Fc){var n=i.g;if(null!==n){if(n=n.pb,i.uc){if(!n.canCollapseTree(i))return}else if(!n.canExpandTree(i))return;t.tc=!0,i.uc?n.collapseTree(i):n.expandTree(i)}}},t}),Is("SubGraphExpanderButton",function(){var t=is("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},is(Ml,{name:"ButtonIcon",Db:"MinusLine",Ca:le},new ji("figure","isSubGraphExpanded",function(t,e){var i=e.Q;return t?i._subGraphExpandedFigure:i._subGraphCollapsedFigure}).Xx()));return t.click=function(t,e){var i=e.U;if(i instanceof Ac&&(i=i.Xe),i instanceof xf){var n=i.g;if(null!==n){if(n=n.pb,i.ad){if(!n.canCollapseSubGraph(i))return}else if(!n.canExpandSubGraph(i))return;t.tc=!0,i.ad?n.collapseSubGraph(i):n.expandSubGraph(i)}}},t}),Is("ToolTip",function(){var t=new Ac(Gs),e=new Ml;return e.name="Border",e.fill="#FFFFE0",e.stroke="#CCCCCC",t.add(e),t}),Is("ContextMenu",function(){return new Ac(qs)}),Is("ContextMenuButton",function(){var t=is("Button");t.stretch=$a;var e=t.Bd("ButtonBorder");return e instanceof Ml&&(e.Db="Rectangle",e.A=new Mt(0,0,2,3),e.B=new Mt(1,1,-2,-2)),t}),Is("PanelExpanderButton",function(t){var e=Os(t,"COLLAPSIBLE"),i=is("Button",{_buttonExpandedFigure:"TriangleUp",_buttonCollapsedFigure:"TriangleDown"},is(Ml,"TriangleUp",{name:"ButtonIcon",Ca:new dt(6,4)},new ji("figure","visible",function(t){return t?i._buttonExpandedFigure:i._buttonCollapsedFigure}).Xx(e)));return(t=i.Bd("ButtonBorder"))instanceof Ml&&(t.stroke=null,t.fill="transparent"),i.click=function(t,i){var n=i.g;if(null!==n&&!n.hb){var o=i.Tl();null===o&&(o=i.U),null!==o&&(null!==(o=o.Bd(e))&&(n.Hb("Collapse/Expand Panel"),o.visible=!o.visible,n.Yc("Collapse/Expand Panel")))}},i}),Is("CheckBoxButton",function(t){var e=Os(t);return(t=is("Button",{"ButtonBorder.fill":"white","ButtonBorder.stroke":"gray",width:14,height:14},is(Ml,{name:"ButtonIcon",aI:"M0 4 L3 9 9 0",mb:2,stretch:Ya,BA:Xa,visible:!1},""!==e?new ji("visible",e).RI():[]))).click=function(t,i){var n=t.g;if(!(null===n||n.hb||""!==e&&n.$.hb)){t.tc=!0;var o=i.Bd("ButtonIcon");n.Hb("checkbox"),o.visible=!o.visible,"function"==typeof i._doClick&&i._doClick(t,i),n.Yc("checkbox")}},t}),Is("CheckBox",function(t){t=Os(t),t=is("CheckBoxButton",t,{name:"Button",margin:new wt(0,1,0,0)});var e=is(Ys,"Horizontal",t,{Fx:!0,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillDisabled:t._buttonFillDisabled,Du:t.Du,Eu:t.Eu,click:t.click,_buttonClick:t.click});return t.Du=null,t.Eu=null,t.click=null,e}),$s.prototype.copy=function(){var t=new $s;return t.Ai=this.Ai,t.Ii=this.Ii,t.Ci=this.Ci,t.vs=this.vs,t.ws=this.ws,t.Yi=this.Yi,t.Xi=this.Xi,t.Wi=this.Wi,t.ts=this.ts,t.us=this.us,t.Vi=this.Vi,t.Iq=this.Iq,t.Jq=this.Jq,t.Kq=this.Kq,t.Hq=this.Hq,t.gj=this.gj,t.Di=this.Di,t.Ar=this.Ar,t},r.La(Ys,ls),r.mi(Ys),r.ga("Panel",Ys),Ys.prototype.cloneProtected=function(t){if(ls.prototype.cloneProtected.call(this,t),t.na=this.na,t.mf=this.mf.S(),t.mr=this.mr.S(),t.Gi=this.Gi,t.na===Vs){t.Pj=this.Pj.S(),t.Ph=this.Ph,t.Fi=this.Fi,t.zm=this.zm,t.Oh=this.Oh,t.Nh=this.Nh,t.ym=this.ym;var e=[];if(0<this.Xc.length)for(var i=this.Xc,n=i.length,o=0;o<n;o++)if(void 0!==i[o]){var r=i[o].copy();r.hm(t),e[o]=r}if(t.Xc=e,e=[],0<this.Uc.length)for(n=(i=this.Uc).length,o=0;o<n;o++)void 0!==i[o]&&((r=i[o].copy()).hm(t),e[o]=r);t.Uc=e,t.Xm=this.Xm,t.xm=this.xm,t.hj=this.hj,t.Ri=this.Ri}t.Ap=this.Ap,t.Mr=this.Mr.S(),t.Nr=this.Nr.S(),t.Jr=this.Jr,t.Ir=this.Ir,t.Lr=this.Lr,t.Kr=this.Kr,t.Dm=this.Dm,t.Xj=this.Xj,t.Zd=this.Zd,t.el=this.el,t.as=this.as,t.dk=this.dk,t.xg=this.xg,t.Qo=this.Qo,t.ij.assign(this.ij),t.Lj=this.Lj,null!==this.at&&(t.at=this.at)},Ys.prototype.ni=function(t){ls.prototype.ni.call(this,t),t.xa=this.xa;for(var e=t.xa.n,i=e.length,n=0;n<i;n++)e[n].bj=t;t.Bl=null},Ys.prototype.copy=function(){var t=ls.prototype.copy.call(this);if(null!==t){for(var e=this.xa.n,i=e.length,n=0;n<i;n++){var o=e[n].copy(),r=t;o.hm(r),o.Um=null;var a=r.xa,s=a.count;if(a.Rd(s,o),null!==(a=r.U)){a.Pm=null,null!==o.Vd&&a instanceof Fc&&(a.Kk=!0);var l=r.g;null!==l&&l.ja.lb||a.cd(Yt,"elements",r,null,o,null,s)}}return t}return null},Ys.prototype.hc=function(t){t.Ge===Ys?this.type=t:ls.prototype.hc.call(this,t)},Ys.prototype.toString=function(){return"Panel("+this.type+")#"+r.Pd(this)},Ys.Position=Es=r.p(Ys,"Position",0),Ys.Horizontal=r.p(Ys,"Horizontal",1),Ys.Vertical=qs=r.p(Ys,"Vertical",2),Ys.Spot=Rs=r.p(Ys,"Spot",3),Ys.Auto=Gs=r.p(Ys,"Auto",4),Ys.Table=Vs=r.p(Ys,"Table",5),Ys.Viewbox=r.p(Ys,"Viewbox",6),Ys.TableRow=_s=r.p(Ys,"TableRow",7),Ys.TableColumn=Hs=r.p(Ys,"TableColumn",8),Ys.Link=Ks=r.p(Ys,"Link",9),Ys.Grid=Ws=r.p(Ys,"Grid",10),Ys.Graduated=Us=r.p(Ys,"Graduated",11),r.defineProperty(Ys,{type:"type"},function(){return this.na},function(t){var e=this.na;e!==t&&(e!==_s&&e!==Hs||r.k("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+t),this.na=t,this.na===Ws?this.En=!0:this.na===Vs&&Xs(this),this.H(),this.h("type",e,t))}),r.u(Ys,{elements:"elements"},function(){return this.xa.i}),r.u(Ys,{Ja:"naturalBounds"},function(){return this.Wc}),r.defineProperty(Ys,{padding:"padding"},function(){return this.mf},function(t){"number"==typeof t?(0>t&&r.Fa(t,">= 0",Ys,"padding"),t=new wt(t)):(r.G(t,wt,Ys,"padding"),0>t.left&&r.Fa(t.left,">= 0",Ys,"padding:value.left"),0>t.right&&r.Fa(t.right,">= 0",Ys,"padding:value.right"),0>t.top&&r.Fa(t.top,">= 0",Ys,"padding:value.top"),0>t.bottom&&r.Fa(t.bottom,">= 0",Ys,"padding:value.bottom"));var e=this.mf;e.L(t)||(this.mf=t=t.S(),this.H(),this.h("padding",e,t))}),r.defineProperty(Ys,{Sl:"defaultAlignment"},function(){return this.mr},function(t){var e=this.mr;e.L(t)||(this.mr=t=t.S(),this.H(),this.h("defaultAlignment",e,t))}),r.defineProperty(Ys,{ae:"defaultStretch"},function(){return this.Gi},function(t){var e=this.Gi;e!==t&&(r.ob(t,ls,Ys,"defaultStretch"),this.Gi=t,this.H(),this.h("defaultStretch",e,t))}),r.defineProperty(Ys,{XK:"defaultSeparatorPadding"},function(){return void 0===this.Pj?ee:this.Pj},function(t){if(void 0!==this.Pj){"number"==typeof t&&(t=new wt(t));var e=this.Pj;e.L(t)||(this.Pj=t=t.S(),this.H(),this.h("defaultSeparatorPadding",e,t))}}),r.defineProperty(Ys,{VK:"defaultRowSeparatorStroke"},function(){return void 0===this.Fi?null:this.Fi},function(t){var e=this.Fi;e!==t&&(null===t||"string"==typeof t||t instanceof ja)&&(t instanceof ja&&t.freeze(),this.Fi=t,this.oa(),this.h("defaultRowSeparatorStroke",e,t))}),r.defineProperty(Ys,{WK:"defaultRowSeparatorStrokeWidth"},function(){return void 0===this.Ph?1:this.Ph},function(t){if(void 0!==this.Ph){var e=this.Ph;e!==t&&isFinite(t)&&0<=t&&(this.Ph=t,this.H(),this.h("defaultRowSeparatorStrokeWidth",e,t))}}),r.defineProperty(Ys,{UK:"defaultRowSeparatorDashArray"},function(){return void 0===this.zm?null:this.zm},function(t){if(void 0!==this.zm){var e=this.zm;if(e!==t){if(null===t||Array.isArray(t)||r.Ed(t,"Array",Ys,"defaultRowSeparatorDashArray:value"),null!==t){for(var i=t.length,n=0,o=0;o<i;o++){var a=t[o];"number"==typeof a&&0<=a&&isFinite(a)||r.k("defaultRowSeparatorDashArray value "+a+" at index "+o+" must be a positive number or zero."),n+=a}if(0===n){if(null===e)return;t=null}}this.zm=t,this.oa(),this.h("defaultRowSeparatorDashArray",e,t)}}}),r.defineProperty(Ys,{PK:"defaultColumnSeparatorStroke"},function(){return void 0===this.Nh?null:this.Nh},function(t){if(void 0!==this.Nh){var e=this.Nh;e!==t&&(null===t||"string"==typeof t||t instanceof ja)&&(t instanceof ja&&t.freeze(),this.Nh=t,this.oa(),this.h("defaultColumnSeparatorStroke",e,t))}}),r.defineProperty(Ys,{QK:"defaultColumnSeparatorStrokeWidth"},function(){return void 0===this.Oh?1:this.Oh},function(t){if(void 0!==this.Oh){var e=this.Oh;e!==t&&isFinite(t)&&0<=t&&(this.Oh=t,this.H(),this.h("defaultColumnSeparatorStrokeWidth",e,t))}}),r.defineProperty(Ys,{OK:"defaultColumnSeparatorDashArray"},function(){return void 0===this.ym?null:this.ym},function(t){if(void 0!==this.ym){var e=this.ym;if(e!==t){if(null===t||Array.isArray(t)||r.Ed(t,"Array",Ys,"defaultColumnSeparatorDashArray:value"),null!==t){for(var i=t.length,n=0,o=0;o<i;o++){var a=t[o];"number"==typeof a&&0<=a&&isFinite(a)||r.k("defaultColumnSeparatorDashArray value "+a+" at index "+o+" must be a positive number or zero."),n+=a}if(0===n){if(null===e)return;t=null}}this.ym=t,this.oa(),this.h("defaultColumnSeparatorDashArray",e,t)}}}),r.defineProperty(Ys,{dM:"viewboxStretch"},function(){return this.Ap},function(t){var e=this.Ap;e!==t&&(r.ob(t,ls,Ys,"viewboxStretch"),this.Ap=t,this.H(),this.h("viewboxStretch",e,t))}),r.defineProperty(Ys,{Ex:"gridCellSize"},function(){return this.Mr},function(t){var e=this.Mr;if(!e.L(t)){r.G(t,dt,Ys,"gridCellSize"),t.I()&&0!==t.width&&0!==t.height||r.k("Invalid Panel.gridCellSize: "+t),this.Mr=t.S();var i=this.g;null!==i&&this===i.Bn&&zr(i),this.oa(),this.h("gridCellSize",e,t)}}),r.defineProperty(Ys,{pF:"gridOrigin"},function(){return this.Nr},function(t){var e=this.Nr;if(!e.L(t)){r.G(t,ut,Ys,"gridOrigin"),t.I()||r.k("Invalid Panel.gridOrigin: "+t),this.Nr=t.S();var i=this.g;null!==i&&this===i.Bn&&zr(i),this.oa(),this.h("gridOrigin",e,t)}}),r.defineProperty(Ys,{Jk:"graduatedMin"},function(){return this.Jr},function(t){r.zd(t,Ys,"graduatedMin");var e=this.Jr;e!==t&&(this.Jr=t,this.H(),this.h("graduatedMin",e,t),Ts(this)&&(null!==(t=this.U)&&cs(this,t,"graduatedRange")))}),r.defineProperty(Ys,{EA:"graduatedMax"},function(){return this.Ir},function(t){r.zd(t,Ys,"graduatedMax");var e=this.Ir;e!==t&&(this.Ir=t,this.H(),this.h("graduatedMax",e,t),Ts(this)&&(null!==(t=this.U)&&cs(this,t,"graduatedRange")))}),r.u(Ys,{hu:"graduatedRange"},function(){return this.EA-this.Jk}),r.defineProperty(Ys,{FA:"graduatedTickUnit"},function(){return this.Lr},function(t){r.zd(t,Ys,"graduatedTickUnit");var e=this.Lr;e!==t&&0<t&&(this.Lr=t,this.H(),this.h("graduatedTickUnit",e,t))}),r.defineProperty(Ys,{oF:"graduatedTickBase"},function(){return this.Kr},function(t){r.zd(t,Ys,"graduatedTickBase");var e=this.Kr;e!==t&&(this.Kr=t,this.H(),this.h("graduatedTickBase",e,t))}),(i=Ys.prototype).Es=function(t){ls.prototype.Es.call(this,t);for(var e=this.xa.n,i=e.length,n=0;n<i;n++)e[n].Es(t)},i.Ek=function(t,e){if(this.na===Ws){var i=this.sj()*e.scale;0>=i&&(i=1);var n=(o=this.Ex).width,o=o.height,r=(a=this.Ja).width,a=a.height,s=Math.ceil(r/n),l=Math.ceil(a/o),h=this.pF;t.save(),t.beginPath(),t.rect(0,0,r,a),t.clip();for(var u=[],c=this.xa.n,f=c.length,d=0;d<f;d++){var p=c[d],y=[];if(u.push(y),p.visible){p=il(p.Db);for(var v=d+1;v<f;v++){(g=c[v]).visible&&il(g.Db)===p&&(2<=(g=g.interval)&&y.push(g))}}}for(f=(c=this.xa.n).length,d=0;d<f;d++){var m=c[d];if(m.visible&&!(2>n*(y=m.interval)*i)){if(v=1,1!==(p=m.opacity)){if(0===p)continue;v=t.globalAlpha,t.globalAlpha=v*p}var g=u[d],x=!1,w=!0,k=m.xG;if(null!==k&&(x=!0,w=t.vA(k,m.zf)),"LineV"===m.Db&&null!==m.stroke){t.lineWidth=m.mb,ms(this,t,m.stroke,!1,!1),t.beginPath();for(var M=Math.floor(-h.x/n),S=M;S<=M+s;S++){var T=S*n+h.x;0<=T&&T<=r&&el(S,y,g)&&(x&&!w?us(t,T,0,T,a,k,m.zf):(t.moveTo(T,0),t.lineTo(T,a)))}t.stroke()}else if("LineH"===m.Db&&null!==m.stroke){for(t.lineWidth=m.mb,ms(this,t,m.stroke,!1,!1),t.beginPath(),S=M=Math.floor(-h.y/o);S<=M+l;S++)0<=(T=S*o+h.y)&&T<=a&&el(S,y,g)&&(x&&!w?us(t,0,T,r,T,k,m.zf):(t.moveTo(0,T),t.lineTo(r,T)));t.stroke()}else if("BarV"===m.Db&&null!==m.fill)for(ms(this,t,m.fill,!0,!1),m=m.width,isNaN(m)&&(m=n),S=M=Math.floor(-h.x/n);S<=M+s;S++)0<=(T=S*n+h.x)&&T<=r&&el(S,y,g)&&t.fillRect(T,0,m,a);else if("BarH"===m.Db&&null!==m.fill)for(ms(this,t,m.fill,!0,!1),m=m.height,isNaN(m)&&(m=o),S=M=Math.floor(-h.y/o);S<=M+l;S++)0<=(T=S*o+h.y)&&T<=a&&el(S,y,g)&&t.fillRect(0,T,r,m);x&&t.sA(),1!==p&&(t.globalAlpha=v)}}t.restore(),t.He(!1)}else if(this.na===Us){for(i=(n=this.Ja).width,n=n.height,t.save(),t.beginPath(),t.rect(-1,-1,i+1,n+1),t.clip(),(i=this.Ad()).ve(t,e),0>=(n=this.sj()*e.scale)&&(n=1),o=i.Y,r=this.xa.n,a=this.Dm,s=r.length,l=0;l<s;l++)if(f=r[l],u=(h=a[l]).length,f.visible&&f!==i&&0!==h.length)if(f instanceof Ml){if(!(2>this.FA*f.interval*i.of.$t/this.hu*n))for(d=f.za,y=f.mb*f.scale,(p=f.oh).Td()&&(p=b),c=0;c<u;c++)v=f,g=h[c][0],x=o,M=h[c][1],S=d,m=y,w=p,(k=v.kd).reset(),k.translate(g.x+x.x,g.y+x.y),k.rotate(M+v.angle,0,0),k.translate(-S.width*w.x+w.offsetX+m/2,-S.height*w.y+w.offsetY+m/2),k.scale(v.scale,v.scale),Ns(v,!1),v.sm.set(v.kd),v.Ao=v.scale,Cs(v,!1),f.ve(t,e),f.kd.reset()}else if(f instanceof Ll)for(null===this.qk&&(this.qk=new Ll),Qs(f,d=this.qk),c=0;c<u;c++)3<(g=h[c]).length&&(p=g[6],d.Md=g[2],d.mg=g[3],d.me=g[4],d.yf=g[5],d.Wc=g[8],d.ic(p.x,p.y,p.width,p.height),f=d,y=o,v=g[7],g=g[8],(x=f.kd).reset(),x.translate(p.x+y.x,p.y+y.y),x.translate(-v.x,-v.y),bs(f,x,g.x,g.y,g.width,g.height),Ns(f,!1),f.sm.set(f.kd),f.Ao=f.scale,Cs(f,!1),d.ve(t,e));t.restore(),t.He(!0)}else{for(this.na===Vs&&(t.lineCap="butt",tl(this,t,!0,this.Xc,!0),tl(this,t,!1,this.Uc,!0),Zs(this,t,!0,this.Xc),Zs(this,t,!1,this.Uc),tl(this,t,!0,this.Xc,!1),tl(this,t,!1,this.Uc,!1)),(i=this.mu)&&t.save(),n=this.Ad(),r=(o=this.xa.n).length,a=0;a<r;a++)s=o[a],i&&s===n&&(t.Jp=!0),s.ve(t,e),i&&s===n&&(t.Jp=!1);i&&(t.restore(),t.He(!0))}},i.zn=function(t,e,i,n,o){var a=this.Yg(),s=this.transform,l=1/(s.m11*s.m22-s.m12*s.m21),h=s.m22*l,u=-s.m12*l,c=-s.m21*l,f=s.m11*l,d=l*(s.m21*s.dy-s.m22*s.dx),p=l*(s.m12*s.dx-s.m11*s.dy);if(null!==this.kn)return Be((s=this.Y).left,s.top,s.right,s.bottom,t,e,i,n,o);if(null!==this.background)a=t*h+e*c+d,l=t*u+e*f+p,t=i*h+n*c+d,h=i*u+n*f+p,o.m(0,0),i=Be(0,0,(i=this.Ja).width,i.height,a,l,t,h,o),o.transform(s);else{a||(h=1,c=u=0,f=1,p=d=0),l=t*h+e*c+d,t=t*u+e*f+p,h=i*h+n*c+d,n=i*u+n*f+p,o.m(h,n),u=(h-l)*(h-l)+(n-t)*(n-t),i=!1,p=(f=this.xa.n).length,c=r.K(),d=null,e=1/0;var y=null;this.mu&&(y=r.K(),(i=(d=this.Ad()).zn(l,t,h,n,y))&&(e=(l-y.x)*(l-y.x)+(t-y.y)*(t-y.y)));for(var v=0;v<p;v++){var m=f[v];m.visible&&m!==d&&m.zn(l,t,h,n,c)&&(i=!0,(m=(l-c.x)*(l-c.x)+(t-c.y)*(t-c.y))<u&&(u=m,o.set(c)))}this.mu&&(e>u&&o.set(y),r.v(y)),r.v(c),a&&o.transform(s)}return i},i.H=function(t){ls.prototype.H.call(this,t),t=null,this.na!==Gs&&this.na!==Ks||(t=this.Ad());for(var e=this.xa.n,i=e.length,n=0;n<i;n++){var o=e[n];if((o===t||o.ff)&&o.H(!0),!o.Ca.I()){var r=ws(o,!1);(o instanceof Mf||o instanceof Ys||o instanceof Ll||r!==Wa)&&o.H(!0)}}},i.aq=function(){if(!1===As(this)){Fs(this,!0),Ls(this,!0);for(var t=this.xa.n,e=t.length,i=0;i<e;i++)t[i].aq()}},i.Ni=function(){if(0!=(2048&this.N)==!1){Ns(this,!0),Cs(this,!0);for(var t=this.xa.n,e=t.length,i=0;i<e;i++)t[i].LA()}},i.LA=function(){Cs(this,!0);for(var t=this.xa.n,e=t.length,i=0;i<e;i++)t[i].LA()},i.Ln=function(t,e,i,n){var o=this.ij;o.width=0,o.height=0;var a=this.Ca,s=this.qi;void 0===i&&(i=s.width,n=s.height),i=Math.max(i,s.width),n=Math.max(n,s.height);var l=this.Gf;isNaN(a.width)||(t=Math.min(a.width,l.width)),isNaN(a.height)||(e=Math.min(a.height,l.height)),t=Math.max(i,t),e=Math.max(n,e);var h=this.padding;t=Math.max(t-h.left-h.right,0),e=Math.max(e-h.top-h.bottom,0);var u=this.xa.n;if(0!==u.length){var c=this.na.Rb;switch(c){case"Position":var f=t,d=e,p=i,y=n,v=u.length;o.x=0,o.y=0,o.width=0,o.height=0;for(var m=nl(this),g=0;g<v;g++){var x=u[g];if(x.visible||x===m){var w=x.margin,M=w.right+w.left,S=w.top+w.bottom;ps(x,f,d,p,y);var T=x.za,P=Math.max(T.width+M,0),N=Math.max(T.height+S,0),C=x.position.x,A=x.position.y;if(isFinite(C)||(C=0),isFinite(A)||(A=0),x instanceof Ml){var F=x;if(F.AF){var D=F.mb/2;C=C-D,A=A-D}}xt(o,C,A,P,N)}}break;case"Vertical":for(var L=t,j=i,z=u.length,B=r.eb(),I=nl(this),O=0;O<z;O++){var E=u[O];if(E.visible||E===I){var q=ws(E,!1);if(q!==Wa&&q!==Ja)B.push(E);else{var R=E.margin,G=R.right+R.left,V=R.top+R.bottom;ps(E,L,1/0,j,0);var _=E.za,H=Math.max(_.width+G,0),K=Math.max(_.height+V,0);o.width=Math.max(o.width,H),o.height+=K}}}var W=B.length;if(0!==W){for(this.Ca.width?L=Math.min(this.Ca.width,this.Gf.width):0!==o.width&&(L=Math.min(o.width,this.Gf.width)),O=0;O<W;O++)((E=B[O]).visible||E===I)&&(G=(R=E.margin).right+R.left,V=R.top+R.bottom,ps(E,L,1/0,j,0),_=E.za,H=Math.max(_.width+G,0),K=Math.max(_.height+V,0),o.width=Math.max(o.width,H),o.height+=K);r.ta(B)}break;case"Horizontal":for(var U=e,J=n,$=u.length,Y=r.eb(),X=nl(this),Q=0;Q<$;Q++){var Z=u[Q];if(Z.visible||Z===X){var tt=ws(Z,!1);if(tt!==Wa&&tt!==$a)Y.push(Z);else{var it=Z.margin,nt=it.right+it.left,ot=it.top+it.bottom;ps(Z,1/0,U,0,J);var rt=Z.za,at=Math.max(rt.width+nt,0),st=Math.max(rt.height+ot,0);o.width+=at,o.height=Math.max(o.height,st)}}}var lt=Y.length;if(0!==lt){for(this.Ca.height?U=Math.min(this.Ca.height,this.Gf.height):0!==o.height&&(U=Math.min(o.height,this.Gf.height)),Q=0;Q<lt;Q++)((Z=Y[Q]).visible||Z===X)&&(nt=(it=Z.margin).right+it.left,ot=it.top+it.bottom,ps(Z,1/0,U,0,J),rt=Z.za,at=Math.max(rt.width+nt,0),st=Math.max(rt.height+ot,0),o.width+=at,o.height=Math.max(o.height,st));r.ta(Y)}break;case"Spot":t:{var ht=t,ct=e,ft=i,dt=n,vt=u.length,mt=this.Ad(),gt=mt.margin,bt=0,wt=0,kt=gt.right+gt.left,Mt=gt.top+gt.bottom;ps(mt,ht,ct,ft,dt);for(var St=(zt=mt.za).width,Tt=zt.height,Pt=Math.max(St+kt,0),Nt=Math.max(Tt+Mt,0),Ct=this.mu,At=r.lg(-gt.left,-gt.top,Pt,Nt),Ft=!0,Dt=nl(this),Lt=0;Lt<vt;Lt++){var jt=u[Lt];if(jt!==mt&&(jt.visible||jt===Dt)){bt=(gt=jt.margin).right+gt.left,wt=gt.top+gt.bottom,ps(jt,ht,ct,0,0);var zt=jt.za,Bt=(Pt=Math.max(zt.width+bt,0),Nt=Math.max(zt.height+wt,0),jt.alignment);Bt.Zc()&&(Bt=this.Sl),Bt.$c()||(Bt=k);var It=jt.oh;It.Zc()&&(It=k);var Ot,Et,qt=null;if(jt instanceof Ys&&""!==jt.Lj&&(jt.ic(0,0,zt.width,zt.height),(qt=jt.Bd(jt.Lj))===jt&&(qt=null)),null!==qt){for(var Rt=qt.Ja,Gt=qt.margin,Vt=r.xb(It.x*Rt.width+It.offsetX-Gt.left,It.y*Rt.height+It.offsetY-Gt.top);qt!==jt;)qt.transform.nb(Vt),qt=qt.Q;Ot=Bt.x*St+Bt.offsetX-Vt.x,Et=Bt.y*Tt+Bt.offsetY-Vt.y,r.v(Vt)}else Ot=Bt.x*St+Bt.offsetX-(It.x*zt.width-It.offsetX)-gt.left,Et=Bt.y*Tt+Bt.offsetY-(It.y*zt.height-It.offsetY)-gt.top;Ft?(Ft=!1,o.x=Ot,o.y=Et,o.width=Pt,o.height=Nt):xt(o,Ot,Et,Pt,Nt)}}Ft?o.assign(At):Ct?o.uF(At.x,At.y,At.width,At.height):xt(o,At.x,At.y,At.width,At.height),r.Eb(At);var _t=mt.stretch;switch(_t===Ua&&(_t=ws(mt,!1)),_t){case Wa:break t;case Ya:if(!isFinite(ht)&&!isFinite(ct))break t;break;case $a:if(!isFinite(ht))break t;break;case Ja:if(!isFinite(ct))break t}for(St=(zt=mt.za).width,Tt=zt.height,Pt=Math.max(St+kt,0),Nt=Math.max(Tt+Mt,0),gt=mt.margin,At=r.lg(-gt.left,-gt.top,Pt,Nt),Lt=0;Lt<vt;Lt++)(jt=u[Lt])===mt||!jt.visible&&jt!==Dt||(bt=(gt=jt.margin).right+gt.left,wt=gt.top+gt.bottom,zt=jt.za,Pt=Math.max(zt.width+bt,0),Nt=Math.max(zt.height+wt,0),(Bt=jt.alignment).Zc()&&(Bt=this.Sl),Bt.$c()||(Bt=k),(It=jt.oh).Zc()&&(It=k),Ft?(Ft=!1,o.x=Bt.x*St+Bt.offsetX-(It.x*zt.width-It.offsetX)-gt.left,o.y=Bt.y*Tt+Bt.offsetY-(It.y*zt.height-It.offsetY)-gt.top,o.width=Pt,o.height=Nt):xt(o,Bt.x*St+Bt.offsetX-(It.x*zt.width-It.offsetX)-gt.left,Bt.y*Tt+Bt.offsetY-(It.y*zt.height-It.offsetY)-gt.top,Pt,Nt));Ft?o.assign(At):Ct?o.uF(At.x,At.y,At.width,At.height):xt(o,At.x,At.y,At.width,At.height),r.Eb(At)}break;case"Auto":var Ht=t,Kt=e,Wt=i,Ut=n,Jt=u.length,$t=this.Ad(),Yt=Ht,Xt=Kt,Qt=(de=$t.margin).right+de.left,Zt=de.top+de.bottom;ps($t,Ht,Kt,Wt,Ut);var te=$t.za,ee=0,ie=null;$t instanceof Ml&&(ee=(ie=$t).mb*ie.scale);var ne=Math.max(te.width+Qt,0),oe=Math.max(te.height+Zt,0),re=(me=sl($t)).x*ne+me.offsetX,ae=me.y*oe+me.offsetY,se=(ve=ll($t)).x*ne+ve.offsetX,le=ve.y*oe+ve.offsetY;isFinite(Ht)&&(Yt=Math.max(Math.abs(re-se)-ee,0)),isFinite(Kt)&&(Xt=Math.max(Math.abs(ae-le)-ee,0));var he=r.mm();he.m(0,0);for(var ue=nl(this),ce=0;ce<Jt;ce++){var fe=u[ce];if(fe!==$t&&(fe.visible||fe===ue)){var de,pe=(de=fe.margin).right+de.left,ye=de.top+de.bottom;ps(fe,Yt,Xt,0,0),te=fe.za,ne=Math.max(te.width+pe,0),oe=Math.max(te.height+ye,0),he.m(Math.max(ne,he.width),Math.max(oe,he.height))}}if(1===Jt)o.width=ne,o.height=oe,r.Hk(he);else{var ve,me=sl($t),ge=0,be=0;(ve=ll($t)).x!==me.x&&ve.y!==me.y&&(ge=he.width/Math.abs(ve.x-me.x),be=he.height/Math.abs(ve.y-me.y)),r.Hk(he),ee=0,null!==ie&&(ee=ie.mb*ie.scale,Nl(ie)===Xa&&(ge=be=Math.max(ge,be)));ge=ge+(Math.abs(me.offsetX)+Math.abs(ve.offsetX)+ee),be=be+(Math.abs(me.offsetY)+Math.abs(ve.offsetY)+ee);var xe=$t.stretch;switch(xe===Ua&&(xe=ws($t,!1)),xe){case Wa:Ut=Wt=0;break;case Ya:isFinite(Ht)&&(ge=Ht),isFinite(Kt)&&(be=Kt);break;case $a:isFinite(Ht)&&(ge=Ht),Ut=0;break;case Ja:Wt=0,isFinite(Kt)&&(be=Kt)}$t.aq(),ps($t,ge,be,Wt,Ut),o.width=$t.za.width+Qt,o.height=$t.za.height+Zt}break;case"Table":for(var we=t,Me=e,Se=i,Te=n,Pe=u.length,Ne=r.eb(),Ce=r.eb(),Ae=0;Ae<Pe;Ae++){var Fe=(bi=u[Ae])instanceof Ys?bi:null;if(null===Fe||Fe.type!==_s&&Fe.type!==Hs||!bi.visible)Ne.push(bi);else{Ce.push(Fe);for(var De=Fe.xa.n,Le=De.length,je=0;je<Le;je++){var ze=De[je];Fe.type===_s?ze.Ub=bi.Ub:Fe.type===Hs&&(ze.column=bi.column),Ne.push(ze)}}}0===(Pe=Ne.length)&&(this.de(0),this.ce(0));var Be=[];for(Ae=0;Ae<Pe;Ae++)Fs(bi=Ne[Ae],!0),Ls(bi,!0),Be[bi.Ub]||(Be[bi.Ub]=[]),Be[bi.Ub][bi.column]||(Be[bi.Ub][bi.column]=[]),Be[bi.Ub][bi.column].push(bi);r.ta(Ne);var Ie=r.eb(),Oe=r.eb(),Ee=r.eb(),qe={count:0},Re={count:0},Ge=we,Ve=Me,_e=this.Xc;for(Pe=_e.length,Ae=0;Ae<Pe;Ae++){void 0!==(Oi=_e[Ae])&&(Oi.Ya=0)}for(Pe=(_e=this.Uc).length,Ae=0;Ae<Pe;Ae++)void 0!==(Oi=_e[Ae])&&(Oi.Ya=0);var He=Be.length,Ke=0;for(Ae=0;Ae<He;Ae++)Be[Ae]&&(Ke=Math.max(Ke,Be[Ae].length));var We=Math.min(this.hj,He-1),Ue=Math.min(this.Ri,Ke-1),Je=0,$e=(He=Be.length,nl(this));for(Ae=0;Ae<He;Ae++)if(Be[Ae])for(Ke=Be[Ae].length,je=(xi=this.de(Ae)).Ya=0;je<Ke;je++)if(Be[Ae][je]){var Ye=this.ce(je);void 0===Ie[je]&&(Ye.Ya=0,Ie[je]=!0);for(var Xe=Be[Ae][je],Qe=Xe.length,Ze=0;Ze<Qe;Ze++)if((bi=Xe[Ze]).visible||bi===$e){var ti=1<bi.dj||1<bi.Bi;ti&&(Ae<We||je<Ue||Oe.push(bi));var ei=(gi=bi.margin).right+gi.left,ii=gi.top+gi.bottom,ni=ks(bi,xi,Ye,!1),oi=bi.Ca,ri=!isNaN(oi.height),ai=!isNaN(oi.width)&&ri;if(ti||ni===Wa||ai||Ae<We||je<Ue||(void 0!==qe[je]||ni!==Ya&&ni!==$a||(qe[je]=-1,qe.count++),void 0!==Re[Ae]||ni!==Ya&&ni!==Ja||(Re[Ae]=-1,Re.count++),Ee.push(bi)),ps(bi,1/0,1/0,0,0),!(Ae<We||je<Ue)){var si=bi.za,li=Math.max(si.width+ei,0),hi=Math.max(si.height+ii,0);if(1===bi.dj&&(ni===Wa||ni===$a)){var ui=(Oi=this.de(Ae)).Ze();(Je=Math.max(hi-Oi.Ya,0))+ui>Ve&&(Je=Math.max(Ve-ui,0));var ci=0===Oi.Ya;Oi.Ya+=Je,Ve=Math.max(Ve-(Je+(ci?ui:0)),0)}1!==bi.Bi||ni!==Wa&&ni!==Ja||(ui=(Oi=this.ce(je)).Ze(),(Je=Math.max(li-Oi.Ya,0))+ui>Ge&&(Je=Math.max(Ge-ui,0)),ci=0===Oi.Ya,Oi.Ya+=Je,Ge=Math.max(Ge-(Je+(ci?ui:0)),0)),ti&&bi.aq()}}}r.ta(Ie);var fi=0,di=0;for(Pe=this.Kp,Ae=0;Ae<Pe;Ae++){var pi=this.Uc[Ae];void 0!==pi&&(fi+=pi.Ra,0!==pi.Ra&&(fi+=pi.Ze()))}for(Pe=this.wq,Ae=0;Ae<Pe;Ae++){var yi=this.Xc[Ae];void 0!==yi&&(di+=yi.Ra,0!==yi.Ra&&(di+=yi.Ze()))}Ge=Math.max(we-fi,0);var vi=Ve=Math.max(Me-di,0),mi=Ge;for(Pe=Ee.length,Ae=0;Ae<Pe;Ae++){var gi,bi=Ee[Ae],xi=this.de(bi.Ub),wi=(Ye=this.ce(bi.column),bi.za);ei=(gi=bi.margin).right+gi.left,ii=gi.top+gi.bottom;qe[bi.column]=0===Ye.Ya&&void 0!==qe[bi.column]?Math.max(wi.width+ei,qe[bi.column]):null,Re[bi.Ub]=0===xi.Ya&&void 0!==Re[bi.Ub]?Math.max(wi.height+ii,Re[bi.Ub]):null}var ki,Mi=0,Si=0;for(ki in Re)"count"!==ki&&(Mi+=Re[ki]);for(ki in qe)"count"!==ki&&(Si+=qe[ki]);var Ti=r.mm();for(Ae=0;Ae<Pe;Ae++)if((bi=Ee[Ae]).visible||bi===$e){xi=this.de(bi.Ub),Ye=this.ce(bi.column);var Pi=0;isFinite(Ye.width)?Pi=Ye.width:(Pi=isFinite(Ge)&&null!==qe[bi.column]?0===Si?Ye.Ya+Ge:qe[bi.column]/Si*mi:null!==qe[bi.column]?Ge:Ye.Ya||Ge,Pi=Math.max(0,Pi-Ye.Ze()));var Ni=0;switch(isFinite(xi.height)?Ni=xi.height:(Ni=isFinite(Ve)&&null!==Re[bi.Ub]?0===Mi?xi.Ya+Ve:Re[bi.Ub]/Mi*vi:null!==Re[bi.Ub]?Ve:xi.Ya||Ve,Ni=Math.max(0,Ni-xi.Ze())),Ti.m(Math.max(Ye.Bh,Math.min(Pi,Ye.ie)),Math.max(xi.Bh,Math.min(Ni,xi.ie))),ni=ks(bi,xi,Ye,!1)){case $a:Ti.height=Math.max(Ti.height,xi.Ya+Ve);break;case Ja:Ti.width=Math.max(Ti.width,Ye.Ya+Ge)}ei=(gi=bi.margin).right+gi.left,ii=gi.top+gi.bottom,bi.aq(),ps(bi,Ti.width,Ti.height,Ye.Bh,xi.Bh),si=bi.za,li=Math.max(si.width+ei,0),hi=Math.max(si.height+ii,0),isFinite(Ge)&&(li=Math.min(li,Ti.width)),isFinite(Ve)&&(hi=Math.min(hi,Ti.height));var Ci=0;Ci=xi.Ya;xi.Ya=Math.max(xi.Ya,hi),Je=xi.Ya-Ci,Ve=Math.max(Ve-Je,0),Ci=Ye.Ya,Ye.Ya=Math.max(Ye.Ya,li),Je=Ye.Ya-Ci,Ge=Math.max(Ge-Je,0)}r.ta(Ee);var Ai=r.mm();if(0!==(Pe=Oe.length)){var Fi=r.eb(),Di=r.eb();for(Ae=0;Ae<He;Ae++)if(Be[Ae])for(Ke=Be[Ae].length,xi=this.de(Ae),Fi[Ae]=xi.Ya,je=0;je<Ke;je++)Be[Ae][je]&&(Ye=this.ce(je),Di[je]=Ye.Ya)}for(Ae=0;Ae<Pe;Ae++)if((bi=Oe[Ae]).visible||bi===$e){switch(xi=this.de(bi.Ub),Ye=this.ce(bi.column),Ti.m(Math.max(Ye.Bh,Math.min(we,Ye.ie)),Math.max(xi.Bh,Math.min(Me,xi.ie))),ni=ks(bi,xi,Ye,!1)){case Ya:0!==Di[Ye.index]&&(Ti.width=Math.min(Ti.width,Di[Ye.index])),0!==Fi[xi.index]&&(Ti.height=Math.min(Ti.height,Fi[xi.index]));break;case $a:0!==Di[Ye.index]&&(Ti.width=Math.min(Ti.width,Di[Ye.index]));break;case Ja:0!==Fi[xi.index]&&(Ti.height=Math.min(Ti.height,Fi[xi.index]))}isFinite(Ye.width)&&(Ti.width=Ye.width),isFinite(xi.height)&&(Ti.height=xi.height),Ai.m(0,0);for(var Li=1;Li<bi.dj&&!(bi.Ub+Li>=this.wq);Li++)Oi=this.de(bi.Ub+Li),Je=ni===Ya||ni===Ja?Math.max(Oi.Bh,0===Fi[bi.Ub+Li]?Oi.ie:Math.min(Fi[bi.Ub+Li],Oi.ie)):Math.max(Oi.Bh,isNaN(Oi.nf)?Oi.ie:Math.min(Oi.nf,Oi.ie)),Ai.height+=Je;for(Li=1;Li<bi.Bi&&!(bi.column+Li>=this.Kp);Li++)Oi=this.ce(bi.column+Li),Je=ni===Ya||ni===$a?Math.max(Oi.Bh,0===Di[bi.column+Li]?Oi.ie:Math.min(Di[bi.column+Li],Oi.ie)):Math.max(Oi.Bh,isNaN(Oi.nf)?Oi.ie:Math.min(Oi.nf,Oi.ie)),Ai.width+=Je;Ti.width+=Ai.width,Ti.height+=Ai.height,ei=(gi=bi.margin).right+gi.left,ii=gi.top+gi.bottom,ps(bi,Ti.width,Ti.height,Se,Te);si=bi.za,li=Math.max(si.width+ei,0),hi=Math.max(si.height+ii,0);var ji=0;for(Li=0;Li<bi.dj&&!(bi.Ub+Li>=this.wq);Li++)ji+=(Oi=this.de(bi.Ub+Li)).total||0;if(ji<hi){var zi=hi-ji,Bi=hi-ji;if(null!==bi.wy){var Ii=bi.wy;for(Li=0;Li<bi.dj&&!(0>=zi)&&!(bi.Ub+Li>=this.wq);Li++){var Oi,Ei=(Oi=this.de(bi.Ub+Li)).Ra||0,qi=Ii(bi,Oi,Bi);Oi.Ya=Math.min(Oi.ie,Ei+qi),Oi.Ra!==Ei&&(zi-=Oi.Ra-Ei)}}for(;0<zi&&(Ei=Oi.Ra||0,isNaN(Oi.height)&&Oi.ie>Ei&&(Oi.Ya=Math.min(Oi.ie,Ei+zi),Oi.Ra!==Ei&&(zi-=Oi.Ra-Ei)),0!==Oi.index);)Oi=this.de(Oi.index-1)}var Ri=0;for(Li=0;Li<bi.Bi&&!(bi.column+Li>=this.Kp);Li++)Ri+=(Oi=this.ce(bi.column+Li)).total||0;if(Ri<li){if(zi=li-Ri,Bi=li-Ri,null!==bi.wy)for(Ii=bi.wy,Li=0;Li<bi.Bi&&!(0>=zi)&&!(bi.column+Li>=this.Kp);Li++)Ei=(Oi=this.ce(bi.column+Li)).Ra||0,qi=Ii(bi,Oi,Bi),Oi.Ya=Math.min(Oi.ie,Ei+qi),Oi.Ra!==Ei&&(zi-=Oi.Ra-Ei);for(;0<zi&&(Ei=Oi.Ra||0,isNaN(Oi.width)&&Oi.ie>Ei&&(Oi.Ya=Math.min(Oi.ie,Ei+zi),Oi.Ra!==Ei&&(zi-=Oi.Ra-Ei)),0!==Oi.index);)Oi=this.ce(Oi.index-1)}}r.ta(Oe),r.Hk(Ai),r.Hk(Ti),void 0!==Fi&&r.ta(Fi),void 0!==Di&&r.ta(Di);var Gi=0,Vi=0,_i=(ni=ws(this,!0),this.Ca),Hi=this.Gf,Ki=di=fi=0,Wi=0;for(Pe=this.Kp,Ae=0;Ae<Pe;Ae++)void 0!==this.Uc[Ae]&&(Oi=this.ce(Ae),isFinite(Oi.width)?(Ki+=Oi.width,Ki+=Oi.Ze()):kl(Oi)===vl?(Ki+=Oi.Ra,Ki+=Oi.Ze()):0!==Oi.Ra&&(fi+=Oi.Ra,fi+=Oi.Ze()));Gi=isFinite(_i.width)?Math.min(_i.width,Hi.width):ni!==Wa&&isFinite(we)?we:fi,Gi=Math.max(Gi,this.qi.width),Gi=Math.max(Gi-Ki,0);var Ui=Math.max(Gi/fi,1);for(isFinite(Ui)||(Ui=1),Ae=0;Ae<Pe;Ae++)void 0!==this.Uc[Ae]&&(Oi=this.ce(Ae),isFinite(Oi.width)||kl(Oi)===vl||(Oi.Ya=Oi.Ra*Ui),Oi.position=o.width,0!==Oi.Ra&&(o.width+=Oi.Ra,o.width+=Oi.Ze()));for(Pe=this.wq,Ae=0;Ae<Pe;Ae++)void 0!==this.Xc[Ae]&&(Oi=this.de(Ae),isFinite(Oi.height)?(Wi+=Oi.height,Wi+=Oi.Ze()):kl(Oi)===vl?(Wi+=Oi.Ra,Wi+=Oi.Ze()):0!==Oi.Ra&&(di+=Oi.Ra,0!==Oi.Ra&&(di+=Oi.Ze())));Vi=isFinite(_i.height)?Math.min(_i.height,Hi.height):ni!==Wa&&isFinite(Me)?Me:di,Vi=Math.max(Vi,this.qi.height),Vi=Math.max(Vi-Wi,0);var Ji=Math.max(Vi/di,1);for(isFinite(Ji)||(Ji=1),Ae=0;Ae<Pe;Ae++)void 0!==this.Xc[Ae]&&(Oi=this.de(Ae),isFinite(Oi.height)||kl(Oi)===vl||(Oi.Ya=Oi.Ra*Ji),Oi.position=o.height,0!==Oi.Ra&&(o.height+=Oi.Ra,0!==Oi.Ra&&(o.height+=Oi.Ze())));for(Pe=Ce.length,Ae=0;Ae<Pe;Ae++){var $i=Ce[Ae];$i.type===_s?(Pi=o.width,Ni=(Oi=this.de($i.Ub)).Ya):(Pi=(Oi=this.ce($i.column)).Ya,Ni=o.height),$i.ud.m(0,0,Pi,Ni),Fs($i,!1),Be[$i.Ub]||(Be[$i.Ub]=[]),Be[$i.Ub][$i.column]||(Be[$i.Ub][$i.column]=[]),Be[$i.Ub][$i.column].push($i)}r.ta(Ce),this.at=Be;break;case"Viewbox":var Yi=t,Xi=e,Qi=i,Zi=n;1<u.length&&r.k("Viewbox Panel cannot contain more than one GraphObject.");var tn=u[0];tn.vb=1,tn.aq(),ps(tn,1/0,1/0,Qi,Zi);var en=tn.za,nn=tn.margin,on=nn.right+nn.left,rn=nn.top+nn.bottom;if(isFinite(Yi)||isFinite(Xi)){var an=tn.scale,sn=en.width,ln=en.height,hn=Math.max(Yi-on,0),un=Math.max(Xi-rn,0),cn=1;this.Ap===Xa?0!==sn&&0!==ln&&(cn=Math.min(hn/sn,un/ln)):0!==sn&&0!==ln&&(cn=Math.max(hn/sn,un/ln)),0===cn&&(cn=1e-4),tn.vb*=cn,an!==tn.scale&&(Fs(tn,!0),ps(tn,1/0,1/0,Qi,Zi))}en=tn.za,o.width=isFinite(Yi)?Yi:Math.max(en.width+on,0),o.height=isFinite(Xi)?Xi:Math.max(en.height+rn,0);break;case"Link":var fn=u.length;if(this instanceof Ac||this instanceof Rc){var dn=null;if(this instanceof Rc&&(dn=this),this instanceof Ac&&(dn=this.Xe),dn instanceof Rc){var pn=dn;if(0===fn){yt(Kn=this.Ja,0,0),(Hn=this.za).m(0,0,0,0)}else{var yn=this instanceof Ac?null:dn.path,vn=dn.Vn,mn=this.ij;mn.assign(vn),mn.x=0,mn.y=0;var gn=pn.points,bn=dn.qa;this.Bu(!1);var xn=vn.width,wn=vn.height;this.Ui.m(vn.x,vn.y),null===this.Zg&&(this.Zg=new et(pt)),this.Zg.clear(),null!==yn&&(Pl(yn,xn,wn,this),Hn=yn.za,mn.Ih(Hn),this.Zg.add(Hn));for(var kn=r.Wg(),Mn=r.K(),Sn=r.K(),Tn=0;Tn<fn;Tn++){var Pn=u[Tn];if(Pn!==yn)if(Pn.ff&&Pn instanceof Ml)Pl(Pn,xn,wn,this),Hn=Pn.za,mn.Ih(Hn),this.Zg.add(Hn);else if(2>bn)ps(Pn,1/0,1/0),Hn=Pn.za,mn.Ih(Hn),this.Zg.add(Hn);else{var Nn=Pn.Oe,Cn=Pn.tB,An=Pn.oh;An.Td()&&(An=k);var Fn=Pn.xq,Dn=Pn.uB,Ln=0,jn=0,zn=0;if(Nn<-bn||Nn>=bn){var Bn=pn.PF,In=pn.OF;Fn!==Uh&&(zn=pn.computeAngle(Pn,Fn,In),Pn.mg=zn),Ln=Bn.x-vn.x,jn=Bn.y-vn.y}else{var On,En;if(0<=Nn)On=gn.ea(Nn),En=Nn<bn-1?gn.ea(Nn+1):On;else{var qn=bn+Nn;On=gn.ea(qn),En=0<qn?gn.ea(qn-1):On}if(On.Oc(En)){var Rn,Gn;0<=Nn?(Rn=0<Nn?gn.ea(Nn-1):On,Gn=Nn<bn-2?gn.ea(Nn+2):En):(Rn=qn<bn-1?gn.ea(qn+1):On,Gn=1<qn?gn.ea(qn-2):En);var Vn=Rn.Bf(On),_n=En.Bf(Gn);In=Vn>_n+10?0<=Nn?Rn.Pb(On):On.Pb(Rn):_n>Vn+10?0<=Nn?En.Pb(Gn):Gn.Pb(En):0<=Nn?Rn.Pb(Gn):Gn.Pb(Rn)}else In=0<=Nn?On.Pb(En):En.Pb(On);Fn!==Uh&&(zn=pn.computeAngle(Pn,Fn,In),Pn.mg=zn),Ln=On.x+(En.x-On.x)*Cn-vn.x,jn=On.y+(En.y-On.y)*Cn-vn.y}ps(Pn,1/0,1/0);var Hn=Pn.za,Kn=Pn.Ja,Wn=0;Pn instanceof Ml&&(Wn=Pn.mb);var Un=Kn.width+Wn,Jn=Kn.height+Wn;kn.reset(),kn.translate(-Hn.x,-Hn.y),kn.scale(Pn.scale,Pn.scale),kn.rotate(Fn===Uh?Pn.angle:In,Un/2,Jn/2),Fn!==eu&&Fn!==ru||kn.rotate(90,Un/2,Jn/2),Fn!==iu&&Fn!==au||kn.rotate(-90,Un/2,Jn/2),Fn===su&&(45<In&&135>In||225<In&&315>In)&&kn.rotate(-In,Un/2,Jn/2);var $n=new pt(0,0,Un,Jn);Mn.Wn($n,An),kn.nb(Mn);var Yn=-Mn.x+Wn/2*Pn.scale,Xn=-Mn.y+Wn/2*Pn.scale;Sn.assign(Dn),isNaN(Sn.x)&&(Sn.x=0<=Nn?Un/2+3:-(Un/2+3)),isNaN(Sn.y)&&(Sn.y=-(Jn/2+3)),Sn.rotate(In),Ln+=Sn.x,jn+=Sn.y,$n.set(Hn),$n.x=Ln+Yn,$n.y=jn+Xn,this.Zg.add($n),mn.Ih($n)}}if(this instanceof Rc)for(var Qn=this.Ef;Qn.next();)ps(Qn.value,1/0,1/0);this.ij=mn;var Zn=this.Ui;Zn.m(Zn.x+mn.x,Zn.y+mn.y),yt(o,mn.width||0,mn.height||0),r.bf(kn),r.v(Mn),r.v(Sn)}}}break;case"Grid":break;case"Graduated":var to=t,eo=e,io=i,no=n,oo=this.Ad();this.Bm=[];var ro=oo.margin,ao=ro.right+ro.left,so=ro.top+ro.bottom;ps(oo,to,eo,io,no);var lo,ho=oo.za,uo=ho.height,co=Math.max(ho.width+ao,0),fo=Math.max(uo+so,0),po=new pt(-ro.left,-ro.top,co,fo);this.Bm.push(po),o.assign(po);for(var yo=oo.of,vo=oo.mb,mo=yo.Cx,go=yo.Zt,bo=yo.$t,xo=mo.length,wo=0,ko=0,Mo=r.eb(),So=0;So<xo;So++){for(var To=mo[So],Po=[],No=(ko=wo=0,To.length),Co=0;Co<No;Co+=2){var Ao=To[Co],Fo=To[Co+1];if(0!==Co)0>(sr=180*Math.atan2(Fo-ko,Ao-wo)/Math.PI)&&(sr+=360),Po.push(sr);wo=Ao,ko=Fo}Mo.push(Po)}if(null===this.Xj){for(var Do=[],Lo=this.xa.n,jo=Lo.length,zo=0;zo<jo;zo++){var Bo=Lo[zo],Io=[];if(Do.push(Io),Bo.visible)for(var Oo=Bo.interval,Eo=0;Eo<jo;Eo++){var qo=Lo[Eo];if(qo.visible&&Bo!==qo&&!(Bo instanceof Ml&&!(qo instanceof Ml)||Bo instanceof Ll&&!(qo instanceof Ll))){var Ro=qo.interval;Ro>Oo&&Io.push(Ro)}}}this.Xj=Do}lo=this.Xj;var Go=this.xa.n,Vo=Go.length,_o=0,Ho=0,Ko=bo;this.Dm=[];for(var Wo=[],Uo=0;Uo<Vo;Uo++){var Jo=Go[Uo];Wo=[];if(Jo.visible&&Jo!==oo){var $o=Jo.interval,Yo=this.FA;if(!(2>Yo*$o*bo/this.hu)){var Xo=this.oF,Qo=lo[Uo],Zo=go[0][0],tr=0,er=0,ir=(Ho=bo*Jo.nF-1e-4,Ko=bo*Jo.lF+1e-4,Yo*$o);if(Xo<this.Jk){var nr;Xo=Xo+(nr=0==(nr=(this.Jk-Xo)/ir)%1?nr:Math.floor(nr+1))*ir}else Xo>this.Jk+ir&&(Xo-=(nr=Math.floor((Xo-this.Jk)/ir))*ir);for(;Xo<=this.EA;){var or;t:{for(var rr=Qo.length,ar=0;ar<rr;ar++)if(ke((Xo-this.oF)%(Qo[ar]*this.FA),0)){or=!1;break t}or=!0}if(or&&((_o=(Xo-this.Jk)*bo/this.hu)>bo&&(_o=bo),Ho<=_o&&_o<=Ko)){for(var sr=Mo[tr][er],lr=go[tr][er];tr<go.length;){for(;_o>Zo&&er<go[tr].length-1;)er++,sr=Mo[tr][er],Zo+=lr=go[tr][er];if(_o<=Zo)break;er=0,sr=Mo[++tr][er],Zo+=lr=go[tr][er]}var hr=mo[tr],ur=hr[2*er],cr=hr[2*er+1],fr=(_o-(Zo-lr))/lr,dr=new ut(ur+(hr[2*er+2]-ur)*fr+vo/2-yo.ab.x,cr+(hr[2*er+3]-cr)*fr+vo/2-yo.ab.y);dr.scale(oo.scale,oo.scale);var pr=sr,yr=Mo[tr];if(1e-4>fr?0<er?pr=yr[er-1]:ke(hr[0],hr[hr.length-2])&&ke(hr[1],hr[hr.length-1])&&(pr=yr[yr.length-1]):.9999<fr&&(er+1<yr.length?pr=yr[er+1]:ke(hr[0],hr[hr.length-2])&&ke(hr[1],hr[hr.length-1])&&(pr=yr[0])),sr!==pr&&(180<Math.abs(sr-pr)&&(sr<pr?sr+=360:pr+=360),sr=(sr+pr)/2%360),Jo instanceof Ll){var vr="";""!==(vr=null!==Jo.mF?Jo.mF(Xo):(+Xo.toFixed(2)).toString())&&Wo.push([dr,sr,vr])}else Wo.push([dr,sr])}Xo+=ir}}}this.Dm.push(Wo)}r.ta(Mo);for(var mr=this.Dm,gr=u.length,br=0;br<gr;br++){var xr=u[br],wr=mr[br];if(xr.visible&&xr!==oo&&0!==wr.length){if(xr instanceof Ml){var kr=xr,Mr=wr,Sr=o,Tr=kr.oh;Tr.Td()&&(Tr=b);var Pr=kr.angle;kr.mg=0,ps(kr,1/0,1/0),kr.mg=Pr;var Nr=kr.za,Cr=Nr.width,Ar=Nr.height,Fr=r.lg(0,0,Cr,Ar),Dr=r.K();Dr.Wn(Fr,Tr),r.Eb(Fr);for(var Lr=-Dr.x,jr=-Dr.y,zr=new pt,Br=Mr.length,Ir=0;Ir<Br;Ir++)for(var Or=Mr[Ir],Er=Or[0].x,qr=Or[0].y,Rr=Or[1],Gr=0;4>Gr;Gr++){switch(Gr){case 0:Dr.m(Lr,jr);break;case 1:Dr.m(Lr+Cr,jr);break;case 2:Dr.m(Lr,jr+Ar);break;case 3:Dr.m(Lr+Cr,jr+Ar)}Dr.rotate(Rr+kr.angle),Dr.offset(Er,qr),0===Ir&&0===Gr?zr.m(Dr.x,Dr.y,0,0):zr.vi(Dr),Dr.offset(-Er,-qr),Dr.rotate(-Rr-kr.angle)}r.v(Dr),this.Bm.push(zr),xt(Sr,zr.x,zr.y,zr.width,zr.height)}else if(xr instanceof Ll){var Vr=xr,_r=wr,Hr=o;null===this.qk&&(this.qk=new Ll);var Kr=this.qk;Qs(Vr,Kr);var Wr=Vr.oh;Wr.Td()&&(Wr=b);for(var Ur=Vr.xq,Jr=Vr.uB,$r=null,Yr=0,Xr=0,Qr=0,Zr=0,ta=_r.length,ea=0;ea<ta;ea++){var ia=_r[ea];Yr=ia[0].x,Xr=ia[0].y,Qr=ia[1];Ur!==Uh&&(Zr=Rc.computeAngle(Ur,Qr),Kr.mg=Zr),Kr.text=ia[2],ps(Kr,1/0,1/0);var na=Kr.za,oa=Kr.Ja,ra=oa.width,aa=oa.height,sa=r.Wg();sa.reset(),sa.translate(-na.x,-na.y),sa.scale(Kr.scale,Kr.scale),sa.rotate(Ur===Uh?Kr.angle:Qr,ra/2,aa/2),Ur!==eu&&Ur!==ru||sa.rotate(90,ra/2,aa/2),Ur!==iu&&Ur!==au||sa.rotate(-90,ra/2,aa/2),Ur===su&&(45<Qr&&135>Qr||225<Qr&&315>Qr)&&sa.rotate(-Qr,ra/2,aa/2);var la=r.lg(0,0,ra,aa),ha=r.K();ha.Wn(la,Wr),sa.nb(ha);var ua=-ha.x,ca=-ha.y,fa=r.K();fa.assign(Jr),isNaN(fa.x)&&(fa.x=ra/2+3),isNaN(fa.y)&&(fa.y=-(aa/2+3)),fa.rotate(Qr);var da=new pt(Yr=Yr+(fa.x+ua),Xr=Xr+(fa.y+ca),na.width,na.height),pa=new pt(na.x,na.y,na.width,na.height),ya=new pt(oa.x,oa.y,oa.width,oa.height),va=new Zl;va.Lp(Kr.yf),ia.push(Zr),ia.push(Kr.me),ia.push(va),ia.push(da),ia.push(pa),ia.push(ya),0===ea?$r=da.copy():$r.Ih(da),r.v(fa),r.v(ha),r.Eb(la),r.bf(sa)}this.Bm.push($r),xt(Hr,$r.x,$r.y,$r.width,$r.height)}Fs(xr,!1)}}break;case"TableRow":case"TableColumn":r.k(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:r.k("Unknown panel type: "+c)}}var ma=o.width,ga=o.height,ba=this.padding,xa=ba.top+ba.bottom;ma+=ba.left+ba.right,ga+=xa;isFinite(a.width)&&(ma=a.width),isFinite(a.height)&&(ga=a.height),ma=Math.min(l.width,ma),ga=Math.min(l.height,ga),ma=Math.max(s.width,ma),ga=Math.max(s.height,ga),ma=Math.max(i,ma),ga=Math.max(n,ga),o.width=ma,o.height=ga,yt(this.Wc,ma,ga),fs(this,0,0,ma,ga)},Ys.prototype.findMainElement=Ys.prototype.Ad=function(){if(null===this.Bl){var t=this.xa.n,e=t.length;if(0===e)return null;for(var i=0;i<e;i++){var n=t[i];if(!0===n.ff)return this.Bl=n}this.Bl=t[0]}return this.Bl},Ys.prototype.mj=function(t,e,i,n){var o=this.ij,a=this.xa.n,s=r.lg(0,0,0,0);if(0===a.length){var l=this.Y;l.x=t,l.y=e,l.width=i,l.height=n}else{if(!this.Ca.I()){var h=ws(this,!0),u=this.ud,c=u.width,f=u.height,d=this.margin,y=d.left+d.right,m=d.top+d.bottom;switch(c===i&&f===n&&(h=Wa),h){case Wa:(c>i||f>n)&&(this.H(),ps(this,c>i?i:c,f>n?n:f));break;case Ya:this.H(!0),ps(this,i+y,n+m,0,0);break;case $a:this.H(!0),ps(this,i+y,f+m,0,0);break;case Ja:this.H(!0),ps(this,c+y,n+m,0,0)}}(l=this.Y).x=t,l.y=e,l.width=i,l.height=n;var g=this.na.Rb;switch(g){case"Position":for(var b=a.length,x=o.x-this.padding.left,w=o.y-this.padding.top,M=0;M<b;M++){var S=a[M],T=S.za,P=S.margin,N=S.position.x,C=S.position.y;if(s.x=isNaN(N)?-x:N-x,s.y=isNaN(C)?-w:C-w,S instanceof Ml){var A=S;if(A.AF){var F=A.mb/2;s.x-=F,s.y-=F}}s.x+=P.left,s.y+=P.top,s.width=T.width,s.height=T.height,S.visible&&S.ic(s.x,s.y,s.width,s.height)}break;case"Vertical":for(var D=a.length,L=this.padding.left,j=this.FF,z=j?o.height:this.padding.top,B=0;B<D;B++){var I=L,O=a[B];if(O.visible){var E=O.za,q=O.margin,R=q.left+q.right,G=L+this.padding.right,V=E.width,_=ws(O,!1);(isNaN(O.Ca.width)&&_===Ya||_===$a)&&(V=Math.max(o.width-R-G,0));var H=V+R+G,K=O.alignment;K.Zc()&&(K=this.Sl),K.$c()||(K=k),j&&(z-=E.height+q.bottom+q.top),O.ic(I+K.offsetX+q.left+(o.width*K.x-H*K.x),z+K.offsetY+q.top,V,E.height),j||(z+=E.height+q.bottom+q.top)}}break;case"Horizontal":for(var W=a.length,U=this.padding.top,J=this.FF,$=J?o.width:this.padding.left,Y=0;Y<W;Y++){var X=U,Q=a[Y];if(Q.visible){var Z=Q.za,tt=Q.margin,et=tt.top+tt.bottom,it=U+this.padding.bottom,nt=Z.height,ot=ws(Q,!1);(isNaN(Q.Ca.height)&&ot===Ya||ot===Ja)&&(nt=Math.max(o.height-et-it,0));var rt=nt+et+it,at=Q.alignment;at.Zc()&&(at=this.Sl),at.$c()||(at=k),J&&($-=Z.width+tt.left+tt.right),Q.ic($+at.offsetX+tt.left,X+at.offsetY+tt.top+(o.height*at.y-rt*at.y),Z.width,nt),J||($+=Z.width+tt.left+tt.right)}}break;case"Spot":var st=a.length,lt=this.Ad(),ht=lt.za,ct=ht.width,ft=ht.height,dt=this.padding,yt=dt.left,mt=dt.top;s.x=yt-o.x,s.y=mt-o.y,lt.ic(s.x,s.y,ct,ft);for(var gt=0;gt<st;gt++){var bt=a[gt];if(bt!==lt){var wt=bt.za,kt=wt.width,Mt=wt.height,St=bt.alignment;St.Zc()&&(St=this.Sl),St.$c()||(St=k);var Tt=bt.oh;Tt.Zc()&&(Tt=k);var Pt=null;if(bt instanceof Ys&&""!==bt.Lj&&((Pt=bt.Bd(bt.Lj))===bt&&(Pt=null)),null!==Pt){for(var Nt=Pt.Ja,Ct=r.xb(Tt.x*Nt.width+Tt.offsetX,Tt.y*Nt.height+Tt.offsetY);Pt!==bt;)Pt.transform.nb(Ct),Pt=Pt.Q;s.x=St.x*ct+St.offsetX-Ct.x,s.y=St.y*ft+St.offsetY-Ct.y,r.v(Ct)}else s.x=St.x*ct+St.offsetX-(Tt.x*kt-Tt.offsetX),s.y=St.y*ft+St.offsetY-(Tt.y*Mt-Tt.offsetY);s.x-=o.x,s.y-=o.y,bt.visible&&bt.ic(yt+s.x,mt+s.y,kt,Mt)}}break;case"Auto":var At=a.length,Ft=this.Ad(),Dt=Ft.za,Lt=r.Kf();Lt.m(0,0,1,1);var jt=(Wt=Ft.margin).left,zt=Wt.top,Bt=this.padding,It=Bt.left,Ot=Bt.top;s.x=jt,s.y=zt,s.width=Dt.width,s.height=Dt.height,Ft.ic(It+s.x,Ot+s.y,s.width,s.height);var Et=sl(Ft),qt=ll(Ft),Rt=0+Et.y*Dt.height+Et.offsetY,Gt=0+qt.x*Dt.width+qt.offsetX,Vt=0+qt.y*Dt.height+qt.offsetY;Lt.x=0+Et.x*Dt.width+Et.offsetX,Lt.y=Rt,xt(Lt,Gt,Vt,0,0),Lt.x+=jt+It,Lt.y+=zt+Ot;for(var _t=0;_t<At;_t++){var Ht=a[_t];if(Ht!==Ft){var Kt=Ht.za,Wt=Ht.margin,Ut=Math.max(Kt.width+Wt.right+Wt.left,0),Jt=Math.max(Kt.height+Wt.top+Wt.bottom,0),$t=Ht.alignment;$t.Zc()&&($t=this.Sl),$t.$c()||($t=k),s.x=Lt.width*$t.x+$t.offsetX-Ut*$t.x+Wt.left+Lt.x,s.y=Lt.height*$t.y+$t.offsetY-Jt*$t.y+Wt.top+Lt.y,s.width=Lt.width,s.height=Lt.height,Ht.visible&&(p(Lt.x,Lt.y,Lt.width,Lt.height,s.x,s.y,Kt.width,Kt.height)?Ht.ic(s.x,s.y,Kt.width,Kt.height):Ht.ic(s.x,s.y,Kt.width,Kt.height,new pt(Lt.x,Lt.y,Lt.width,Lt.height)))}}r.Eb(Lt);break;case"Table":for(var Yt=a.length,Xt=this.padding,Qt=Xt.left,Zt=Xt.top,te=this.at,ee=0,ie=0,ne=te.length,oe=0,re=0;re<ne;re++)te[re]&&(oe=Math.max(oe,te[re].length));for(var ae=Math.min(this.hj,ne-1);ae!==ne&&(void 0===this.Xc[ae]||0===this.Xc[ae].Ra);)ae++;ae=Math.min(ae,ne-1);for(var se=-this.Xc[ae].jb,le=Math.min(this.Ri,oe-1);le!==oe&&(void 0===this.Uc[le]||0===this.Uc[le].Ra);)le++;le=Math.min(le,oe-1);var he=-this.Uc[le].jb,ue=r.mm();for(re=0;re<ne;re++)if(te[re]){oe=te[re].length;var ce=this.de(re);ie=ce.jb+se+Zt;0!==ce.Ra&&(ie+=ce.JE());for(var fe=0;fe<oe;fe++)if(te[re][fe]){var de=this.ce(fe);ee=de.jb+he+Qt;0!==de.Ra&&(ee+=de.JE());for(var pe=te[re][fe],ye=pe.length,ve=0;ve<ye;ve++){var me=pe[ve],ge=me.za,be=me instanceof Ys?me:null;if(null===be||be.type!==_s&&be.type!==Hs){ue.m(0,0);for(var xe=1;xe<me.rowSpan&&!(re+xe>=this.wq);xe++){var we=this.de(re+xe);ue.height+=we.total}for(xe=1;xe<me.yH&&!(fe+xe>=this.Kp);xe++){var ke=this.ce(fe+xe);ue.width+=ke.total}var Me=de.Ra+ue.width,Se=ce.Ra+ue.height;s.x=ee,s.y=ie,s.width=Me,s.height=Se;var Te=ee,Pe=ie,Ne=Me,Ce=Se;ee+Me>o.width&&(Ne=Math.max(o.width-ee,0)),ie+Se>o.height&&(Ce=Math.max(o.height-ie,0));var Ae=me.alignment,Fe=0,De=0,Le=0,je=0;if(Ae.Zc()){(Ae=this.Sl).$c()||(Ae=k);Fe=Ae.x,De=Ae.y,Le=Ae.offsetX,je=Ae.offsetY;var ze=de.alignment,Be=ce.alignment;ze.$c()&&(Fe=ze.x,Le=ze.offsetX),Be.$c()&&(De=Be.y,je=Be.offsetY)}else Fe=Ae.x,De=Ae.y,Le=Ae.offsetX,je=Ae.offsetY;(isNaN(Fe)||isNaN(De))&&(De=Fe=.5,je=Le=0);var Ie=ge.width,Oe=ge.height,Ee=me.margin,qe=Ee.left+Ee.right,Re=Ee.top+Ee.bottom,Ge=ks(me,ce,de,!1);!isNaN(me.Ca.width)||Ge!==Ya&&Ge!==$a||(Ie=Math.max(Me-qe,0)),!isNaN(me.Ca.height)||Ge!==Ya&&Ge!==Ja||(Oe=Math.max(Se-Re,0));var Ve=me.Gf,_e=me.qi,He=(Ie=Math.min(Ve.width,Ie),Oe=Math.min(Ve.height,Oe),Ie=Math.max(_e.width,Ie),(Oe=Math.max(_e.height,Oe))+Re);s.x+=s.width*Fe-(Ie+qe)*Fe+Le+Ee.left,s.y+=s.height*De-He*De+je+Ee.top,me.visible&&(p(Te,Pe,Ne,Ce,s.x,s.y,ge.width,ge.height)?me.ic(s.x,s.y,Ie,Oe):me.ic(s.x,s.y,Ie,Oe,new pt(Te,Pe,Ne,Ce)))}else{me.Ni(),me.pc.Qa();var Ke=me.pc,We=r.lg(Ke.x,Ke.y,Ke.width,Ke.height);if(Ke.x=be.type===_s?Qt:ee,Ke.y=be.type===Hs?Zt:ie,Ke.width=ge.width,Ke.height=ge.height,me.pc.freeze(),Ls(me,!1),!vt(We,Ke)){var Ue=me.U;null!==Ue&&(Ue.Lk(),me.Es(Ue))}r.Eb(We)}}}}for(r.Hk(ue),re=0;re<Yt;re++)null===(be=(me=a[re])instanceof Ys?me:null)||be.type!==_s&&be.type!==Hs||(Ke=me.pc,me.Wc.Qa(),me.Wc.m(0,0,Ke.width,Ke.height),me.Wc.freeze());break;case"Viewbox":var Je=a[0],$e=Je.za,Ye=Je.margin,Xe=Ye.top+Ye.bottom,Qe=Math.max($e.width+(Ye.right+Ye.left),0),Ze=Math.max($e.height+Xe,0),ti=Je.alignment;ti.Zc()&&(ti=this.Sl),ti.$c()||(ti=k),s.x=o.width*ti.x-Qe*ti.x+ti.offsetX,s.y=o.height*ti.y-Ze*ti.y+ti.offsetY,s.width=$e.width,s.height=$e.height,Je.ic(s.x,s.y,s.width,s.height);break;case"Link":var ei=a.length;if(this instanceof Ac||this instanceof Rc){var ii=null;this instanceof Rc&&(ii=this),this instanceof Ac&&(ii=this.Xe);var ni=ii,oi=this instanceof Ac?null:ni.path;if(null!==this.Zg){var ri=this.Zg.n,ai=0;if(null!==oi&&ai<this.Zg.count){var si=ri[ai];ai++,oi.ic(si.x-this.ij.x,si.y-this.ij.y,si.width,si.height)}for(var li=0;li<ei;li++){var hi=a[li];hi!==oi&&ai<this.Zg.count&&(si=ri[ai],ai++,hi.ic(si.x-this.ij.x,si.y-this.ij.y,si.width,si.height))}}var ui=ni.points,ci=ui.count;if(2<=ci&&this instanceof Rc)for(var fi=this.Ef;fi.next();){var di=fi.value,pi=ci,yi=ui,vi=di.Oe,mi=di.tB,gi=di.oh,bi=di.xq,xi=di.uB,wi=0,ki=0,Mi=0;if(vi<-pi||vi>=pi){var Si=this.PF,Ti=this.OF;bi!==Uh&&(Mi=this.computeAngle(di,bi,Ti),di.angle=Mi),wi=Si.x,ki=Si.y}else{var Pi=void 0,Ni=void 0;if(0<=vi)Pi=yi.n[vi],Ni=vi<pi-1?yi.n[vi+1]:Pi;else{var Ci=pi+vi;Pi=yi.n[Ci],Ni=0<Ci?yi.n[Ci-1]:Pi}if(Pi.Oc(Ni)){var Ai=void 0,Fi=void 0;0<=vi?(Ai=0<vi?yi.n[vi-1]:Pi,Fi=vi<pi-2?yi.n[vi+2]:Ni):(Ai=Ci<pi-1?yi.n[Ci+1]:Pi,Fi=1<Ci?yi.n[Ci-2]:Ni);var Di=Ai.Bf(Pi),Li=Ni.Bf(Fi);Ti=Di>Li+10?0<=vi?Ai.Pb(Pi):Pi.Pb(Ai):Li>Di+10?0<=vi?Ni.Pb(Fi):Fi.Pb(Ni):0<=vi?Ai.Pb(Fi):Fi.Pb(Ai)}else Ti=0<=vi?Pi.Pb(Ni):Ni.Pb(Pi);bi!==Uh&&(Mi=this.computeAngle(di,bi,Ti),di.angle=Mi),wi=Pi.x+(Ni.x-Pi.x)*mi,ki=Pi.y+(Ni.y-Pi.y)*mi}if(gi.L(v))di.location=new ut(wi,ki);else{gi.Td()&&(gi=k);var ji=r.Wg();ji.reset(),ji.scale(di.scale,di.scale),ji.rotate(di.angle,0,0);var zi=di.Ja,Bi=r.lg(0,0,zi.width,zi.height),Ii=r.K();Ii.Wn(Bi,gi),ji.nb(Ii);var Oi=-Ii.x,Ei=-Ii.y,qi=xi.copy();isNaN(qi.x)&&(qi.x=0<=vi?Ii.x+3:-(Ii.x+3)),isNaN(qi.y)&&(qi.y=-(Ii.y+3)),qi.rotate(Ti),wi+=qi.x,ki+=qi.y,ji.GG(Bi);Oi=Oi+Bi.x,Ei=Ei+Bi.y;var Ri=r.xb(wi+Oi,ki+Ei);di.move(Ri),r.v(Ri),r.v(Ii),r.Eb(Bi),r.bf(ji)}}this.Bu(!1)}break;case"Grid":break;case"Graduated":if(null!==this.Bm){var Gi=this.Ad(),Vi=this.Dm,_i=this.Bm,Hi=0,Ki=_i[Hi];Hi++,Gi.ic(Ki.x-o.x,Ki.y-o.y,Ki.width,Ki.height);for(var Wi=a.length,Ui=0;Ui<Wi;Ui++){var Ji=a[Ui],$i=Vi[Ui];Ji.visible&&Ji!==Gi&&0!==$i.length&&(Ki=_i[Hi],Hi++,Ji.ic(Ki.x-o.x,Ki.y-o.y,Ki.width,Ki.height))}this.Bm=null}break;case"TableRow":case"TableColumn":r.k(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:r.k("Unknown panel type: "+g)}r.Eb(s)}},Ys.prototype.zk=function(t){var e=this.Ja,i=nl(this);if(p(0,0,e.width,e.height,t.x,t.y)){for(var n=(e=this.xa.n).length,o=r.xb(0,0);n--;){var a=e[n];if((a.visible||a===i)&&(ft(o.set(t),a.transform),a.Ia(o)))return r.v(o),!0}return r.v(o),null!==this.Fb||null!==this.cc}return!1},Ys.prototype.yx=function(t){if(this.mo===t)return this;for(var e=this.xa.n,i=e.length,n=0;n<i;n++){var o=e[n].yx(t);if(null!==o)return o}return null},Ys.prototype.walkVisualTree=Ys.prototype.bK=function(t){!function t(e,i,n){n(i);if(i instanceof Ys)for(var o=(i=i.xa.n).length,r=0;r<o;r++)t(e,i[r],n)}(this,this,t)},Ys.prototype.findInVisualTree=Ys.prototype.Ut=function(t){return function t(e,i,n){if(n(i))return i;if(i instanceof Ys)for(var o=(i=i.xa.n).length,r=0;r<o;r++){var a=t(e,i[r],n);if(null!==a)return a}return null}(this,this,t)},Ys.prototype.findObject=Ys.prototype.Bd=function(t){if(this.name===t)return this;for(var e=this.xa.n,i=e.length,n=0;n<i;n++){var o=e[n];if(o.name===t)return o;if(o instanceof Ys)if(null===o.dk&&null===o.xg){if(null!==(o=o.Bd(t)))return o}else if(fl(o)&&(null!==(o=o.xa.first())&&null!==(o=o.Bd(t))))return o}return null},(i=Ys.prototype).Yg=function(){return!(this.type===_s||this.type===Hs)},i.Le=function(t,e,i){if(!1===this.Ug)return null;if(void 0===e&&(e=null),void 0===i&&(i=null),Ds(this))return null;var n=this.Ja,o=1/this.sj(),a=this.Yg(),s=a?t:ft(r.xb(t.x,t.y),this.transform),l=10,h=5;if(null!==(c=this.g)&&(h=(l=c.gu("extraTouchArea"))/2),p(-h*o,-h*o,n.width+l*o,n.height+l*o,s.x,s.y)){if(!this.En){var u=(o=this.xa.n).length,c=r.K();h=(l=this.mu)?this.Ad():null;if(l&&(h.Yg()?ft(c.set(t),h.transform):c.set(t),!h.Ia(c)))return r.v(c),a||r.v(s),null;for(var f=nl(this);u--;){var d=o[u];if((d.visible||d===f)&&(d.Yg()?ft(c.set(t),d.transform):c.set(t),!l||d!==h)){var y=null;if(d instanceof Ys?y=d.Le(c,e,i):!0===d.Ug&&d.Ia(c)&&(y=d),null!==y&&(null!==e&&(y=e(y)),null!==y&&(null===i||i(y))))return r.v(c),a||r.v(s),y}}r.v(c)}return null===this.background&&null===this.kn?(a||r.v(s),null):(t=p(0,0,n.width,n.height,s.x,s.y)?this:null,a||r.v(s),t)}return a||r.v(s),null},i.Wt=function(t,e,i,n){if(!1===this.Ug)return!1;void 0===e&&(e=null),void 0===i&&(i=null),n instanceof et||n instanceof nt||(n=new et(ls));var o=this.Ja,a=this.Yg(),s=a?t:ft(r.xb(t.x,t.y),this.transform);if(p(0,0,o.width,o.height,s.x,s.y)){if(!this.En){for(var l=(o=this.xa.n).length,h=r.K(),u=nl(this);l--;){if((c=o[l]).visible||c===u){c.Yg()?ft(h.set(t),c.transform):h.set(t);var c,f=c;(null!==(c=c instanceof Ys?c:null)?c.Wt(h,e,i,n):f.Ia(h))&&!1!==f.Ug&&(null!==e&&(f=e(f)),null===f||null!==i&&!i(f)||n.add(f))}}r.v(h)}return a||r.v(s),null!==this.background||null!==this.kn}return a||r.v(s),!1},i.Fk=function(t,e,i,n,o,a){if(!1===this.Ug)return!1;void 0===e&&(e=null),void 0===i&&(i=null);var s=a;if(void 0===a&&(s=r.Wg()).reset(),s.multiply(this.transform),this.pn(t,s))return al(this,e,i,o),void 0===a&&r.bf(s),!0;if(this.Zf(t,s)){if(!this.En)for(var l=nl(this),h=this.xa.n,u=h.length;u--;){var c=h[u];if(c.visible||c===l){var f=c.Y,d=this.Ja;f.x>d.width||f.y>d.height||0>f.x+f.width||0>f.y+f.height||(f=c,c=c instanceof Ys?c:null,(d=r.Wg()).set(s),(null!==c?c.Fk(t,e,i,n,o,d):ds(f,t,n,d))&&(null!==e&&(f=e(f)),null===f||null!==i&&!i(f)||o.add(f)),r.bf(d))}}return void 0===a&&r.bf(s),n}return void 0===a&&r.bf(s),!1},i.vn=function(t,e,i,n,o,a){if(!1===this.Ug)return!1;void 0===i&&(i=null),void 0===n&&(n=null);var s=this.Ja,l=this.Yg(),h=l?t:ft(r.xb(t.x,t.y),this.transform),u=l?e:ft(r.xb(e.x,e.y),this.transform),f=h.Bf(u),d=0<h.x&&h.x<s.width&&0<h.y&&h.y<s.height||c(h.x,h.y,0,0,0,s.height)<f||c(h.x,h.y,0,s.height,s.width,s.height)<f||c(h.x,h.y,s.width,s.height,s.width,0)<f||c(h.x,h.y,s.width,0,0,0)<f;s=0<h.x&&h.x<s.width&&0<h.y&&h.y<s.height&&c(h.x,h.y,0,0,0,s.height)<f&&c(h.x,h.y,0,s.height,s.width,s.height)<f&&c(h.x,h.y,s.width,s.height,s.width,0)<f&&c(h.x,h.y,s.width,0,0,0)<f;if(l||(r.v(h),r.v(u)),d){if(!this.En){h=r.K(),u=r.K(),f=nl(this);for(var p=this.xa.n,y=p.length;y--;){var v=p[y];if(v.visible||v===f){var m=v.Y,g=this.Ja;l&&(m.x>g.width||m.y>g.height||0>m.x+m.width||0>m.y+m.height)||(v.Yg()?(m=v.transform,ft(h.set(t),m),ft(u.set(e),m)):(h.set(t),u.set(e)),m=v,(null!==(v=v instanceof Ys?v:null)?v.vn(h,u,i,n,o,a):m.cF(h,u,o))&&(null!==i&&(m=i(m)),null===m||null!==n&&!n(m)||a.add(m)))}}r.v(h),r.v(u)}return o?d:s}return!1},Ys.prototype.add=Ys.prototype.add=function(t){r.G(t,ls,Ys,"add:element"),this.Rd(this.xa.count,t)},Ys.prototype.elt=Ys.prototype.ea=function(t){return this.xa.ea(t)},Ys.prototype.insertAt=Ys.prototype.Rd=function(t,e){e instanceof Ch&&r.k("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.am(e))&&(this===e&&r.k("Cannot make a Panel contain itself: "+this.toString()),r.k("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var i=e.Q;(null!==i&&i!==this&&r.k("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+i.toString()+", cannot be shared by this Panel: "+this.toString()),this.na!==Ws||e instanceof Ml||r.k("Can only add Shapes to a Grid Panel, not: "+e),this.na!==Us||e instanceof Ml||e instanceof Ll||r.k("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.hm(this),e.Um=null,null!==this.gq)&&(null!==(o=e.data)&&"object"==typeof o&&(null===this.wg&&(this.wg=new ht(Object,Ys)),this.wg.add(o,e)));var n=this.xa,o=-1;if(i===this){for(var a=-1,s=this.xa.n,l=s.length,h=0;h<l;h++)if(s[h]===e){a=h;break}if(-1!==a){if(a===t||a+1>=n.count&&t>=n.count)return;n.dd(a),o=a}else r.k("element "+e.toString()+" has panel "+i.toString()+" but is not contained by it.")}(0>t||t>n.count)&&(t=n.count),n.Rd(t,e),(0===t||e.ff)&&(this.Bl=null),this.H(),e.H(),null!==e.Vd?this.Kk=!0:e instanceof Ys&&!0===e.Kk&&(this.Kk=!0),this.Xj=null,null!==(i=this.U)&&(i.Pm=null,i.hk=NaN,this.Kk&&i instanceof Fc&&(i.Kk=!0),i.Kk&&i instanceof Fc&&(i.oe=null),null!==(n=this.g)&&n.ja.lb||(-1!==o&&i.cd(Xt,"elements",this,e,null,o,null),i.cd(Yt,"elements",this,null,e,null,t),this.ou()||xl(this,e,!1)))},r.defineProperty(Ys,{Kk:null},function(){return 0!=(8388608&this.N)},function(t){0!=(8388608&this.N)!==t&&(this.N^=8388608)}),Ys.prototype.remove=Ys.prototype.remove=function(t){r.G(t,ls,Ys,"remove:element");for(var e=this.xa.n,i=e.length,n=-1,o=0;o<i;o++)if(e[o]===t){n=o;break}-1!==n&&this.rf(n,!0)},Ys.prototype.removeAt=Ys.prototype.dd=function(t){0<=t&&this.rf(t,!0)},Ys.prototype.rf=function(t,e){var i=this.xa,n=i.ea(t);if(n.Um=null,n.hm(null),null!==this.wg){var o=n.data;"object"==typeof o&&this.wg.remove(o)}i.dd(t),Fs(this,!1),this.H(),this.Bl===n&&(this.Bl=null),this.Xj=null;var r=this.U;null!==r&&(r.Pm=null,r.hk=NaN,r.ee(),r instanceof Fc&&(n instanceof Ys?ol(n,n,function(t,i){qc(r,i,e)}):qc(r,n,e)),null!==(i=this.g)&&i.ja.lb||r.cd(Xt,"elements",this,n,null,t,null))},r.u(Ys,{wq:"rowCount"},function(){return void 0===this.Xc?0:this.Xc.length}),Ys.prototype.getRowDefinition=Ys.prototype.de=function(t){0>t&&r.Fa(t,">= 0",Ys,"getRowDefinition:idx"),t=Math.round(t);var e=this.Xc;if(void 0===e[t]){var i=new wl;i.hm(this),i.xe=!0,i.index=t,e[t]=i}return e[t]},Ys.prototype.removeRowDefinition=Ys.prototype.cG=function(t){0>t&&r.Fa(t,">= 0",Ys,"removeRowDefinition:idx"),t=Math.round(t);var e=this.Xc;this.cd(Xt,"coldefs",this,e[t],null,t,null),e[t]&&delete e[t],this.H()},r.u(Ys,{Kp:"columnCount"},function(){return void 0===this.Uc?0:this.Uc.length}),Ys.prototype.getColumnDefinition=Ys.prototype.ce=function(t){0>t&&r.Fa(t,">= 0",Ys,"getColumnDefinition:idx"),t=Math.round(t);var e=this.Uc;if(void 0===e[t]){var i=new wl;i.hm(this),i.xe=!1,i.index=t,e[t]=i}return e[t]},Ys.prototype.removeColumnDefinition=Ys.prototype.aG=function(t){0>t&&r.Fa(t,">= 0",Ys,"removeColumnDefinition:idx"),t=Math.round(t);var e=this.Uc;this.cd(Xt,"coldefs",this,e[t],null,t,null),e[t]&&delete e[t],this.H()},r.defineProperty(Ys,{BJ:"rowSizing"},function(){return void 0===this.Xm?ml:this.Xm},function(t){if(void 0!==this.Xm){var e=this.Xm;e!==t&&(t!==ml&&t!==vl&&r.k("Panel.rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+t),this.Xm=t,this.H(),this.h("rowSizing",e,t))}}),r.defineProperty(Ys,{xH:"columnSizing"},function(){return void 0===this.xm?ml:this.xm},function(t){if(void 0!==this.xm){var e=this.xm;e!==t&&(t!==ml&&t!==vl&&r.k("Panel.columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+t),this.xm=t,this.H(),this.h("columnSizing",e,t))}}),r.defineProperty(Ys,{aM:"topIndex"},function(){return void 0===this.hj?0:this.hj},function(t){if(void 0!==this.hj){var e=this.hj;e!==t&&((!isFinite(t)||0>t)&&r.k("Panel.topIndex must be greater than zero and a real number, not: "+t),this.hj=t,this.H(),this.h("topIndex",e,t))}}),r.defineProperty(Ys,{oL:"leftIndex"},function(){return void 0===this.Ri?0:this.Ri},function(t){if(void 0!==this.Ri){var e=this.Ri;e!==t&&((!isFinite(t)||0>t)&&r.k("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.Ri=t,this.H(),this.h("leftIndex",e,t))}}),Ys.prototype.findRowForLocalY=function(t){if(0>t||this.type!==Vs)return-1;for(var e=0,i=this.Xc,n=i.length,o=this.hj;o<n;o++){var r=i[o];if(void 0!==r&&t<(e+=r.total))break}return o},Ys.prototype.findColumnForLocalX=function(t){if(0>t||this.type!==Vs)return-1;for(var e=0,i=this.Uc,n=i.length,o=this.Ri;o<n;o++){var r=i[o];if(void 0!==r&&t<(e+=r.total))break}return o},Ys.prototype.graduatedPointForValue=function(t,e){if(void 0===e&&(e=new ut(NaN,NaN)),this.type!==Us)return e.m(NaN,NaN),e;var i=((t=Math.min(Math.max(t,this.Jk),this.EA))-this.Jk)/this.hu,n=this.Ad();return n.of.fI(i,e),n.transform.nb(e)},Ys.prototype.graduatedValueForPoint=function(t){if(this.type!==Us)return NaN;var e=this.Ad(),i=e.of;return e.transform.wh(t),i.bI(t)*this.hu+this.Jk},r.defineProperty(Ys,{data:"data"},function(){return this.Zd},function(t){var e=this.Zd;if(e!==t){var i=this instanceof Ch&&!(this instanceof Ac);i&&r.j(t,"object",Ys,"data"),cl(this),this.Zd=t;var n=this.g;null!==n&&(i?this instanceof Rc?(null!==e&&n.Oj.remove(e),null!==t&&n.Oj.add(t,this)):this instanceof Ch&&(null!==e&&n.Ei.remove(e),null!==t&&n.Ei.add(t,this)):null!==(i=this.Q)&&null!==i.wg&&(null!==e&&i.wg.remove(e),null!==t&&i.wg.add(t,this))),this.h("data",e,t),null!==n&&n.ja.lb||null!==t&&this.Ib()}}),r.defineProperty(Ys,{vu:"itemIndex"},function(){return this.as},function(t){var e=this.as;e!==t&&(this.as=t,this.h("itemIndex",e,t))}),Ys.prototype.copyTemplate=function(){var t=this.copy();return t.bK(function(t){t instanceof Ys&&(t.el=null,t.Zd=null);var e=t.yc;null!==e&&(t.yc=null,e.each(function(e){t.bind(e.copy())}))}),t},Ys.prototype.updateTargetBindings=Ys.prototype.Ib=function(t){var e=this.el;if(null!==e)for(void 0===t&&(t=""),e=e.i;e.next();){var i=e.value,n=i.uG;if((""===t||""===n||n===t)&&(n=i.xy,null!==i.DH||""!==n)){n=this.data;var o=i.Dq;if(null!==o)n=""===o?this:"/"===o?this:"."===o?this:".."===o?this:this.Bd(o);else null!==(r=this.g)&&i.Lx&&(n=r.$.Mk);if(null!==n){var r=this,a=i.lm;if(-1!==a){if(null===(r=this.yx(a)))continue}else null!==i.Gg&&(r=i.Gg);if("/"===o?n=r.U:"."===o?n=r:".."===o&&(n=r.Q),0!==(o=i.tt)){if(!(r instanceof Ys))continue;a=r,1===o?r=a.ce(i.vp):2===o&&(r=a.de(i.vp))}void 0!==r&&i.JG(r,n)}}}},r.defineProperty(Ys,{gq:"itemArray"},function(){return this.dk},function(t){var e=this.dk;if(e!==t){var i=this.g;null!==i&&null!==e&&qr(i,this),this.dk=t,null!==i&&null!==t&&Er(i,this),this.h("itemArray",e,t),null!==i&&i.ja.lb||this.mB()}}),Ys.prototype.rebuildItemElements=Ys.prototype.mB=function(){var t=0;for(fl(this)&&(t=1);this.xa.length>t;)this.rf(this.xa.length-1,!1);if(null!==(t=this.gq))for(var e=r.Za(t),i=0;i<e;i++)dl(this,r.Ba(t,i),i)},Ys.prototype.findItemPanelForData=Ys.prototype.WH=function(t){return void 0===t||null===t||null===this.wg?null:(r.j(t,"object",Ys,"findItemPanelForData"),this.wg.ka(t))},r.defineProperty(Ys,{mL:"itemTemplate"},function(){return null===this.xg?null:this.xg.ka("")},function(t){if(null===this.xg){if(null===t)return;this.xg=new ht("string",Ys)}var e=this.xg.ka("");e!==t&&(r.G(t,Ys,Ys,"itemTemplate"),(t instanceof Ch||t.ff)&&r.k("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.xg.add("",t),this.h("itemTemplate",e,t),null!==(t=this.g)&&t.ja.lb||this.mB())}),r.defineProperty(Ys,{GI:"itemTemplateMap"},function(){return this.xg},function(t){var e=this.xg;if(e!==t){r.G(t,ht,Ys,"itemTemplateMap");for(var i=t.i;i.next();){var n=i.value;(n instanceof Ch||n.ff)&&r.k("Template in Panel.itemTemplateMap must not be a Part or be Panel.isPanelMain: "+n)}this.xg=t,this.h("itemTemplateMap",e,t),null!==(t=this.g)&&t.ja.lb||this.mB()}}),r.defineProperty(Ys,{lL:"itemCategoryProperty"},function(){return this.Qo},function(t){var e=this.Qo;e!==t&&("string"!=typeof t&&"function"!=typeof t&&r.Ed(t,"string or function",Ys,"itemCategoryProperty"),this.Qo=t,this.h("itemCategoryProperty",e,t))});var yl,vl,ml,gl=!1,bl=null;function xl(t,e,i){if(null!==(n=e.WE)&&n(e,i),e instanceof Ys)for(var n=(e=e.xa.n).length,o=0;o<n;o++){var r=e[o];i&&r instanceof Ys&&!r.isEnabled||xl(t,r,i)}}function wl(){r.oc(this),this.bj=null,this.$v=!0,this.zc=0,this.nf=NaN,this.jk=0,this.ik=1/0,this.je=m,this.jb=this.Ra=0,this.yc=null,this.mt=yl,this.Fg=Ua,this.ht=this.nk=null,this.it=NaN,this.Fb=this.$h=null,this.hr=!1}function kl(t){if(t.Yu===yl){var e=t.bj;return t.xe?e.BJ:e.xH}return t.Yu}function Ml(){ls.call(this),this.Sf=this.Sa=null,this.Do="None",this.Gr=Ua,this.sc=this.Gd="black",this.ii=1,this.pp="butt",this.rp="miter",this.en=10,this.qp=null,this.zf=0,this.hi=this.gi=m,this.Ks=this.Js=NaN,this.Rr=!1,this.Ms=null,this.Fo=this.xp="None",this.ug=1,this.tg=0,this.sg=1}function Sl(t,e,i,n){if(!(4>(g=i.length))){for(var o=n.za,a=Math.max(1,o.width),s=(o=o.height,i[0]),l=i[1],h=0,u=0,c=0,f=0,d=0,p=0,y=f=0,v=r.eb(),m=2;m<g;m+=2)h=i[m],f=(u=i[m+1])-l,0===(c=h-s)&&(c=.001),d=f/c,p=Math.atan2(f,c),f=Math.sqrt(c*c+f*f),v.push([c,p,d,f]),y+=f,s=h,l=u;s=i[0],l=i[1],c=n.za.width,n instanceof Ml&&(c-=n.mb),1>c&&(c=1);for(var g=i=c,b=(u=0!==(h=a/2),c=(f=v[m=0])[0],p=f[1],d=f[2],f=f[3],0);.1<=y;){if(0===b&&(u?(g=i,g-=h,y-=h,u=!1):g=i,0===g&&(g=1)),g>y)return void r.ta(v);g>f?(b=g-f,g=f):b=0;var x=Math.sqrt(g*g/(1+d*d));if(0>c&&(x=-x),s+=x,l+=d*x,t.translate(s,l),t.rotate(p),t.translate(-a/2,-o/2),0===b&&n.Ek(t,e),t.translate(a/2,o/2),t.rotate(-p),t.translate(-s,-l),y-=g,f-=g,0!==b){if(++m===v.length)return void r.ta(v);c=(f=v[m])[0],p=f[1],d=f[2],f=f[3],g=b}}r.ta(v)}}function Tl(t,e,i,n){if(!(4>(v=e.length))){var o=.001,a=i.length,s=e[0],l=e[1];if(4===v)us(t,s,l,e[2],e[3],i,n);else{t.moveTo(s,l);for(var h=o=0,u=0,c=0,f=0,d=c=0,p=r.eb(),y=2;y<v;y+=2)o=e[y],c=(h=e[y+1])-l,0===(u=o-s)&&(u=.001),f=c/u,c=Math.sqrt(u*u+c*c),p.push([u,f,c]),d+=c,s=o,l=h;s=e[0],l=e[1];for(var v=!0,m=(o=i[(e=0)%a],h=0!==n,u=(c=p[y=0])[0],f=c[1],c=c[2],0);.1<=d;){0===m&&(o=i[e%a],e++,h&&(o-=n%=o,h=!1)),o>d&&(o=d),o>c?(m=o-c,o=c):m=0;var g=Math.sqrt(o*o/(1+f*f));if(0>u&&(g=-g),s+=g,l+=f*g,v?t.lineTo(s,l):t.moveTo(s,l),d-=o,c-=o,0!==m){if(++y===p.length)return void r.ta(p);u=(c=p[y])[0],f=c[1],c=c[2],o=m}else v=!v}r.ta(p)}}}function Pl(t,e,i,n){if(!1!==As(t)){t.ud.Qa();var o=t.ii;0===o&&n instanceof Ac&&n.tb instanceof Ml&&(o=n.tb.mb),o*=t.vb,n instanceof Rc&&null!==n.Sa?fs(t,(e=n.Sa.ab).x-o/2,e.y-o/2,e.width+o,e.height+o):n instanceof Ac&&null!==n.Xe.Sa?fs(t,(e=n.Xe.Sa.ab).x-o/2,e.y-o/2,e.width+o,e.height+o):fs(t,-o/2,-o/2,e+o,i+o),t.ud.freeze(),t.ud.I()||r.k("Non-real measuredBounds has been set. Object "+t+", measuredBounds: "+t.ud.toString()),Fs(t,!1)}}function Nl(t){var e=t.BA;return null!==t.Sf?e===Ua?Ya:e:e===Ua?me[t.Db].ae:e}function Cl(t,e,i,n,o){return(e=(t=i.x-t)*t+(e=i.y-e)*e)<n?(o.x=i.x,o.y=i.y,e):n}function Al(t,e,i,n,o,r,a,s,l){var h=!1,u=(o-a)*(e-n)-(r-s)*(t-i);return 0!==u&&(l.x=((o*s-r*a)*(t-i)-(o-a)*(t*n-e*i))/u,l.y=((o*s-r*a)*(e-n)-(r-s)*(t*n-e*i))/u,(t>i?t-i:i-t)<(e>n?e-n:n-e)?(o=e<n?e:n,t=e<n?n:e,(l.y>o||ke(l.y,o))&&(l.y<t||ke(l.y,t))&&(h=!0)):(o=t<i?t:i,t=t<i?i:t,(l.x>o||ke(l.x,o))&&(l.x<t||ke(l.x,t))&&(h=!0)),h)}function Fl(t,e,i,n){if(!t.jF(e,i,n))return!1;t=e.x,e=e.y;var o=i.x;i=i.y;var r=n.x;if(n=n.y,t===o){var a=0;return t=0,e<i?(a=e,t=i):(a=i,t=e),n>=a&&n<=t}return t<o?(a=t,t=o):a=o,r>=a&&r<=t}function Dl(t){var e=t.g;null!==e&&e.ja.lb||(t.xq=tu,"None"!==t.xp?(t.Oe=-1,t.oh=A):"None"!==t.Fo&&(t.Oe=0,t.oh=new Mt(1-A.x,A.y)))}function Ll(){ls.call(this),this.Md="",this.sc="black",this.qg="13px sans-serif",this.Cl="start",this.pg=Wa,this.Gl=D,this.Gm=!0,this.ak=this.ck=!1,this.$i=El,this.kj=Il,this.jw=this.me=0,this.Az=this.Bz=null,this.yf=new Zl,this.zr=!1,this.Ue=this.Yq=this.ut=this.Dl=this.vt=null,this.fi=this.ei=0,this.gh=1/0,this.To=0,this.ug=1,this.tg=0,this.sg=1,this.Cm=null}r.defineProperty(Ys,{En:"isAtomic"},function(){return 0!=(1048576&this.N)},function(t){var e=0!=(1048576&this.N);e!==t&&(r.j(t,"boolean",Ys,"isAtomic"),this.N^=1048576,this.h("isAtomic",e,t))}),r.defineProperty(Ys,{mu:"isClipping"},function(){return 0!=(2097152&this.N)},function(t){var e=0!=(2097152&this.N);e!==t&&(r.j(t,"boolean",Ys,"isClipping"),this.N^=2097152,this.H(),this.h("isClipping",e,t))}),r.defineProperty(Ys,{FF:"isOpposite"},function(){return 0!=(33554432&this.N)},function(t){var e=0!=(33554432&this.N);e!==t&&(r.j(t,"boolean",Ys,"isOpposite"),this.N^=33554432,this.H(),this.h("isOpposite",e,t))}),r.defineProperty(Ys,{isEnabled:"isEnabled"},function(){return 0!=(4194304&this.N)},function(t){var e=0!=(4194304&this.N);if(e!==t){r.j(t,"boolean",Ys,"isEnabled");var i=null===this.Q||this.Q.ou();this.N^=4194304,this.h("isEnabled",e,t),null!==(e=this.g)&&e.ja.lb||i&&xl(this,this,t)}}),r.defineProperty(Ys,{hK:"alignmentFocusName"},function(){return this.Lj},function(t){var e=this.Lj;e!==t&&(this.Lj=t,this.H(),this.h("alignmentFocusName",e,t))}),r.ga("RowColumnDefinition",wl),wl.prototype.copy=function(){var t=new wl;return t.$v=this.$v,t.zc=this.zc,t.nf=this.nf,t.jk=this.jk,t.ik=this.ik,t.je=this.je,t.Ra=this.Ra,t.jb=this.jb,t.Fg=this.Fg,t.mt=this.mt,t.nk=null===this.nk?null:this.nk.S(),t.ht=this.ht,t.it=this.it,t.$h=null,null!==this.$h&&(t.$h=r.Ol(this.$h)),t.Fb=this.Fb,t.hr=this.hr,t.yc=this.yc,t},wl.prototype.Lp=function(t){r.G(t,wl,wl,"copyFrom:pd"),t.xe?this.height=t.height:this.width=t.width,this.Bh=t.Bh,this.ie=t.ie,this.alignment=t.alignment,this.stretch=t.stretch,this.Yu=t.Yu,this.nk=null===t.nk?null:t.nk.S(),this.yq=t.yq,this.zq=t.zq,this.$h=null,t.$h&&(this.$h=r.Ol(t.$h)),this.background=t.background,this.qA=t.qA,this.yc=t.yc},wl.prototype.hc=function(t){t.Ge===wl?this.Yu=t:r.Ij(this,t)},wl.prototype.toString=function(){return"RowColumnDefinition "+(this.xe?"(Row ":"(Column ")+this.index+") #"+r.Pd(this)},wl.Default=yl=r.p(wl,"Default",0),wl.None=vl=r.p(wl,"None",1),wl.ProportionalExtra=ml=r.p(wl,"ProportionalExtra",2),wl.prototype.hm=function(t){this.bj=t},wl.prototype.computeEffectiveSpacingTop=wl.prototype.JE=function(){var t=0,e=this.bj,i=0,n=this.xe;if(null!==e)for(var o=n?e.Xc.length:e.Uc.length,r=0;r<o;r++){var a=n?e.Xc[r]:e.Uc[r];if(void 0!==a){i=a.index;break}}if(this.index!==i&&(null===(i=this.yq)&&null!==e&&(i=this.xe?e.Fi:e.Nh),null!==i&&(t=this.zq,isNaN(t)&&(t=null!==e?this.xe?e.Ph:e.Oh:0))),null===(i=this.oG)){if(null===e)return t;i=e.Pj}return t+(this.xe?i.top:i.left)},wl.prototype.computeEffectiveSpacing=wl.prototype.Ze=function(){var t=0,e=this.bj,i=0,n=this.xe;if(null!==e)for(var o=n?e.Xc.length:e.Uc.length,r=0;r<o;r++){var a=n?e.Xc[r]:e.Uc[r];if(void 0!==a){i=a.index;break}}if(this.index!==i&&(null===(i=this.yq)&&null!==e&&(i=n?e.Fi:e.Nh),null!==i&&(t=this.zq,isNaN(t)&&(t=null!==e?n?e.Ph:e.Oh:0))),null===(n=this.oG)){if(null===e)return t;n=e.Pj}return t+(this.xe?n.top+n.bottom:n.left+n.right)},wl.prototype.jd=function(t,e,i,n,o){var r=this.bj;if(null!==r&&(r.cd($t,t,this,e,i,n,o),null!==this.yc&&(null!==(e=r.g)&&!e.Pe&&(null!==(r=r.Tl())&&null!==(e=r.data)))))for(i=this.yc.i;i.next();)i.value.yy(this,e,t,r)},r.u(wl,{Q:"panel"},function(){return this.bj}),r.defineProperty(wl,{xe:"isRow"},function(){return this.$v},function(t){this.$v=t}),r.defineProperty(wl,{index:"index"},function(){return this.zc},function(t){this.zc=t}),r.defineProperty(wl,{height:"height"},function(){return this.nf},function(t){var e=this.nf;e!==t&&(0>t&&r.Fa(t,">= 0",wl,"height"),this.nf=t,this.Ya=this.Ra,null!==this.Q&&this.Q.H(),this.jd("height",e,t))}),r.defineProperty(wl,{width:"width"},function(){return this.nf},function(t){var e=this.nf;e!==t&&(0>t&&r.Fa(t,">= 0",wl,"width"),this.nf=t,this.Ya=this.Ra,null!==this.Q&&this.Q.H(),this.jd("width",e,t))}),r.defineProperty(wl,{Bh:"minimum"},function(){return this.jk},function(t){var e=this.jk;e!==t&&((0>t||!isFinite(t))&&r.Fa(t,">= 0",wl,"minimum"),this.jk=t,this.Ya=this.Ra,null!==this.Q&&this.Q.H(),this.jd("minimum",e,t))}),r.defineProperty(wl,{ie:"maximum"},function(){return this.ik},function(t){var e=this.ik;e!==t&&(0>t&&r.Fa(t,">= 0",wl,"maximum"),this.ik=t,this.Ya=this.Ra,null!==this.Q&&this.Q.H(),this.jd("maximum",e,t))}),r.defineProperty(wl,{alignment:"alignment"},function(){return this.je},function(t){var e=this.je;e.L(t)||(this.je=t.S(),null!==this.Q&&this.Q.H(),this.jd("alignment",e,t))}),r.defineProperty(wl,{stretch:"stretch"},function(){return this.Fg},function(t){var e=this.Fg;e!==t&&(this.Fg=t,null!==this.Q&&this.Q.H(),this.jd("stretch",e,t))}),r.defineProperty(wl,{oG:"separatorPadding"},function(){return this.nk},function(t){"number"==typeof t&&(t=new wt(t));var e=this.nk;null!==t&&null!==e&&e.L(t)||(null!==t&&(t=t.S()),this.nk=t,null!==this.Q&&this.Q.H(),this.jd("separatorPadding",e,t))}),r.defineProperty(wl,{yq:"separatorStroke"},function(){return this.ht},function(t){var e=this.ht;e!==t&&(null===t||"string"==typeof t||t instanceof ja)&&(t instanceof ja&&t.freeze(),this.ht=t,null!==this.Q&&this.Q.H(),this.jd("separatorStroke",e,t))}),r.defineProperty(wl,{zq:"separatorStrokeWidth"},function(){return this.it},function(t){var e=this.it;e!==t&&(this.it=t,null!==this.Q&&this.Q.H(),this.jd("separatorStrokeWidth",e,t))}),r.defineProperty(wl,{PL:"separatorDashArray"},function(){return this.$h},function(t){var e=this.$h;if(e!==t){if(null===t||Array.isArray(t)||r.Ed(t,"Array",wl,"separatorDashArray:value"),null!==t){for(var i=t.length,n=0,o=0;o<i;o++){var a=t[o];"number"==typeof a&&0<=a&&isFinite(a)||r.k("separatorDashArray value "+a+" at index "+o+" must be a positive number or zero."),n+=a}if(0===n){if(null===e)return;t=null}}this.$h=t,null!==this.Q&&this.Q.oa(),this.jd("separatorDashArray",e,t)}}),r.defineProperty(wl,{background:"background"},function(){return this.Fb},function(t){var e=this.Fb;e!==t&&(null===t||"string"==typeof t||t instanceof ja)&&(t instanceof ja&&t.freeze(),this.Fb=t,null!==this.Q&&this.Q.oa(),this.jd("background",e,t))}),r.defineProperty(wl,{qA:"coversSeparators"},function(){return this.hr},function(t){var e=this.hr;e!==t&&(r.j(t,"boolean",wl,"coversSeparators"),this.hr=t,null!==this.Q&&this.Q.oa(),this.jd("coversSeparators",e,t))}),r.defineProperty(wl,{Yu:"sizing"},function(){return this.mt},function(t){var e=this.mt;e!==t&&(this.mt=t,null!==this.Q&&this.Q.H(),this.jd("sizing",e,t))}),r.defineProperty(wl,{Ya:"actual"},function(){return this.Ra},function(t){this.Ra=isNaN(this.nf)?Math.max(Math.min(this.ik,t),this.jk):Math.max(Math.min(this.ik,this.nf),this.jk)}),r.defineProperty(wl,{total:"total"},function(){return this.Ra+this.Ze()},function(t){this.Ra=isNaN(this.nf)?Math.max(Math.min(this.ik,t),this.jk):Math.max(Math.min(this.ik,this.nf),this.jk),this.Ra=Math.max(0,this.Ra-this.Ze())}),r.defineProperty(wl,{position:"position"},function(){return this.jb},function(t){this.jb=t}),wl.prototype.bind=wl.prototype.bind=function(t){t.Gg=this;var e=this.Q;if(null!==e){var i=e.Tl();null!==i&&ul(i)&&r.k("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+t+" on "+e)}null===this.yc&&(this.yc=new et(ji)),this.yc.add(t)},r.La(Ml,ls),r.ga("Shape",Ml),Ml.prototype.cloneProtected=function(t){ls.prototype.cloneProtected.call(this,t),t.Sa=this.Sa,t.Do=this.Do,t.Gr=this.Gr,t.Sf=this.Sf,t.Gd=this.Gd,t.sc=this.sc,t.ii=this.ii,t.pp=this.pp,t.rp=this.rp,t.en=this.en,null!==this.qp&&(t.qp=r.Ol(this.qp)),t.zf=this.zf,t.gi=this.gi.S(),t.hi=this.hi.S(),t.Js=this.Js,t.Ks=this.Ks,t.Rr=this.Rr,t.Ms=this.Ms,t.xp=this.xp,t.Fo=this.Fo,t.ug=this.ug,t.tg=this.tg,t.sg=this.sg},Ml.prototype.hc=function(t){t===Wa||t===Xa||t===Qa||t===Ua?this.BA=t:ls.prototype.hc.call(this,t)},Ml.prototype.toString=function(){return"Shape("+("None"!==this.Db?this.Db:"None"!==this.Eq?this.Eq:this.zA)+")#"+r.Pd(this)},Ml.prototype.Ek=function(t,e){if(null!==this.sc||null!==this.Gd){null!==this.Gd&&ms(this,t,this.Gd,!0,!1),null!==this.sc&&ms(this,t,this.sc,!1,!1);var i=this.ii;if(0===i)(a=this.U)instanceof Ac&&a.type===Ks&&"Selection"===a.yd&&a.tb instanceof Ml&&a.Xe.Ad()===a.tb&&(i=a.tb.mb);t.lineWidth=i,t.lineJoin=this.rp,t.lineCap=this.pp,t.miterLimit=this.en;var n=!1;this.U&&e.tj("drawShadows")&&(n=this.U.cm);var o=!0;null!==this.sc&&null===this.Gd&&(o=!1);var a=!1,s=!0,l=this.xG;if(null!==l&&(a=!0,s=t.vA(l,this.zf)),null!==(d=this.Sa)){if(d.na===It)t.beginPath(),a&&!s?us(t,d.Cc,d.Mc,d.yb,d.Gb,l,this.zf):(t.moveTo(d.Cc,d.Mc),t.lineTo(d.yb,d.Gb)),null!==this.Gd&&t.Lg(this.Gd),0!==i&&null!==this.sc&&t.Gj();else if(d.na===Ot){var h=d.Cc,u=d.Mc,c=d.yb,f=d.Gb,d=Math.min(h,c),p=Math.min(u,f);h=Math.abs(c-h),u=Math.abs(f-u);if(null!==this.Gd&&(t.beginPath(),t.rect(d,p,h,u),t.Lg(this.Gd)),null!==this.sc){var y=c=0,v=0;o&&n&&(c=t.shadowOffsetX,y=t.shadowOffsetY,v=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),a&&!s?((s=r.eb()).push(d),s.push(p),s.push(d+h),s.push(p),s.push(d+h),s.push(p+u),s.push(d),s.push(p+u),s.push(d),s.push(p),t.beginPath(),Tl(t,s,l,this.zf),t.Gj(),r.ta(s)):0!==i&&(t.beginPath(),t.rect(d,p,h,u),t.Gj()),o&&n&&(t.shadowOffsetX=c,t.shadowOffsetY=y,t.shadowBlur=v)}}else if(d.na===Et)h=d.Cc,u=d.Mc,c=d.yb,f=d.Gb,d=Math.abs(c-h)/2,p=Math.abs(f-u)/2,h=Math.min(h,c)+d,u=Math.min(u,f)+p,t.beginPath(),t.moveTo(h,u-p),t.bezierCurveTo(h+Qt*d,u-p,h+d,u-Qt*p,h+d,u),t.bezierCurveTo(h+d,u+Qt*p,h+Qt*d,u+p,h,u+p),t.bezierCurveTo(h-Qt*d,u+p,h-d,u+Qt*p,h-d,u),t.bezierCurveTo(h-d,u-Qt*p,h-Qt*d,u-p,h,u-p),t.closePath(),null!==this.Gd&&t.Lg(this.Gd),a&&!s&&(s=r.eb(),Pe(h,u-p,h+Qt*d,u-p,h+d,u-Qt*p,h+d,u,.5,s),Pe(h+d,u,h+d,u+Qt*p,h+Qt*d,u+p,h,u+p,.5,s),Pe(h,u+p,h-Qt*d,u+p,h-d,u+Qt*p,h-d,u,.5,s),Pe(h-d,u,h-d,u-Qt*p,h-Qt*d,u-p,h,u-p,.5,s),t.beginPath(),Tl(t,s,l,this.zf),r.ta(s)),0!==i&&null!==this.sc&&(o&&n?(c=t.shadowOffsetX,y=t.shadowOffsetY,v=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.Gj(),t.shadowOffsetX=c,t.shadowOffsetY=y,t.shadowBlur=v):t.Gj());else if(d.na===qt){for(u=(p=d.Rj).length,f=0;f<u;f++){h=p.n[f],t.beginPath(),t.moveTo(h.ha,h.fa);y=(c=h.wb.n).length;var m=null;for(v=0;v<y;v++){var g=c[v];switch(g.na){case Vt:t.moveTo(g.C,g.D);break;case _t:t.lineTo(g.C,g.D);break;case Ht:t.bezierCurveTo(g.Jd,g.We,g.mh,g.Dg,g.yb,g.Gb);break;case Kt:t.quadraticCurveTo(g.Jd,g.We,g.yb,g.Gb);break;case Wt:if(g.radiusX===g.radiusY)m=Math.PI/180,t.arc(g.Jd,g.We,g.radiusX,g.ze*m,(g.ze+g.uf)*m,0>g.uf);else{var b=(m=ti(g,h)).length;if(0===b){t.lineTo(g.la,g.ra);break}for(var x=0;x<b;x++){var w=m[x];0===x&&t.lineTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7])}}break;case Ut:if(x=b=0,null!==m&&m.type===Wt){if(0===(w=(m=ti(m,h)).length)){t.lineTo(g.la,g.ra);break}null!==(m=m[w-1]||null)&&(b=m[6],x=m[7])}else b=null!==m?m.C:h.ha,x=null!==m?m.D:h.fa;if(0===(b=(m=ei(g,h,b,x)).length)){t.lineTo(g.la,g.ra);break}for(x=0;x<b;x++)w=m[x],t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]);break;default:r.k("Segment not of valid type: "+g.na)}g.Rh&&t.closePath(),m=g}n?(v=y=c=0,h.Oo?(!0===h.Fm&&null!==this.Gd?(t.Lg(this.Gd),o=!0):o=!1,0!==i&&null!==this.sc&&(o&&(c=t.shadowOffsetX,y=t.shadowOffsetY,v=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),a&&!s||t.Gj(),o&&(t.shadowOffsetX=c,t.shadowOffsetY=y,t.shadowBlur=v))):(o&&(c=t.shadowOffsetX,y=t.shadowOffsetY,v=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),!0===h.Fm&&null!==this.Gd&&t.Lg(this.Gd),0!==i&&null!==this.sc&&(a&&!s||t.Gj()),o&&(t.shadowOffsetX=c,t.shadowOffsetY=y,t.shadowBlur=v))):(!0===h.Fm&&null!==this.Gd&&t.Lg(this.Gd),0===i||null===this.sc||a&&!s||t.Gj())}if(a&&!s)for(i=o,s=(o=d.Rj).length,d=0;d<s;d++){for(p=o.n[d],t.beginPath(),(u=r.eb()).push(p.ha),u.push(p.fa),c=f=p.ha,y=h=p.fa,g=(v=p.wb.n).length,m=0;m<g;m++){switch((b=v[m]).na){case Vt:Tl(t,u,l,this.zf),u.length=0,u.push(b.C),u.push(b.D),c=f=b.C,y=h=b.D;break;case _t:u.push(b.C),u.push(b.D),f=b.C,h=b.D;break;case Ht:Pe(f,h,b.Jd,b.We,b.mh,b.Dg,b.yb,b.Gb,.5,u),f=b.C,h=b.D;break;case Kt:Fe(f,h,b.Jd,b.We,b.yb,b.Gb,.5,u),f=b.C,h=b.D;break;case Wt:if(0===(w=(x=ti(b,p)).length)){u.push(b.la),u.push(b.ra),f=b.la,h=b.ra;break}for(var k=0;k<w;k++){var M=x[k];Pe(f,h,M[2],M[3],M[4],M[5],M[6],M[7],.5,u),f=M[6],h=M[7]}break;case Ut:if(0===(w=(x=ei(b,p,f,h)).length)){u.push(b.la),u.push(b.ra),f=b.la,h=b.ra;break}for(k=0;k<w;k++)Pe(f,h,(M=x[k])[2],M[3],M[4],M[5],M[6],M[7],.5,u),f=M[6],h=M[7];break;default:r.k("Segment not of valid type: "+b.na)}b.Rh&&(u.push(c),u.push(y),Tl(t,u,l,this.zf))}Tl(t,u,l,this.zf),r.ta(u),null!==this.sc&&(f=u=p=0,i&&n&&(p=t.shadowOffsetX,u=t.shadowOffsetY,f=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),t.Gj(),i&&n&&(t.shadowOffsetX=p,t.shadowOffsetY=u,t.shadowBlur=f))}}if(a&&t.sA(),null!==this.$x){if(ps(a=this.$x,1/0,1/0),l=a.za,a.ic(0,0,l.width,l.height),i=this.of,t.save(),t.beginPath(),l=r.eb(),i.type===It)l.push(i.ha),l.push(i.fa),l.push(i.C),l.push(i.D),Sl(t,e,l,a);else if(i.type===qt)for(s=i.fc.i;s.next();){for(d=s.value,l.length=0,l.push(d.ha),l.push(d.fa),u=o=d.ha,f=p=d.fa,c=(h=d.wb.n).length,y=0;y<c;y++){switch((v=h[y]).na){case Vt:Sl(t,e,l,a),l.length=0,l.push(v.C),l.push(v.D),u=o=v.C,f=p=v.D;break;case _t:l.push(v.C),l.push(v.D),o=v.C,p=v.D;break;case Ht:Pe(o,p,v.Jd,v.We,v.mh,v.Dg,v.yb,v.Gb,.5,l),o=v.C,p=v.D;break;case Kt:Fe(o,p,v.Jd,v.We,v.yb,v.Gb,.5,l),o=v.C,p=v.D;break;case Wt:if(0===(n=(i=ti(v,d)).length)){l.push(v.la),l.push(v.ra),o=v.la,p=v.ra;break}for(g=0;g<n;g++)Pe(o,p,(m=i[g])[2],m[3],m[4],m[5],m[6],m[7],.5,l),o=m[6],p=m[7];break;case Ut:if(0===(n=(i=ei(v,d,o,p)).length)){l.push(v.la),l.push(v.ra),o=v.la,p=v.ra;break}for(g=0;g<n;g++)Pe(o,p,(m=i[g])[2],m[3],m[4],m[5],m[6],m[7],.5,l),o=m[6],p=m[7];break;default:r.k("Segment not of valid type: "+v.na)}v.Rh&&(l.push(u),l.push(f),Sl(t,e,l,a))}Sl(t,e,l,a)}else if(i.type===Ot)l.push(i.ha),l.push(i.fa),l.push(i.C),l.push(i.fa),l.push(i.C),l.push(i.D),l.push(i.ha),l.push(i.D),l.push(i.ha),l.push(i.fa),Sl(t,e,l,a);else if(i.type===Et){if((s=new Qe).ha=i.C,s.fa=(i.fa+i.D)/2,(o=new Ze(Wt)).ze=0,o.uf=360,o.la=(i.ha+i.C)/2,o.ra=(i.fa+i.D)/2,o.radiusX=Math.abs(i.ha-i.C)/2,o.radiusY=Math.abs(i.fa-i.D)/2,s.add(o),0===(n=(i=ti(o,s)).length))l.push(o.la),l.push(o.ra);else for(o=s.ha,p=s.fa,g=0;g<n;g++)Pe(o,p,(m=i[g])[2],m[3],m[4],m[5],m[6],m[7],.5,l),o=m[6],p=m[7];Sl(t,e,l,a)}r.ta(l),t.restore(),t.He(!1)}}}},Ml.prototype.getDocumentPoint=Ml.prototype.Wa=function(t,e){if(void 0===e&&(e=new ut),t instanceof Mt){t.Td()&&r.k("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var i=this.Ja,n=this.mb;e.m(t.x*(i.width+n)-n/2+i.x+t.offsetX,t.y*(i.height+n)-n/2+i.y+t.offsetY)}else e.set(t);return this.ph.nb(e),e},Ml.prototype.zk=function(t,e){if(null===(h=this.of)||null===this.fill&&null===this.stroke)return!1;var i=h.ab,n=this.mb/2;h.type!==It||e||(n+=2);var o=r.Kf();if(o.assign(i),o.Yf(n+2,n+2),!o.Ia(t))return r.Eb(o),!1;if(i=n+1e-4,h.type===It)return null!==this.stroke&&(i=(h.C-h.ha)*(t.x-h.ha)+(h.D-h.fa)*(t.y-h.fa),!(0>(h.ha-h.C)*(t.x-h.C)+(h.fa-h.D)*(t.y-h.D)||0>i)&&(r.Eb(o),Me(h.ha,h.fa,h.C,h.D,n,t.x,t.y)));if(h.type===Ot){var a=h.ha,s=h.fa,l=h.C,h=h.D;if(o.x=Math.min(a,l),o.y=Math.min(s,h),o.width=Math.abs(l-a),o.height=Math.abs(h-s),null===this.fill){if(o.Yf(-i,-i),o.Ia(t))return r.Eb(o),!1;o.Yf(i,i)}return null!==this.stroke&&o.Yf(n,n),i=o.Ia(t),r.Eb(o),i}if(h.type===Et){a=h.ha,s=h.fa,l=h.C,h=h.D,n=Math.min(a,l);var u=Math.min(s,h);a=Math.abs(l-a)/2,s=Math.abs(h-s)/2,n=t.x-(n+a),u=t.y-(u+s);if(null===this.fill){if(s-=i,0>=(a-=i)||0>=s||1>=n*n/(a*a)+u*u/(s*s))return r.Eb(o),!1;a+=i,s+=i}return null!==this.stroke&&(a+=i,s+=i),r.Eb(o),!(0>=a||0>=s)&&1>=n*n/(a*a)+u*u/(s*s)}return h.type===qt?(r.Eb(o),null===this.fill?$e(h,t.x,t.y,n):h.Ia(t,n,1<this.mb,e)):(r.k("Unknown Geometry type: "+h.type),!1)},Ml.prototype.Ln=function(t,e,i,n){var o,a=this.Ca,s=this.ii;if(t=Math.max(t,0),e=Math.max(e,0),null!==this.Sf)o=this.of.ab;else{var l=this.Db;if(void 0===(h=me[l]))"string"==typeof(u=wh[l])&&(u=wh[u]),"function"==typeof u?(h=u(null,100,100),me[l]=h):r.k("Unsupported Figure: "+l);o=h.ab}l=o.width;var h=o.height,u=o.width,c=o.height;switch(ws(this,!0)){case Wa:n=i=0;break;case Ya:u=Math.max(t-s,0),c=Math.max(e-s,0);break;case $a:u=Math.max(t-s,0),n=0;break;case Ja:i=0,c=Math.max(e-s,0)}switch(isFinite(a.width)&&(u=a.width),isFinite(a.height)&&(c=a.height),a=this.Gf,o=this.qi,i=Math.max(i,o.width)-s,n=Math.max(n,o.height)-s,u=Math.min(a.width,u),c=Math.min(a.height,c),u=isFinite(u)?Math.max(i,u):Math.max(l,i),c=isFinite(c)?Math.max(n,c):Math.max(h,n),i=Nl(this)){case Wa:break;case Ya:l=u,h=c;break;case Xa:i=Math.min(u/l,c/h),isFinite(i)||(i=1),l*=i,h*=i;break;default:r.k(i+" is not a valid geometryStretch.")}null!==this.Sf?(a=l=Math.max(l,.01),n=h=Math.max(h,.01),i=(o=null!==this.Sf?this.Sf:this.Sa).copy(),a/=(o=o.ab).width,n/=o.height,isFinite(a)||(a=1),isFinite(n)||(n=1),1===a&&1===n||i.scale(a,n),this.Sa=i):null!==this.Sa&&ke(this.Sa.No,t-s)&&ke(this.Sa.Lo,e-s)||(this.Sa=Ml.makeGeometry(this,l,h)),o=this.Sa.ab,1/0===t||1/0===e?fs(this,o.x-s/2,o.y-s/2,0===t&&0===l?0:o.width+s,0===e&&0===h?0:o.height+s):fs(this,-s/2,-s/2,u+s,c+s)},Ml.prototype.mj=function(t,e,i,n){ys(this,t,e,i,n)},Ml.prototype.getNearestIntersectionPoint=Ml.prototype.jF=function(t,e,i){return this.zn(t.x,t.y,e.x,e.y,i)},Ml.prototype.zn=function(t,e,i,n,o){var a=1/((d=this.transform).m11*d.m22-d.m12*d.m21),s=d.m22*a,l=-d.m12*a,h=-d.m21*a,u=d.m11*a,c=a*(d.m21*d.dy-d.m22*d.dx),f=a*(d.m12*d.dx-d.m11*d.dy),d=t*s+e*h+c;a=t*l+e*u+f,s=i*s+n*h+c,l=i*l+n*u+f,h=this.mb/2;if(null===(c=this.Sa)&&(ps(this,1/0,1/0),c=this.Sa),f=c.ab,u=!1,c.type===It)if(1.5>=this.mb)u=ze(c.Cc,c.Mc,c.yb,c.Gb,d,a,s,l,o);else{var p=0,y=0;if(c.Cc===c.yb?(p=h,y=0):(e=(c.Gb-c.Mc)/(c.yb-c.Cc),p=(y=h/Math.sqrt(1+e*e))*e),n=r.eb(),e=new ut,ze(c.Cc+p,c.Mc+y,c.yb+p,c.Gb+y,d,a,s,l,e)&&n.push(e),e=new ut,ze(c.Cc-p,c.Mc-y,c.yb-p,c.Gb-y,d,a,s,l,e)&&n.push(e),e=new ut,ze(c.Cc+p,c.Mc+y,c.Cc-p,c.Mc-y,d,a,s,l,e)&&n.push(e),e=new ut,ze(c.yb+p,c.Gb+y,c.yb-p,c.Gb-y,d,a,s,l,e)&&n.push(e),0===(e=n.length))return r.ta(n),!1;for(u=!0,y=1/0,p=0;p<e;p++){(N=((s=n[p]).x-d)*(s.x-d)+(s.y-a)*(s.y-a))<y&&(y=N,o.x=s.x,o.y=s.y)}r.ta(n)}else if(c.type===Ot)u=Be(e=f.x-h,f.y-h,f.x+f.width+h,f.y+f.height+h,d,a,s,l,o);else if(c.type===Et)t:if(e=f.copy().Yf(h,h),0===e.width)u=ze(e.x,e.y,e.x,e.y+e.height,d,a,s,l,o);else if(0===e.height)u=ze(e.x,e.y,e.x+e.width,e.y,d,a,s,l,o);else{t=e.width/2;var v=e.height/2;if(n=e.x+t,e=e.y+v,i=9999,d!==s&&(i=(a-l)/(d-s)),9999>Math.abs(i)){if(0>t*t*i*i+v*v-(u=a-e-i*(d-n))*u){o.x=NaN,o.y=NaN,u=!1;break t}l=i*((s=(-t*t*i*u+t*v*(h=Math.sqrt(t*t*i*i+v*v-u*u)))/(v*v+t*t*i*i)+n)-n)+u+e,e=i*((t=(-t*t*i*u-t*v*h)/(v*v+t*t*i*i)+n)-n)+u+e,(n=Math.abs((d-s)*(d-s))+Math.abs((a-l)*(a-l)))<(a=Math.abs((d-t)*(d-t))+Math.abs((a-e)*(a-e)))?(o.x=s,o.y=l):(o.x=t,o.y=e)}else{if(s=v*v,0>(s-=s/(t*t)*(l=d-n)*l)){o.x=NaN,o.y=NaN,u=!1;break t}l=e+(h=Math.sqrt(s)),e-=h,(n=Math.abs(l-a))<(a=Math.abs(e-a))?(o.x=d,o.y=l):(o.x=d,o.y=e)}u=!0}else if(c.type===qt){var m=0,g=0,b=N=0;f=r.K(),y=(p=s-d)*p+(y=l-a)*y;for(o.x=s,o.y=l,p=0;p<c.fc.count;p++)for(var x=c.fc.n[p],w=x.wb,k=m=x.ha,M=g=x.fa,S=0;S<w.count;S++){var T=w.n[S],P=T.type,N=T.C,C=(b=T.D,!1);switch(P){case Vt:k=N,M=b;break;case _t:C=Al(m,g,N,b,d,a,s,l,f);break;case Ht:C=T.wc,P=T.Rc;var A=T.Ch,F=T.Dh;C=De(m,g,C,P,A,F,N,b,d,a,s,l,.5,f);break;case Kt:C=De(m,g,C=(m+2*T.wc)/3,P=(g+2*T.Rc)/3,A=(2*T.wc+N)/3,F=(2*T.wc+N)/3,N,b,d,a,s,l,.5,f);break;case Wt:case Ut:if(0===(A=(P=T.type===Wt?ti(T,x):ei(T,x,m,g)).length)){C=Al(m,g,T.la,T.ra,d,a,s,l,f);break}for(b=0;b<A;b++)v=P[b],0===b&&Al(m,g,v[0],v[1],d,a,s,l,f)&&((N=Cl(d,a,f,y,o))<y&&(y=N,u=!0)),De(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],d,a,s,l,.5,f)&&((N=Cl(d,a,f,y,o))<y&&(y=N,u=!0));N=v[6],b=v[7];break;default:r.k("Unknown Segment type: "+P)}m=N,g=b,C&&((N=Cl(d,a,f,y,o))<y&&(y=N,u=!0)),T.Gx&&(Al(m,g,N=k,b=M,d,a,s,l,f)&&((N=Cl(d,a,f,y,o))<y&&(y=N,u=!0)))}d=i-t,a=n-e,0!==(e=Math.sqrt(d*d+a*a))&&(d/=e,a/=e),o.x-=d*h,o.y-=a*h,r.v(f)}else r.k("Unknown Geometry type: "+c.type);return!!u&&(this.transform.nb(o),!0)},Ml.prototype.containedInRect=Ml.prototype.pn=function(t,e){if(void 0===e)return t.Ak(this.Y);null===(i=this.Sa)&&(ps(this,1/0,1/0),i=this.Sa);var i=i.ab,n=this.mb/2,o=!1,a=r.K();return a.m(i.x-n,i.y-n),t.Ia(e.nb(a))&&(a.m(i.x-n,i.bottom+n),t.Ia(e.nb(a))&&(a.m(i.right+n,i.bottom+n),t.Ia(e.nb(a))&&(a.m(i.right+n,i.y-n),t.Ia(e.nb(a))&&(o=!0)))),r.v(a),o},Ml.prototype.intersectsRect=Ml.prototype.Zf=function(t,e){if(this.pn(t,e)||void 0===e&&(e=this.transform,t.Ak(this.Y)))return!0;var i=r.Wg();i.set(e),i.NA();var n=t.left,o=t.right,a=t.top,s=t.bottom,l=r.K();if(l.m(n,a),i.nb(l),this.zk(l,!0))return r.v(l),!0;if(l.m(o,a),i.nb(l),this.zk(l,!0))return r.v(l),!0;if(l.m(n,s),i.nb(l),this.zk(l,!0))return r.v(l),!0;if(l.m(o,s),i.nb(l),this.zk(l,!0))return r.v(l),!0;var h=r.K(),u=r.K();i.set(e),i.RF(this.transform),i.NA(),h.x=o,h.y=a,h.transform(i),l.x=n,l.y=a,l.transform(i);var c=!1;return Fl(this,l,h,u)?c=!0:(l.x=o,l.y=s,l.transform(i),Fl(this,l,h,u)?c=!0:(h.x=n,h.y=s,h.transform(i),Fl(this,l,h,u)?c=!0:(l.x=n,l.y=a,l.transform(i),Fl(this,l,h,u)&&(c=!0)))),r.v(l),r.bf(i),r.v(h),r.v(u),c},Ml.prototype.cF=function(t,e,i){function n(t,e){for(var i=t.length,n=0;n<i;n+=2)if(e.Rp(t[n],t[n+1])>o)return!0;return!1}if(i&&null!==this.fill&&this.zk(t,!0))return!0;var o=t.Bf(e);if(e=o,1.5<this.mb&&(o=this.mb/2+Math.sqrt(o),o*=o),null===(u=this.Sa)&&(ps(this,1/0,1/0),null===(u=this.Sa)))return!1;if(!i){var a=(h=u.ab).x,s=h.y,l=h.x+h.width,h=h.y+h.height;if(f(t.x,t.y,a,s)<=o&&f(t.x,t.y,l,s)<=o&&f(t.x,t.y,a,h)<=o&&f(t.x,t.y,l,h)<=o)return!0}if(a=u.Cc,s=u.Mc,l=u.yb,h=u.Gb,u.type===It){if(i=c(t.x,t.y,a,s,l,h),u=(a-l)*(t.x-l)+(s-h)*(t.y-h),i<=(0<=(l-a)*(t.x-a)+(h-s)*(t.y-s)&&0<=u?o:e))return!0}else{if(u.type===Ot)return e=!1,i&&(e=c(t.x,t.y,a,s,a,h)<=o||c(t.x,t.y,a,s,l,s)<=o||c(t.x,t.y,l,s,l,h)<=o||c(t.x,t.y,a,h,l,h)<=o),e;if(u.type===Et){e=t.x-(a+l)/2;var u=t.y-(s+h)/2,d=Math.abs(l-a)/2,p=Math.abs(h-s)/2;if(0===d||0===p)return(i=c(t.x,t.y,a,s,l,h))<=o;if(!i)return!(f(e,u,-d,0)>=o||f(e,u,0,-p)>=o||f(e,u,0,p)>=o||f(e,u,d,0)>=o);if((t=function(t,e,i,n){var o=0>i,r=0>n,a=0,s=a=0;t<e?(a=1,s=0):(a=0,s=1);var l=0,h=0,u=0,c=0;if(l=0===a?t:e,u=0===a?i:n,(0===a?o:r)&&(u=-u),h=0===(a=s)?t:e,c=0===a?i:n,(0===a?o:r)&&(c=-c),t=t=0,0<c)if(0<u){for(e=l*l,l*=u,n=-(t=h*h)+(i=h*c),o=-t+Math.sqrt(l*l+i*i),h=n,r=0;9999999999>r&&(h=.5*(n+o))!==n&&h!==o;++r)if(0<(s=(s=l/(h+e))*s+(a=i/(h+t))*a-1))n=h;else{if(!(0>s))break;o=h}u=e*u/(h+e)-u,c=t*c/(h+t)-c,t=Math.sqrt(u*u+c*c)}else t=Math.abs(c-h);else(t=l*u)<(c=l*l-h*h)?(c=t/c,t=h*Math.sqrt(Math.abs(1-c*c)),u=l*c-u,t=Math.sqrt(u*u+t*t)):t=Math.abs(u-l);return t}(d,p,e,u))*t<=o)return!0}else if(u.type===qt){if(a=(h=u.ab).x,s=h.y,l=h.x+h.width,h=h.y+h.height,t.x>l&&t.x<a&&t.y>h&&t.y<s&&c(t.x,t.y,a,s,a,h)>o&&c(t.x,t.y,a,s,l,s)>o&&c(t.x,t.y,l,h,a,h)>o&&c(t.x,t.y,l,h,l,s)>o)return!1;if(e=Math.sqrt(o),!i){for(i=u.fc,e=0;e<i.count;e++){if(d=(a=i.n[e]).ha,p=a.fa,t.Rp(d,p)>o)return!1;for(l=(s=a.wb.n).length,h=0;h<l;h++){var y=s[h];switch(y.type){case Vt:case _t:if(d=y.C,p=y.D,t.Rp(d,p)>o)return!1;break;case Ht:if(u=r.eb(),Pe(d,p,y.wc,y.Rc,y.Ch,y.Dh,y.C,y.D,.8,u),d=n(u,t),r.ta(u),d)return!1;if(d=y.C,p=y.D,t.Rp(d,p)>o)return!1;break;case Kt:if(u=r.eb(),Fe(d,p,y.wc,y.Rc,y.C,y.D,.8,u),d=n(u,t),r.ta(u),d)return!1;if(d=y.C,p=y.D,t.Rp(d,p)>o)return!1;break;case Wt:case Ut:var v=y.type===Wt?ti(y,a):ei(y,a,d,p),m=v.length;if(0===m){if(d=y.la,p=y.ra,t.Rp(d,p)>o)return!1;break}for(y=null,u=r.eb(),e=0;e<m;e++)if(y=v[e],u.length=0,Pe(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],.8,u),n(u,t))return r.ta(u),!1;r.ta(u),null!==y&&(d=y[6],p=y[7]);break;default:r.k("Unknown Segment type: "+y.type)}}}return!0}if(null===this.fill?$e(u,t.x,t.y,e):u.Ia(t,e,!0))return!0}}return!1},r.defineProperty(Ml,{of:"geometry"},function(){return null!==this.Sa?this.Sa:this.Sf},function(t){var e=this.Sa;if(e!==t){this.Sf=this.Sa=null!==t?t.freeze():null;var i=this.U;null!==i&&(i.hk=NaN),this.H(),this.h("geometry",e,t),Ts(this)&&(null!==(t=this.U)&&cs(this,t,"geometryString"))}}),r.defineProperty(Ml,{aI:"geometryString"},function(){return null===this.of?"":this.of.toString()},function(t){var e=(t=Gt(t)).normalize();this.of=t,this.position=t=r.xb(-e.x,-e.y),r.v(t)}),r.defineProperty(Ml,{AF:"isGeometryPositioned"},function(){return this.Rr},function(t){var e=this.Rr;e!==t&&(this.Rr=t,this.H(),this.h("isGeometryPositioned",e,t))}),Ml.prototype.Me=function(){this.Sa=null},r.defineProperty(Ml,{fill:"fill"},function(){return this.Gd},function(t){var e=this.Gd;e!==t&&(t instanceof ja&&t.freeze(),this.Gd=t,this.oa(),this.h("fill",e,t))}),r.defineProperty(Ml,{stroke:"stroke"},function(){return this.sc},function(t){var e=this.sc;e!==t&&(t instanceof ja&&t.freeze(),this.sc=t,this.oa(),this.h("stroke",e,t))}),r.defineProperty(Ml,{mb:"strokeWidth"},function(){return this.ii},function(t){var e=this.ii;if(e!==t)if(0<=t){this.ii=t,this.H();var i=this.U;null!==i&&(i.hk=NaN),this.h("strokeWidth",e,t)}else r.Fa(t,"value >= 0",Ml,"strokeWidth:value")}),r.defineProperty(Ml,{UL:"strokeCap"},function(){return this.pp},function(t){var e=this.pp;e!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?r.Fa(t,'"butt", "round", or "square"',Ml,"strokeCap"):(this.pp=t,this.oa(),this.h("strokeCap",e,t)))}),r.defineProperty(Ml,{WL:"strokeJoin"},function(){return this.rp},function(t){var e=this.rp;e!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?r.Fa(t,'"miter", "bevel", or "round"',Ml,"strokeJoin"):(this.rp=t,this.oa(),this.h("strokeJoin",e,t)))}),r.defineProperty(Ml,{XL:"strokeMiterLimit"},function(){return this.en},function(t){var e=this.en;if(e!==t)if(1<=t){this.en=t,this.oa();var i=this.U;null!==i&&(i.hk=NaN),this.h("strokeMiterLimit",e,t)}else r.Fa(t,"value >= 1",Ml,"strokeWidth:value")}),r.defineProperty(Ml,{xG:"strokeDashArray"},function(){return this.qp},function(t){var e=this.qp;if(e!==t){if(null===t||Array.isArray(t)||r.Ed(t,"Array",Ml,"strokeDashArray:value"),null!==t){for(var i=t.length,n=0,o=0;o<i;o++){var a=t[o];"number"==typeof a&&0<=a&&isFinite(a)||r.k("strokeDashArray:value "+a+" at index "+o+" must be a positive number or zero."),n+=a}if(0===n){if(null===e)return;t=null}}this.qp=t,this.oa(),this.h("strokeDashArray",e,t)}}),r.defineProperty(Ml,{VL:"strokeDashOffset"},function(){return this.zf},function(t){var e=this.zf;e!==t&&0<=t&&(this.zf=t,this.oa(),this.h("strokeDashOffset",e,t))}),r.defineProperty(Ml,{Db:"figure"},function(){return this.Do},function(t){var e=this.Do;if(e!==t){var i=wh[t];"function"==typeof i?i=t:(i=wh[t.toLowerCase()])||r.k("Unknown Shape.figure: "+t),e!==i&&(null!==(t=this.U)&&(t.hk=NaN),this.Do=i,this.Sf=null,this.Me(),this.H(),this.h("figure",e,i))}}),r.defineProperty(Ml,{Eq:"toArrow"},function(){return this.xp},function(t){var e=this.xp;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var i=Nh(t);null===i?r.k("Unknown Shape.toArrow: "+t):e!==i&&(this.xp=i,this.Sf=null,this.Me(),this.H(),Dl(this),this.h("toArrow",e,i))}}),r.defineProperty(Ml,{zA:"fromArrow"},function(){return this.Fo},function(t){var e=this.Fo;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var i=Nh(t);null===i?r.k("Unknown Shape.fromArrow: "+t):e!==i&&(this.Fo=i,this.Sf=null,this.Me(),this.H(),Dl(this),this.h("fromArrow",e,i))}}),r.defineProperty(Ml,{A:"spot1"},function(){return this.gi},function(t){r.G(t,Mt,Ml,"spot1");var e=this.gi;e.L(t)||(this.gi=t=t.S(),this.H(),this.h("spot1",e,t))}),r.defineProperty(Ml,{B:"spot2"},function(){return this.hi},function(t){r.G(t,Mt,Ml,"spot2");var e=this.hi;e.L(t)||(this.hi=t=t.S(),this.H(),this.h("spot2",e,t))}),r.defineProperty(Ml,{Hc:"parameter1"},function(){return this.Js},function(t){var e=this.Js;e!==t&&(this.Js=t,this.Me(),this.H(),this.h("parameter1",e,t))}),r.defineProperty(Ml,{Ku:"parameter2"},function(){return this.Ks},function(t){var e=this.Ks;e!==t&&(this.Ks=t,this.Me(),this.H(),this.h("parameter2",e,t))}),r.u(Ml,{Ja:"naturalBounds"},function(){if(null!==this.Sa)return this.Wc.assign(this.Sa.ab),this.Wc;var t=this.Ca;return new pt(0,0,t.width,t.height)}),r.defineProperty(Ml,{$x:"pathPattern"},function(){return this.Ms},function(t){var e=this.Ms;e!==t&&(this.Ms=t,this.oa(),this.h("pathPattern",e,t))}),r.defineProperty(Ml,{KL:"pathObject"},function(){return this.$x},function(t){this.$x=t}),r.defineProperty(Ml,{BA:"geometryStretch"},function(){return this.Gr},function(t){var e=this.Gr;e!==t&&(r.ob(t,ls,Ml,"geometryStretch"),this.Gr=t,this.h("geometryStretch",e,t))}),r.defineProperty(Ml,{interval:"interval"},function(){return this.ug},function(t){var e=this.ug;if(e!==(t=Math.floor(t))&&0<=t){this.ug=t;var i=this.g;null!==i&&this.Q===i.Bn&&zr(i),this.H(),null!==(i=this.Q)&&i.type===Us&&(i.Xj=null),this.h("interval",e,t)}}),r.defineProperty(Ml,{nF:"graduatedStart"},function(){return this.tg},function(t){var e=this.tg;e!==t&&(0>t?t=0:1<t&&(t=1),this.tg=t,this.H(),this.h("graduatedStart",e,t))}),r.defineProperty(Ml,{lF:"graduatedEnd"},function(){return this.sg},function(t){var e=this.sg;e!==t&&(0>t?t=0:1<t&&(t=1),this.sg=t,this.H(),this.h("graduatedEnd",e,t))}),Ml.makeGeometry=function(t,e,i){var n=null;if("None"!==t.Eq)n=ge[t.Eq];else if("None"!==t.zA)n=ge[t.zA];else{var o=wh[t.Db];"string"==typeof o&&(o=wh[o]),void 0===o&&r.k("Unknown Shape.figure: "+t.Db),(n=o(t,e,i)).No=e,n.Lo=i}return null===n&&("function"==typeof(o=wh.Rectangle)&&(n=o(t,e,i))),n},Ml.getFigureGenerators=function(){var t,e=new ht("string","function");for(t in wh)if(t!==t.toLowerCase()){var i=wh[t];"function"==typeof i&&e.add(t,i)}return e.freeze(),e},Ml.defineFigureGenerator=function(t,e){r.j(t,"string",Ml,"defineFigureGenerator:name"),"string"==typeof e?""!==e&&wh[e]||r.k("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: "+e):r.j(e,"function",Ml,"defineFigureGenerator:func");var i=t.toLowerCase();""!==t&&"none"!==i&&t!==i||r.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+t),wh[t]=e,wh[i]=t},Ml.getArrowheadGeometries=function(){var t,e=new ht("string",He);for(t in Ph)if(void 0===ge[t]){var i=Gt(Ph[t],!1);ge[t]=i,(i=t.toLowerCase())!==t&&(ge[i]=t)}for(t in ge)t!==t.toLowerCase()&&((i=ge[t])instanceof He&&e.add(t,i));return e.freeze(),e},Ml.defineArrowheadGeometry=function(t,e){r.j(t,"string",Ml,"defineArrowheadGeometry:name");var i=null;"string"==typeof e?(r.j(e,"string",Ml,"defineArrowheadGeometry:pathstr"),i=Gt(e,!1)):(r.G(e,He,Ml,"defineArrowheadGeometry:pathstr"),i=e);var n=t.toLowerCase();""!==t&&"none"!==n&&t!==n||r.k("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t),ge[t]=i,ge[n]=t},r.La(Ll,ls),r.ga("TextBlock",Ll);var jl=/[ \u200b\u00ad]/;Ll.prototype.cloneProtected=function(t){ls.prototype.cloneProtected.call(this,t),t.Md=this.Md,t.sc=this.sc,t.qg=this.qg,t.Cl=this.Cl,t.pg=this.pg,t.Gl=this.Gl,t.Gm=this.Gm,t.ck=this.ck,t.ak=this.ak,t.$i=this.$i,t.kj=this.kj,t.me=this.me,t.jw=this.jw,t.Bz=this.Bz,t.Az=this.Az,t.yf.Lp(this.yf),t.zr=this.zr,t.vt=this.vt,t.Dl=this.Dl,t.ut=this.ut,t.Yq=this.Yq,t.Ue=this.Ue,t.ei=this.ei,t.fi=this.fi,t.gh=this.gh,t.To=this.To,t.ug=this.ug,t.tg=this.tg,t.sg=this.sg,t.Cm=this.Cm},Ll.prototype.hc=function(t){t.Ge===Ll?this.LG=t:ls.prototype.hc.call(this,t)},Ll.prototype.toString=function(){return 22<this.Md.length?'TextBlock("'+this.Md.substring(0,20)+'"...)':'TextBlock("'+this.Md+'")'};var zl,Bl,Il,Ol,El,ql,Rl=new l,Gl=0,Vl=new l,_l=0,Hl="...",Kl="",Wl=new zt(null).Bk;function Ul(t,e,i,n){e=e.replace(/^\s+|\s+$/g,"");var o=0,r=0,a=0,s=t.qg,l=(r=t.ei+t.fi,Math.max(0,Yl(t)+r));a=t.$i===ql?Xl(s):0;if(t.me>=t.gh)return new dt(0,l);if(t.kj===zl){if(i.jj=1,r=$l(e,s),0===a||r<=n)return i.Ee=Math.max(i.Ee,r),i.wf.push(i.Ee),i.Re.push(e),new dt(r,l);var h=Jl(t,e),u=Jl(t,e=e.substr(h.length));for(r=$l(h+u,s);0<u.length&&r<=n;)r=$l(((h+=u)+(u=Jl(t,e=e.substr(u.length)))).replace(/^\s+|\s+$/g,""),s);for(h+=u.replace(/^\s+|\s+$/g,""),n=Math.max(1,n-a);$l(h,s)>n&&1<h.length;)h=h.substr(0,h.length-1);return a=$l(h+=Hl,s),i.wf.push(a),i.Ee=a,i.Re.push(h),new dt(a,l)}var c=0;for(0===e.length&&(c=1,i.wf.push(0),i.Re.push(e));0<e.length;){for(h=Jl(t,e),e=e.substr(h.length);$l(h,s)>n;){for(u=1,r=$l(h.substr(0,u),s),a=0;r<=n;)u++,a=r,r=$l(h.substr(0,u),s);if(1===u?(i.wf[t.me+c]=r,o=Math.max(o,r)):(i.wf[t.me+c]=a,o=Math.max(o,a)),1>--u&&(u=1),i.Re[t.me+c]=h.substr(0,u),c++,h=h.substr(u),t.me+c>t.gh)break}for(r=$l(h+(u=Jl(t,e)),s);0<u.length&&r<=n;)r=$l(((h+=u)+(u=Jl(t,e=e.substr(u.length)))).replace(/^\s+|\s+$/g,""),s);if(""!==(h=h.replace(/^\s+|\s+$/g,""))&&("­"===h[h.length-1]&&(h=h.substring(0,h.length-1)+"‐"),0===u.length?(i.wf.push(r),o=Math.max(o,r)):(a=$l(h,s),i.wf.push(a),o=Math.max(o,a)),i.Re.push(h),c++,t.me+c>t.gh))break}return i.jj=Math.min(t.gh,c),i.Ee=Math.max(i.Ee,o),new dt(i.Ee,l*i.jj)}function Jl(t,e){if(t.kj===Ol)return e.substr(0,1);for(var i=e.length,n=0;n<i&&!jl.test(e.charAt(n));)n++;for(;n<i&&jl.test(e.charAt(n));)n++;return n>=i?e:e.substr(0,n)}function $l(t,e){return Kl!==e&&(Kl=Wl.font=e),Wl.measureText(t).width}function Yl(t){if(null!==t.yf.Sj)return t.yf.Sj;var e=t.qg;Kl!==e&&(Kl=Wl.font=e);var i=0;return void 0!==Rl[e]&&5e3>Gl?i=Rl[e]:(i=1.3*Wl.measureText("M").width,Rl[e]=i,Gl++),t.yf.Sj=i}function Xl(t){Kl!==t&&(Kl=Wl.font=t);var e=0;return void 0!==Vl[t]&&5e3>_l?e=Vl[t]:(e=Wl.measureText(Hl).width,Vl[t]=e,_l++),e}function Ql(t,e,i){var n=t.Md.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),o=t.ei+t.fi;o=Math.max(0,Yl(t)+o);if(0===n.length)return i.Ee=0,t.me=1,o;t.Kx||0<=(r=n.indexOf("\n",0))&&(n=n.substr(0,r));for(var r=0,a=t.me=0,s=-1,l=!1;!l;)-1===(s=n.indexOf("\n",a))&&(s=n.length,l=!0),a<=s&&(a=n.substr(a,s-a),t.kj!==zl?(i.jj=0,r+=(a=Ul(t,a,i,e)).height,t.me+=i.jj):(Ul(t,a,i,e),r+=o,t.me++),t.me===t.gh&&(l=!0)),a=s+1;return t.jw=r}function Zl(){this.Ee=this.jj=0,this.wf=[],this.Re=[],this.Sj=null}function th(){ls.call(this),this.Te=null,this.ot="",this.ok=pe,this.Io=Ya,this.ji=this.Ue=null,this.Ho=k,this.pg=Wa,this.sp=null,this.vz=!1,this.Lv=!0,this.hw=!1,this.kp=null}Ll.getEllipsis=function(){return Hl},Ll.setEllipsis=function(t){Hl=t,Vl=new l,_l=0},Ll.None=zl=r.p(Ll,"None",0),Ll.WrapFit=Bl=r.p(Ll,"WrapFit",1),Ll.WrapDesiredSize=Il=r.p(Ll,"WrapDesiredSize",2),Ll.WrapBreakAll=Ol=r.p(Ll,"WrapBreakAll",3),Ll.OverflowClip=El=r.p(Ll,"OverflowClip",0),Ll.OverflowEllipsis=ql=r.p(Ll,"OverflowEllipsis",1),Ll.prototype.H=function(){ls.prototype.H.call(this),this.Az=this.Bz=null},r.defineProperty(Ll,{font:"font"},function(){return this.qg},function(t){var e=this.qg;e!==t&&(this.qg=t,this.yf.Sj=null,this.H(),this.h("font",e,t))}),Ll.isValidFont=function(t){var e,i=Wl.font;if(t===i||"10px sans-serif"===t)return!0;Wl.font="10px sans-serif",Wl.font=t;var n=Wl.font;return"10px sans-serif"!==n?(Wl.font=i,!0):(Wl.font="19px serif",e=Wl.font,Wl.font=t,n=Wl.font,Wl.font=i,n!==e)},r.defineProperty(Ll,{text:"text"},function(){return this.Md},function(t){var e=this.Md;e!==(t=null!==t&&void 0!==t?t.toString():"")&&(this.Md=t,this.H(),this.h("text",e,t))}),r.defineProperty(Ll,{textAlign:"textAlign"},function(){return this.Cl},function(t){var e=this.Cl;e!==t&&("start"===t||"end"===t||"left"===t||"right"===t||"center"===t?(this.Cl=t,this.oa(),this.h("textAlign",e,t)):r.Fa(t,'"start", "end", "left", "right", or "center"',Ll,"textAlign"))}),r.defineProperty(Ll,{au:"flip"},function(){return this.pg},function(t){var e=this.pg;e!==t&&(r.ob(t,ls,Ll,"flip"),this.pg=t,this.oa(),this.h("flip",e,t))}),r.defineProperty(Ll,{cM:"verticalAlignment"},function(){return this.Gl},function(t){var e=this.Gl;e.L(t)||(t.Td()&&r.k("TextBlock.verticalAlignment for "+this+" must be a real Spot, not:"+t),this.Gl=t=t.S(),xs(this),this.h("verticalAlignment",e,t))}),r.u(Ll,{Ja:"naturalBounds"},function(){if(!this.Wc.I()){var t=Ul(this,this.Md,this.yf,999999).width,e=Ql(this,t,this.yf),i=this.Ca;isNaN(i.width)||(t=i.width),isNaN(i.height)||(e=i.height),yt(this.Wc,t,e)}return this.Wc}),r.defineProperty(Ll,{Kx:"isMultiline"},function(){return this.Gm},function(t){var e=this.Gm;e!==t&&(this.Gm=t,this.H(),this.h("isMultiline",e,t))}),r.defineProperty(Ll,{kL:"isUnderline"},function(){return this.ck},function(t){var e=this.ck;e!==t&&(this.ck=t,this.oa(),this.h("isUnderline",e,t))}),r.defineProperty(Ll,{jL:"isStrikethrough"},function(){return this.ak},function(t){var e=this.ak;e!==t&&(this.ak=t,this.oa(),this.h("isStrikethrough",e,t))}),r.defineProperty(Ll,{LG:"wrap"},function(){return this.kj},function(t){var e=this.kj;e!==t&&(this.kj=t,this.H(),this.h("wrap",e,t))}),r.defineProperty(Ll,{overflow:"overflow"},function(){return this.$i},function(t){var e=this.$i;e!==t&&(this.$i=t,this.H(),this.h("overflow",e,t))}),r.defineProperty(Ll,{stroke:"stroke"},function(){return this.sc},function(t){var e=this.sc;e!==t&&(t instanceof ja&&t.freeze(),this.sc=t,this.oa(),this.h("stroke",e,t))}),r.u(Ll,{UA:"lineCount"},function(){return this.me}),r.defineProperty(Ll,{uA:"editable"},function(){return this.zr},function(t){var e=this.zr;e!==t&&(this.zr=t,this.h("editable",e,t))}),r.defineProperty(Ll,{zG:"textEditor"},function(){return this.vt},function(t){var e=this.vt;e!==t&&(this.vt=t,this.h("textEditor",e,t))}),r.defineProperty(Ll,{wA:"errorFunction"},function(){return this.Ue},function(t){var e=this.Ue;e!==t&&(null!==t&&r.j(t,"function",Ll,"errorFunction"),this.Ue=t,this.h("errorFunction",e,t))}),r.defineProperty(Ll,{interval:"interval"},function(){return this.ug},function(t){var e=this.ug;if(e!==(t=Math.floor(t))&&0<=t){this.ug=t,this.H();var i=this.Q;null!==i&&i.type===Us&&(i.Xj=null),this.h("interval",e,t)}}),r.defineProperty(Ll,{nF:"graduatedStart"},function(){return this.tg},function(t){var e=this.tg;e!==t&&(0>t?t=0:1<t&&(t=1),this.tg=t,this.H(),this.h("graduatedStart",e,t))}),r.defineProperty(Ll,{lF:"graduatedEnd"},function(){return this.sg},function(t){var e=this.sg;e!==t&&(0>t?t=0:1<t&&(t=1),this.sg=t,this.H(),this.h("graduatedEnd",e,t))}),r.defineProperty(Ll,{mF:"graduatedFunction"},function(){return this.Cm},function(t){var e=this.Cm;e!==t&&(null!==t&&r.j(t,"function",Ll,"graduatedFunction"),this.Cm=t,this.H(),this.h("graduatedFunction",e,t))}),Ll.prototype.Ek=function(t,e){if(null!==this.sc&&0!==this.Md.length&&null!==this.qg){var i=this.Ja.width,n=this.Ja.height,o=Yl(this),a=t.textAlign=this.Cl,s=e.Vr;"start"===a&&(a=s?"right":"left"),"end"===a&&(a=s?"left":"right"),ms(this,t,this.sc,!0,!1),(this.ck||this.ak)&&ms(this,t,this.sc,!1,!1);var l=0,h=(s=!1,r.xb(0,0));this.ph.nb(h);var u=r.xb(0,o);this.ph.nb(u);var c=h.Bf(u);switch(r.v(h),r.v(u),8>c*(h=e.scale)*h&&(s=!0),e.jf!==t&&(s=!1),!1===e.tj("textGreeking")&&(s=!1),c=this.ei,h=this.fi,this.au){case ts:t.translate(i,0),t.scale(-1,1);break;case Za:t.translate(0,n),t.scale(1,-1);break;case es:t.translate(i,n),t.scale(-1,-1)}n>(f=(c+o+h)*(u=this.me))&&(l=(l=this.Gl).y*n-l.y*f+l.offsetY);for(var f=this.yf,d=0;d<u;d++){var p=f.wf[d],y=f.Re[d];p>i&&(p=i);var v=y,m=(y=t,l=l+c),g=i,b=o,x=a,w=0;s?("left"===x?w=0:"right"===x?w=g-p:"center"===x&&(w=(g-p)/2),y.fillRect(0+w,m+.25*b,p,1)):("left"===x?w=0:"right"===x?w=g:"center"===x&&(w=g/2),y.fillText(v,0+w,m+b-.25*b),0===(v=b/20|0)&&(v=1),"right"===x?w-=p:"center"===x&&(w-=p/2),this.ck&&(y.beginPath(),y.lineWidth=v,y.moveTo(0+w,m+b-.2*b),y.lineTo(0+w+p,m+b-.2*b),y.stroke()),this.ak&&(y.beginPath(),y.lineWidth=v,m=m+b-b/2.2|0,0!=v%2&&(m+=.5),y.moveTo(0+w,m),y.lineTo(0+w+p,m),y.stroke())),l+=o+h}switch(this.au){case ts:t.scale(-1,1),t.translate(-i,0);break;case Za:t.scale(1,-1),t.translate(0,-n);break;case es:t.scale(-1,-1),t.translate(-i,-n)}}},Ll.prototype.Ln=function(t,e,i,n){this.To=t;var o=this.yf;o.reset();var r=0,a=0;if(isNaN(this.Ca.width)){if(0===(r=this.Md.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length)r=0;else if(this.Kx){for(var s=a=0,l=!1;!l;){var h=r.indexOf("\n",s);-1===h&&(h=r.length,l=!0),(s=$l(r.substr(s,h-s).replace(/^\s+|\s+$/g,""),this.qg))>a&&(a=s),s=h+1}r=a}else 0<=(a=r.indexOf("\n",0))&&(r=r.substr(0,a)),r=s=$l(r,this.qg);r=Math.min(r,t/this.scale),r=Math.max(8,r)}else r=this.Ca.width;if(null!==this.Q&&(r=Math.min(r,this.Q.Gf.width)),a=Ql(this,r,o),h=a=isNaN(this.Ca.height)?Math.min(a,e/this.scale):this.Ca.height,0!==o.Ee&&1!==o.Re.length&&this.$i===ql&&(e=this.qg,l=this.$i===ql?Xl(e):0,s=this.ei+this.fi,s=Math.max(0,Yl(this)+s),!((h=Math.min(this.TI-1,Math.max(Math.floor(h/s+.01)-1,0)))+1>=o.Re.length))){for(s=o.Re[h],l=Math.max(1,t-l);$l(s,e)>l&&1<s.length;)s=s.substr(0,s.length-1);e=$l(s+=Hl,e),o.Re[h]=s,o.Re=o.Re.slice(0,h+1),o.wf[h]=e,o.wf=o.wf.slice(0,h+1),o.jj=o.Re.length,o.Ee=Math.max(o.Ee,e),this.me=o.jj}(this.LG===Bl||isNaN(this.Ca.width))&&(r=isNaN(t)?o.Ee:Math.min(t,o.Ee),isNaN(this.Ca.width)&&(r=Math.max(8,r))),r=Math.max(i,r),a=Math.max(n,a),yt(this.Wc,r,a),fs(this,0,0,r,a)},Ll.prototype.mj=function(t,e,i,n){ys(this,t,e,i,n)},r.defineProperty(Ll,{IB:"textValidation"},function(){return this.Dl},function(t){var e=this.Dl;e!==t&&(null!==t&&r.j(t,"function",Ll,"textValidation"),this.Dl=t,this.h("textValidation",e,t))}),r.defineProperty(Ll,{yG:"textEdited"},function(){return this.ut},function(t){var e=this.ut;e!==t&&(null!==t&&r.j(t,"function",Ll,"textEdited"),this.ut=t,this.h("textEdited",e,t))}),r.defineProperty(Ll,{RL:"spacingAbove"},function(){return this.ei},function(t){var e=this.ei;e!==t&&(this.ei=t,this.h("spacingAbove",e,t))}),r.defineProperty(Ll,{SL:"spacingBelow"},function(){return this.fi},function(t){var e=this.fi;e!==t&&(this.fi=t,this.h("spacingBelow",e,t))}),r.defineProperty(Ll,{TI:"maxLines"},function(){return this.gh},function(t){var e=this.gh;e!==t&&(0>=(t=Math.floor(t))&&r.Fa(t,"> 0",Ll,"maxLines"),this.gh=t,this.h("maxLines",e,t),this.H())}),r.u(Ll,{wL:"metrics"},function(){return this.yf}),r.defineProperty(Ll,{HK:"choices"},function(){return this.Yq},function(t){var e=this.Yq;e!==t&&(null===t||Array.isArray(t)||r.Ed(t,"Array",Ll,"choices:value"),this.Yq=t,this.h("choices",e,t))}),Zl.prototype.reset=function(){this.Ee=this.jj=0,this.Sj=null,this.wf=[],this.Re=[]},Zl.prototype.Lp=function(t){this.jj=t.jj,this.Sj=t.Sj,this.Ee=t.Ee,this.wf=r.Ol(t.wf),this.Re=r.Ol(t.Re)},r.u(Zl,{DK:"arrSize"},function(){return this.wf}),r.u(Zl,{EK:"arrText"},function(){return this.Re}),r.u(Zl,{vL:"maxLineWidth"},function(){return this.Ee}),r.u(Zl,{dL:"fontHeight"},function(){return this.Sj}),r.La(th,ls),r.ga("Picture",th),th.prototype.cloneProtected=function(t){ls.prototype.cloneProtected.call(this,t),t.element=this.Te,t.ot=this.ot,t.ok=this.ok.S(),t.Io=this.Io,t.pg=this.pg,t.Ue=this.Ue,t.ji=this.ji,t.Ho=this.Ho.S(),t.Lv=this.Lv,t.kp=this.kp},th.prototype.hc=function(t){t===Wa||t===Xa||t===Qa?this.qI=t:ls.prototype.hc.call(this,t)},th.prototype.toString=function(){return"Picture("+this.source+")#"+r.Pd(this)};var eh,ih=new l,nh=0,oh=[];function rh(){var t=oh;if(0===t.length)for(var i=e.document.getElementsByTagName("canvas"),n=i.length,o=0;o<n;o++){var r=i[o];r.parentElement&&r.parentElement.aa&&t.push(r.parentElement.aa)}return t}function ah(t,e){t.Tr=!0,t.Go=!1;for(var i=null,n=rh(),o=n.length,r=0;r<o;r++){var a=n[r],s=a.dp.ka(t.src);if(null!==s)for(var l=s.length,h=0;h<l;h++)i=s[h],a.Hz.add(i),a.Ne(),null===t.Lz&&(t.Lz=e,null!==i.ji&&i.ji(i,e))}}function sh(t,e){t.Go=e;for(var i=null,n=rh(),o=n.length,a=0;a<o;a++)if(null!==(i=n[a].dp.ka(t.src))){for(var s=i.length,l=r.eb(),h=0;h<s;h++)l.push(i[h]);for(h=0;h<s;h++)null!==(i=l[h]).Ue&&i.Ue(i,e);r.ta(l)}}function lh(t,e,i,n){var o=new zt(null),r=o.Bk,a=1/e;o.width=i/e,o.height=n/e,e=new hh(o.Od,e),i=t.Ep[t.Ep.length-1],r.setTransform(a*i.rq,0,0,a*i.rq,0,0),r.drawImage(i.source,0,0),t.Ep.push(e)}function hh(t,e){this.source=t,this.rq=e}function uh(){this.o=new He,this.Xb=null}function ch(t,e,i,n,o,a){null===t.o&&r.k("StreamGeometryContext has been closed"),void 0!==o&&!0===o?(null===t.Xb&&r.k("Need to call beginFigure first"),(n=new Ze(Vt)).C=e,n.D=i,t.Xb.wb.add(n)):(t.Xb=new Qe,t.Xb.ha=e,t.Xb.fa=i,t.Xb.pu=n,t.o.fc.add(t.Xb)),void 0!==a&&(t.Xb.Oo=a)}function fh(t){null===t.o&&r.k("StreamGeometryContext has been closed"),null===t.Xb&&r.k("Need to call beginFigure first");var e=t.Xb.wb.length;0<e&&t.Xb.wb.ea(e-1).close()}function dh(t){null===t.o&&r.k("StreamGeometryContext has been closed"),null===t.Xb&&r.k("Need to call beginFigure first"),0<t.Xb.wb.length&&(t.Xb.pu=!0)}function ph(t,e,i,n,o,a,s,l){void 0===l&&(l=!1),null===t.o&&r.k("StreamGeometryContext has been closed"),null===t.Xb&&r.k("Need to call beginFigure first");var h=new Ze(Ht);h.wc=e,h.Rc=i,h.Ch=n,h.Dh=o,h.C=a,h.D=s,l&&h.close(),t.Xb.wb.add(h)}function yh(t,e,i,n,o){var a;void 0===a&&(a=!1),null===t.o&&r.k("StreamGeometryContext has been closed"),null===t.Xb&&r.k("Need to call beginFigure first");var s=new Ze(Kt);s.wc=e,s.Rc=i,s.C=n,s.D=o,a&&s.close(),t.Xb.wb.add(s)}function vh(t,e,i,n,o,a,s,l){var h;void 0===h&&(h=!1),null===t.o&&r.k("StreamGeometryContext has been closed"),null===t.Xb&&r.k("Need to call beginFigure first"),e=new Ze(Ut,s,l,e,i,n,o,a),h&&e.close(),t.Xb.wb.add(e)}function mh(t){t=gh(t);var e=r.eb();e[0]=t[0];for(var i=1,n=1;n<t.length;)e[i]=t[n],e[i+1]=t[n],e[i+2]=t[n+1],n+=2,i+=3;return r.ta(t),e}function gh(t){var e=bh(t),i=r.eb(),n=Math.floor(e.length/2),o=e.length-1;t=0==t%2?2:1;for(var a=0;a<o;a++){var s=e[a],l=e[a+1],h=e[(n+a-1)%o],u=e[(n+a+t)%o];i[2*a]=s,i[2*a+1]=Ie(s.x,s.y,h.x,h.y,l.x,l.y,u.x,u.y,new ut)}return i[i.length]=i[0],r.ta(e),i}function bh(t){for(var e=r.eb(),i=1.5*Math.PI,n=0,o=0;o<t;o++)n=2*Math.PI/t*o+i,e[o]=new ut(.5+.5*Math.cos(n),.5+.5*Math.sin(n));return e.push(e[0]),e}th.clearCache=eh=function(t){void 0===t&&(t=""),r.j(t,"string",th,"clearCache:url"),""!==t?ih[t]&&(delete ih[t],nh--):(ih=new l,nh=0)},r.defineProperty(th,{element:"element"},function(){return this.Te},function(t){var e=this.Te;if(e!==t){if(null===t||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||r.k("Picture.element must be an instance of Image, Canvas, or Video, not: "+t),this.vz=t instanceof HTMLCanvasElement,this.Te=t,null!==t)if(t instanceof HTMLCanvasElement||!0===t.complete)t.Go instanceof Event&&null!==this.Ue&&this.Ue(this,t.Go),!0===t.Tr&&null!==this.ji&&this.ji(this,t.Lz),t.Tr=!0,this.Ca.I()||(Fs(this,!1),this.H());else{var i=this;t.YC||(t.addEventListener("load",function(e){ah(t,e),i.Ca.I()||(Fs(i,!1),i.H())}),t.addEventListener("error",function(e){sh(t,e)}),t.YC=!0)}this.h("element",e,t),this.oa()}}),r.defineProperty(th,{source:"source"},function(){return this.ot},function(t){var e=this.ot;if(e!==t){r.j(t,"string",th,"source"),this.ot=t;var i=ih,n=this.g;if(void 0!==i[t])var o=i[t].Ep[0].source;else{30<nh&&(eh(),i=ih);var a=this;(o=r.createElement("img")).addEventListener("load",function(t){ah(o,t),a.Ca.I()||(Fs(a,!1),a.H())}),o.addEventListener("error",function(t){sh(o,t)}),o.YC=!0;var s=this.kp;null!==s&&(o.crossOrigin=s(this)),o.src=t,i[t]=new function(t){this.Ep=[new hh(t,1)]}(o),nh++}null!==n&&_r(n,this),this.element=o,null!==n&&Gr(n,this),this.H(),this.oa(),this.h("source",e,t)}}),r.defineProperty(th,{QL:"sourceCrossOrigin"},function(){return this.kp},function(t){if(this.kp!==t&&(null!==t&&r.j(t,"function",th,"sourceCrossOrigin"),this.kp=t,null!==this.element)){var e=this.element.src;null===t&&"string"==typeof e?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)),this.element.src=e}}),r.defineProperty(th,{Fj:"sourceRect"},function(){return this.ok},function(t){var e=this.ok;e.L(t)||(r.G(t,pt,th,"sourceRect"),this.ok=t=t.S(),this.oa(),this.h("sourceRect",e,t))}),r.defineProperty(th,{qI:"imageStretch"},function(){return this.Io},function(t){var e=this.Io;e!==t&&(r.ob(t,ls,th,"imageStretch"),this.Io=t,this.oa(),this.h("imageStretch",e,t))}),r.defineProperty(th,{au:"flip"},function(){return this.pg},function(t){var e=this.pg;e!==t&&(r.ob(t,ls,th,"flip"),this.pg=t,this.oa(),this.h("flip",e,t))}),r.defineProperty(th,{fL:"imageAlignment"},function(){return this.Ho},function(t){r.G(t,Mt,th,"imageAlignment");var e=this.Ho;e.L(t)||(this.Ho=t=t.S(),this.H(),this.h("imageAlignment",e,t))}),r.defineProperty(th,{wA:"errorFunction"},function(){return this.Ue},function(t){var e=this.Ue;e!==t&&(null!==t&&r.j(t,"function",th,"errorFunction"),this.Ue=t,this.h("errorFunction",e,t))}),r.defineProperty(th,{$L:"successFunction"},function(){return this.ji},function(t){var e=this.ji;e!==t&&(null!==t&&r.j(t,"function",th,"successFunction"),this.ji=t,this.h("successFunction",e,t))}),th.prototype.Ek=function(t,e){var i=this.Te;if(null!==i&&(null!==(n=i.src)&&""!==n||r.k('Element has no source ("src") attribute: '+i),!(i.Go instanceof Event)&&!1!==i.Tr)){var n=this.Ja,o=0,a=0,s=(l=this.vz)?+i.width:i.naturalWidth,l=l?+i.height:i.naturalHeight;if(void 0===s&&i.videoWidth&&(s=i.videoWidth),void 0===l&&i.videoHeight&&(l=i.videoHeight),s=s||n.width,l=l||n.height,0!==s&&0!==l){var h=s,u=l;this.Fj.I()&&(o=this.ok.x,a=this.ok.y,s=this.ok.width,l=this.ok.height);var c=s,f=l,d=this.Io,p=this.Ho;switch(d){case Wa:if(this.Fj.I())break;c>=n.width&&(o=o+p.offsetX+(c*p.x-n.width*p.x)),f>=n.height&&(a=a+p.offsetY+(f*p.y-n.height*p.y)),s=Math.min(n.width,c),l=Math.min(n.height,f);break;case Ya:c=n.width,f=n.height;break;case Xa:case Qa:var y=0;d===Xa?(c*=y=Math.min(n.height/f,n.width/c),f*=y):d===Qa&&(f*=y=Math.max(n.height/f,n.width/c),(c*=y)>=n.width&&(o=(o+p.offsetX+(c*p.x-n.width*p.x)/c)*s),f>=n.height&&(a=(a+p.offsetY+(f*p.y-n.height*p.y)/f)*l),s*=1/(c/n.width),l*=1/(f/n.height),c=n.width,f=n.height)}var v=s*l/(c*(d=this.sj()*e.scale)*f*d);y=ih[this.source],d=null;if(i.Tr&&void 0!==y&&16<v){2>y.Ep.length&&(lh(y,4,h,u),lh(y,16,h,u));u=(h=y.Ep).length,d=h[0];for(var m=0;m<u&&h[m].rq*h[m].rq<v;m++)d=h[m]}if(!e.wr){if(null===this.sp)if(null===this.Te)this.sp=!1;else{(h=new zt(null).Bk).drawImage(this.Te,0,0);try{h.getImageData(0,0,1,1).data[3]&&(this.sp=!1),this.sp=!1}catch(t){this.sp=!0}}if(this.sp)return}switch(h=0,c<n.width&&(h=p.offsetX+(n.width*p.x-c*p.x)),u=0,f<n.height&&(u=p.offsetY+(n.height*p.y-f*p.y)),this.au){case ts:t.translate(Math.min(n.width,c),0),t.scale(-1,1);break;case Za:t.translate(0,Math.min(n.height,f)),t.scale(1,-1);break;case es:t.translate(Math.min(n.width,c),Math.min(n.height,f)),t.scale(-1,-1)}if(e.tj("pictureRatioOptimization")&&!e.wz&&void 0!==y&&null!==d&&1!==d.rq){t.save(),y=d.rq;try{t.drawImage(d.source,o/y,a/y,Math.min(d.source.width,s/y),Math.min(d.source.height,l/y),h,u,Math.min(n.width,c),Math.min(n.height,f))}catch(t){this.Lv=!1}t.restore()}else try{t.drawImage(i,o,a,s,l,h,u,Math.min(n.width,c),Math.min(n.height,f))}catch(t){this.Lv=!1}switch(this.au){case ts:t.scale(-1,1),t.translate(-Math.min(n.width,c),0);break;case Za:t.scale(1,-1),t.translate(0,-Math.min(n.height,f));break;case es:t.scale(-1,-1),t.translate(-Math.min(n.width,c),-Math.min(n.height,f))}}}},r.u(th,{Ja:"naturalBounds"},function(){return this.Wc}),th.prototype.Ln=function(t,e,i,n){var o=this.Ca,r=ws(this,!0),a=this.Te,s=this.vz;(s||!this.hw&&a&&a.complete)&&(this.hw=!0),null===a&&(isFinite(o.width)||(t=0),isFinite(o.height)||(e=0)),isFinite(o.width)||r===Ya||r===$a?(isFinite(t)||(t=this.Fj.I()?this.Fj.width:s?+a.width:a.naturalWidth),i=0):null!==a&&!1!==this.hw&&(t=this.Fj.I()?this.Fj.width:s?+a.width:a.naturalWidth),isFinite(o.height)||r===Ya||r===Ja?(isFinite(e)||(e=this.Fj.I()?this.Fj.height:s?+a.height:a.naturalHeight),n=0):null!==a&&!1!==this.hw&&(e=this.Fj.I()?this.Fj.height:s?+a.height:a.naturalHeight),isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(e=o.height),o=this.Gf,r=this.qi,i=Math.max(i,r.width),n=Math.max(n,r.height),t=Math.min(o.width,t),e=Math.min(o.height,e),t=Math.max(i,t),e=Math.max(n,e),null===a||a.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),yt(this.Wc,t,e),fs(this,0,0,t,e)},th.prototype.mj=function(t,e,i,n){ys(this,t,e,i,n)},(i=uh.prototype).reset=function(){this.o=new He,this.Xb=null},i.bb=function(t){null===this.o&&r.k("StreamGeometryContext has been closed"),null===this.Xb&&r.k("Need to call beginFigure first"),this.Xb.cm=t},i.moveTo=function(t,e,i){void 0===i&&(i=!1),null===this.o&&r.k("StreamGeometryContext has been closed"),null===this.Xb&&r.k("Need to call beginFigure first");var n=new Ze(Vt);n.C=t,n.D=e,i&&n.close(),this.Xb.wb.add(n)},i.lineTo=function(t,e,i){void 0===i&&(i=!1),null===this.o&&r.k("StreamGeometryContext has been closed"),null===this.Xb&&r.k("Need to call beginFigure first");var n=new Ze(_t);n.C=t,n.D=e,i&&n.close(),this.Xb.wb.add(n)},i.arcTo=function(t,e,i,n,o,a,s){void 0===a&&(a=0),void 0===s&&(s=!1),null===this.o&&r.k("StreamGeometryContext has been closed"),null===this.Xb&&r.k("Need to call beginFigure first");var l=new Ze(Wt);l.ze=t,l.uf=e,l.la=i,l.ra=n,l.radiusX=o,l.radiusY=0!==a?a:o,s&&l.close(),this.Xb.wb.add(l)};var xh,wh={None:"Rectangle",Rectangle:function(t,e,i){return(t=new He).type=Ot,t.ha=0,t.fa=0,t.C=e,t.D=i,t},Square:function(t,e,i){return(t=new He).ae=Xa,t.type=Ot,t.ha=0,t.fa=0,t.C=Math.min(e,i),t.D=Math.min(e,i),t},Ellipse:function(t,e,i){return(t=new He).type=Et,t.ha=0,t.fa=0,t.C=e,t.D=i,t.A=ye,t.B=ve,t},Circle:function(t,e,i){return(t=new He).ae=Xa,t.type=Et,t.ha=0,t.fa=0,t.C=Math.min(e,i),t.D=Math.min(e,i),t.A=ye,t.B=ve,t},Connector:"Ellipse",TriangleRight:function(t,e,i){t=new He;var n=new Qe,o=new Ze;return o.C=e,o.D=.5*i,n.wb.add(o),(e=new Ze).C=0,e.D=i,n.wb.add(e.close()),t.fc.add(n),t.A=new Mt(0,.25),t.B=new Mt(.5,.75),t},TriangleDown:function(t,e,i){t=new He;var n=new Qe,o=new Ze;return o.C=e,o.D=0,n.wb.add(o),(o=new Ze).C=.5*e,o.D=i,n.wb.add(o.close()),t.fc.add(n),t.A=new Mt(.25,0),t.B=new Mt(.75,.5),t},TriangleLeft:function(t,e,i){t=new He;var n=new Qe;n.ha=e,n.fa=i;var o=new Ze;return o.C=0,o.D=.5*i,n.wb.add(o),(i=new Ze).C=e,i.D=0,n.wb.add(i.close()),t.fc.add(n),t.A=new Mt(.5,.25),t.B=new Mt(1,.75),t},TriangleUp:function(t,e,i){t=new He;var n=new Qe;n.ha=e,n.fa=i;var o=new Ze;return o.C=0,o.D=i,n.wb.add(o),(i=new Ze).C=.5*e,i.D=0,n.wb.add(i.close()),t.fc.add(n),t.A=new Mt(.25,.5),t.B=new Mt(.75,1),t},Line1:function(t,e,i){return(t=new He).type=It,t.ha=0,t.fa=0,t.C=e,t.D=i,t},Line2:function(t,e,i){return(t=new He).type=It,t.ha=e,t.fa=0,t.C=0,t.D=i,t},MinusLine:"LineH",LineH:function(t,e,i){return(t=new He).type=It,t.ha=0,t.fa=i/2,t.C=e,t.D=i/2,t},LineV:function(t,e,i){return(t=new He).type=It,t.ha=e/2,t.fa=0,t.C=e/2,t.D=i,t},BarH:"Rectangle",BarV:"Rectangle",Curve1:function(t,e,i){return ch(t=r.s(),0,0,!1),ph(t,Qt*e,0,1*e,(1-Qt)*i,e,i),e=t.o,r.q(t),e},Curve2:function(t,e,i){return ch(t=r.s(),0,0,!1),ph(t,0,Qt*i,(1-Qt)*e,i,e,i),e=t.o,r.q(t),e},Curve3:function(t,e,i){return ch(t=r.s(),1*e,0,!1),ph(t,1*e,Qt*i,Qt*e,1*i,0,1*i),e=t.o,r.q(t),e},Curve4:function(t,e,i){return ch(t=r.s(),1*e,0,!1),ph(t,(1-Qt)*e,0,0,(1-Qt)*i,0,1*i),e=t.o,r.q(t),e},Alternative:"Triangle",Merge:"Triangle",Triangle:function(t,e,i){return ch(t=r.s(),.5*e,0*i,!0),t.lineTo(0*e,1*i),t.lineTo(1*e,1*i,!0),(e=t.o).A=new Mt(.25,.5),e.B=new Mt(.75,1),r.q(t),e},Decision:"Diamond",Diamond:function(t,e,i){return ch(t=r.s(),.5*e,0,!0),t.lineTo(0,.5*i),t.lineTo(.5*e,1*i),t.lineTo(1*e,.5*i,!0),(e=t.o).A=new Mt(.25,.25),e.B=new Mt(.75,.75),r.q(t),e},Pentagon:function(t,e,i){var n=bh(5);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;5>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.2,.22),e.B=new Mt(.8,.9),r.q(t),e},DataTransmission:"Hexagon",Hexagon:function(t,e,i){var n=bh(6);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;6>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.07,.25),e.B=new Mt(.93,.75),r.q(t),e},Heptagon:function(t,e,i){var n=bh(7);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;7>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.2,.15),e.B=new Mt(.8,.85),r.q(t),e},Octagon:function(t,e,i){var n=bh(8);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;8>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.15,.15),e.B=new Mt(.85,.85),r.q(t),e},Nonagon:function(t,e,i){var n=bh(9);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;9>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.17,.13),e.B=new Mt(.82,.82),r.q(t),e},Decagon:function(t,e,i){var n=bh(10);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;10>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.16,.16),e.B=new Mt(.84,.84),r.q(t),e},Dodecagon:function(t,e,i){var n=bh(12);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;12>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.16,.16),e.B=new Mt(.84,.84),r.q(t),e},FivePointedStar:function(t,e,i){var n=gh(5);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;10>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.312,.383),e.B=new Mt(.693,.765),r.q(t),e},SixPointedStar:function(t,e,i){var n=gh(6);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;12>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.17,.251),e.B=new Mt(.833,.755),r.q(t),e},SevenPointedStar:function(t,e,i){var n=gh(7);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;14>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.363,.361),e.B=new Mt(.641,.709),r.q(t),e},EightPointedStar:function(t,e,i){var n=gh(8);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;16>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.252,.255),e.B=new Mt(.75,.75),r.q(t),e},NinePointedStar:function(t,e,i){var n=gh(9);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;18>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.355,.361),e.B=new Mt(.645,.651),r.q(t),e},TenPointedStar:function(t,e,i){var n=gh(10);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;20>o;o++)t.lineTo(n[o].x*e,n[o].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.281,.261),e.B=new Mt(.723,.748),r.q(t),e},FivePointedBurst:function(t,e,i){var n=mh(5);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;o<n.length;o+=3)ph(t,n[o].x*e,n[o].y*i,n[o+1].x*e,n[o+1].y*i,n[o+2].x*e,n[o+2].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.312,.383),e.B=new Mt(.693,.765),r.q(t),e},SixPointedBurst:function(t,e,i){var n=mh(6);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;o<n.length;o+=3)ph(t,n[o].x*e,n[o].y*i,n[o+1].x*e,n[o+1].y*i,n[o+2].x*e,n[o+2].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.17,.251),e.B=new Mt(.833,.755),r.q(t),e},SevenPointedBurst:function(t,e,i){var n=mh(7);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;o<n.length;o+=3)ph(t,n[o].x*e,n[o].y*i,n[o+1].x*e,n[o+1].y*i,n[o+2].x*e,n[o+2].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.363,.361),e.B=new Mt(.641,.709),r.q(t),e},EightPointedBurst:function(t,e,i){var n=mh(8);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;o<n.length;o+=3)ph(t,n[o].x*e,n[o].y*i,n[o+1].x*e,n[o+1].y*i,n[o+2].x*e,n[o+2].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.252,.255),e.B=new Mt(.75,.75),r.q(t),e},NinePointedBurst:function(t,e,i){var n=mh(9);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;o<n.length;o+=3)ph(t,n[o].x*e,n[o].y*i,n[o+1].x*e,n[o+1].y*i,n[o+2].x*e,n[o+2].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.355,.361),e.B=new Mt(.645,.651),r.q(t),e},TenPointedBurst:function(t,e,i){var n=mh(10);ch(t=r.s(),n[0].x*e,n[0].y*i,!0);for(var o=1;o<n.length;o+=3)ph(t,n[o].x*e,n[o].y*i,n[o+1].x*e,n[o+1].y*i,n[o+2].x*e,n[o+2].y*i);return r.ta(n),fh(t),(e=t.o).A=new Mt(.281,.261),e.B=new Mt(.723,.748),r.q(t),e},Cloud:function(t,e,i){return ch(t=r.s(),.08034461*e,.1944299*i,!0),ph(t,-.09239631*e,.07836421*i,.1406031*e,-.0542823*i,.2008615*e,.05349299*i),ph(t,.2450511*e,-.00697547*i,.3776197*e,-.01112067*i,.4338609*e,.074219*i),ph(t,.4539471*e,0,.6066018*e,-.02526587*i,.6558228*e,.07004196*i),ph(t,.6914277*e,-.01904177*i,.8921095*e,-.01220843*i,.8921095*e,.08370865*i),ph(t,1.036446*e,.04105738*i,1.020377*e,.3022052*i,.9147671*e,.3194596*i),ph(t,1.04448*e,.360238*i,.992256*e,.5219009*i,.9082935*e,.562044*i),ph(t,1.032337*e,.5771781*i,1.018411*e,.8120651*i,.9212406*e,.8217117*i),ph(t,1.028411*e,.9571472*i,.8556702*e,1.052487*i,.7592566*e,.9156953*i),ph(t,.7431877*e,1.009325*i,.5624123*e,1.021761*i,.5101666*e,.9310455*i),ph(t,.4820677*e,1.031761*i,.3030112*e,1.002796*i,.2609328*e,.9344623*i),ph(t,.2329994*e,1.01518*i,.03213784*e,1.01518*i,.08034461*e,.870098*i),ph(t,-.02812061*e,.9032597*i,-.01205169*e,.6835638*i,.06829292*e,.6545475*i),ph(t,-.01812061*e,.6089503*i,-.00606892*e,.4555777*i,.06427569*e,.4265613*i),ph(t,-.01606892*e,.3892545*i,-.01205169*e,.1944299*i,.08034461*e,.1944299*i),fh(t),(e=t.o).A=new Mt(.1,.1),e.B=new Mt(.9,.9),r.q(t),e},Gate:"Crescent",Crescent:function(t,e,i){return ch(t=r.s(),0,0,!0),ph(t,1*e,0,1*e,1*i,0,1*i),ph(t,.5*e,.75*i,.5*e,.25*i,0,0),fh(t),(e=t.o).A=new Mt(.511,.19),e.B=new Mt(.776,.76),r.q(t),e},FramedRectangle:function(t,e,i){var n=r.s(),o=t?t.Hc:NaN;return t=t?t.Ku:NaN,isNaN(o)&&(o=.1),isNaN(t)&&(t=.1),ch(n,0,0,!0),n.lineTo(1*e,0),n.lineTo(1*e,1*i),n.lineTo(0,1*i,!0),ch(n,o*e,t*i,!1,!0),n.lineTo(o*e,(1-t)*i),n.lineTo((1-o)*e,(1-t)*i),n.lineTo((1-o)*e,t*i,!0),(e=n.o).A=new Mt(o,t),e.B=new Mt(1-o,1-t),r.q(n),e},Delay:"HalfEllipse",HalfEllipse:function(t,e,i){return ch(t=r.s(),0,0,!0),ph(t,Qt*e,0,1*e,(.5-Qt/2)*i,1*e,.5*i),ph(t,1*e,(.5+Qt/2)*i,Qt*e,1*i,0,1*i),fh(t),(e=t.o).A=new Mt(0,.2),e.B=new Mt(.75,.8),r.q(t),e},Heart:function(t,e,i){return ch(t=r.s(),.5*e,1*i,!0),ph(t,.1*e,.8*i,0,.5*i,0*e,.3*i),ph(t,0*e,0,.45*e,0,.5*e,.3*i),ph(t,.55*e,0,1*e,0,1*e,.3*i),ph(t,e,.5*i,.9*e,.8*i,.5*e,1*i),fh(t),(e=t.o).A=new Mt(.15,.29),e.B=new Mt(.86,.68),r.q(t),e},Spade:function(t,e,i){return ch(t=r.s(),.5*e,0,!0),t.lineTo(.51*e,.01*i),ph(t,.6*e,.2*i,e,.25*i,e,.5*i),ph(t,e,.8*i,.6*e,.8*i,.55*e,.7*i),ph(t,.5*e,.75*i,.55*e,.95*i,.75*e,i),t.lineTo(.25*e,i),ph(t,.45*e,.95*i,.5*e,.75*i,.45*e,.7*i),ph(t,.4*e,.8*i,0,.8*i,0,.5*i),ph(t,0,.25*i,.4*e,.2*i,.49*e,.01*i),fh(t),(e=t.o).A=new Mt(.19,.26),e.B=new Mt(.8,.68),r.q(t),e},Club:function(t,e,i){ch(t=r.s(),.4*e,.6*i,!0),ph(t,.5*e,.75*i,.45*e,.95*i,.15*e,1*i),t.lineTo(.85*e,i),ph(t,.55*e,.95*i,.5*e,.75*i,.6*e,.6*i);var n=.2,o=.3,a=0,s=4*(Math.SQRT2-1)/3*n;return ph(t,(.5-n+o)*e,(.5+s+a)*i,(.5-s+o)*e,(.5+n+a)*i,(.5+o)*e,(.5+n+a)*i),ph(t,(.5+s+o)*e,(.5+n+a)*i,(.5+n+o)*e,(.5+s+a)*i,(.5+n+o)*e,(.5+a)*i),ph(t,(.5+n+o)*e,(.5-s+a)*i,(.5+s+o)*e,(.5-n+a)*i,(.5+o)*e,(.5-n+a)*i),ph(t,(.5-s+o)*e,(.5-n+a)*i,(.5-n+o+.05)*e,(.5-s+a-.02)*i,.65*e,.36771243*i),n=.2,o=0,a=-.3,ph(t,(.5+(s=4*(Math.SQRT2-1)/3*n)+o)*e,(.5+n+a)*i,(.5+n+o)*e,(.5+s+a)*i,(.5+n+o)*e,(.5+a)*i),ph(t,(.5+n+o)*e,(.5-s+a)*i,(.5+s+o)*e,(.5-n+a)*i,(.5+o)*e,(.5-n+a)*i),ph(t,(.5-s+o)*e,(.5-n+a)*i,(.5-n+o)*e,(.5-s+a)*i,(.5-n+o)*e,(.5+a)*i),ph(t,(.5-n+o)*e,(.5+s+a)*i,(.5-s+o)*e,(.5+n+a)*i,.35*e,.36771243*i),a=0,ph(t,(.5+(n=.2)+(o=-.3)-.05)*e,(.5-(s=4*(Math.SQRT2-1)/3*n)+a-.02)*i,(.5+s+o)*e,(.5-n+a)*i,(.5+o)*e,(.5-n+a)*i),ph(t,(.5-s+o)*e,(.5-n+a)*i,(.5-n+o)*e,(.5-s+a)*i,(.5-n+o)*e,(.5+a)*i),ph(t,(.5-n+o)*e,(.5+s+a)*i,(.5-s+o)*e,(.5+n+a)*i,(.5+o)*e,(.5+n+a)*i),ph(t,(.5+s+o)*e,(.5+n+a)*i,(.5+n+o)*e,(.5+s+a)*i,.4*e,.6*i),fh(t),(e=t.o).A=new Mt(.06,.39),e.B=new Mt(.93,.58),r.q(t),e},Ring:function(t,e,i){t=r.s();var n=4*(Math.SQRT2-1)/3*.5;return ch(t,e,.5*i,!0),ph(t,e,(.5-n)*i,(.5+n)*e,0,.5*e,0),ph(t,(.5-n)*e,0,0,(.5-n)*i,0,.5*i),ph(t,0,(.5+n)*i,(.5-n)*e,i,.5*e,i),ph(t,(.5+n)*e,i,e,(.5+n)*i,e,.5*i),n=4*(Math.SQRT2-1)/3*.4,ch(t,.5*e,.1*i,!0,!0),ph(t,(.5+n)*e,.1*i,.9*e,(.5-n)*i,.9*e,.5*i),ph(t,.9*e,(.5+n)*i,(.5+n)*e,.9*i,.5*e,.9*i),ph(t,(.5-n)*e,.9*i,.1*e,(.5+n)*i,.1*e,.5*i),ph(t,.1*e,(.5-n)*i,(.5-n)*e,.1*i,.5*e,.1*i),(e=t.o).A=new Mt(.146,.146),e.B=new Mt(.853,.853),e.ae=Xa,r.q(t),e},YinYang:function(t,e,i){var n=.5;n=.5,ch(t=r.s(),.5*e,0,!0),t.arcTo(270,180,.5*e,.5*e,.5*e),ph(t,1*e,n*i,0,n*i,n*e,0,!0);var o=.25;return ch(t,(.5+(n=.1))*e,o*i,!0,!0),t.arcTo(0,-360,.5*e,i*o,n*e),fh(t),ch(t,.5*e,0,!1),t.arcTo(270,-180,.5*e,.5*e,.5*e),t.bb(!1),ch(t,(.5+n)*e,(o=.75)*i,!0),t.arcTo(0,360,.5*e,i*o,n*e),fh(t),(e=t.o).ae=Xa,r.q(t),e},Peace:function(t,e,i){t=r.s();var n=4*(Math.SQRT2-1)/3*.5;ch(t,e,.5*i,!0),ph(t,e,(.5-n)*i,(.5+n)*e,0,.5*e,0),ph(t,(.5-n)*e,0,0,(.5-n)*i,0,.5*i),ph(t,0,(.5+n)*i,(.5-n)*e,i,.5*e,i),ph(t,(.5+n)*e,i,e,(.5+n)*i,e,.5*i),n=4*(Math.SQRT2-1)/3*.4,ch(t,.5*e,.1*i,!0,!0),ph(t,(.5+n)*e,.1*i,.9*e,(.5-n)*i,.9*e,.5*i),ph(t,.9*e,(.5+n)*i,(.5+n)*e,.9*i,.5*e,.9*i),ph(t,(.5-n)*e,.9*i,.1*e,(.5+n)*i,.1*e,.5*i),ph(t,.1*e,(.5-n)*i,(.5-n)*e,.1*i,.5*e,.1*i);n=.07;var o=0,a=.11*-.707,s=4*(Math.SQRT2-1)/3*n;return ch(t,(.5+n+o)*e,(.5+a)*i,!0),ph(t,(.5+n+o)*e,(.5-s+a)*i,(.5+s+o)*e,(.5-n+a)*i,(.5+o)*e,(.5-n+a)*i),ph(t,(.5-s+o)*e,(.5-n+a)*i,(.5-n+o)*e,(.5-s+a)*i,(.5-n+o)*e,(.5+a)*i),ph(t,(.5-n+o)*e,(.5+s+a)*i,(.5-s+o)*e,(.5+n+a)*i,(.5+o)*e,(.5+n+a)*i),ph(t,(.5+s+o)*e,(.5+n+a)*i,(.5+n+o)*e,(.5+s+a)*i,(.5+n+o)*e,(.5+a)*i),n=.07,o=.11*-.707,a=.707*.11,s=4*(Math.SQRT2-1)/3*n,ch(t,(.5+n+o)*e,(.5+a)*i,!0),ph(t,(.5+n+o)*e,(.5-s+a)*i,(.5+s+o)*e,(.5-n+a)*i,(.5+o)*e,(.5-n+a)*i),ph(t,(.5-s+o)*e,(.5-n+a)*i,(.5-n+o)*e,(.5-s+a)*i,(.5-n+o)*e,(.5+a)*i),ph(t,(.5-n+o)*e,(.5+s+a)*i,(.5-s+o)*e,(.5+n+a)*i,(.5+o)*e,(.5+n+a)*i),ph(t,(.5+s+o)*e,(.5+n+a)*i,(.5+n+o)*e,(.5+s+a)*i,(.5+n+o)*e,(.5+a)*i),n=.07,o=.707*.11,a=.707*.11,s=4*(Math.SQRT2-1)/3*n,ch(t,(.5+n+o)*e,(.5+a)*i,!0),ph(t,(.5+n+o)*e,(.5-s+a)*i,(.5+s+o)*e,(.5-n+a)*i,(.5+o)*e,(.5-n+a)*i),ph(t,(.5-s+o)*e,(.5-n+a)*i,(.5-n+o)*e,(.5-s+a)*i,(.5-n+o)*e,(.5+a)*i),ph(t,(.5-n+o)*e,(.5+s+a)*i,(.5-s+o)*e,(.5+n+a)*i,(.5+o)*e,(.5+n+a)*i),ph(t,(.5+s+o)*e,(.5+n+a)*i,(.5+n+o)*e,(.5+s+a)*i,(.5+n+o)*e,(.5+a)*i),(e=t.o).A=new Mt(.146,.146),e.B=new Mt(.853,.853),e.ae=Xa,r.q(t),e},NotAllowed:function(t,e,i){var n=.5*Qt,o=.5;ch(t=r.s(),.5*e,(.5-o)*i,!0),ph(t,(.5-n)*e,(.5-o)*i,(.5-o)*e,(.5-n)*i,(.5-o)*e,.5*i),ph(t,(.5-o)*e,(.5+n)*i,(.5-n)*e,(.5+o)*i,.5*e,(.5+o)*i),ph(t,(.5+n)*e,(.5+o)*i,(.5+o)*e,(.5+n)*i,(.5+o)*e,.5*i),ph(t,(.5+o)*e,(.5-n)*i,(.5+n)*e,(.5-o)*i,.5*e,(.5-o)*i);o=.4,n=.4*Qt;var a=r.K(),s=r.K(),l=r.K(),h=r.K();Ne(.5,.5-o,.5+n,.5-o,.5+o,.5-n,.5+o,.5,.42,a,s,l,h,h);var u=r.K(),c=r.K(),f=r.K();Ne(.5,.5-o,.5+n,.5-o,.5+o,.5-n,.5+o,.5,.58,h,h,f,u,c);var d=r.K(),p=r.K(),y=r.K();Ne(.5,.5+o,.5-n,.5+o,.5-o,.5+n,.5-o,.5,.42,d,p,y,h,h);var v=r.K(),m=r.K(),g=r.K();return Ne(.5,.5+o,.5-n,.5+o,.5-o,.5+n,.5-o,.5,.58,h,h,g,v,m),ch(t,g.x*e,g.y*i,!0,!0),ph(t,v.x*e,v.y*i,m.x*e,m.y*i,(.5-o)*e,.5*i),ph(t,(.5-o)*e,(.5-n)*i,(.5-n)*e,(.5-o)*i,.5*e,(.5-o)*i),ph(t,a.x*e,a.y*i,s.x*e,s.y*i,l.x*e,l.y*i),t.lineTo(g.x*e,g.y*i),fh(t),ch(t,y.x*e,y.y*i,!0,!0),t.lineTo(f.x*e,f.y*i),ph(t,u.x*e,u.y*i,c.x*e,c.y*i,(.5+o)*e,.5*i),ph(t,(.5+o)*e,(.5+n)*i,(.5+n)*e,(.5+o)*i,.5*e,(.5+o)*i),ph(t,d.x*e,d.y*i,p.x*e,p.y*i,y.x*e,y.y*i),fh(t),r.v(a),r.v(s),r.v(l),r.v(h),r.v(u),r.v(c),r.v(f),r.v(d),r.v(p),r.v(y),r.v(v),r.v(m),r.v(g),e=t.o,r.q(t),e.ae=Xa,e},Fragile:function(t,e,i){return ch(t=r.s(),0,0,!0),t.lineTo(.25*e,0),t.lineTo(.2*e,.15*i),t.lineTo(.3*e,.25*i),t.lineTo(.29*e,.33*i),t.lineTo(.35*e,.25*i),t.lineTo(.3*e,.15*i),t.lineTo(.4*e,0),t.lineTo(1*e,0),ph(t,1*e,.25*i,.75*e,.5*i,.55*e,.5*i),t.lineTo(.55*e,.9*i),t.lineTo(.7*e,.9*i),t.lineTo(.7*e,1*i),t.lineTo(.3*e,1*i),t.lineTo(.3*e,.9*i),t.lineTo(.45*e,.9*i),t.lineTo(.45*e,.5*i),ph(t,.25*e,.5*i,0,.25*i,0,0),fh(t),(e=t.o).A=new Mt(.25,0),e.B=new Mt(.75,.4),r.q(t),e},HourGlass:function(t,e,i){return ch(t=r.s(),.65*e,.5*i,!0),t.lineTo(1*e,1*i),t.lineTo(0,1*i),t.lineTo(.35*e,.5*i),t.lineTo(0,0),t.lineTo(1*e,0),fh(t),e=t.o,r.q(t),e},Lightning:function(t,e,i){return ch(t=r.s(),0*e,.55*i,!0),t.lineTo(.75*e,0),t.lineTo(.25*e,.45*i),t.lineTo(.9*e,.48*i),t.lineTo(.4*e,1*i),t.lineTo(.65*e,.55*i),fh(t),e=t.o,r.q(t),e},Parallelogram1:function(t,e,i){t=t?t.Hc:NaN,isNaN(t)&&(t=.1);var n=r.s();return ch(n,t*e,0,!0),n.lineTo(1*e,0),n.lineTo((1-t)*e,1*i),n.lineTo(0,1*i),fh(n),(e=n.o).A=new Mt(t,0),e.B=new Mt(1-t,1),r.q(n),e},Input:"Output",Output:function(t,e,i){return ch(t=r.s(),0,1*i,!0),t.lineTo(.1*e,0),t.lineTo(1*e,0),t.lineTo(.9*e,1*i),fh(t),(e=t.o).A=new Mt(.1,0),e.B=new Mt(.9,1),r.q(t),e},Parallelogram2:function(t,e,i){t=t?t.Hc:NaN,isNaN(t)&&(t=.25);var n=r.s();return ch(n,t*e,0,!0),n.lineTo(1*e,0),n.lineTo((1-t)*e,1*i),n.lineTo(0,1*i),fh(n),(e=n.o).A=new Mt(t,0),e.B=new Mt(1-t,1),r.q(n),e},ThickCross:function(t,e,i){t=t?t.Hc:NaN,isNaN(t)&&(t=.25);var n=r.s();return ch(n,(.5-t/2)*e,0,!0),n.lineTo((.5+t/2)*e,0),n.lineTo((.5+t/2)*e,(.5-t/2)*i),n.lineTo(1*e,(.5-t/2)*i),n.lineTo(1*e,(.5+t/2)*i),n.lineTo((.5+t/2)*e,(.5+t/2)*i),n.lineTo((.5+t/2)*e,1*i),n.lineTo((.5-t/2)*e,1*i),n.lineTo((.5-t/2)*e,(.5+t/2)*i),n.lineTo(0,(.5+t/2)*i),n.lineTo(0,(.5-t/2)*i),n.lineTo((.5-t/2)*e,(.5-t/2)*i),fh(n),(e=n.o).A=new Mt(.5-t/2,.5-t/2),e.B=new Mt(.5+t/2,.5+t/2),r.q(n),e},ThickX:function(t,e,i){t=.25/Math.SQRT2;var n=r.s();return ch(n,.3*e,0,!0),n.lineTo(.5*e,.2*i),n.lineTo(.7*e,0),n.lineTo(1*e,.3*i),n.lineTo(.8*e,.5*i),n.lineTo(1*e,.7*i),n.lineTo(.7*e,1*i),n.lineTo(.5*e,.8*i),n.lineTo(.3*e,1*i),n.lineTo(0,.7*i),n.lineTo(.2*e,.5*i),n.lineTo(0,.3*i),fh(n),(e=n.o).A=new Mt(.5-t,.5-t),e.B=new Mt(.5+t,.5+t),r.q(n),e},ThinCross:function(t,e,i){var n=t?t.Hc:NaN;return isNaN(n)&&(n=.1),ch(t=r.s(),(.5-n/2)*e,0,!0),t.lineTo((.5+n/2)*e,0),t.lineTo((.5+n/2)*e,(.5-n/2)*i),t.lineTo(1*e,(.5-n/2)*i),t.lineTo(1*e,(.5+n/2)*i),t.lineTo((.5+n/2)*e,(.5+n/2)*i),t.lineTo((.5+n/2)*e,1*i),t.lineTo((.5-n/2)*e,1*i),t.lineTo((.5-n/2)*e,(.5+n/2)*i),t.lineTo(0,(.5+n/2)*i),t.lineTo(0,(.5-n/2)*i),t.lineTo((.5-n/2)*e,(.5-n/2)*i),fh(t),e=t.o,r.q(t),e},ThinX:function(t,e,i){return ch(t=r.s(),.1*e,0,!0),t.lineTo(.5*e,.4*i),t.lineTo(.9*e,0),t.lineTo(1*e,.1*i),t.lineTo(.6*e,.5*i),t.lineTo(1*e,.9*i),t.lineTo(.9*e,1*i),t.lineTo(.5*e,.6*i),t.lineTo(.1*e,1*i),t.lineTo(0,.9*i),t.lineTo(.4*e,.5*i),t.lineTo(0,.1*i),fh(t),e=t.o,r.q(t),e},RightTriangle:function(t,e,i){return ch(t=r.s(),0,0,!0),t.lineTo(1*e,1*i),t.lineTo(0,1*i),fh(t),(e=t.o).A=new Mt(0,.5),e.B=new Mt(.5,1),r.q(t),e},RoundedIBeam:function(t,e,i){return ch(t=r.s(),0,0,!0),t.lineTo(1*e,0),ph(t,.5*e,.25*i,.5*e,.75*i,1*e,1*i),t.lineTo(0,1*i),ph(t,.5*e,.75*i,.5*e,.25*i,0,0),fh(t),e=t.o,r.q(t),e},RoundedRectangle:function(t,e,i){var n=t?t.Hc:NaN;isNaN(n)&&(n=5),n=Math.min(n,e/3),t=(n=Math.min(n,i/3))*Qt;var o=r.s();return ch(o,n,0,!0),o.lineTo(e-n,0),ph(o,e-t,0,e,t,e,n),o.lineTo(e,i-n),ph(o,e,i-t,e-t,i,e-n,i),o.lineTo(n,i),ph(o,t,i,0,i-t,0,i-n),o.lineTo(0,n),ph(o,0,t,t,0,n,0),fh(o),e=o.o,1<t?(e.A=new Mt(0,0,t,t),e.B=new Mt(1,1,-t,-t)):(e.A=g,e.B=P),r.q(o),e},Border:function(t,e,i){var n=t?t.Hc:NaN;return isNaN(n)&&(n=5),n=Math.min(n,e/3),n=Math.min(n,i/3),ch(t=r.s(),n,0,!0),t.lineTo(e-n,0),ph(t,e-0,0,e,0,e,n),t.lineTo(e,i-n),ph(t,e,i-0,e-0,i,e-n,i),t.lineTo(n,i),ph(t,0,i,0,i-0,0,i-n),t.lineTo(0,n),ph(t,0,0,0,0,n,0),fh(t),(e=t.o).A=g,e.B=P,r.q(t),e},SquareIBeam:function(t,e,i){var n=t?t.Hc:NaN;return isNaN(n)&&(n=.2),ch(t=r.s(),0,0,!0),t.lineTo(1*e,0),t.lineTo(1*e,n*i),t.lineTo((.5+n/2)*e,n*i),t.lineTo((.5+n/2)*e,(1-n)*i),t.lineTo(1*e,(1-n)*i),t.lineTo(1*e,1*i),t.lineTo(0,1*i),t.lineTo(0,(1-n)*i),t.lineTo((.5-n/2)*e,(1-n)*i),t.lineTo((.5-n/2)*e,n*i),t.lineTo(0,n*i),fh(t),e=t.o,r.q(t),e},Trapezoid:function(t,e,i){t=t?t.Hc:NaN,isNaN(t)&&(t=.2);var n=r.s();return ch(n,t*e,0,!0),n.lineTo((1-t)*e,0),n.lineTo(1*e,1*i),n.lineTo(0,1*i),fh(n),(e=n.o).A=new Mt(t,0),e.B=new Mt(1-t,1),r.q(n),e},ManualLoop:"ManualOperation",ManualOperation:function(t,e,i){var n=t?t.Hc:NaN;return isNaN(n)&&(n=0),ch(t=r.s(),n,0,!0),t.lineTo(0,0),t.lineTo(1*e,0),t.lineTo(.9*e,1*i),t.lineTo(.1*e,1*i),fh(t),(e=t.o).A=new Mt(.1,0),e.B=new Mt(.9,1),r.q(t),e},GenderMale:function(t,e,i){t=r.s();var n=.4*Qt,o=.4,a=r.K(),s=r.K(),l=r.K(),h=r.K();ch(t,(.5-o)*e,.5*i,!0),ph(t,(.5-o)*e,(.5-n)*i,(.5-n)*e,(.5-o)*i,.5*e,(.5-o)*i),Ne(.5,.5-o,.5+n,.5-o,.5+o,.5-n,.5+o,.5,.44,l,h,s,a,a),ph(t,l.x*e,l.y*i,h.x*e,h.y*i,s.x*e,s.y*i);var u=r.xb(s.x,s.y);Ne(.5,.5-o,.5+n,.5-o,.5+o,.5-n,.5+o,.5,.56,a,a,s,l,h);var c=r.xb(s.x,s.y);return t.lineTo((.1*u.x+.855)*e,.1*u.y*i),t.lineTo(.85*e,.1*u.y*i),t.lineTo(.85*e,0),t.lineTo(1*e,0),t.lineTo(1*e,.15*i),t.lineTo((.1*c.x+.9)*e,.15*i),t.lineTo((.1*c.x+.9)*e,(.1*c.y+.05*.9)*i),t.lineTo(c.x*e,c.y*i),ph(t,l.x*e,l.y*i,h.x*e,h.y*i,(.5+o)*e,.5*i),ph(t,(.5+o)*e,(.5+n)*i,(.5+n)*e,(.5+o)*i,.5*e,(.5+o)*i),ph(t,(.5-n)*e,(.5+o)*i,(.5-o)*e,(.5+n)*i,(.5-o)*e,.5*i),n=.35*Qt,ch(t,.5*e,(.5-(o=.35))*i,!0,!0),ph(t,(.5-n)*e,(.5-o)*i,(.5-o)*e,(.5-n)*i,(.5-o)*e,.5*i),ph(t,(.5-o)*e,(.5+n)*i,(.5-n)*e,(.5+o)*i,.5*e,(.5+o)*i),ph(t,(.5+n)*e,(.5+o)*i,(.5+o)*e,(.5+n)*i,(.5+o)*e,.5*i),ph(t,(.5+o)*e,(.5-n)*i,(.5+n)*e,(.5-o)*i,.5*e,(.5-o)*i),ch(t,(.5-o)*e,.5*i,!0),r.v(a),r.v(s),r.v(l),r.v(h),r.v(u),r.v(c),(e=t.o).A=new Mt(.202,.257),e.B=new Mt(.692,.839),e.ae=Xa,r.q(t),e},GenderFemale:function(t,e,i){t=r.s();var n=.375,o=0,a=-.125,s=4*(Math.SQRT2-1)/3*n;return ch(t,(.525+o)*e,(.5+n+a)*i,!0),ph(t,(.5+s+o)*e,(.5+n+a)*i,(.5+n+o)*e,(.5+s+a)*i,(.5+n+o)*e,(.5+a)*i),ph(t,(.5+n+o)*e,(.5-s+a)*i,(.5+s+o)*e,(.5-n+a)*i,(.5+o)*e,(.5-n+a)*i),ph(t,(.5-s+o)*e,(.5-n+a)*i,(.5-n+o)*e,(.5-s+a)*i,(.5-n+o)*e,(.5+a)*i),ph(t,(.5-n+o)*e,(.5+s+a)*i,(.5-s+o)*e,(.5+n+a)*i,(.475+o)*e,(.5+n+a)*i),t.lineTo(.475*e,.85*i),t.lineTo(.425*e,.85*i),t.lineTo(.425*e,.9*i),t.lineTo(.475*e,.9*i),t.lineTo(.475*e,1*i),t.lineTo(.525*e,1*i),t.lineTo(.525*e,.9*i),t.lineTo(.575*e,.9*i),t.lineTo(.575*e,.85*i),t.lineTo(.525*e,.85*i),fh(t),n=.325,o=0,a=-.125,s=4*(Math.SQRT2-1)/3*n,ch(t,(.5+n+o)*e,(.5+a)*i,!0,!0),ph(t,(.5+n+o)*e,(.5+s+a)*i,(.5+s+o)*e,(.5+n+a)*i,(.5+o)*e,(.5+n+a)*i),ph(t,(.5-s+o)*e,(.5+n+a)*i,(.5-n+o)*e,(.5+s+a)*i,(.5-n+o)*e,(.5+a)*i),ph(t,(.5-n+o)*e,(.5-s+a)*i,(.5-s+o)*e,(.5-n+a)*i,(.5+o)*e,(.5-n+a)*i),ph(t,(.5+s+o)*e,(.5-n+a)*i,(.5+n+o)*e,(.5-s+a)*i,(.5+n+o)*e,(.5+a)*i),ch(t,(.525+o)*e,(.5+n+a)*i,!0),(e=t.o).A=new Mt(.232,.136),e.B=new Mt(.782,.611),e.ae=Xa,r.q(t),e},PlusLine:function(t,e,i){return ch(t=r.s(),0,.5*i,!1),t.lineTo(1*e,.5*i),t.moveTo(.5*e,0),t.lineTo(.5*e,1*i),e=t.o,r.q(t),e},XLine:function(t,e,i){return ch(t=r.s(),0,1*i,!1),t.lineTo(1*e,0),t.moveTo(0,0),t.lineTo(1*e,1*i),e=t.o,r.q(t),e},AsteriskLine:function(t,e,i){t=r.s();var n=.2/Math.SQRT2;return ch(t,n*e,(1-n)*i,!1),t.lineTo((1-n)*e,n*i),t.moveTo(n*e,n*i),t.lineTo((1-n)*e,(1-n)*i),t.moveTo(0*e,.5*i),t.lineTo(1*e,.5*i),t.moveTo(.5*e,0*i),t.lineTo(.5*e,1*i),e=t.o,r.q(t),e},CircleLine:function(t,e,i){var n=.5*Qt;return ch(t=r.s(),1*e,.5*i,!1),ph(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),ph(t,(.5-n)*e,1*i,0,(.5+n)*i,0,.5*i),ph(t,0,(.5-n)*i,(.5-n)*e,0,.5*e,0),ph(t,(.5+n)*e,0,1*e,(.5-n)*i,1*e,.5*i),(e=t.o).A=new Mt(.146,.146),e.B=new Mt(.853,.853),e.ae=Xa,r.q(t),e},Pie:function(t,e,i){t=r.s();var n=4*(Math.SQRT2-1)/3*.5;return ch(t,(.5*Math.SQRT2/2+.5)*e,(.5-.5*Math.SQRT2/2)*i,!0),ph(t,.7*e,0*i,.5*e,0*i,.5*e,0*i),ph(t,(.5-n+0)*e,0*i,0*e,(.5-n+0)*i,0*e,.5*i),ph(t,0*e,(.5+n+0)*i,(.5-n+0)*e,1*i,.5*e,1*i),ph(t,(.5+n+0)*e,1*i,1*e,(.5+n+0)*i,1*e,.5*i),t.lineTo(.5*e,.5*i),fh(t),e=t.o,r.q(t),e},PiePiece:function(t,e,i){var n=Qt/Math.SQRT2*.5,o=Math.SQRT2/2,a=1-Math.SQRT2/2;return ch(t=r.s(),e,i,!0),ph(t,e,(1-n)*i,(o+n)*e,(a+n)*i,o*e,a*i),t.lineTo(0,i),fh(t),e=t.o,r.q(t),e},StopSign:function(t,e,i){t=1/(Math.SQRT2+2);var n=r.s();return ch(n,t*e,0,!0),n.lineTo((1-t)*e,0),n.lineTo(1*e,t*i),n.lineTo(1*e,(1-t)*i),n.lineTo((1-t)*e,1*i),n.lineTo(t*e,1*i),n.lineTo(0,(1-t)*i),n.lineTo(0,t*i),fh(n),(e=n.o).A=new Mt(t/2,t/2),e.B=new Mt(1-t/2,1-t/2),r.q(n),e},LogicImplies:function(t,e,i){var n=t?t.Hc:NaN;return isNaN(n)&&(n=.2),ch(t=r.s(),(1-n)*e,0*i,!1),t.lineTo(1*e,.5*i),t.lineTo((1-n)*e,i),t.moveTo(0,.5*i),t.lineTo(e,.5*i),(e=t.o).A=g,e.B=new Mt(.8,.5),r.q(t),e},LogicIff:function(t,e,i){var n=t?t.Hc:NaN;return isNaN(n)&&(n=.2),ch(t=r.s(),(1-n)*e,0*i,!1),t.lineTo(1*e,.5*i),t.lineTo((1-n)*e,i),t.moveTo(0,.5*i),t.lineTo(e,.5*i),t.moveTo(n*e,0),t.lineTo(0,.5*i),t.lineTo(n*e,i),(e=t.o).A=new Mt(.2,0),e.B=new Mt(.8,.5),r.q(t),e},LogicNot:function(t,e,i){return ch(t=r.s(),0,0,!1),t.lineTo(1*e,0),t.lineTo(1*e,1*i),e=t.o,r.q(t),e},LogicAnd:function(t,e,i){return ch(t=r.s(),0,1*i,!1),t.lineTo(.5*e,0),t.lineTo(1*e,1*i),(e=t.o).A=new Mt(.25,.5),e.B=new Mt(.75,1),r.q(t),e},LogicOr:function(t,e,i){return ch(t=r.s(),0,0,!1),t.lineTo(.5*e,1*i),t.lineTo(1*e,0),(e=t.o).A=new Mt(.219,0),e.B=new Mt(.78,.409),r.q(t),e},LogicXor:function(t,e,i){ch(t=r.s(),.5*e,0,!1),t.lineTo(.5*e,1*i),t.moveTo(0,.5*i),t.lineTo(1*e,.5*i);var n=.5*Qt;return ph(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),ph(t,(.5-n)*e,1*i,0,(.5+n)*i,0,.5*i),ph(t,0,(.5-n)*i,(.5-n)*e,0,.5*e,0),ph(t,(.5+n)*e,0,1*e,(.5-n)*i,1*e,.5*i),(e=t.o).ae=Xa,r.q(t),e},LogicTruth:function(t,e,i){return ch(t=r.s(),0,0,!1),t.lineTo(1*e,0),t.moveTo(.5*e,0),t.lineTo(.5*e,1*i),e=t.o,r.q(t),e},LogicFalsity:function(t,e,i){return ch(t=r.s(),0,1*i,!1),t.lineTo(1*e,1*i),t.moveTo(.5*e,1*i),t.lineTo(.5*e,0),e=t.o,r.q(t),e},LogicThereExists:function(t,e,i){return ch(t=r.s(),0,0,!1),t.lineTo(1*e,0),t.lineTo(1*e,.5*i),t.lineTo(0,.5*i),t.moveTo(1*e,.5*i),t.lineTo(1*e,1*i),t.lineTo(0,1*i),e=t.o,r.q(t),e},LogicForAll:function(t,e,i){return ch(t=r.s(),0,0,!1),t.lineTo(.5*e,1*i),t.lineTo(1*e,0),t.moveTo(.25*e,.5*i),t.lineTo(.75*e,.5*i),(e=t.o).A=new Mt(.25,0),e.B=new Mt(.75,.5),r.q(t),e},LogicIsDefinedAs:function(t,e,i){return ch(t=r.s(),0,0,!1),t.lineTo(e,0),t.moveTo(0,.5*i),t.lineTo(e,.5*i),t.moveTo(0,i),t.lineTo(e,i),(e=t.o).A=new Mt(.01,.01),e.B=new Mt(.99,.49),r.q(t),e},LogicIntersect:function(t,e,i){var n=.5*Qt;return ch(t=r.s(),0,1*i,!1),t.lineTo(0,.5*i),ph(t,0,(.5-n)*i,(.5-n)*e,0,.5*e,0),ph(t,(.5+n)*e,0,1*e,(.5-n)*i,1*e,.5*i),t.lineTo(1*e,1*i),(e=t.o).A=new Mt(0,.5),e.B=P,r.q(t),e},LogicUnion:function(t,e,i){var n=.5*Qt;return ch(t=r.s(),1*e,0,!1),t.lineTo(1*e,.5*i),ph(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),ph(t,(.5-n)*e,1*i,0,(.5+n)*i,0,.5*i),t.lineTo(0,0),(e=t.o).A=g,e.B=new Mt(1,.5),r.q(t),e},Arrow:function(t,e,i){var n=t?t.Hc:NaN,o=t?t.Ku:NaN;return isNaN(n)&&(n=.3),isNaN(o)&&(o=.3),ch(t=r.s(),0,(.5-o/2)*i,!0),t.lineTo((1-n)*e,(.5-o/2)*i),t.lineTo((1-n)*e,0),t.lineTo(1*e,.5*i),t.lineTo((1-n)*e,1*i),t.lineTo((1-n)*e,(.5+o/2)*i),t.lineTo(0,(.5+o/2)*i),fh(t),(e=t.o).A=new Mt(0,.5-o/2),n=Ie(0,.5+o/2,1,.5+o/2,1-n,1,1,.5,r.K()),e.B=new Mt(n.x,n.y),r.v(n),r.q(t),e},ISOProcess:"Chevron",Chevron:function(t,e,i){return ch(t=r.s(),0,0,!0),t.lineTo(.5*e,0),t.lineTo(1*e,.5*i),t.lineTo(.5*e,1*i),t.lineTo(0,1*i),t.lineTo(.5*e,.5*i),fh(t),e=t.o,r.q(t),e},DoubleArrow:function(t,e,i){return ch(t=r.s(),0,0,!0),t.lineTo(.3*e,.214*i),t.lineTo(.3*e,0),t.lineTo(1*e,.5*i),t.lineTo(.3*e,1*i),t.lineTo(.3*e,.786*i),t.lineTo(0,1*i),fh(t),ch(t,.3*e,.214*i,!1),t.lineTo(.3*e,.786*i),t.bb(!1),e=t.o,r.q(t),e},DoubleEndArrow:function(t,e,i){return ch(t=r.s(),1*e,.5*i,!0),t.lineTo(.7*e,1*i),t.lineTo(.7*e,.7*i),t.lineTo(.3*e,.7*i),t.lineTo(.3*e,1*i),t.lineTo(0,.5*i),t.lineTo(.3*e,0),t.lineTo(.3*e,.3*i),t.lineTo(.7*e,.3*i),t.lineTo(.7*e,0),fh(t),e=t.o,i=Ie(0,.5,.3,0,0,.3,.3,.3,r.K()),e.A=new Mt(i.x,i.y),i=Ie(.7,1,1,.5,.7,.7,1,.7,i),e.B=new Mt(i.x,i.y),r.v(i),r.q(t),e},IBeamArrow:function(t,e,i){return ch(t=r.s(),1*e,.5*i,!0),t.lineTo(.7*e,1*i),t.lineTo(.7*e,.7*i),t.lineTo(.2*e,.7*i),t.lineTo(.2*e,1*i),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(.2*e,0),t.lineTo(.2*e,.3*i),t.lineTo(.7*e,.3*i),t.lineTo(.7*e,0),fh(t),(e=t.o).A=new Mt(0,.3),i=Ie(.7,1,1,.5,.7,.7,1,.7,r.K()),e.B=new Mt(i.x,i.y),r.v(i),r.q(t),e},Pointer:function(t,e,i){return ch(t=r.s(),1*e,.5*i,!0),t.lineTo(0,1*i),t.lineTo(.2*e,.5*i),t.lineTo(0,0),fh(t),(e=t.o).A=new Mt(.2,.35),i=Ie(.2,.65,1,.65,0,1,1,.5,r.K()),e.B=new Mt(i.x,i.y),r.v(i),r.q(t),e},RoundedPointer:function(t,e,i){return ch(t=r.s(),1*e,.5*i,!0),t.lineTo(0,1*i),ph(t,.5*e,.75*i,.5*e,.25*i,0,0),fh(t),(e=t.o).A=new Mt(.4,.35),i=Ie(.2,.65,1,.65,0,1,1,.5,r.K()),e.B=new Mt(i.x,i.y),r.v(i),r.q(t),e},SplitEndArrow:function(t,e,i){return ch(t=r.s(),1*e,.5*i,!0),t.lineTo(.7*e,1*i),t.lineTo(.7*e,.7*i),t.lineTo(0,.7*i),t.lineTo(.2*e,.5*i),t.lineTo(0,.3*i),t.lineTo(.7*e,.3*i),t.lineTo(.7*e,0),fh(t),(e=t.o).A=new Mt(.2,.3),i=Ie(.7,1,1,.5,.7,.7,1,.7,r.K()),e.B=new Mt(i.x,i.y),r.v(i),r.q(t),e},MessageToUser:"SquareArrow",SquareArrow:function(t,e,i){return ch(t=r.s(),1*e,.5*i,!0),t.lineTo(.7*e,1*i),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(.7*e,0),fh(t),(e=t.o).A=g,e.B=new Mt(.7,1),r.q(t),e},Cone1:function(t,e,i){var n=.5*Qt,o=.1*Qt;return ch(t=r.s(),0,.9*i,!0),t.lineTo(.5*e,0),t.lineTo(1*e,.9*i),ph(t,1*e,(.9+o)*i,(.5+n)*e,1*i,.5*e,1*i),ph(t,(.5-n)*e,1*i,0,(.9+o)*i,0,.9*i),fh(t),(e=t.o).A=new Mt(.25,.5),e.B=new Mt(.75,.97),r.q(t),e},Cone2:function(t,e,i){return ch(t=r.s(),0,.9*i,!0),ph(t,(1-.85/.9)*e,1*i,.85/.9*e,1*i,1*e,.9*i),t.lineTo(.5*e,0),t.lineTo(0,.9*i),fh(t),ch(t,0,.9*i,!1),ph(t,(1-.85/.9)*e,.8*i,.85/.9*e,.8*i,1*e,.9*i),t.bb(!1),(e=t.o).A=new Mt(.25,.5),e.B=new Mt(.75,.82),r.q(t),e},Cube1:function(t,e,i){return ch(t=r.s(),.5*e,1*i,!0),t.lineTo(1*e,.85*i),t.lineTo(1*e,.15*i),t.lineTo(.5*e,0*i),t.lineTo(0*e,.15*i),t.lineTo(0*e,.85*i),fh(t),ch(t,.5*e,1*i,!1),t.lineTo(.5*e,.3*i),t.lineTo(0,.15*i),t.moveTo(.5*e,.3*i),t.lineTo(1*e,.15*i),t.bb(!1),(e=t.o).A=new Mt(0,.3),e.B=new Mt(.5,.85),r.q(t),e},Cube2:function(t,e,i){return ch(t=r.s(),0,.3*i,!0),t.lineTo(0*e,1*i),t.lineTo(.7*e,i),t.lineTo(1*e,.7*i),t.lineTo(1*e,0*i),t.lineTo(.3*e,0*i),fh(t),ch(t,0,.3*i,!1),t.lineTo(.7*e,.3*i),t.lineTo(1*e,0*i),t.moveTo(.7*e,.3*i),t.lineTo(.7*e,1*i),t.bb(!1),(e=t.o).A=new Mt(0,.3),e.B=new Mt(.7,1),r.q(t),e},MagneticData:"Cylinder1",Cylinder1:function(t,e,i){var n=.5*Qt,o=.1*Qt;return ch(t=r.s(),0,.1*i,!0),ph(t,0,(.1-o)*i,(.5-n)*e,0,.5*e,0),ph(t,(.5+n)*e,0,1*e,(.1-o)*i,1*e,.1*i),t.lineTo(e,.9*i),ph(t,1*e,(.9+o)*i,(.5+n)*e,1*i,.5*e,1*i),ph(t,(.5-n)*e,1*i,0,(.9+o)*i,0,.9*i),t.lineTo(0,.1*i),ch(t,0,.1*i,!1),ph(t,0,(.1+o)*i,(.5-n)*e,.2*i,.5*e,.2*i),ph(t,(.5+n)*e,.2*i,1*e,(.1+o)*i,1*e,.1*i),t.bb(!1),(e=t.o).A=new Mt(0,.2),e.B=new Mt(1,.9),r.q(t),e},Cylinder2:function(t,e,i){var n=.5*Qt,o=.1*Qt;return ch(t=r.s(),0,.9*i,!0),t.lineTo(0,.1*i),ph(t,0,(.1-o)*i,(.5-n)*e,0,.5*e,0),ph(t,(.5+n)*e,0,1*e,(.1-o)*i,1*e,.1*i),t.lineTo(1*e,.9*i),ph(t,1*e,(.9+o)*i,(.5+n)*e,1*i,.5*e,1*i),ph(t,(.5-n)*e,1*i,0,(.9+o)*i,0,.9*i),ch(t,0,.9*i,!1),ph(t,0,(.9-o)*i,(.5-n)*e,.8*i,.5*e,.8*i),ph(t,(.5+n)*e,.8*i,1*e,(.9-o)*i,1*e,.9*i),t.bb(!1),(e=t.o).A=new Mt(0,.1),e.B=new Mt(1,.8),r.q(t),e},Cylinder3:function(t,e,i){var n=.1*Qt,o=.5*Qt;return ch(t=r.s(),.1*e,0,!0),t.lineTo(.9*e,0),ph(t,(.9+n)*e,0,1*e,(.5-o)*i,1*e,.5*i),ph(t,1*e,(.5+o)*i,(.9+n)*e,1*i,.9*e,1*i),t.lineTo(.1*e,1*i),ph(t,(.1-n)*e,1*i,0,(.5+o)*i,0,.5*i),ph(t,0,(.5-o)*i,(.1-n)*e,0,.1*e,0),ch(t,.1*e,0,!1),ph(t,(.1+n)*e,0,.2*e,(.5-o)*i,.2*e,.5*i),ph(t,.2*e,(.5+o)*i,(.1+n)*e,1*i,.1*e,1*i),t.bb(!1),(e=t.o).A=new Mt(.2,0),e.B=new Mt(.9,1),r.q(t),e},DirectData:"Cylinder4",Cylinder4:function(t,e,i){var n=.1*Qt,o=.5*Qt;return ch(t=r.s(),.9*e,0,!0),ph(t,(.9+n)*e,0,1*e,(.5-o)*i,1*e,.5*i),ph(t,1*e,(.5+o)*i,(.9+n)*e,1*i,.9*e,1*i),t.lineTo(.1*e,1*i),ph(t,(.1-n)*e,1*i,0,(.5+o)*i,0,.5*i),ph(t,0,(.5-o)*i,(.1-n)*e,0,.1*e,0),t.lineTo(.9*e,0),ch(t,.9*e,0,!1),ph(t,(.9-n)*e,0,.8*e,(.5-o)*i,.8*e,.5*i),ph(t,.8*e,(.5+o)*i,(.9-n)*e,1*i,.9*e,1*i),t.bb(!1),(e=t.o).A=new Mt(.1,0),e.B=new Mt(.8,1),r.q(t),e},Prism1:function(t,e,i){return ch(t=r.s(),.25*e,.25*i,!0),t.lineTo(.75*e,0),t.lineTo(e,.5*i),t.lineTo(.5*e,i),t.lineTo(0,i),fh(t),ch(t,.25*e,.25*i,!1),t.lineTo(.5*e,i),t.bb(!1),(e=t.o).A=new Mt(.408,.172),e.B=new Mt(.833,.662),r.q(t),e},Prism2:function(t,e,i){return ch(t=r.s(),0,.25*i,!0),t.lineTo(.75*e,0),t.lineTo(1*e,.25*i),t.lineTo(.75*e,.75*i),t.lineTo(0,1*i),fh(t),ch(t,0,i,!1),t.lineTo(.25*e,.5*i),t.lineTo(e,.25*i),t.moveTo(0,.25*i),t.lineTo(.25*e,.5*i),t.bb(!1),(e=t.o).A=new Mt(.25,.5),e.B=new Mt(.75,.75),r.q(t),e},Pyramid1:function(t,e,i){return ch(t=r.s(),.5*e,0,!0),t.lineTo(e,.75*i),t.lineTo(.5*e,1*i),t.lineTo(0,.75*i),fh(t),ch(t,.5*e,0,!1),t.lineTo(.5*e,1*i),t.bb(!1),(e=t.o).A=new Mt(.25,.367),e.B=new Mt(.75,.875),r.q(t),e},Pyramid2:function(t,e,i){return ch(t=r.s(),.5*e,0,!0),t.lineTo(e,.85*i),t.lineTo(.5*e,1*i),t.lineTo(0,.85*i),fh(t),ch(t,.5*e,0,!1),t.lineTo(.5*e,.7*i),t.lineTo(0,.85*i),t.moveTo(.5*e,.7*i),t.lineTo(1*e,.85*i),t.bb(!1),(e=t.o).A=new Mt(.25,.367),e.B=new Mt(.75,.875),r.q(t),e},Actor:function(t,e,i){var n=.2*Qt,o=.1*Qt,a=.5,s=.1;return ch(t=r.s(),a*e,(s+.1)*i,!0),ph(t,(a-n)*e,(s+.1)*i,(a-.2)*e,(s+o)*i,(a-.2)*e,s*i),ph(t,(a-.2)*e,(s-o)*i,(a-n)*e,(s-.1)*i,a*e,(s-.1)*i),ph(t,(a+n)*e,(s-.1)*i,(a+.2)*e,(s-o)*i,(a+.2)*e,s*i),ph(t,(a+.2)*e,(s+o)*i,(a+n)*e,(s+.1)*i,a*e,(s+.1)*i),o=Qt*(n=.05),ch(t,.5*e,.2*i,!0),t.lineTo(.95*e,.2*i),ph(t,((a=.95)+o)*e,((s=.25)-n)*i,(a+n)*e,(s-o)*i,(a+n)*e,s*i),t.lineTo(1*e,.6*i),t.lineTo(.85*e,.6*i),t.lineTo(.85*e,.35*i),ph(t,((a=.825)+(n=.025))*e,((s=.35)-(o=Qt*n))*i,(a+o)*e,(s-n)*i,a*e,(s-n)*i),ph(t,(a-o)*e,(s-n)*i,(a-n)*e,(s-o)*i,(a-n)*e,s*i),t.lineTo(.8*e,1*i),t.lineTo(.55*e,1*i),t.lineTo(.55*e,.7*i),ph(t,((a=.5)+(n=.05))*e,((s=.7)-(o=Qt*n))*i,(a+o)*e,(s-n)*i,a*e,(s-n)*i),ph(t,(a-o)*e,(s-n)*i,(a-n)*e,(s-o)*i,(a-n)*e,s*i),t.lineTo(.45*e,1*i),t.lineTo(.2*e,1*i),t.lineTo(.2*e,.35*i),ph(t,((a=.175)+(n=.025))*e,((s=.35)-(o=Qt*n))*i,(a+o)*e,(s-n)*i,a*e,(s-n)*i),ph(t,(a-o)*e,(s-n)*i,(a-n)*e,(s-o)*i,(a-n)*e,s*i),t.lineTo(.15*e,.6*i),t.lineTo(0*e,.6*i),t.lineTo(0*e,.25*i),ph(t,((a=.05)-(n=.05))*e,((s=.25)-(o=Qt*n))*i,(a-o)*e,(s-n)*i,a*e,(s-n)*i),t.lineTo(.5*e,.2*i),(e=t.o).A=new Mt(.2,.2),e.B=new Mt(.8,.65),r.q(t),e},Card:function(t,e,i){return ch(t=r.s(),1*e,0*i,!0),t.lineTo(1*e,1*i),t.lineTo(0*e,1*i),t.lineTo(0*e,.2*i),t.lineTo(.2*e,0*i),fh(t),(e=t.o).A=new Mt(0,.2),e.B=P,r.q(t),e},Collate:function(t,e,i){return ch(t=r.s(),.5*e,.5*i,!0),t.lineTo(0,0),t.lineTo(1*e,0),t.lineTo(.5*e,.5*i),ch(t,.5*e,.5*i,!0),t.lineTo(1*e,1*i),t.lineTo(0,1*i),t.lineTo(.5*e,.5*i),(e=t.o).A=new Mt(.25,0),e.B=new Mt(.75,.25),r.q(t),e},CreateRequest:function(t,e,i){t=t?t.Hc:NaN,isNaN(t)&&(t=.1);var n=r.s();return ch(n,0,0,!0),n.lineTo(1*e,0),n.lineTo(1*e,1*i),n.lineTo(0,1*i),fh(n),ch(n,0,t*i,!1),n.lineTo(1*e,t*i),n.moveTo(0,(1-t)*i),n.lineTo(1*e,(1-t)*i),n.bb(!1),(e=n.o).A=new Mt(0,t),e.B=new Mt(1,1-t),r.q(n),e},Database:function(t,e,i){t=r.s();var n=.5*Qt,o=.1*Qt;return ch(t,1*e,.1*i,!0),t.lineTo(1*e,.9*i),ph(t,1*e,(.9+o)*i,(.5+n)*e,1*i,.5*e,1*i),ph(t,(.5-n)*e,1*i,0,(.9+o)*i,0,.9*i),t.lineTo(0,.1*i),ph(t,0,(.1-o)*i,(.5-n)*e,0,.5*e,0),ph(t,(.5+n)*e,0,1*e,(.1-o)*i,1*e,.1*i),ch(t,1*e,.1*i,!1),ph(t,1*e,(.1+o)*i,(.5+n)*e,.2*i,.5*e,.2*i),ph(t,(.5-n)*e,.2*i,0,(.1+o)*i,0,.1*i),t.moveTo(1*e,.2*i),ph(t,1*e,(.2+o)*i,(.5+n)*e,.3*i,.5*e,.3*i),ph(t,(.5-n)*e,.3*i,0,(.2+o)*i,0,.2*i),t.moveTo(1*e,.3*i),ph(t,1*e,(.3+o)*i,(.5+n)*e,.4*i,.5*e,.4*i),ph(t,(.5-n)*e,.4*i,0,(.3+o)*i,0,.3*i),t.bb(!1),(e=t.o).A=new Mt(0,.4),e.B=new Mt(1,.9),r.q(t),e},StoredData:"DataStorage",DataStorage:function(t,e,i){return ch(t=r.s(),0,0,!0),t.lineTo(.75*e,0),ph(t,1*e,0,1*e,1*i,.75*e,1*i),t.lineTo(0,1*i),ph(t,.25*e,.9*i,.25*e,.1*i,0,0),fh(t),(e=t.o).A=new Mt(.226,0),e.B=new Mt(.81,1),r.q(t),e},DiskStorage:function(t,e,i){t=r.s();var n=.5*Qt,o=.1*Qt;return ch(t,1*e,.1*i,!0),t.lineTo(1*e,.9*i),ph(t,1*e,(.9+o)*i,(.5+n)*e,1*i,.5*e,1*i),ph(t,(.5-n)*e,1*i,0,(.9+o)*i,0,.9*i),t.lineTo(0,.1*i),ph(t,0,(.1-o)*i,(.5-n)*e,0,.5*e,0),ph(t,(.5+n)*e,0,1*e,(.1-o)*i,1*e,.1*i),ch(t,1*e,.1*i,!1),ph(t,1*e,(.1+o)*i,(.5+n)*e,.2*i,.5*e,.2*i),ph(t,(.5-n)*e,.2*i,0,(.1+o)*i,0,.1*i),t.moveTo(1*e,.2*i),ph(t,1*e,(.2+o)*i,(.5+n)*e,.3*i,.5*e,.3*i),ph(t,(.5-n)*e,.3*i,0,(.2+o)*i,0,.2*i),t.bb(!1),(e=t.o).A=new Mt(0,.3),e.B=new Mt(1,.9),r.q(t),e},Display:function(t,e,i){return ch(t=r.s(),.25*e,0,!0),t.lineTo(.75*e,0),ph(t,1*e,0,1*e,1*i,.75*e,1*i),t.lineTo(.25*e,1*i),t.lineTo(0,.5*i),fh(t),(e=t.o).A=new Mt(.25,0),e.B=new Mt(.75,1),r.q(t),e},DividedEvent:function(t,e,i){t=t?t.Hc:NaN,isNaN(t)?t=.2:.15>t&&(t=.15);var n=r.s(),o=.2*Qt;return ch(n,0,.2*i,!0),ph(n,0,(.2-o)*i,(.2-o)*e,0,.2*e,0),n.lineTo(.8*e,0),ph(n,(.8+o)*e,0,1*e,(.2-o)*i,1*e,.2*i),n.lineTo(1*e,.8*i),ph(n,1*e,(.8+o)*i,(.8+o)*e,1*i,.8*e,1*i),n.lineTo(.2*e,1*i),ph(n,(.2-o)*e,1*i,0,(.8+o)*i,0,.8*i),n.lineTo(0,.2*i),ch(n,0,t*i,!1),n.lineTo(1*e,t*i),n.bb(!1),(e=n.o).A=new Mt(0,t),e.B=new Mt(1,1-t),r.q(n),e},DividedProcess:function(t,e,i){t=t?t.Hc:NaN,(isNaN(t)||.1>t)&&(t=.1);var n=r.s();return ch(n,0,0,!0),n.lineTo(1*e,0),n.lineTo(1*e,1*i),n.lineTo(0,1*i),fh(n),ch(n,0,t*i,!1),n.lineTo(1*e,t*i),n.bb(!1),(e=n.o).A=new Mt(0,t),e.B=P,r.q(n),e},Document:function(t,e,i){return i/=.8,ch(t=r.s(),0,.7*i,!0),t.lineTo(0,0),t.lineTo(1*e,0),t.lineTo(1*e,.7*i),ph(t,.5*e,.4*i,.5*e,1*i,0,.7*i),fh(t),(e=t.o).A=g,e.B=new Mt(1,.6),r.q(t),e},ExternalOrganization:function(t,e,i){t=t?t.Hc:NaN,(isNaN(t)||.2>t)&&(t=.2);var n=r.s();return ch(n,0,0,!0),n.lineTo(1*e,0),n.lineTo(1*e,1*i),n.lineTo(0,1*i),fh(n),ch(n,t*e,0,!1),n.lineTo(0,t*i),n.moveTo(1*e,t*i),n.lineTo((1-t)*e,0),n.moveTo(0,(1-t)*i),n.lineTo(t*e,1*i),n.moveTo((1-t)*e,1*i),n.lineTo(1*e,(1-t)*i),n.bb(!1),(e=n.o).A=new Mt(t/2,t/2),e.B=new Mt(1-t/2,1-t/2),r.q(n),e},ExternalProcess:function(t,e,i){return ch(t=r.s(),.5*e,0,!0),t.lineTo(1*e,.5*i),t.lineTo(.5*e,1*i),t.lineTo(0,.5*i),fh(t),ch(t,.1*e,.4*i,!1),t.lineTo(.1*e,.6*i),t.moveTo(.9*e,.6*i),t.lineTo(.9*e,.4*i),t.moveTo(.6*e,.1*i),t.lineTo(.4*e,.1*i),t.moveTo(.4*e,.9*i),t.lineTo(.6*e,.9*i),t.bb(!1),(e=t.o).A=new Mt(.25,.25),e.B=new Mt(.75,.75),r.q(t),e},File:function(t,e,i){return ch(t=r.s(),0,0,!0),t.lineTo(.75*e,0),t.lineTo(1*e,.25*i),t.lineTo(1*e,1*i),t.lineTo(0,1*i),fh(t),ch(t,.75*e,0,!1),t.lineTo(.75*e,.25*i),t.lineTo(1*e,.25*i),t.bb(!1),(e=t.o).A=new Mt(0,.25),e.B=P,r.q(t),e},Interrupt:function(t,e,i){return ch(t=r.s(),1*e,.5*i,!0),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(1*e,.5*i),ch(t,1*e,.5*i,!1),t.lineTo(1*e,1*i),ch(t,1*e,.5*i,!1),t.lineTo(1*e,0),(e=t.o).A=new Mt(0,.25),e.B=new Mt(.5,.75),r.q(t),e},InternalStorage:function(t,e,i){var n=t?t.Hc:NaN;t=t?t.Ku:NaN,isNaN(n)&&(n=.1),isNaN(t)&&(t=.1);var o=r.s();return ch(o,0,0,!0),o.lineTo(1*e,0),o.lineTo(1*e,1*i),o.lineTo(0,1*i),fh(o),ch(o,n*e,0,!1),o.lineTo(n*e,1*i),o.moveTo(0,t*i),o.lineTo(1*e,t*i),o.bb(!1),(e=o.o).A=new Mt(n,t),e.B=P,r.q(o),e},Junction:function(t,e,i){t=r.s();var n=1/Math.SQRT2,o=(1-1/Math.SQRT2)/2,a=.5*Qt;return ch(t,1*e,.5*i,!0),ph(t,1*e,(.5+a)*i,(.5+a)*e,1*i,.5*e,1*i),ph(t,(.5-a)*e,1*i,0,(.5+a)*i,0,.5*i),ph(t,0,(.5-a)*i,(.5-a)*e,0,.5*e,0),ph(t,(.5+a)*e,0,1*e,(.5-a)*i,1*e,.5*i),ch(t,(o+n)*e,(o+n)*i,!1),t.lineTo(o*e,o*i),t.moveTo(o*e,(o+n)*i),t.lineTo((o+n)*e,o*i),t.bb(!1),(e=t.o).ae=Xa,r.q(t),e},LinedDocument:function(t,e,i){return i/=.8,ch(t=r.s(),0,.7*i,!0),t.lineTo(0,0),t.lineTo(1*e,0),t.lineTo(1*e,.7*i),ph(t,.5*e,.4*i,.5*e,1*i,0,.7*i),fh(t),ch(t,.1*e,0,!1),t.lineTo(.1*e,.75*i),t.bb(!1),(e=t.o).A=new Mt(.1,0),e.B=new Mt(1,.6),r.q(t),e},LoopLimit:function(t,e,i){return ch(t=r.s(),0,1*i,!0),t.lineTo(0,.25*i),t.lineTo(.25*e,0),t.lineTo(.75*e,0),t.lineTo(1*e,.25*i),t.lineTo(1*e,1*i),fh(t),(e=t.o).A=new Mt(0,.25),e.B=P,r.q(t),e},SequentialData:"MagneticTape",MagneticTape:function(t,e,i){t=r.s();var n=.5*Qt;return ch(t,.5*e,1*i,!0),ph(t,(.5-n)*e,1*i,0,(.5+n)*i,0,.5*i),ph(t,0,(.5-n)*i,(.5-n)*e,0,.5*e,0),ph(t,(.5+n)*e,0,1*e,(.5-n)*i,1*e,.5*i),ph(t,1*e,(.5+n)*i,(.5+n)*e,.9*i,.6*e,.9*i),t.lineTo(1*e,.9*i),t.lineTo(1*e,1*i),t.lineTo(.5*e,1*i),(e=t.o).A=new Mt(.15,.15),e.B=new Mt(.85,.8),r.q(t),e},ManualInput:function(t,e,i){return ch(t=r.s(),1*e,0,!0),t.lineTo(1*e,1*i),t.lineTo(0,1*i),t.lineTo(0,.25*i),fh(t),(e=t.o).A=new Mt(0,.25),e.B=P,r.q(t),e},MessageFromUser:function(t,e,i){t=t?t.Hc:NaN,isNaN(t)&&(t=.7);var n=r.s();return ch(n,0,0,!0),n.lineTo(1*e,0),n.lineTo(t*e,.5*i),n.lineTo(1*e,1*i),n.lineTo(0,1*i),fh(n),(e=n.o).A=g,e.B=new Mt(t,1),r.q(n),e},MicroformProcessing:function(t,e,i){t=t?t.Hc:NaN,isNaN(t)&&(t=.25);var n=r.s();return ch(n,0,0,!0),n.lineTo(.5*e,t*i),n.lineTo(1*e,0),n.lineTo(1*e,1*i),n.lineTo(.5*e,(1-t)*i),n.lineTo(0,1*i),fh(n),(e=n.o).A=new Mt(0,t),e.B=new Mt(1,1-t),r.q(n),e},MicroformRecording:function(t,e,i){return ch(t=r.s(),0,0,!0),t.lineTo(.75*e,.25*i),t.lineTo(1*e,.15*i),t.lineTo(1*e,.85*i),t.lineTo(.75*e,.75*i),t.lineTo(0,1*i),fh(t),(e=t.o).A=new Mt(0,.25),e.B=new Mt(1,.75),r.q(t),e},MultiDocument:function(t,e,i){return i/=.8,ch(t=r.s(),e,0,!0),t.lineTo(e,.5*i),ph(t,.96*e,.47*i,.93*e,.45*i,.9*e,.44*i),t.lineTo(.9*e,.6*i),ph(t,.86*e,.57*i,.83*e,.55*i,.8*e,.54*i),t.lineTo(.8*e,.7*i),ph(t,.4*e,.4*i,.4*e,1*i,0,.7*i),t.lineTo(0,.2*i),t.lineTo(.1*e,.2*i),t.lineTo(.1*e,.1*i),t.lineTo(.2*e,.1*i),t.lineTo(.2*e,0),fh(t),ch(t,.1*e,.2*i,!1),t.lineTo(.8*e,.2*i),t.lineTo(.8*e,.54*i),t.moveTo(.2*e,.1*i),t.lineTo(.9*e,.1*i),t.lineTo(.9*e,.44*i),t.bb(!1),(e=t.o).A=new Mt(0,.25),e.B=new Mt(.8,.77),r.q(t),e},MultiProcess:function(t,e,i){return ch(t=r.s(),.1*e,.1*i,!0),t.lineTo(.2*e,.1*i),t.lineTo(.2*e,0),t.lineTo(1*e,0),t.lineTo(1*e,.8*i),t.lineTo(.9*e,.8*i),t.lineTo(.9*e,.9*i),t.lineTo(.8*e,.9*i),t.lineTo(.8*e,1*i),t.lineTo(0,1*i),t.lineTo(0,.2*i),t.lineTo(.1*e,.2*i),fh(t),ch(t,.2*e,.1*i,!1),t.lineTo(.9*e,.1*i),t.lineTo(.9*e,.8*i),t.moveTo(.1*e,.2*i),t.lineTo(.8*e,.2*i),t.lineTo(.8*e,.9*i),t.bb(!1),(e=t.o).A=new Mt(0,.2),e.B=new Mt(.8,1),r.q(t),e},OfflineStorage:function(t,e,i){t=t?t.Hc:NaN,isNaN(t)&&(t=.1);var n=1-t,o=r.s();return ch(o,0,0,!0),o.lineTo(1*e,0),o.lineTo(.5*e,1*i),fh(o),ch(o,.5*t*e,t*i,!1),o.lineTo((1-.5*t)*e,t*i),o.bb(!1),(e=o.o).A=new Mt(n/4+.5*t,t),e.B=new Mt(3*n/4+.5*t,t+.5*n),r.q(o),e},OffPageConnector:function(t,e,i){return ch(t=r.s(),0,0,!0),t.lineTo(.75*e,0),t.lineTo(1*e,.5*i),t.lineTo(.75*e,1*i),t.lineTo(0,1*i),fh(t),(e=t.o).A=g,e.B=new Mt(.75,1),r.q(t),e},Or:function(t,e,i){t=r.s();var n=.5*Qt;return ch(t,1*e,.5*i,!0),ph(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),ph(t,(.5-n)*e,1*i,0,(.5+n)*i,0,.5*i),ph(t,0,(.5-n)*i,(.5-n)*e,0,.5*e,0),ph(t,(.5+n)*e,0,1*e,(.5-n)*i,1*e,.5*i),ch(t,1*e,.5*i,!1),t.lineTo(0,.5*i),t.moveTo(.5*e,1*i),t.lineTo(.5*e,0),t.bb(!1),(e=t.o).ae=Xa,r.q(t),e},PaperTape:function(t,e,i){return i/=.8,ch(t=r.s(),0,.7*i,!0),t.lineTo(0,.3*i),ph(t,.5*e,.6*i,.5*e,0,1*e,.3*i),t.lineTo(1*e,.7*i),ph(t,.5*e,.4*i,.5*e,1*i,0,.7*i),fh(t),(e=t.o).A=new Mt(0,.49),e.B=new Mt(1,.75),r.q(t),e},PrimitiveFromCall:function(t,e,i){var n=t?t.Hc:NaN;t=t?t.Ku:NaN,isNaN(n)&&(n=.1),isNaN(t)&&(t=.3);var o=r.s();return ch(o,0,0,!0),o.lineTo(1*e,0),o.lineTo((1-t)*e,.5*i),o.lineTo(1*e,1*i),o.lineTo(0,1*i),fh(o),(e=o.o).A=new Mt(n,0),e.B=new Mt(1-t,1),r.q(o),e},PrimitiveToCall:function(t,e,i){var n=t?t.Hc:NaN;t=t?t.Ku:NaN,isNaN(n)&&(n=.1),isNaN(t)&&(t=.3);var o=r.s();return ch(o,0,0,!0),o.lineTo((1-t)*e,0),o.lineTo(1*e,.5*i),o.lineTo((1-t)*e,1*i),o.lineTo(0,1*i),fh(o),(e=o.o).A=new Mt(n,0),e.B=new Mt(1-t,1),r.q(o),e},Subroutine:"Procedure",Procedure:function(t,e,i){t=t?t.Hc:NaN,isNaN(t)&&(t=.1);var n=r.s();return ch(n,0,0,!0),n.lineTo(1*e,0),n.lineTo(1*e,1*i),n.lineTo(0,1*i),fh(n),ch(n,(1-t)*e,0,!1),n.lineTo((1-t)*e,1*i),n.moveTo(t*e,0),n.lineTo(t*e,1*i),n.bb(!1),(e=n.o).A=new Mt(t,0),e.B=new Mt(1-t,1),r.q(n),e},Process:function(t,e,i){t=t?t.Hc:NaN,isNaN(t)&&(t=.1);var n=r.s();return ch(n,0,0,!0),n.lineTo(1*e,0),n.lineTo(1*e,1*i),n.lineTo(0,1*i),fh(n),ch(n,t*e,0,!1),n.lineTo(t*e,1*i),n.bb(!1),(e=n.o).A=new Mt(t,0),e.B=P,r.q(n),e},Sort:function(t,e,i){return ch(t=r.s(),.5*e,0,!0),t.lineTo(1*e,.5*i),t.lineTo(.5*e,1*i),t.lineTo(0,.5*i),fh(t),ch(t,0,.5*i,!1),t.lineTo(1*e,.5*i),t.bb(!1),(e=t.o).A=new Mt(.25,.25),e.B=new Mt(.75,.5),r.q(t),e},Start:function(t,e,i){return ch(t=r.s(),.25*e,0,!0),ch(t,.25*e,0,!0),t.arcTo(270,180,.75*e,.5*i,.25*e,.5*i),t.arcTo(90,180,.25*e,.5*i,.25*e,.5*i),ch(t,.25*e,0,!1),t.lineTo(.25*e,1*i),t.moveTo(.75*e,0),t.lineTo(.75*e,1*i),t.bb(!1),(e=t.o).A=new Mt(.25,0),e.B=new Mt(.75,1),r.q(t),e},Terminator:function(t,e,i){return ch(t=r.s(),.25*e,0,!0),t.arcTo(270,180,.75*e,.5*i,.25*e,.5*i),t.arcTo(90,180,.25*e,.5*i,.25*e,.5*i),(e=t.o).A=new Mt(.23,0),e.B=new Mt(.77,1),r.q(t),e},TransmittalTape:function(t,e,i){t=t?t.Hc:NaN,isNaN(t)&&(t=.1);var n=r.s();return ch(n,0,0,!0),n.lineTo(1*e,0),n.lineTo(1*e,1*i),n.lineTo(.75*e,(1-t)*i),n.lineTo(0,(1-t)*i),fh(n),(e=n.o).A=g,e.B=new Mt(1,1-t),r.q(n),e},AndGate:function(t,e,i){t=r.s();var n=.5*Qt;return ch(t,0,0,!0),t.lineTo(.5*e,0),ph(t,(.5+n)*e,0,1*e,(.5-n)*i,1*e,.5*i),ph(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),t.lineTo(0,1*i),fh(t),(e=t.o).A=g,e.B=new Mt(.55,1),r.q(t),e},Buffer:function(t,e,i){return ch(t=r.s(),0,0,!0),t.lineTo(1*e,.5*i),t.lineTo(0,1*i),fh(t),(e=t.o).A=new Mt(0,.25),e.B=new Mt(.5,.75),r.q(t),e},Clock:function(t,e,i){t=r.s();var n=.5*Qt;return ch(t,1*e,.5*i,!0),ph(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),ph(t,(.5-n)*e,1*i,0,(.5+n)*i,0,.5*i),ph(t,0,(.5-n)*i,(.5-n)*e,0,.5*e,0),ph(t,(.5+n)*e,0,1*e,(.5-n)*i,1*e,.5*i),ch(t,1*e,.5*i,!1),t.lineTo(1*e,.5*i),ch(t,.8*e,.75*i,!1),t.lineTo(.8*e,.25*i),t.lineTo(.6*e,.25*i),t.lineTo(.6*e,.75*i),t.lineTo(.4*e,.75*i),t.lineTo(.4*e,.25*i),t.lineTo(.2*e,.25*i),t.lineTo(.2*e,.75*i),t.bb(!1),(e=t.o).ae=Xa,r.q(t),e},Ground:function(t,e,i){return ch(t=r.s(),.5*e,0,!1),t.lineTo(.5*e,.4*i),t.moveTo(.2*e,.6*i),t.lineTo(.8*e,.6*i),t.moveTo(.3*e,.8*i),t.lineTo(.7*e,.8*i),t.moveTo(.4*e,1*i),t.lineTo(.6*e,1*i),e=t.o,r.q(t),e},Inverter:function(t,e,i){t=r.s();var n=.1*Qt;return ch(t,.8*e,.5*i,!0),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(.8*e,.5*i),ch(t,1*e,.5*i,!0),ph(t,1*e,(.5+n)*i,(.9+n)*e,.6*i,.9*e,.6*i),ph(t,(.9-n)*e,.6*i,.8*e,(.5+n)*i,.8*e,.5*i),ph(t,.8*e,(.5-n)*i,(.9-n)*e,.4*i,.9*e,.4*i),ph(t,(.9+n)*e,.4*i,1*e,(.5-n)*i,1*e,.5*i),(e=t.o).A=new Mt(0,.25),e.B=new Mt(.4,.75),r.q(t),e},NandGate:function(t,e,i){t=r.s();var n=.5*Qt,o=.4*Qt,a=.1*Qt;return ch(t,.8*e,.5*i,!0),ph(t,.8*e,(.5+o)*i,(.4+n)*e,1*i,.4*e,1*i),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(.4*e,0),ph(t,(.4+n)*e,0,.8*e,(.5-o)*i,.8*e,.5*i),ch(t,1*e,.5*i,!0),ph(t,1*e,(.5+a)*i,(.9+a)*e,.6*i,.9*e,.6*i),ph(t,(.9-a)*e,.6*i,.8*e,(.5+a)*i,.8*e,.5*i),ph(t,.8*e,(.5-a)*i,(.9-a)*e,.4*i,.9*e,.4*i),ph(t,(.9+a)*e,.4*i,1*e,(.5-a)*i,1*e,.5*i),(e=t.o).A=new Mt(0,.05),e.B=new Mt(.55,.95),r.q(t),e},NorGate:function(t,e,i){t=r.s();var n=.5,o=Qt*n,a=0,s=.5;return ch(t,.8*e,.5*i,!0),ph(t,.7*e,(s+o)*i,(a+o)*e,(s+n)*i,0,1*i),ph(t,.25*e,.75*i,.25*e,.25*i,0,0),ph(t,(a+o)*e,(s-n)*i,.7*e,(s-o)*i,.8*e,.5*i),o=.1*Qt,ch(t,((a=.9)-(n=.1))*e,(s=.5)*i,!0),ph(t,(a-n)*e,(s-o)*i,(a-o)*e,(s-n)*i,a*e,(s-n)*i),ph(t,(a+o)*e,(s-n)*i,(a+n)*e,(s-o)*i,(a+n)*e,s*i),ph(t,(a+n)*e,(s+o)*i,(a+o)*e,(s+n)*i,a*e,(s+n)*i),ph(t,(a-o)*e,(s+n)*i,(a-n)*e,(s+o)*i,(a-n)*e,s*i),(e=t.o).A=new Mt(.2,.25),e.B=new Mt(.6,.75),r.q(t),e},OrGate:function(t,e,i){t=r.s();var n=.5*Qt;return ch(t,0,0,!0),ph(t,(0+n+n)*e,0*i,.8*e,(.5-n)*i,1*e,.5*i),ph(t,.8*e,(.5+n)*i,(0+n+n)*e,1*i,0,1*i),ph(t,.25*e,.75*i,.25*e,.25*i,0,0),fh(t),(e=t.o).A=new Mt(.2,.25),e.B=new Mt(.75,.75),r.q(t),e},XnorGate:function(t,e,i){t=r.s();var n=.5,o=Qt*n,a=.2,s=.5;return ch(t,.1*e,0,!1),ph(t,.35*e,.25*i,.35*e,.75*i,.1*e,1*i),ch(t,.8*e,.5*i,!0),ph(t,.7*e,(s+o)*i,(a+o)*e,(s+n)*i,.2*e,1*i),ph(t,.45*e,.75*i,.45*e,.25*i,.2*e,0),ph(t,(a+o)*e,(s-n)*i,.7*e,(s-o)*i,.8*e,.5*i),o=.1*Qt,ch(t,((a=.9)-(n=.1))*e,(s=.5)*i,!0),ph(t,(a-n)*e,(s-o)*i,(a-o)*e,(s-n)*i,a*e,(s-n)*i),ph(t,(a+o)*e,(s-n)*i,(a+n)*e,(s-o)*i,(a+n)*e,s*i),ph(t,(a+n)*e,(s+o)*i,(a+o)*e,(s+n)*i,a*e,(s+n)*i),ph(t,(a-o)*e,(s+n)*i,(a-n)*e,(s+o)*i,(a-n)*e,s*i),(e=t.o).A=new Mt(.4,.25),e.B=new Mt(.65,.75),r.q(t),e},XorGate:function(t,e,i){t=r.s();var n=.5*Qt;return ch(t,.1*e,0,!1),ph(t,.35*e,.25*i,.35*e,.75*i,.1*e,1*i),ch(t,.2*e,0,!0),ph(t,(.2+n)*e,0*i,.9*e,(.5-n)*i,1*e,.5*i),ph(t,.9*e,(.5+n)*i,(.2+n)*e,1*i,.2*e,1*i),ph(t,.45*e,.75*i,.45*e,.25*i,.2*e,0),fh(t),(e=t.o).A=new Mt(.4,.25),e.B=new Mt(.8,.75),r.q(t),e},Capacitor:function(t,e,i){return ch(t=r.s(),0,0,!1),t.lineTo(0,1*i),t.moveTo(1*e,0),t.lineTo(1*e,1*i),e=t.o,r.q(t),e},Resistor:function(t,e,i){return ch(t=r.s(),0,.5*i,!1),t.lineTo(.1*e,0),t.lineTo(.2*e,1*i),t.lineTo(.3*e,0),t.lineTo(.4*e,1*i),t.lineTo(.5*e,0),t.lineTo(.6*e,1*i),t.lineTo(.7*e,.5*i),e=t.o,r.q(t),e},Inductor:function(t,e,i){t=r.s();var n=.1*Qt,o=.1;return ch(t,(o-.5*n)*e,i,!1),ph(t,(o-n)*e,i,(o-.1)*e,0,(o+.1)*e,0),ph(t,((o=.3)+.1)*e,0,(o+n)*e,i,o*e,i),ph(t,(o-n)*e,i,(o-.1)*e,0,(o+.1)*e,0),ph(t,((o=.5)+.1)*e,0,(o+n)*e,i,o*e,i),ph(t,(o-n)*e,i,(o-.1)*e,0,(o+.1)*e,0),ph(t,((o=.7)+.1)*e,0,(o+n)*e,i,o*e,i),ph(t,(o-n)*e,i,(o-.1)*e,0,(o+.1)*e,0),ph(t,((o=.9)+.1)*e,0,(o+n)*e,i,(o+.5*n)*e,i),e=t.o,r.q(t),e},ACvoltageSource:function(t,e,i){t=r.s();var n=.5*Qt;return ch(t,0*e,.5*i,!1),ph(t,0*e,(.5-n)*i,(.5-n)*e,0*i,.5*e,0*i),ph(t,(.5+n)*e,0*i,1*e,(.5-n)*i,1*e,.5*i),ph(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),ph(t,(.5-n)*e,1*i,0*e,(.5+n)*i,0*e,.5*i),t.moveTo(.1*e,.5*i),ph(t,.5*e,0*i,.5*e,1*i,.9*e,.5*i),(e=t.o).ae=Xa,r.q(t),e},DCvoltageSource:function(t,e,i){return ch(t=r.s(),0,.75*i,!1),t.lineTo(0,.25*i),t.moveTo(1*e,0),t.lineTo(1*e,1*i),e=t.o,r.q(t),e},Diode:function(t,e,i){return ch(t=r.s(),1*e,0,!1),t.lineTo(1*e,.5*i),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(1*e,.5*i),t.lineTo(1*e,1*i),(e=t.o).A=new Mt(0,.25),e.B=new Mt(.5,.75),r.q(t),e},Wifi:function(t,e,i){var n=e,o=i;e*=.38,i*=.6,t=r.s();var a=.8*Qt,s=.8,l=0,h=.5;return ch(t,l*e+(n=(n-e)/2),(h+s)*i+(o=(o-i)/2),!0),ph(t,(l-a)*e+n,(h+s)*i+o,(l-s)*e+n,(h+a)*i+o,(l-s)*e+n,h*i+o),ph(t,(l-s)*e+n,(h-a)*i+o,(l-a)*e+n,(h-s)*i+o,l*e+n,(h-s)*i+o),ph(t,l*e+n,(h-s)*i+o,(l-s+.5*a)*e+n,(h-a)*i+o,(l-s+.5*a)*e+n,h*i+o),ph(t,(l-s+.5*a)*e+n,(h+a)*i+o,l*e+n,(h+s)*i+o,l*e+n,(h+s)*i+o),fh(t),a=.4*Qt,ch(t,(l=.2)*e+n,((h=.5)+(s=.4))*i+o,!0),ph(t,(l-a)*e+n,(h+s)*i+o,(l-s)*e+n,(h+a)*i+o,(l-s)*e+n,h*i+o),ph(t,(l-s)*e+n,(h-a)*i+o,(l-a)*e+n,(h-s)*i+o,l*e+n,(h-s)*i+o),ph(t,l*e+n,(h-s)*i+o,(l-s+.5*a)*e+n,(h-a)*i+o,(l-s+.5*a)*e+n,h*i+o),ph(t,(l-s+.5*a)*e+n,(h+a)*i+o,l*e+n,(h+s)*i+o,l*e+n,(h+s)*i+o),fh(t),a=.2*Qt,h=l=.5,ch(t,(l-(s=.2))*e+n,h*i+o,!0),ph(t,(l-s)*e+n,(h-a)*i+o,(l-a)*e+n,(h-s)*i+o,l*e+n,(h-s)*i+o),ph(t,(l+a)*e+n,(h-s)*i+o,(l+s)*e+n,(h-a)*i+o,(l+s)*e+n,h*i+o),ph(t,(l+s)*e+n,(h+a)*i+o,(l+a)*e+n,(h+s)*i+o,l*e+n,(h+s)*i+o),ph(t,(l-a)*e+n,(h+s)*i+o,(l-s)*e+n,(h+a)*i+o,(l-s)*e+n,h*i+o),a=.4*Qt,ch(t,(l=.8)*e+n,((h=.5)-(s=.4))*i+o,!0),ph(t,(l+a)*e+n,(h-s)*i+o,(l+s)*e+n,(h-a)*i+o,(l+s)*e+n,h*i+o),ph(t,(l+s)*e+n,(h+a)*i+o,(l+a)*e+n,(h+s)*i+o,l*e+n,(h+s)*i+o),ph(t,l*e+n,(h+s)*i+o,(l+s-.5*a)*e+n,(h+a)*i+o,(l+s-.5*a)*e+n,h*i+o),ph(t,(l+s-.5*a)*e+n,(h-a)*i+o,l*e+n,(h-s)*i+o,l*e+n,(h-s)*i+o),fh(t),a=.8*Qt,ch(t,(l=1)*e+n,((h=.5)-(s=.8))*i+o,!0),ph(t,(l+a)*e+n,(h-s)*i+o,(l+s)*e+n,(h-a)*i+o,(l+s)*e+n,h*i+o),ph(t,(l+s)*e+n,(h+a)*i+o,(l+a)*e+n,(h+s)*i+o,l*e+n,(h+s)*i+o),ph(t,l*e+n,(h+s)*i+o,(l+s-.5*a)*e+n,(h+a)*i+o,(l+s-.5*a)*e+n,h*i+o),ph(t,(l+s-.5*a)*e+n,(h-a)*i+o,l*e+n,(h-s)*i+o,l*e+n,(h-s)*i+o),fh(t),e=t.o,r.q(t),e},Email:function(t,e,i){return ch(t=r.s(),0,0,!0),t.lineTo(1*e,0),t.lineTo(1*e,1*i),t.lineTo(0,1*i),t.lineTo(0,0),fh(t),ch(t,0,0,!1),t.lineTo(.5*e,.6*i),t.lineTo(1*e,0),t.moveTo(0,1*i),t.lineTo(.45*e,.54*i),t.moveTo(1*e,1*i),t.lineTo(.55*e,.54*i),t.bb(!1),e=t.o,r.q(t),e},Ethernet:function(t,e,i){return ch(t=r.s(),.35*e,0,!0),t.lineTo(.65*e,0),t.lineTo(.65*e,.4*i),t.lineTo(.35*e,.4*i),t.lineTo(.35*e,0),fh(t),ch(t,.1*e,1*i,!0,!0),t.lineTo(.4*e,1*i),t.lineTo(.4*e,.6*i),t.lineTo(.1*e,.6*i),t.lineTo(.1*e,1*i),fh(t),ch(t,.6*e,1*i,!0,!0),t.lineTo(.9*e,1*i),t.lineTo(.9*e,.6*i),t.lineTo(.6*e,.6*i),t.lineTo(.6*e,1*i),fh(t),ch(t,0,.5*i,!1),t.lineTo(1*e,.5*i),t.moveTo(.5*e,.5*i),t.lineTo(.5*e,.4*i),t.moveTo(.75*e,.5*i),t.lineTo(.75*e,.6*i),t.moveTo(.25*e,.5*i),t.lineTo(.25*e,.6*i),t.bb(!1),e=t.o,r.q(t),e},Power:function(t,e,i){t=r.s();var n=.4*Qt,o=.4,a=r.K(),s=r.K(),l=r.K(),h=r.K();Ne(.5,.5-o,.5+n,.5-o,.5+o,.5-n,.5+o,.5,.5,a,a,s,l,h);var u=r.xb(s.x,s.y);return ch(t,s.x*e,s.y*i,!0),ph(t,l.x*e,l.y*i,h.x*e,h.y*i,(.5+o)*e,.5*i),ph(t,(.5+o)*e,(.5+n)*i,(.5+n)*e,(.5+o)*i,.5*e,(.5+o)*i),ph(t,(.5-n)*e,(.5+o)*i,(.5-o)*e,(.5+n)*i,(.5-o)*e,.5*i),Ne(.5-o,.5,.5-o,.5-n,.5-n,.5-o,.5,.5-o,.5,l,h,s,a,a),ph(t,l.x*e,l.y*i,h.x*e,h.y*i,s.x*e,s.y*i),Ne(.5-(o=.3),.5,.5-o,.5-(n=.3*Qt),.5-n,.5-o,.5,.5-o,.5,l,h,s,a,a),t.lineTo(s.x*e,s.y*i),ph(t,h.x*e,h.y*i,l.x*e,l.y*i,(.5-o)*e,.5*i),ph(t,(.5-o)*e,(.5+n)*i,(.5-n)*e,(.5+o)*i,.5*e,(.5+o)*i),ph(t,(.5+n)*e,(.5+o)*i,(.5+o)*e,(.5+n)*i,(.5+o)*e,.5*i),Ne(.5,.5-o,.5+n,.5-o,.5+o,.5-n,.5+o,.5,.5,a,a,s,l,h),ph(t,h.x*e,h.y*i,l.x*e,l.y*i,s.x*e,s.y*i),fh(t),ch(t,.45*e,0,!0),t.lineTo(.45*e,.5*i),t.lineTo(.55*e,.5*i),t.lineTo(.55*e,0),fh(t),r.v(a),r.v(s),r.v(l),r.v(h),r.v(u),(e=t.o).A=new Mt(.25,.55),e.B=new Mt(.75,.8),r.q(t),e},Fallout:function(t,e,i){t=r.s();var n=.5*Qt;ch(t,0*e,.5*i,!0),ph(t,0*e,(.5-n)*i,(.5-n)*e,0*i,.5*e,0*i),ph(t,(.5+n)*e,0*i,1*e,(.5-n)*i,1*e,.5*i),ph(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),ph(t,(.5-n)*e,1*i,0*e,(.5+n)*i,0*e,.5*i);var o=n=0;return ch(t,(.3+n)*e,(.8+o)*i,!0,!0),t.lineTo((.5+n)*e,(.5+o)*i),t.lineTo((.1+n)*e,(.5+o)*i),t.lineTo((.3+n)*e,(.8+o)*i),n=.4,o=0,fh(t),ch(t,(.3+n)*e,(.8+o)*i,!0,!0),t.lineTo((.5+n)*e,(.5+o)*i),t.lineTo((.1+n)*e,(.5+o)*i),t.lineTo((.3+n)*e,(.8+o)*i),n=.2,o=-.3,fh(t),ch(t,(.3+n)*e,(.8+o)*i,!0,!0),t.lineTo((.5+n)*e,(.5+o)*i),t.lineTo((.1+n)*e,(.5+o)*i),t.lineTo((.3+n)*e,(.8+o)*i),fh(t),(e=t.o).ae=Xa,r.q(t),e},IrritationHazard:function(t,e,i){return ch(t=r.s(),.2*e,0*i,!0),t.lineTo(.5*e,.3*i),t.lineTo(.8*e,0*i),t.lineTo(1*e,.2*i),t.lineTo(.7*e,.5*i),t.lineTo(1*e,.8*i),t.lineTo(.8*e,1*i),t.lineTo(.5*e,.7*i),t.lineTo(.2*e,1*i),t.lineTo(0*e,.8*i),t.lineTo(.3*e,.5*i),t.lineTo(0*e,.2*i),fh(t),(e=t.o).A=new Mt(.3,.3),e.B=new Mt(.7,.7),r.q(t),e},ElectricalHazard:function(t,e,i){return ch(t=r.s(),.37*e,0*i,!0),t.lineTo(.5*e,.11*i),t.lineTo(.77*e,.04*i),t.lineTo(.33*e,.49*i),t.lineTo(1*e,.37*i),t.lineTo(.63*e,.86*i),t.lineTo(.77*e,.91*i),t.lineTo(.34*e,1*i),t.lineTo(.34*e,.78*i),t.lineTo(.44*e,.8*i),t.lineTo(.65*e,.56*i),t.lineTo(0*e,.68*i),fh(t),e=t.o,r.q(t),e},FireHazard:function(t,e,i){return ch(t=r.s(),.1*e,1*i,!0),ph(t,-.25*e,.63*i,.45*e,.44*i,.29*e,0*i),ph(t,.48*e,.17*i,.54*e,.35*i,.51*e,.42*i),ph(t,.59*e,.29*i,.58*e,.28*i,.59*e,.18*i),ph(t,.8*e,.34*i,.88*e,.43*i,.75*e,.6*i),ph(t,.87*e,.48*i,.88*e,.43*i,.88*e,.31*i),ph(t,1.17*e,.76*i,.82*e,.8*i,.9*e,1*i),fh(t),(e=t.o).A=new Mt(.05,.645),e.B=new Mt(.884,.908),r.q(t),e},BpmnActivityLoop:function(t,e,i){t=r.s();var n=4*(Math.SQRT2-1)/3*.5;return ch(t,.65*e,1*i,!1),ph(t,(1-n+0)*e,1*i,1*e,(.5+n+0)*i,1*e,.5*i),ph(t,1*e,(.5-n+0)*i,(.5+n+0)*e,0*i,.5*e,0*i),ph(t,(.5-n+0)*e,0*i,0*e,(.5-n+0)*i,0*e,.5*i),ph(t,0*e,(.5+n+0)*i,(.5-n+0)*e,1*i,.35*e,.98*i),t.moveTo(.25*e,.8*i),t.lineTo(.35*e,1*i),t.lineTo(.1*e,1*i),e=t.o,r.q(t),e},BpmnActivityParallel:function(t,e,i){return ch(t=r.s(),0,0,!1),t.lineTo(0,1*i),t.moveTo(.5*e,0),t.lineTo(.5*e,1*i),t.moveTo(1*e,0),t.lineTo(1*e,1*i),e=t.o,r.q(t),e},BpmnActivitySequential:function(t,e,i){return ch(t=r.s(),0,0,!1),t.lineTo(1*e,0),t.moveTo(0,.5*i),t.lineTo(1*e,.5*i),t.moveTo(0,1*i),t.lineTo(1*e,1*i),e=t.o,r.q(t),e},BpmnActivityAdHoc:function(t,e,i){return ch(t=r.s(),0,0,!1),ch(t,1*e,1*i,!1),ch(t,0,.5*i,!1),ph(t,.2*e,.35*i,.3*e,.35*i,.5*e,.5*i),ph(t,.7*e,.65*i,.8*e,.65*i,1*e,.5*i),e=t.o,r.q(t),e},BpmnActivityCompensation:function(t,e,i){return ch(t=r.s(),0,.5*i,!0),t.lineTo(.5*e,0),t.lineTo(.5*e,.5*i),t.lineTo(1*e,1*i),t.lineTo(1*e,0),t.lineTo(.5*e,.5*i),t.lineTo(.5*e,1*i),fh(t),e=t.o,r.q(t),e},BpmnTaskMessage:function(t,e,i){return ch(t=r.s(),0,.2*i,!0),t.lineTo(1*e,.2*i),t.lineTo(1*e,.8*i),t.lineTo(0,.8*i),t.lineTo(0,.8*i),fh(t),ch(t,0,.2*i,!1),t.lineTo(.5*e,.5*i),t.lineTo(1*e,.2*i),t.bb(!1),e=t.o,r.q(t),e},BpmnTaskScript:function(t,e,i){return ch(t=r.s(),.7*e,1*i,!0),t.lineTo(.3*e,1*i),ph(t,.6*e,.5*i,0,.5*i,.3*e,0),t.lineTo(.7*e,0),ph(t,.4*e,.5*i,1*e,.5*i,.7*e,1*i),fh(t),ch(t,.45*e,.73*i,!1),t.lineTo(.7*e,.73*i),t.moveTo(.38*e,.5*i),t.lineTo(.63*e,.5*i),t.moveTo(.31*e,.27*i),t.lineTo(.56*e,.27*i),t.bb(!1),e=t.o,r.q(t),e},BpmnTaskUser:function(t,e,i){ch(t=r.s(),0,0,!1),ch(t,.335*e,(1-.555)*i,!0),t.lineTo(.335*e,.595*i),t.lineTo(.665*e,.595*i),t.lineTo(.665*e,(1-.555)*i),ph(t,.88*e,.46*i,.98*e,.54*i,1*e,.68*i),t.lineTo(1*e,1*i),t.lineTo(0,1*i),t.lineTo(0,.68*i),ph(t,.02*e,.54*i,.12*e,.46*i,.335*e,(1-.555)*i),t.lineTo(.365*e,.405*i);var n,o=.5-.285,a=Math.PI/4;return ph(t,(.5-((a=(n=4*(1-Math.cos(a))/(3*Math.sin(a)))*o)+o)/2)*e,(o+(o+(n=n*o))/2)*i,.285*e,(o+n)*i,.285*e,o*i),ph(t,.285*e,(o-n)*i,(.5-a)*e,0*i,.5*e,0*i),ph(t,(.5+a)*e,0*i,(.5+o)*e,(o-n)*i,(.5+o)*e,o*i),ph(t,(.5+o)*e,(o+n)*i,(.5+(a+o)/2)*e,(o+(o+n)/2)*i,.635*e,.405*i),t.lineTo(.635*e,.405*i),t.lineTo(.665*e,(1-.555)*i),t.lineTo(.665*e,.595*i),t.lineTo(.335*e,.595*i),ch(t,.2*e,1*i,!1),t.lineTo(.2*e,.8*i),ch(t,.8*e,1*i,!1),t.lineTo(.8*e,.8*i),e=t.o,r.q(t),e},BpmnEventConditional:function(t,e,i){return ch(t=r.s(),.1*e,0,!0),t.lineTo(.9*e,0),t.lineTo(.9*e,1*i),t.lineTo(.1*e,1*i),fh(t),ch(t,.2*e,.2*i,!1),t.lineTo(.8*e,.2*i),t.moveTo(.2*e,.4*i),t.lineTo(.8*e,.4*i),t.moveTo(.2*e,.6*i),t.lineTo(.8*e,.6*i),t.moveTo(.2*e,.8*i),t.lineTo(.8*e,.8*i),t.bb(!1),e=t.o,r.q(t),e},BpmnEventError:function(t,e,i){return ch(t=r.s(),0,1*i,!0),t.lineTo(.33*e,0),t.lineTo(.66*e,.5*i),t.lineTo(1*e,0),t.lineTo(.66*e,1*i),t.lineTo(.33*e,.5*i),fh(t),e=t.o,r.q(t),e},BpmnEventEscalation:function(t,e,i){return ch(t=r.s(),0,0,!1),ch(t,1*e,1*i,!1),ch(t,.1*e,1*i,!0),t.lineTo(.5*e,0),t.lineTo(.9*e,1*i),t.lineTo(.5*e,.5*i),fh(t),e=t.o,r.q(t),e},BpmnEventTimer:function(t,e,i){t=r.s();var n=.5*Qt;return ch(t,1*e,.5*i,!0),ph(t,1*e,(.5+n)*i,(.5+n)*e,1*i,.5*e,1*i),ph(t,(.5-n)*e,1*i,0,(.5+n)*i,0,.5*i),ph(t,0,(.5-n)*i,(.5-n)*e,0,.5*e,0),ph(t,(.5+n)*e,0,1*e,(.5-n)*i,1*e,.5*i),ch(t,.5*e,0,!1),t.lineTo(.5*e,.15*i),t.moveTo(.5*e,1*i),t.lineTo(.5*e,.85*i),t.moveTo(0,.5*i),t.lineTo(.15*e,.5*i),t.moveTo(1*e,.5*i),t.lineTo(.85*e,.5*i),t.moveTo(.5*e,.5*i),t.lineTo(.58*e,.1*i),t.moveTo(.5*e,.5*i),t.lineTo(.78*e,.54*i),t.bb(!1),(e=t.o).ae=Xa,r.q(t),e}};for(xh in wh)wh[xh.toLowerCase()]=xh;var kh,Mh,Sh,Th,Ph={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};function Nh(t){var e=ge[t];if(void 0===e){var i=t.toLowerCase();if("none"===i)return"None";if(void 0===(e=ge[i])){var n,o=null;for(n in Ph)if(n.toLowerCase()===i){o=n;break}if(null!==o)return t=Gt(Ph[o],!1),ge[o]=t,i!==o&&(ge[i]=o),o}}return"string"==typeof e?e:e instanceof He?t:null}function Ch(t){Ys.call(this,t),this.O=2408959,this.sl=this.yi="",this.Ws=this.Ts=this.et=this.cs=null,this.gt="",this.wi=this.Pr=this.ft=this.an=null,this.Vs="",this.gp=null,this.Us=de,this.Xs="",this.hp=null,this.Md="",this.ew=this.ar=this.fl=null,this.Ui=new ut(NaN,NaN).freeze(),this.hs="",this.vl=null,this.js=g,this.rs=oe,this.ks=re,this.vr=null,this.ds=Th,this.cn=ne,this.bn="gray",this.Eg=4,this.pD=-1,this.Et=NaN,this.RG=new pt,this.Pm=null,this.hk=NaN}function Ah(t){0!=(16384&t.O)!=!1&&(t.updateAdornments(),t.O&=-16385)}function Fh(t){if(!1===Mc(t)){var e=t.g;null!==e&&(e.vg.add(t),e.Ne()),Sc(t,!0),t.Ni()}}function Dh(t){if(t.O|=2097152,!1!==Mc(t)){var e=t.position;(i=t.location).I()&&e.I()||Bh(t,e,i);var i,n=(i=t.pc).copy();i.Qa(),i.x=e.x,i.y=e.y,i.freeze(),t.Yx(n,i),Sc(t,!1)}}function Lh(t,e,i,n){void 0===n&&(n=new ut),i=i.Td()?k:i;var o=e.Ja;if(n.m(o.width*i.x+i.offsetX,o.height*i.y+i.offsetY),null===e||e===t)return n;for(e.transform.nb(n),e=e.Q;null!==e&&e!==t;)e.transform.nb(n),e=e.Q;return t.Ti.nb(n),n.offset(-t.ud.x,-t.ud.y),n}function jh(t,e){var i,n=t.RG;isNaN(t.hk)&&(t.hk=function t(e){for(var i=(e=e.xa.n).length,n=0,o=0;o<i;o++){var r=e[o];if(r instanceof Ys)n=Math.max(n,t(r));else if(r instanceof Ml){t:{if(null!==!r.Sf)switch(r.Do){case"None":case"Square":case"Ellipse":case"Circle":case"LineH":case"LineV":case"FramedRectangle":case"RoundedRectangle":case"Line1":case"Line2":case"Border":case"Cube1":case"Cube2":case"Junction":case"Cylinder1":case"Cylinder2":case"Cylinder3":case"Cylinder4":case"PlusLine":case"XLine":case"ThinCross":case"ThickCross":r=0;break t}r=r.ii/2*r.en*r.sj()}n=Math.max(n,r)}}return n}(t));var o=2*(i=t.hk);if(!t.cm)return n.m(e.x-1-i,e.y-1-i,e.width+2+o,e.height+2+o),n;i=e.x;o=e.y;var r=e.width,a=e.height,s=t.shadowBlur,l=t.JJ;r+=s,a+=s;return i-=s/2,o-=s/2,0<l.x?r+=l.x:(i+=l.x,r-=l.x),0<l.y?a+=l.y:(o+=l.y,a-=l.y),n.m(i-1,o-1,r+2,a+2),n}function zh(t,e,i,n){null===e||t instanceof Ac||(e=e.Ka).rc&&Mo(e,t,"position",n.copy(),i.copy(),!1)}function Bh(t,e,i){var n=r.K(),o=t.Ff,a=t.bg;o.Td()&&r.k("determineOffset: Part's locationSpot must be real: "+o.toString());var s=a.Ja,l=a instanceof Ml?a.mb:0;if(n.Xu(0,0,s.width+l,s.height+l,o),a!==t)for(n.offset(-l/2,-l/2),a.transform.nb(n),o=a.Q;null!==o&&o!==t;)o.transform.nb(n),o=o.Q;t.Ti.nb(n),n.offset(-t.ud.x,-t.ud.y),o=t.g,a=i.I(),s=e.I(),a&&s?0!=(2097152&t.O)?Ih(t,e,i,o,n):Oh(t,e,i,o,n):a?Ih(t,e,i,o,n):s&&Oh(t,e,i,o,n),t.O|=2097152,r.v(n),t.Ni()}function Ih(t,e,i,n,o){var r=e.x,a=e.y;e.m(i.x-o.x,i.y-o.y),null!==n&&((o=(i=n.Ka).$j)||!i.rc||t instanceof Ac||Mo(i,t,"position",new ut(r,a),e,!1),o||e.x===r&&e.y===a||(i=n.cb,n.cb=!0,t.h("position",new ut(r,a),e),n.cb=i))}function Oh(t,e,i,n,o){var r=i.copy();i.m(e.x+o.x,e.y+o.y),i.L(r)||null===n||(e=n.cb,n.cb=!0,t.h("location",r,i),n.cb=e)}function Eh(t,e,i){Tc(t,!1),t instanceof Fc&&i.MA(t),t.layer.Pc||e||i.Fc(),e=t.pc;var n=i.rb;n.I()?(Pc(t)?bt(e,n)||t.Hf(!1):e.Zf(n)&&t.Hf(!0),t.updateAdornments()):i.ol=!0}function qh(t,e){var i=t.pc;if(0!==i.width&&0!==i.height&&!isNaN(i.x)&&!isNaN(i.y)&&t.isVisible()){var n=t.transform;null!==t.cc&&(ms(t,e,t.cc,!0,!0),e.fillRect(i.x,i.y,i.width,i.height)),null===t.cc&&null===t.Fb&&(ms(t,e,"rgba(0,0,0,0.4)",!0,!1),e.fillRect(i.x,i.y,i.width,i.height)),null!==t.Fb&&(n.su()||e.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),i=t.Ja,ms(t,e,t.Fb,!0,!1),e.fillRect(0,0,i.width,i.height),n.su()||(i=1/(n.m11*n.m22-n.m12*n.m21),e.transform(n.m22*i,-n.m12*i,-n.m21*i,n.m11*i,i*(n.m21*n.dy-n.m22*n.dx),i*(n.m12*n.dx-n.m11*n.dy))))}}r.La(Ch,Ys),r.ga("Part",Ch),Ch.prototype.cloneProtected=function(t){Ys.prototype.cloneProtected.call(this,t),t.O=-4097&this.O|49152,t.yi=this.yi,t.sl=this.sl,t.cs=this.cs,t.et=this.et,t.Ts=this.Ts,t.Ws=this.Ws,t.gt=this.gt,t.ft=this.ft,t.Pr=this.Pr,t.wi=null,t.Vs=this.Vs,t.Us=this.Us.S(),t.Xs=this.Xs,t.Md=this.Md,t.ar=this.ar,t.Ui.assign(this.Ui),t.hs=this.hs,t.js=this.js.S(),t.rs=this.rs.S(),t.ks=this.ks.S(),t.vr=this.vr,t.ds=this.ds,t.cn=this.cn.S(),t.bn=this.bn,t.Eg=this.Eg,t.Et=this.Et},Ch.prototype.ni=function(t){Ys.prototype.ni.call(this,t),t.Lk(),t.an=null,t.gp=null,t.hp=null,t.vl=null,t.Pm=null},Ch.prototype.toString=function(){var t=r.pf(Object.getPrototypeOf(this))+"#"+r.Pd(this);return null!==this.data&&(t+="("+Pi(this.data)+")"),t},Ch.LayoutNone=0,Ch.LayoutAdded=kh=1,Ch.LayoutRemoved=Mh=2,Ch.LayoutShown=4,Ch.LayoutHidden=8,Ch.LayoutNodeSized=16,Ch.LayoutGroupLayout=Sh=32,Ch.LayoutNodeReplaced=64,Ch.LayoutStandard=Th=kh|Mh|28|Sh|64,Ch.LayoutAll=16777215,Ch.prototype.Un=function(t,e,i,n,o,r,a){var s=this.g;null!==s&&(t===Yt&&"elements"===e?o instanceof Ys?rl(o,function(t){Er(s,t),Rr(s,t)}):o instanceof th&&Gr(s,o):t===Xt&&"elements"===e&&(o instanceof Ys?rl(o,function(t){qr(s,t),Vr(s,t)}):o instanceof th&&_r(s,o)),s.cd(t,e,i,n,o,r,a))},Ch.prototype.updateTargetBindings=Ch.prototype.Ib=function(t){if(Ys.prototype.Ib.call(this,t),null!==this.data)for(var e=(t=this.xa.n).length,i=0;i<e;i++){var n=t[i];n instanceof Ys&&rl(n,function(t){null!==t.data&&t.Ib()})}},Ch.prototype.updateRelationshipsFromData=function(){var t=this.data;if(null!==t){var e=this.g;if(null!==e){var i=e.$;i instanceof Ci&&(t=i.yn(t),null===(e=e.XH(t))||e instanceof xf)&&(this.Da=e)}}},r.u(Ch,{key:"key"},function(){var t=this.g;return null===t?void 0:t.$.qb(this.data)},{configurable:!0}),r.u(Ch,{$w:"adornments"},function(){return null===this.wi?Y:this.wi.JF}),Ch.prototype.findAdornment=Ch.prototype.Sp=function(t){var e=this.wi;return null===e?null:e.ka(t)},Ch.prototype.addAdornment=Ch.prototype.Hl=function(t,e){if(null!==e){var i=null,n=this.wi;if(null!==n&&(i=n.ka(t)),i!==e){if(null!==i){var o=i.g;null!==o&&o.remove(i)}null===n&&(this.wi=n=new ht("string",Ac)),e.yi!==t&&(e.yd=t),n.add(t,e),null!==(i=this.g)&&(i.add(e),e.data=this.data)}}},Ch.prototype.removeAdornment=Ch.prototype.Ej=function(t){var e=this.wi;if(null!==e){var i=e.ka(t);if(null!==i){var n=i.g;null!==n&&n.remove(i)}e.remove(t),0===e.count&&(this.wi=null)}},Ch.prototype.clearAdornments=Ch.prototype.Mt=function(){if(null!==(e=this.wi)){for(var t=r.eb(),e=e.i;e.next();)t.push(e.key);e=t.length;for(var i=0;i<e;i++)this.Ej(t[i]);r.ta(t)}},Ch.prototype.updateAdornments=function(){var t=this.g;if(null!==t){t:{if(this.ib&&this.EJ){var e=this.Uu;if(!(null!==e&&this.Y.I()&&this.isVisible()&&e.Aj()&&e.Y.I()))break t;var i=this.Sp("Selection");if(null===i){if(null===(i=this.FJ)&&(i=this instanceof Rc?t.OI:this instanceof xf?t.kI:t.hJ),!(i instanceof Ac))break t;cl(i),null!==(i=i.copy())&&(i.tb=e)}if(null!==i){var n=i.placeholder;if(null!==n){var o=e.sj(),a=0;e instanceof Ml&&(a=e.mb);var s=r.mm();s.m((e.Ja.width+a)*o,(e.Ja.height+a)*o),n.Ca=s,r.Hk(s)}i.angle=e.Vl(),i.type!==Ks&&(n=r.K(),i.location=e.Wa(g,n),r.v(n)),this.Hl("Selection",i);break t}}this.Ej("Selection")}for(function(t,e){e.fb.gf.each(function(e){e.isEnabled&&e.updateAdornments(t)}),e.fb.updateAdornments(t)}(this,t),t=this.$w;t.next();)(e=t.value).Ib(),e.H()}},r.u(Ch,{layer:"layer"},function(){return this.ew}),r.u(Ch,{g:"diagram"},function(){var t=this.ew;return null!==t?t.g:null}),r.defineProperty(Ch,{ag:"layerName"},function(){return this.sl},function(t){var e=this.sl;if(e!==t){r.j(t,"string",Ch,"layerName");var i=this.g;if((null===i||null!==i.Vt(t)&&!i.Lq)&&(this.sl=t,null!==i&&i.Fc(),this.h("layerName",e,t),null!==(e=this.layer)&&e.name!==t&&(null!==(i=e.g)&&(null!==(t=i.Vt(t))&&t!==e)))){var n=e.rf(-1,this,!0);if(0<=n&&i.cd(Xt,"parts",e,this,null,n,!0),n=t.Zp(99999999,this,!0),e.visible!==t.visible&&this.Cd(t.visible),0<=n&&i.cd(Yt,"parts",t,null,this,!0,n),null!==(n=this.Px)){var o=i.Ua;i.Ua=!0,n(this,e,t),i.Ua=o}}}}),r.defineProperty(Ch,{Px:"layerChanged"},function(){return this.cs},function(t){var e=this.cs;e!==t&&(null!==t&&r.j(t,"function",Ch,"layerChanged"),this.cs=t,this.h("layerChanged",e,t))}),r.defineProperty(Ch,{eo:"zOrder"},function(){return this.Et},function(t){var e=this.Et;if(e!==t){r.j(t,"number",Ch,"zOrder"),this.Et=t;var i=this.layer;null!==i&&Xo(i,-1,this),this.h("zOrder",e,t),null!==(t=this.g)&&t.oa()}}),Ch.prototype.invalidateAdornments=Ch.prototype.ee=function(){var t=this.g;null!==t&&(Nr(t),0!=(16384&this.O)!=!0&&(this.O|=16384,t.Ne()))},r.u(Ch,{bg:"locationObject"},function(){if(null===this.vl){var t=this.WA;""!==t?(t=this.Bd(t),this.vl=null!==t?t:this):this.vl=this instanceof Ac&&this.type!==Ks&&null!==this.placeholder?this.placeholder:this}return this.vl.visible?this.vl:this}),r.defineProperty(Ch,{$I:"minLocation"},function(){return this.rs},function(t){var e=this.rs;e.L(t)||(this.rs=t=t.S(),this.h("minLocation",e,t))}),r.defineProperty(Ch,{UI:"maxLocation"},function(){return this.ks},function(t){var e=this.ks;e.L(t)||(this.ks=t=t.S(),this.h("maxLocation",e,t))}),r.defineProperty(Ch,{WA:"locationObjectName"},function(){return this.hs},function(t){var e=this.hs;e!==t&&(this.hs=t,this.vl=null,this.H(),this.h("locationObjectName",e,t))}),r.defineProperty(Ch,{Ff:"locationSpot"},function(){return this.js},function(t){var e=this.js;e.L(t)||(this.js=t=t.S(),this.H(),this.h("locationSpot",e,t))}),Ch.prototype.move=function(t){this.position=t},Ch.prototype.moveTo=Ch.prototype.moveTo=function(t,e){var i=r.xb(t,e);this.move(i),r.v(i)},Ch.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;return!(null!==t&&!t.visible)&&(!(null===(t=this.g)||!(t=t.Ka).df||null===(t=t.Rm.ka(this))||!t.iy)||!!(null===(t=this.Da)||t.ad&&t.isVisible()))},Ch.prototype.Cd=function(t){var e=this.g;t?(this.J(4),this.ee(),null!==e&&e.vg.add(this)):(this.J(8),this.Mt()),this.Lk(),null!==e&&(e.Fc(),e.oa())},Ch.prototype.findObject=Ch.prototype.Bd=function(t){if(this.name===t)return this;var e=this.Pm;if(null===e&&(this.Pm=e=new l),void 0!==e[t])return e[t];for(var i=this.xa.n,n=i.length,o=0;o<n;o++){var r=i[o];if(r.name===t)return e[t]=r;if(r instanceof Ys)if(null===r.dk&&null===r.xg){if(null!==(r=r.Bd(t)))return e[t]=r}else if(fl(r)&&(null!==(r=r.xa.first())&&r.name===t))return e[t]=r}return e[t]=null},Ch.prototype.ensureBounds=Ch.prototype.af=function(){ps(this,1/0,1/0),this.ic()},Ch.prototype.ic=function(){if(this.Ni(),!1===Ds(this))Dh(this);else{var t=this.pc,e=r.Kf();e.assign(t),t.Qa();var i=Pc(this);this.mj(0,0,this.ud.width,this.ud.height);var n=this.position;Bh(this,n,this.location),t.x=n.x,t.y=n.y,t.freeze(),this.Yx(e,t),Ls(this,!1),e.L(t)?this.Hf(i):!this.fe()||we(e.width,t.width)&&we(e.height,t.height)||0<=this.pD&&this.J(16),r.Eb(e),Sc(this,!1)}},Ch.prototype.Yx=function(t,e){var i=this.g;if(null!==i){var n=!1;if(!1===i.Zj&&t.I()){var o=i.te,r=i.padding,a=o.x+r.left,s=o.y+r.top,l=o.width-2*r.right;o=o.height-2*r.bottom;t.x>a&&t.y>s&&t.right<l&&t.bottom<o&&e.x>a&&e.y>s&&e.right<l&&e.bottom<o&&(n=!0)}0!=(65536&this.O)!=!0&&t.L(e)||Eh(this,n,i),i.oa(),vt(t,e)||(this instanceof Fc&&!i.ja.lb&&this.$f(),this.Lk())}},r.defineProperty(Ch,{location:"location"},function(){return this.Ui},function(t){var e=t.x,i=t.y,n=this.Ui,o=n.x,r=n.y;(o===e||isNaN(o)&&isNaN(e))&&(r===i||isNaN(r)&&isNaN(i))||(e=t=t.S(),this instanceof Rc?e=!1:(this.Ui=e,this.O|=2097152,!1===Ds(this)&&(Fh(this),(i=this.jb).I()&&(o=i.copy(),i.m(i.x+(e.x-n.x),i.y+(e.y-n.y)),zh(this,this.g,i,o),this.h("position",o,i))),e=!0),e&&this.h("location",n,t))}),(i=Ch.prototype).AB=function(t,e){if(this instanceof Rc||!t.I())return!1;var i=this.g;if(null!==i&&(zh(this,i,t,e),!0===i.ja.lb))return!0;if(this.jb=t,this.O&=-2097153,(i=this.Ui).I()){var n=i.copy();i.m(i.x+(t.x-e.x),i.y+(t.y-e.y)),this.h("location",n,i)}return!1===Mc(this)&&!1===Ds(this)&&(Fh(this),Dh(this)),!0},i.vy=function(t,e){var i=this.Ui,n=this.jb;Mc(this)||Ds(this)?i.m(NaN,NaN):i.m(i.x+t-n.x,i.y+e-n.y),n.m(t,e),Fh(this)},i.BB=function(){this.O&=-2097153,Fh(this)},i.bm=function(){return!0},i.fe=function(){return!0},i.wj=function(){return!0},r.defineProperty(Ch,{yd:"category"},function(){return this.yi},function(t){var e=this.yi;if(e!==t){r.j(t,"string",Ch,"category");var i=this.g,n=this.data,o=null;if(null!==i&&null!==n&&!(this instanceof Ac)){var a=i.$.ja;a.isEnabled&&!a.lb&&(o=this.clone()).xa.Nc(this.xa)}this.yi=t,this.h("category",e,t),null===i||null===n||this instanceof Ac?null!==(o=this.Xe)&&(null!==(t=o.wi)&&t.remove(e),o.Hl(this.yd,this)):(a=i.$).ja.lb||(this instanceof Rc?(a instanceof Ci?a.pG(n,t):a instanceof Li&&a.HJ(n,t),null!==(i=ta(i,t))&&(cl(i),null!==(i=i.copy())&&kc(this,i,e,t))):(null!==a&&a.sy(n,t),null!==(i=Jr(i,n,t))&&(cl(i),null===(i=i.copy())||i instanceof Rc||(i.location=this.location,kc(this,i,e,t)))),null!==o&&((e=this.clone()).xa.Nc(this.xa),this.h("self",o,e)))}}),r.defineProperty(Ch,{self:"self"},function(){return this},function(t){kc(this,t,this.yd,t.yd)});var Rh,Gh,Vh,_h,Hh,Kh,Wh,Uh,Jh,$h,Yh,Xh,Qh,Zh,tu,eu,iu,nu,ou,ru,au,su,lu,hu,uu,cu,fu,du,pu,yu,vu,mu,gu,bu,xu,wu,ku,Mu,Su,Tu,Pu,Nu,Cu,Au,Fu,Du,Lu,ju,zu,Bu,Iu,Ou,Eu,qu,Ru,Gu,Vu,_u,Hu,Ku,Wu,Uu,Ju,$u,Yu,Xu,Qu,Zu,tc,ec,ic,nc,oc,rc,ac,sc,lc,hc,uc,cc,fc,dc,pc,yc,vc,mc,gc,bc,xc,wc=!1;function kc(t,e,i,n){e.constructor===t.constructor||wc||(wc=!0,r.trace('Should not change the class of the Part when changing category from "'+i+'" to "'+n+'"'),r.trace("  Old class: "+r.pf(t)+", new class: "+r.pf(e)+", part: "+t.toString())),t.Mt();var o=t.data;i=t.ag;var a=t.ib,s=t.Og,l=!0,h=!0,u=!1;if(t instanceof Fc){var c=t;l=c.zj,h=c.uc,u=c.Fq}e.ni(t),e.cloneProtected(t),t.yi=n,t.H(),t.oa(),n=!0,null!==(e=t.g)&&(n=e.cb,e.cb=!0),t.Zd=o,null!==o&&t.Ib(),null!==e&&(e.cb=n),(o=t.ag)!==i&&(t.sl=i,t.ag=o),t instanceof Fc&&((c=t).zj=l,c.uc=h,c.Fq=u,c.fe()&&c.J(64)),t.ib=a,t.Og=s}function Mc(t){return 0!=(32768&t.O)}function Sc(t,e){t.O=e?32768|t.O:-32769&t.O}function Tc(t,e){t.O=e?65536|t.O:-65537&t.O}function Pc(t){return 0!=(131072&t.O)}function Nc(t,e){t.O=e?1048576|t.O:-1048577&t.O}function Cc(t){return!!t.isVisible()&&(null===(t=t.layer)||!t.Pc)}function Ac(t){0===arguments.length?Ch.call(this,Es):Ch.call(this,t),this.O&=-257,this.sl="Adornment",this.Jc=null,this.zD=0,this.oE=!1,this.Lb=this.Zg=null}function Fc(t){Ch.call(this,t),this.ya=13,this.qc=new et(Rc),this.zt=this.Ro=this.ul=this.fs=this.es=null,this.Uq=ie,this.oe=this.Kh=null,this.Ps=_h,this.vk=!1}function Dc(t,e){null!==e&&(null===t.Kh&&(t.Kh=new nt(rf)),t.Kh.add(e))}function Lc(t,e,i,n){if(null===e||null===t.Kh)return null;for(var o=t.Kh.i;o.next();){var r=o.value;if(r.kq===t&&r.Gu===e&&r.ay===i&&r.by===n||r.kq===e&&r.Gu===t&&r.ay===n&&r.by===i)return r}return null}function jc(t,e){for(var i=t.he;i.next();){var n=i.value;n.lc!==e&&n.Ic!==e||(zc(t,n.lc),zc(t,n.Ic),n.Vb())}}function zc(t,e){if(null!==e){var i=e.Os;null!==i&&i.$p(),null===(i=t.Da)||i.ad||zc(i,i.port)}}function Bc(t,e,i){zc(t,i);var n=t.qc.contains(e);if(n||t.qc.add(e),!n||e.W===e.Z){var o=t.LI;if(null!==o){var r=!0,a=t.g;null!==a&&(r=a.Ua,a.Ua=!0),o(t,e,i),null!==a&&(a.Ua=r)}}!n&&e.bc&&(i=e.W,e=e.Z,null!==i&&null!==e&&i!==e&&(n=!0,null!==(a=t.g)&&(n=a.Ud),t=n?e:i,o=n?i:e,t.vk||(t.vk=o),!o.zj||null!==a&&a.ja.lb||(n?i===o&&(o.zj=!1):e===o&&(o.zj=!1))))}function Ic(t,e,i){zc(t,i);var n=t.qc.remove(e);if(n||e.Z===e.W){var o=t.MI,r=t.g;if(null!==o){var a=!0;null!==r&&(a=r.Ua,r.Ua=!0),o(t,e,i),null!==r&&(r.Ua=a)}}n&&e.bc&&(i=!0,null!==r&&(i=r.Ud),t=i?e.Z:e.W,e=i?e.W:e.Z,null!==t&&(t.vk=!1),null===e||e.zj||(0===e.qc.count?(e.vk=null,null!==r&&r.ja.lb||(e.zj=!0)):Oc(e)))}function Oc(t){if(t.vk=!1,0!==t.qc.count){var e=!0,i=t.g;if(null===i||!i.ja.lb){for(null!==i&&(e=i.Ud),i=t.qc.i;i.next();){var n=i.value;if(n.bc)if(e){if(n.W===t)return void(t.zj=!1)}else if(n.Z===t)return void(t.zj=!1)}t.zj=!0}}}function Ec(t){null===t.oe?t.oe=new ht("string",ls):t.oe.clear(),ol(t,t,function(t,e){var i=e.Vd;null!==i&&t.oe.add(i,e)}),0===t.oe.count&&t.oe.add("",t)}function qc(t,e,i){var n=e.Vd;if(null!==n&&(null!==t.oe&&t.oe.remove(n),null!==(e=t.g)&&i)){for(i=null,n=t.ZE(n);n.next();)t=n.value,null===i&&(i=r.eb()),i.push(t);if(null!==i){for(n=0;n<i.length;n++)t=i[n],e.remove(t);r.ta(i)}}}function Rc(){Ch.call(this,Ks),this.Zb=8,this.rg=null,this.Qh="",this.Hg=this.Fr=null,this.ki="",this.yt=null,this.Mq=Uh,this.gr=0,this.jr=Uh,this.kr=NaN,this.Wm=Kh,this.nt=.5,this.xf=null,this.hd=new et(ut).freeze(),this.Zg=this.LC=this.FC=this.xi=this.Ki=this.Sa=this.Aw=this.ip=this.Ve=null,this.Tz=new ut,this.V=this.aE=this.$D=null}function Gc(t){var e,i=t.W,n=t.Z;i=e=null!==i?null!==n?i.VH(n):i.Da:null!==n?n.Da:null;if((n=t.fl)!==i){null!==n&&kf(n,t),t.fl=i,null!==i&&wf(i,t);var o=t.KE;if(null!==o){var r=!0,a=t.g;null!==a&&(r=a.Ua,a.Ua=!0),o(t,n,i),null!==a&&(a.Ua=r)}!t.Mf||t.$D!==n&&t.aE!==n||t.Vb()}if(t.zI)for(t=t.Ef;t.next();)t.value.Da=e}function Vc(t,e){null===t.xf&&(t.xf=new nt(Fc)),t.xf.add(e),t.H()}function _c(t){0===t.hd.count?t.Mf=!1:(t.Mf=!0,t.Np=t.l(0),t.Op=t.l(t.qa-1),Zc(t,!1))}function Hc(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x=e.x>=t.x?t.x+9e9:t.x-9e9,e.y=t.y):(e.y=e.y>=t.y?t.y+9e9:t.y-9e9,e.x=t.x),e}function Kc(t,e){var i=e.Os;return null===i&&((i=new yf).port=e,i.Qc=e.U,e.Os=i),mf(i,t)}function Wc(t){if(null===t.g||!t.Zl)return!1;var e=t.points.n,i=e.length;if(4>i)return!1;t=da(t.g,!0,t.Da,null);for(var n=1;n<i-2;n++){var o=e[n],r=e[n+1];if(!t.fq(Math.min(o.x,r.x),Math.min(o.y,r.y),Math.abs(o.x-r.x),Math.abs(o.y-r.y)))return!0}return!1}function Uc(t,e,i,n){return t=i-t,isNaN(t)||1/0===t||-1/0===t?NaN:(0>t&&(t=-t),e=n-e,isNaN(e)||1/0===e||-1/0===e?NaN:(0>e&&(e=-e),ke(t,0)?e:ke(e,0)?t:Math.sqrt(t*t+e*e)))}function Jc(t,e,i,n){var o=t.qa;if(2>o)return e;if(i){var r=t.l(1);if(i=r.x-n.x,n=r.y-n.y,0===(r=Uc(e.x,e.y,i,n)))return e;o=2===o?.5*r:r,(t=t.computeShortLength(!0))>o&&(t=o),i=t*(i-e.x)/r,t=t*(n-e.y)/r,e.x+=i,e.y+=t}else{if(i=(r=t.l(o-2)).x-n.x,n=r.y-n.y,0===(r=Uc(e.x,e.y,i,n)))return e;o=2===o?.5*r:r,(t=t.computeShortLength(!1))>o&&(t=o),i=t*(e.x-i)/r,t=t*(e.y-n)/r,e.x-=i,e.y-=t}return e}function $c(t,e,i,n){for(var o=t.qa,r=e;ke(e.x,r.x)&&ke(e.y,r.y);){if(i>=o)return o-1;r=t.l(i++)}if(!ke(e.x,r.x)&&!ke(e.y,r.y))return i-1;for(var a=r;ke(e.x,r.x)&&ke(r.x,a.x)&&(!n||(e.y>=r.y?r.y>=a.y:r.y<=a.y))||ke(e.y,r.y)&&ke(r.y,a.y)&&(!n||(e.x>=r.x?r.x>=a.x:r.x<=a.x));){if(i>=o)return o-1;a=t.l(i++)}return i-2}function Yc(t,e,i,n,o,r,a){if(!a&&Qc(t)){a=[];var s=0;t.isVisible()&&(s=function(t,e,i,n){var o=t.g;if(null===o||e.L(i))return 0;for(o=o.Qx;o.next();){var r=o.value;if(null!==r&&r.visible)for(var r=r.zb.n,a=r.length,s=0;s<a;s++){var l=r[s];if(l instanceof Rc){if(l===t)return 0<n.length&&n.sort(function(t,e){return t-e}),n.length;if(l.isVisible()&&Qc(l)){var h=l.Vn;h.I()&&t.Vn.Zf(h)&&!t.usesSamePort(l)&&(null!==(h=l.path)&&h.Aj()&&Xc(e,i,n,l))}}}}return 0<n.length&&n.sort(function(t,e){return t-e}),n.length}(t,o,r,a));var l=o.x;l=o.y;if(0<s)if(we(o.y,r.y))if(o.x<r.x)for(var h=0;h<s;){var u=Math.max(o.x,Math.min(a[h++]-5,r.x-10));e.lineTo(u+i,r.y+n);l=u+i;for(var c=Math.min(u+10,r.x);h<s;){var f=a[h];if(!(f<c+10))break;h++,c=Math.min(f+5,r.x)}f=(u+c)/2+i,f=r.y-10+n,u=c+i,c=r.y+n,t.$e===$h?ch(e,u,c,!1,!1):ph(e,l,f,u,f,u,c)}else for(h=s-1;0<=h;){for(u=Math.min(o.x,Math.max(a[h--]+5,r.x+10)),e.lineTo(u+i,r.y+n),l=u+i,c=Math.max(u-10,r.x);0<=h&&(f=a[h])>c-10;)h--,c=Math.max(f-5,r.x);f=r.y-10+n,u=c+i,c=r.y+n,t.$e===$h?ch(e,u,c,!1,!1):ph(e,l,f,u,f,u,c)}else if(we(o.x,r.x))if(o.y<r.y)for(h=0;h<s;){for(u=Math.max(o.y,Math.min(a[h++]-5,r.y-10)),e.lineTo(r.x+i,u+n),l=u+n,c=Math.min(u+10,r.y);h<s&&(f=a[h])<c+10;)h++,c=Math.min(f+5,r.y);f=r.x-10+i,u=r.x+i,c+=n,t.$e===$h?ch(e,u,c,!1,!1):ph(e,f,l,f,c,u,c)}else for(h=s-1;0<=h;){for(u=Math.min(o.y,Math.max(a[h--]+5,r.y+10)),e.lineTo(r.x+i,u+n),l=u+n,c=Math.max(u-10,r.y);0<=h&&(f=a[h])>c-10;)h--,c=Math.max(f-5,r.y);f=r.x-10+i,u=r.x+i,c+=n,t.$e===$h?ch(e,u,c,!1,!1):ph(e,f,l,f,c,u,c)}}e.lineTo(r.x+i,r.y+n)}function Xc(t,e,i,n){for(var o=we(t.y,e.y),a=n.qa,s=n.l(0),l=r.K(),h=1;h<a;h++){var u=n.l(h);if(h<a-1){var c=n.l(h+1);s.y===u.y&&u.y===c.y?(u.x>s.x&&c.x>u.x||u.x<s.x&&c.x<u.x)&&(u=c,h++):s.x===u.x&&u.x===c.x&&(u.y>s.y&&c.y>u.y||u.y<s.y&&c.y<u.y)&&(u=c,h++)}t:{c=l;var f=t.x,d=t.y,p=e.x,y=e.y,v=s.x,m=(s=s.y,u.x),g=u.y;if(we(f,p)){if(!we(d,y)&&we(s,g)&&Math.min(d,y)<s&&Math.max(d,y)>s&&Math.min(v,m)<f&&Math.max(v,m)>f&&!we(v,m)){c.x=f,c.y=s,c=!0;break t}}else if(we(d,y)&&we(v,m)&&Math.min(f,p)<v&&Math.max(f,p)>v&&Math.min(s,g)<d&&Math.max(s,g)>d&&!we(s,g)){c.x=v,c.y=d,c=!0;break t}c.x=0,c.y=0,c=!1}c&&(o?i.push(l.x):i.push(l.y)),s=u}r.v(l)}function Qc(t){return(t=t.$e)===Yh||t===$h}function Zc(t,e){if(e||Qc(t)){var i=t.g;null===i||i.hl.contains(t)||null===t.Aw||i.hl.add(t,t.Aw)}}function tf(t,e){var i=t.layer;if(null!==i&&i.visible&&!i.Pc&&null!==(o=i.g))for(var n=!1,o=o.Qx;o.next();){if((r=o.value).visible)if(r===i){n=!0;for(var r,a=!1,s=(r=r.zb.n).length,l=0;l<s;l++){var h=r[l];h instanceof Rc&&(h===t?a=!0:a&&ef(t,h,e))}}else if(n)for(s=(r=r.zb.n).length,l=0;l<s;l++)(h=r[l])instanceof Rc&&ef(t,h,e)}}function ef(t,e,i){if(null!==e&&null!==e.Sa&&Qc(e)){var n=e.Vn;n.I()&&(t.Vn.Zf(n)||i.Zf(n))&&(t.usesSamePort(e)||e.Me())}}function nf(t){var e=t.rg;if(null!==e){var i=t.Hg;if(null!==i){var n=t.Qh;t=t.ki;for(var o=null,r=null,a=e.qc.n,s=a.length,l=0;l<s;l++){var h=a[l];(h.rg===e&&h.Qh===n&&h.Hg===i&&h.ki===t||h.rg===i&&h.Qh===t&&h.Hg===e&&h.ki===n)&&(null===r?r=h:(null===o&&(o=[]).push(r),o.push(h)))}if(null!==o){for(null===(r=Lc(e,i,n,t))&&((r=new rf).kq=e,r.ay=n,r.Gu=i,r.by=t,Dc(e,r),Dc(i,r)),r.links=o,l=0;l<o.length;l++)(h=o[l]).xi=r;r.$p()}}}}function of(t){var e=t.xi;null!==e&&(t.xi=null,0<=(t=e.links.indexOf(t))&&(r.Jg(e.links,t),e.$p()))}function rf(){r.oc(this),this.fh=this.Xv=!1,this.by=this.Gu=this.ay=this.kq=null,this.links=[]}function af(){r.oc(this),this.FB=this.group=null,this.lu=!0,this.abort=!1,this.Bg=this.Ag=1,this.ms=this.ls=-1,this.Ce=this.Be=8,this.qd=null,this.KG=!1,this.tG=22,this.KF=111}function sf(t,e,i){return t.Ag<=e&&e<=t.ls&&t.Bg<=i&&i<=t.ms}function lf(t,e,i){return sf(t,e,i)?(e-=t.Ag,e/=t.Be,i-=t.Bg,i/=t.Ce,t.qd[0|e][0|i]):1e6}function hf(t,e,i){sf(t,e,i)&&(e-=t.Ag,e/=t.Be,i-=t.Bg,i/=t.Ce,t.qd[0|e][0|i]=0)}function uf(t){if(null!==t.qd)for(var e=0;e<=t.yp;e++)for(var i=0;i<=t.zp;i++)1<=t.qd[e][i]&&(t.qd[e][i]=1e6)}function cf(t,e,i,n,o,r,a,s,l){if(!(e<r||e>a||i<s||i>l)){var h,u;h=0|e,u=0|i;var c=t.qd[h][u];if(1<=c&&999999>c)for(o?u+=n:h+=n,c+=1;r<=h&&h<=a&&s<=u&&u<=l&&!(c>=t.qd[h][u]);)t.qd[h][u]=c,c+=1,o?u+=n:h+=n;if(h=o?u:h,o)if(0<n)for(i+=n;i<h;i+=n)cf(t,e,i,1,!o,r,a,s,l),cf(t,e,i,-1,!o,r,a,s,l);else for(i+=n;i>h;i+=n)cf(t,e,i,1,!o,r,a,s,l),cf(t,e,i,-1,!o,r,a,s,l);else if(0<n)for(e+=n;e<h;e+=n)cf(t,e,i,1,!o,r,a,s,l),cf(t,e,i,-1,!o,r,a,s,l);else for(e+=n;e>h;e+=n)cf(t,e,i,1,!o,r,a,s,l),cf(t,e,i,-1,!o,r,a,s,l)}}function ff(t,e,i,n,o,r,a,s,l){e|=0,i|=0;var h=0,u=1;for(t.qd[e][i]=u;0===h&&e>r&&e<a&&i>s&&i<l;)u+=1,t.qd[e][i]=u,o?i+=n:e+=n,h=t.qd[e][i]}function df(t,e,i,n,o,r,a,s,l){e|=0,i|=0;var h=0;for(t.qd[e][i]=999999;0===h&&e>r&&e<a&&i>s&&i<l;)t.qd[e][i]=999999,o?i+=n:e+=n,h=t.qd[e][i]}function pf(t,e,i,n,o,r){if(null!==t.qd){t.abort=!1;var a=e.x,s=e.y;if(sf(t,a,s)&&(a-=t.Ag,a/=t.Be,s-=t.Bg,s/=t.Ce,sf(t,e=n.x,n=n.y)))if(e-=t.Ag,e/=t.Be,n-=t.Bg,n/=t.Ce,1>=Math.abs(a-e)&&1>=Math.abs(s-n))t.abort=!0;else{var l=r.x,h=r.y,u=r.x+r.width,c=r.y+r.height;l=(l=l-t.Ag)/t.Be,h=(h=h-t.Bg)/t.Ce,u=(u=u-t.Ag)/t.Be,c=(c=c-t.Bg)/t.Ce;r=Math.max(0,Math.min(t.yp,0|l)),u=Math.min(t.yp,Math.max(0,0|u)),h=Math.max(0,Math.min(t.zp,0|h)),c=Math.min(t.zp,Math.max(0,0|c)),a|=0,s|=0,e|=0,n|=0,l=0===i||90===i?1:-1,i=90===i||270===i,0===t.qd[a][s]?(ff(t,a,s,l,i,r,u,h,c),ff(t,a,s,1,!i,r,u,h,c),ff(t,a,s,-1,!i,r,u,h,c)):ff(t,a,s,l,i,a,s,a,s),0===t.qd[e][n]?(df(t,e,n,0===o||90===o?1:-1,90===o||270===o,r,u,h,c),df(t,e,n,1,!(90===o||270===o),r,u,h,c),df(t,e,n,-1,!(90===o||270===o),r,u,h,c)):df(t,e,n,l,i,e,n,e,n),t.abort||(cf(t,a,s,1,!1,r,u,h,c),cf(t,a,s,-1,!1,r,u,h,c),cf(t,a,s,1,!0,r,u,h,c),cf(t,a,s,-1,!0,r,u,h,c))}}}function yf(){r.oc(this),this.port=this.Qc=null,this.fg=[],this.jq=!1}function vf(t,e,i,n){switch(e=e.offsetY){case r.ed:return 90;case r.Tc:return 180;case r.od:return 270;case r.fd:return 0}switch(e){case r.ed|r.od:return 180<i?270:90;case r.Tc|r.fd:return 90<i&&270>=i?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case r.Tc|r.od:return i>t&&i<=180+t?180:270;case r.od|r.fd:return i>180-t&&i<=360-t?270:0;case r.fd|r.ed:return i>t&&i<=180+t?90:0;case r.ed|r.Tc:return i>180-t&&i<=360-t?180:90;case r.Tc|r.od|r.fd:return 90<i&&i<=180+t?180:i>180+t&&i<=360-t?270:0;case r.od|r.fd|r.ed:return 180<i&&i<=360-t?270:i>t&&180>=i?90:0;case r.fd|r.ed|r.Tc:return i>t&&i<=180-t?90:i>180-t&&270>=i?180:0;case r.ed|r.Tc|r.od:return i>180-t&&i<=180+t?180:i>180+t?270:90}return n&&e!==(r.Tc|r.od|r.fd|r.ed)&&(0>(i-=15)&&(i+=360)),i>t&&i<180-t?90:i>=180-t&&i<=180+t?180:i>180+t&&i<360-t?270:0}function mf(t,e){var i=t.fg;if(0===i.length){t:if(!t.jq){i=t.jq,t.jq=!0;var n,o=null;if(null===(a=(a=t.Qc)instanceof xf?a:null)||a.ad)n=t.Qc.ZE(t.port.Vd);else{if(!a.Y.I()){t.jq=i;break t}n=(o=a).YE()}var a,s=t.fg.length=0,l=t.port.Wa(g,r.K()),h=t.port.Wa(P,r.K());for((a=r.lg(l.x,l.y,0,0)).vi(h),r.v(l),r.v(h),l=r.xb(a.x+a.width/2,a.y+a.height/2),h=t.port.Vl(),n=n.i;n.next();){var u=n.value;if(u.isVisible()&&u.lc!==u.Ic){var c=u.lc===t.port||u.W.oi(o),f=u.computeSpot(c,t.port);if(f.xj()&&null!==(c=c?u.Ic:u.lc)){var d=c.U;if(null!==d){var p=d.findVisibleNode();null!==p&&p!==d&&(c=(d=p).port),c=u.computeOtherPoint(d,c),d=l.Pb(c),0>(d-=h)&&(d+=360),p=0,0===(f=vf(a,f,d,u.ac))?(p=r.fd,180<d&&(d-=360)):p=90===f?r.ed:180===f?r.Tc:r.od,void 0===(f=t.fg[s])?(f=new gf(u,d,p),t.fg[s]=f):(f.link=u,f.angle=d,f.ye=p),f.Zx.set(c),s++}}}}for(r.v(l),t.fg.sort(yf.prototype.gJ),o=t.fg.length,l=-1,s=h=0;s<o;s++)void 0!==(f=t.fg[s])&&(f.ye!==l&&(l=f.ye,h=0),f.Yp=h,h++);for(l=-1,h=0,s=o-1;0<=s;s--)void 0!==(f=t.fg[s])&&(f.ye!==l&&(l=f.ye,h=f.Yp+1),f.sn=h);if(s=t.fg,f=t.port,o=t.Qc.lJ,l=r.K(),h=r.K(),n=r.K(),u=r.K(),f.Wa(g,l),f.Wa(x,h),f.Wa(P,n),f.Wa(S,u),p=d=c=f=0,o===Hh)for(var y=0;y<s.length;y++){var v=s[y];if(null!==v){var m=v.link.computeThickness();switch(v.ye){case r.ed:d+=m;break;case r.Tc:p+=m;break;case r.od:f+=m;break;default:case r.fd:c+=m}}}var b=0,w=0,k=1;for(y=0;y<s.length;y++)if(null!==(v=s[y])){var M,T;if(b!==v.ye){switch(b=v.ye){case r.ed:M=n,T=u;break;case r.Tc:M=u,T=l;break;case r.od:M=l,T=h;break;default:case r.fd:M=h,T=n}var N=T.x-M.x;switch(T=T.y-M.y,b){case r.ed:d>Math.abs(N)?(k=Math.abs(N)/d,d=Math.abs(N)):k=1;break;case r.Tc:p>Math.abs(T)?(k=Math.abs(T)/p,p=Math.abs(T)):k=1;break;case r.od:f>Math.abs(N)?(k=Math.abs(N)/f,f=Math.abs(N)):k=1;break;default:case r.fd:c>Math.abs(T)?(k=Math.abs(T)/c,c=Math.abs(T)):k=1}w=0}var C=v.hq;if(o===Hh){switch(m=v.link.computeThickness(),m*=k,C.set(M),b){case r.ed:C.x=M.x+N/2+d/2-w-m/2;break;case r.Tc:C.y=M.y+T/2+p/2-w-m/2;break;case r.od:C.x=M.x+N/2-f/2+w+m/2;break;default:case r.fd:C.y=M.y+T/2-c/2+w+m/2}w+=m}else m=.5,o===_h&&(m=(v.Yp+1)/(v.sn+1)),C.x=M.x+N*m,C.y=M.y+T*m}for(r.v(l),r.v(h),r.v(n),r.v(u),M=t.fg,N=0;N<M.length;N++)null!==(T=M[N])&&(T.vx=t.computeEndSegmentLength(T));t.jq=i,r.Eb(a)}i=t.fg}for(a=0;a<i.length;a++)if(null!==(M=i[a])&&M.link===e)return M;return null}function gf(t,e,i){this.link=t,this.angle=e,this.ye=i,this.Zx=new ut,this.sn=this.Yp=0,this.hq=new ut,this.vx=0}function bf(){this.uk=this.Wj=m,this.sk=this.Uj=NaN,this.rk=this.Tj=Rh,this.tk=this.Vj=NaN,this.wt=this.Dr=null,this.xt=this.Er=1/0}function xf(t){Fc.call(this,t),this.ya|=4608,this.os=new nt(Ch),this.Zo=new nt(xf),this.Lb=this.rt=this.wl=this.ps=this.ns=null,this.le=new Sf,this.le.group=this}function wf(t,e){if(t.os.add(e)){e instanceof xf&&t.Zo.add(e);var i=t.XI;if(null!==i){var n=!0,o=t.g;null!==o&&(n=o.Ua,o.Ua=!0),i(t,e),null!==o&&(o.Ua=n)}t.isVisible()&&t.ad||e.Cd(!1)}e instanceof Rc&&!t.lx||(null===(i=t.Lb)&&(i=t),i.H())}function kf(t,e){if(t.os.remove(e)){e instanceof xf&&t.Zo.remove(e);var i=t.YI;if(null!==i){var n=!0,o=t.g;null!==o&&(n=o.Ua,o.Ua=!0),i(t,e),null!==o&&(o.Ua=n)}t.isVisible()&&t.ad||e.Cd(!0)}e instanceof Rc&&!t.lx||(null===(i=t.Lb)&&(i=t),i.H())}function Mf(){ls.call(this),this.mf=ee,this.bt=new pt(NaN,NaN,NaN,NaN)}function Sf(){0<arguments.length&&r.nd(Sf),r.oc(this),this.rz=this.aa=null,this.pl=this.Ur=!0,this.$r=!1,this.Qq=new ut(0,0).freeze(),this.Wr=this.Xr=!0,this.OC="",this.Zr=!1,this.Fz=null}function Tf(t,e,i,n,o,r,a,s){for(i=i.i;i.next();){var l=i.value;n&&!l.dq||null!==o&&!o(l)||!l.canLayout()||(r&&l instanceof Fc?l.Cf||(l instanceof xf&&null===l.Sb?Tf(t,e,l.vc,!1,o,r,a,s):(Pf(l),e.add(l))):a&&l instanceof Rc?e.add(l):!s||!l.fe()||l instanceof Fc||(Pf(l),e.add(l)))}}function Pf(t){var e=t.Y;(0===e.width||0===e.height||isNaN(e.width)||isNaN(e.height))&&t.af()}function Nf(){if(r.oc(this),this.le=null,this.vertexes)for(var t=this.vertexes.i;t.next();){var e=t.value;e.clear(),e.network=null}if(this.edges)for(t=this.edges.i;t.next();)(e=t.value).clear(),e.network=null;this.vertexes=new nt(Df),this.edges=new nt(Lf),this.Wx=new ht(Fc,Df),this.Rx=new ht(Rc,Lf)}function Cf(t,e){if(null===e)return!1;var i=t.vertexes.remove(e);return i&&(t.Wx.remove(e.Qc),e.network=null),i}function Af(t,e){null!==e&&t.edges.remove(e)&&(t.Rx.remove(e.link),e.network=null)}function Ff(t,e,i){if(null!==i&&i.network!==e){Cf(t,i),e.Jl(i);for(var n=i.nc;n.next();){var o=n.value;o.network!==e&&(Af(t,o),e.Bp(o),Ff(t,e,o.fromVertex))}for(n=i.kc;n.next();)(i=n.value).network!==e&&(Af(t,i),e.Bp(i),Ff(t,e,i.toVertex))}}function Df(){r.oc(this),this.network=null,this.M=new pt(0,0,10,10).freeze(),this.T=new ut(5,5).freeze(),this.vd=this.Zd=null,this.Qe=new et(Lf),this.Je=new et(Lf)}function Lf(){r.oc(this),this.toVertex=this.fromVertex=this.link=this.data=this.network=null}function jf(){0<arguments.length&&r.nd(jf),Sf.call(this),this.Mx=!0,this.Ct=this.Dt=NaN,this.Nj=new dt(NaN,NaN).freeze(),this.di=new dt(10,10).freeze(),this.je=cu,this.pd=fu,this.ci=vu,this.Mh=hu}function zf(){0<arguments.length&&r.nd(zf),Sf.call(this),this.iz=this.Bo=this.Fd=0,this.yr=360,this.hz=gu,this.il=0,this.eC=new ut,this.UC=gu,this.wv=this.Uf=this.iE=0,this.Vw=new Hf,this.xv=this.Sm=0,this.$G=600,this.Qs=NaN,this.Sq=1,this.qt=0,this.st=360,this.pd=gu,this.ba=ku,this.ci=Fu,this.Mh=lu,this.di=6,this.Ds=Du}function Bf(t,e,i,n,o){var r=t.yr,a=t.Fd;t=t.Uf,n=n*Math.PI/180,i=i*Math.PI/180;for(var s=e.length,l=0;l<s;l++){var h=n+(o===ku?l*i/(360<=r?s:s-1):-l*i/s),u=e.ea(l),c=a*Math.tan(h)/t;c=Math.sqrt((a*a+t*t*c*c)/(1+c*c));u.la=c*Math.cos(h),u.ra=c*Math.sin(h),u.actualAngle=180*h/Math.PI}}function If(t,e,i,n){var o=t.Fd,r=t.Uf,a=t.il;i=i*Math.PI/180;for(var s=e.length,l=0;l<s;l++){var h=e.ea(l),u=e.ea(l===s-1?0:l+1),c=r*Math.sin(i);h.la=o*Math.cos(i),h.ra=c,h.actualAngle=180*i/Math.PI,isNaN(h.diameter)&&Uf(h,0),isNaN(u.diameter)&&Uf(u,0),h=_f(t,o,r,n===ku?i:-i,(h.diameter+u.diameter)/2+a),i+=n===ku?h:-h}}function Of(t,e,i,n){var o=t.Fd,r=t.Uf,a=t.wv;i=i*Math.PI/180;for(var s=e.length,l=0;l<s;l++){var h=e.ea(l);h.la=o*Math.cos(i),h.ra=r*Math.sin(i),h.actualAngle=180*i/Math.PI,h=_f(t,o,r,n===ku?i:-i,a),i+=n===ku?h:-h}}function Ef(t,e,i,n,o){var a=t.xv;a=t.yr;if(t.Sm=0,t.Vw=new Hf,360>i){for(a=n+(o===ku?a:-a);0>a;)a+=360;180<(a%=360)&&(a-=360),a*=Math.PI/180,t.xv=a,function t(e,i,n,o,a){for(var s=e.Fd,l=e.Uf,h=e.Bo,u=s*Math.cos(o*Math.PI/180),c=l*Math.sin(o*Math.PI/180),f=r.K(),d=i.xc(),p=0;p<d.length&&(d[p].la=u,d[p].ra=c,!(p>=d.length-1));p++)qf(e,u,c,d,p,a,f)||Rf(e,u,c,d,p,a,f),u=f.x,c=f.y;r.v(f);e.Sm++;if(!(23<e.Sm)){if(u=Math.atan2(c,u),u=a===ku?e.xv-u:u-e.xv,u=Math.abs(u)<Math.abs(u-2*Math.PI)?u:u-2*Math.PI,s=u*(s+l)/2,l=e.Vw,Math.abs(s)<Math.abs(l.Vp))for(l.Vp=s,l.co=[],l.Gq=[],u=0;u<d.length;u++)l.co[u]=d[u].ab.x,l.Gq[u]=d[u].ab.y;1<Math.abs(s)&&(e.Fd=8>e.Sm?e.Fd-s/(2*Math.PI):e.Fd-(0<s?1.7:-2.3),e.Uf=e.Fd*h,t(e,i,n,o,a))}}(t,e,i,n,o)}else!function t(e,i,n,o,a){var s=e.Fd,l=e.il,h=e.Bo,u=s*Math.cos(o*Math.PI/180),c=e.Uf*Math.sin(o*Math.PI/180),f=i.xc();if(3===f.length)f[0].la=s,f[0].ra=0,f[1].la=f[0].la-f[0].width/2-f[1].width/2-l,f[1].y=f[0].y,f[2].la=(f[0].la+f[1].la)/2,f[2].y=f[0].y-f[2].height-l;else if(4===f.length)f[0].la=s,f[0].ra=0,f[2].la=-f[0].la,f[2].ra=f[0].ra,f[1].la=0,f[1].y=Math.min(f[0].y,f[2].y)-f[1].height-l,f[3].la=0,f[3].y=Math.max(f[0].y+f[0].height+l,f[2].y+f[2].height+l);else{for(var s=r.K(),d=0;d<f.length&&(f[d].la=u,f[d].ra=c,!(d>=f.length-1));d++)qf(e,u,c,f,d,a,s)||Rf(e,u,c,f,d,a,s),u=s.x,c=s.y;if(r.v(s),e.Sm++,!(23<e.Sm)){var u=f[0].la,c=f[0].ra,s=f[f.length-1].la,d=f[f.length-1].ra,p=Math.abs(u-s)-((f[0].width+f[f.length-1].width)/2+l),y=Math.abs(c-d)-((f[0].height+f[f.length-1].height)/2+l),l=0;1>Math.abs(y)?Math.abs(u-s)<(f[0].width+f[f.length-1].width)/2&&(l=0):l=0<y?y:1>Math.abs(p)?0:p,p=!1,p=Math.abs(s)>Math.abs(d)?0<s!=c>d:0<d!=u<s,(p=a===ku?p:!p)&&(l=-Math.abs(l),l=Math.min(l,-f[f.length-1].width),l=Math.min(l,-f[f.length-1].height)),e.Vw.compare(l,f),1<Math.abs(l)&&(e.Fd=8>e.Sm?e.Fd-l/(2*Math.PI):5>f.length&&10<l?e.Fd/2:e.Fd-(0<l?1.7:-2.3),e.Uf=e.Fd*h,t(e,i,n,o,a))}}}(t,e,i,n,o);t.Vw.commit(e)}function qf(t,e,i,n,o,r,a){var s=t.Fd,l=t.Uf,h=0,u=0;t=(n[o].width+n[o+1].width)/2+t.il;var c=!1;if(0<=i!=(r===ku)){if((h=e+t)>s){if((h=e-t)<-s)return a.x=h,a.y=u,!1;c=!0}}else if((h=e-t)<-s){if((h=e+t)>s)return a.x=h,a.y=u,!1;c=!0}return u=Math.sqrt(1-Math.min(1,h*h/(s*s)))*l,0>i!==c&&(u=-u),Math.abs(i-u)>(n[o].height+n[o+1].height)/2?(a.x=h,a.y=u,!1):(a.x=h,a.y=u,!0)}function Rf(t,e,i,n,o,r,a){var s=t.Fd,l=t.Uf,h=0,u=0;if(t=(n[o].height+n[o+1].height)/2+t.il,n=!1,0<=e!=(r===ku)){if((u=i-t)<-l){if((u=i+t)>l)return a.x=h,void(a.y=u);n=!0}}else if((u=i+t)>l){if((u=i-t)<-l)return a.x=h,void(a.y=u);n=!0}h=Math.sqrt(1-Math.min(1,u*u/(l*l)))*s,0>e!==n&&(h=-h),a.x=h,a.y=u}function Gf(t,e,i,n,o){var r=t.$G;if(.001>Math.abs(t.Bo-1))return void 0!==n&&void 0!==o?o*e:2*Math.PI*e;t=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i;for(var a=0,s=void 0!==n&&void 0!==o?o/(r+1):Math.PI/(2*(r+1)),l=0,h=0;h<=r;h++)l=void 0!==n&&void 0!==o?n+h*o/r:h*Math.PI/(2*r),l=Math.sin(l),a+=Math.sqrt(1-t*t*l*l)*s;return void 0!==n&&void 0!==o?(e>i?e:i)*a:4*(e>i?e:i)*a}function Vf(t,e,i,n,o){return e/(void 0!==n&&void 0!==o?Gf(t,1,i,n,o):Gf(t,1,i))}function _f(t,e,i,n,o){if(.001>Math.abs(t.Bo-1))return o/e;var r=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i,a=0;t=2*Math.PI/(700*t.network.vertexes.count),e>i&&(n+=Math.PI/2);for(var s=0;;s++){var l=Math.sin(n+s*t);if((a=a+(e>i?e:i)*Math.sqrt(1-r*r*l*l)*t)>=o)return s*t}}function Hf(){this.Vp=-1/0,this.Gq=this.co=null}function Kf(){Nf.call(this)}function Wf(){Df.call(this),this.actualAngle=this.diameter=NaN}function Uf(t,e){if(null===(i=t.network))return NaN;if(null===(i=i.Sb))return NaN;if(i.Vf===wu)if(i.Vx===Lu)t.diameter=Math.max(t.width,t.height);else{var i=Math.abs(Math.sin(e)),n=Math.abs(Math.cos(e));if(0===i)return t.width;if(0===n)return t.height;t.diameter=Math.min(t.height/i,t.width/n)}else t.diameter=i.Vx===Lu?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.diameter}function Jf(){Lf.call(this)}function $f(){0<arguments.length&&r.nd($f),Sf.call(this),this.Ig=null,this.bs=0,this.ng=new dt(100,100).freeze(),this.Rq=!1,this.bi=!0,this.Lh=!1,this.Yo=100,this.Br=1,this.Mi=1e3,this.xs=10,this.Rs=Math,this.yo=.05,this.xo=50,this.vo=150,this.wo=0,this.or=10,this.nr=5}function Yf(t,e,i){if(function(t,e){if(10<e||3>t.network.vertexes.count)return!1;null===t.Ig?t.Ig=new et(od):t.Ig.clear(),t.Ig.Nc(t.network.vertexes);var i=t.Ig;i.sort(function(t,e){return null===t||null===e||t===e?0:e.jg-t.jg});for(var n=i.count-1;0<=n&&1>=i.ea(n).jg;)n--;return 1<i.count-n}(t,e)){var n=t.Mi;t.Mi*=1+1/(e+1);var o=function(t,e){for(var i=t.network,n=new nd,o=t.Ig.i;o.next();){var r=o.value;if(!(1<r.jg))break;n.Jl(r);var a=new id;a.Fy=r.jg,a.Gy=r.width,a.Ey=r.height,a.XB=r.T.x,a.YB=r.T.y,null===r.Fh&&(r.Fh=new et(id)),r.Fh.add(a),r.rB=r.Fh.count-1}for(var s=i.edges.i;s.next();)if(a=s.value,o=a.fromVertex,r=a.toVertex,o.network===n&&r.network===n)n.Bp(a);else if(o.network===n){var l=o.on;null===l&&(l=new et(od),o.on=l),l.add(r),o.jg--,o.Ok+=r.Ok}else r.network===n&&(null===(l=r.on)&&(l=new et(od),r.on=l),l.add(o),r.jg--,r.Ok+=o.Ok);for(o=n.edges.i;o.next();)(r=o.value).length*=Math.max(1,xe((r.fromVertex.Ok+r.toVertex.Ok)/(4*e+1)));for(o=n.vertexes.i;o.next();)if(r=o.value,null!==(l=r.on)&&0<l.count&&!(0>=(a=(a=r.Fh.ea(r.Fh.count-1)).Fy-r.jg))){for(var h=0,u=0,c=l.count-a;c<l.count;c++){for(var f=l.ea(c),d=null,s=f.edges.i;s.next();){var p=s.value;if(p.dI(f)===r){d=p;break}}null!==d&&(u+=d.length,h+=f.width*f.height)}s=r.la,l=r.ra,c=r.width,f=r.height,d=r.T,1>(p=c*f)&&(p=1),h=xe((h+p+u*u*4/(a*a))/p),a=(h-1)*c/2,h=(h-1)*f/2,r.ab=new pt(s-d.x-a,l-d.y-h,c+2*a,f+2*h),r.focus=new ut(d.x+a,d.y+h)}return t.network=n,i}(t,e),r=Math.max(0,Math.max(Math.min(t.network.vertexes.count,i*(e+1)/11),10));for(t.ZA+=r,Yf(t,e+1,i),td(t,r),function(t,e){for(var i=t.network.vertexes.i;i.next();){var n=i.value;if(n.network=e,null!==n.Fh){var o=n.Fh.ea(n.rB);n.jg=o.Fy;var r=o.XB,a=o.YB;n.ab=new pt(n.la-r,n.ra-a,o.Gy,o.Ey),n.focus=new ut(r,a),n.rB--}}for(i=t.network.edges.i;i.next();)i.value.network=e;t.network=e}(t,o),null===(e=t.Ig)?e=new et(od):e.clear(),e.Nc(o.vertexes),e.sort(function(t,e){return null===t||null===e||t===e?0:e.jg-t.jg}),o=e.i;o.next();)Xf(t,o.value);t.Mi=n}}function Xf(t,e){var i=e.on;if(null!==i&&0!==i.count){var n=e.la,o=e.ra,r=e.width,a=e.height;null!==e.Fh&&0<e.Fh.count&&(r=(a=e.Fh.ea(0)).Gy,a=a.Ey);r=xe(r*r+a*a)/2;for(var s=!1,l=a=0,h=0,u=e.vertexes.i;u.next();){1>=(c=u.value).jg?l++:(s=!0,h++,a+=Math.atan2(e.ra-c.ra,e.la-c.la))}if(0!==l)for(0<h&&(a/=h),u=h=0,h=s?2*Math.PI/(l+1):2*Math.PI/l,0==l%2&&(u=h/2),1<i.count&&i.sort(function(t,e){return null===t||null===e||t===e?0:e.width*e.height-t.width*t.height}),s=0==l%2?0:1,i=i.i;i.next();)if(!(1<(l=i.value).jg||t.isFixed(l))){for(var c=null,f=l.edges.i;f.next();){c=f.value;break}f=l.width;var d=l.height;f=xe(f*f+d*d)/2,c=r+c.length+f,f=a+(h*(s/2>>1)+u)*(0==s%2?1:-1);l.la=n+c*Math.cos(f),l.ra=o+c*Math.sin(f),s++}}}function Qf(t,e,i,n,o,r,a){var s=9e19,l=-1,h=0;t:for(;h<e;h++){var u=t[h],c=u.x-i,f=u.y-n;if((c=c*c+f*f)<s){for(f=h-1;0<=f;f--)if(t[f].y>u.y&&t[f].x-u.x<o+a.width)continue t;for(f=h+1;f<e;f++)if(t[f].x>u.x&&t[f].y-u.y<r+a.height)continue t;l=h,s=c}}return l}function Zf(t,e){var i=(r=t.M).x,n=r.y,o=r.width,r=r.height,a=(h=e.M).x,s=h.y,l=h.width,h=h.height;return i+o<a?n>s+h?xe((i=i+o-a)*i+(n=n-s-h)*n):n+r<s?xe((i=i+o-a)*i+(n=n+r-s)*n):a-(i+o):i>a+l?n>s+h?xe((i=i-a-l)*i+(n=n-s-h)*n):n+r<s?xe((i=i-a-l)*i+(n=n+r-s)*n):i-(a+l):n>s+h?n-(s+h):n+r<s?s-(n+r):.1}function td(t,e){t.Ig=null;for(var i=t.bs+e;t.bs<i&&(t.bs++,ed(t)););t.Ig=null}function ed(t){null===t.Ig&&(t.Ig=new et(od),t.Ig.Nc(t.network.vertexes));var e=t.Ig.n;if(0>=e.length)return!1;(o=e[0]).forceX=0,o.forceY=0;for(var i=s=o.la,n=l=o.ra,o=1;o<e.length;o++){(a=e[o]).forceX=0,a.forceY=0;var r=a.la,a=a.ra,s=Math.min(s,r),l=(i=Math.max(i,r),Math.min(l,a));n=Math.max(n,a)}(l=i-s>n-l)?e.sort(function(t,e){return null===t||null===e||t===e?0:t.la-e.la}):e.sort(function(t,e){return null===t||null===e||t===e?0:t.ra-e.ra});n=t.Mi;var u=0,c=0,f=0;for(o=0;o<e.length;o++){r=(a=e[o]).M;var d=a.T;s=r.x+d.x,r=r.y+d.y,c=a.charge*t.electricalFieldX(s,r),f=a.charge*t.electricalFieldY(s,r),c=c+a.mass*t.gravitationalFieldX(s,r),f=f+a.mass*t.gravitationalFieldY(s,r);for(a.forceX+=c,a.forceY+=f,d=o+1;d<e.length;d++)if((i=e[d])!==a){var p=i.M;c=i.T,f=p.x+c.x,p=p.y+c.y;if(s-f>n||f-s>n){if(l)break}else if(r-p>n||p-r>n){if(!l)break}else{var y=Zf(a,i);1>y?(null===(c=t.gy)&&(t.gy=c=new h(0)),u=c.random(),y=c.random(),s>f?c=(1+(c=Math.abs(i.M.right-a.M.x)))*u:s<f?c=-(1+(c=Math.abs(i.M.x-a.M.right)))*u:c=(1+(c=Math.max(i.width,a.width)))*u-c/2,r>p?f=(1+(f=Math.abs(i.M.bottom-a.M.y)))*y:s<f?f=-(1+(f=Math.abs(i.M.y-a.M.bottom)))*y:f=(1+(f=Math.max(i.height,a.height)))*y-f/2):(c=(f-s)/y*(u=-a.charge*i.charge/(y*y)),f=(p-r)/y*u),a.forceX+=c,a.forceY+=f,i.forceX-=c,i.forceY-=f}}}for(o=t.network.edges.i;o.next();)a=(l=o.value).fromVertex,i=l.toVertex,r=a.M,d=a.T,s=r.x+d.x,r=r.y+d.y,p=i.M,c=i.T,f=p.x+c.x,p=p.y+c.y,1>(y=Zf(a,i))?(null===(c=t.gy)&&(t.gy=c=new h(0)),u=c.random(),y=c.random(),c=(s>f?1:-1)*(1+(i.width>a.width?i.width:a.width))*u,f=(r>p?1:-1)*(1+(i.height>a.height?i.height:a.height))*y):(c=(f-s)/y*(u=l.stiffness*(y-l.length)),f=(p-r)/y*u),a.forceX+=c,a.forceY+=f,i.forceX-=c,i.forceY-=f;for(o=0,s=t.fJ,i=0;i<e.length;i++)a=e[i],t.isFixed(a)?t.moveFixedVertex(a):(l=a.forceX,n=a.forceY,l<-s?l=-s:l>s&&(l=s),n<-s?n=-s:n>s&&(n=s),a.la+=l,a.ra+=n,o=Math.max(o,l*l+n*n));return o>t.XE*t.XE}function id(){this.YB=this.XB=this.Ey=this.Gy=this.Fy=0}function nd(){Nf.call(this)}function od(){Df.call(this),this.isFixed=!1,this.mass=this.charge=NaN,this.Ok=this.jg=this.forceY=this.forceX=0,this.Fh=this.on=null,this.rB=0}function rd(){Lf.call(this),this.length=this.stiffness=NaN}function ad(){0<arguments.length&&r.nd(ad),Sf.call(this),this.Yd=this.Jm=25,this.ba=0,this.uo=ju,this.Uo=Bu,this.Ko=Eu,this.Im=4,this.io=Vu,this.aj=Uu,this.bi=!0,this.gs=4,this.Kb=this.iw=this.sb=-1,this.Rf=this.qs=0,this.Ob=this.Pf=this.Qf=this.yg=this.ke=null,this.zs=0,this.ys=this.Om=null,this.Cg=0,this.As=null,this.kC=new ut,this.ih=[],this.ih.length=100}function sd(t){var e=t.fromVertex.vd;return t=t.toVertex.vd,null===e&&null===t?8:null===e||null===t?4:1}function ld(t){null===t.Om&&(t.Om=[]);for(var e=0,i=t.network.vertexes.i;i.next();){var n=i.value;t.Om[e]=n.layer,e++,t.Om[e]=n.column,e++,t.Om[e]=n.index,e++}return t.Om}function hd(t,e){for(var i=0,n=t.network.vertexes.i;n.next();){var o=n.value;o.layer=e[i],i++,o.column=e[i],i++,o.index=e[i],i++}}function ud(t,e,i){var n=Ed(t,e),o=t.ke[e];(null===t.ys||t.ys.length<o*o)&&(t.ys=[]);for(var r=t.ys,a=0;a<o;a++){var s=0,l=n[a],h=0;if(null!==(p=l.near)&&p.layer===l.layer)if((h=p.index)>a)for(var u=a+1;u<h;u++)(l=n[u]).near===p&&l.ln===p.ln||s++;else for(u=a-1;u>h;u--)(l=n[u]).near===p&&l.ln===p.ln||s++;var c,f,d,p=0,y=c=u=l=0,v=0,m=0;if(f=0,0<=i)for(h=n[a].Qe,p=0;p<h.count;p++)if((c=h.n[p]).valid&&c.fromVertex.layer!==e)for(l=c.fromVertex.index,u=c.portToPos,c=c.portFromPos,y=p+1;y<h.count;y++)(f=h.n[y]).valid&&f.fromVertex.layer!==e&&(v=f.fromVertex.index,m=f.portToPos,f=f.portFromPos,u<m&&(l>v||l===v&&c>f)&&s++,m<u&&(v>l||v===l&&f>c)&&s++);if(0>=i)for(h=n[a].Je,p=0;p<h.count;p++)if((c=h.n[p]).valid&&c.toVertex.layer!==e)for(l=c.toVertex.index,u=c.portToPos,c=c.portFromPos,y=p+1;y<h.count;y++)(f=h.n[y]).valid&&f.toVertex.layer!==e&&(v=f.toVertex.index,m=f.portToPos,c<(f=f.portFromPos)&&(l>v||l===v&&u>m)&&s++,f<c&&(v>l||v===l&&m>u)&&s++);for(r[a*o+a]=s,h=a+1;h<o;h++){var g=0,b=0;if(0<=i)for(s=n[a].Qe,d=n[h].Qe,p=0;p<s.count;p++)if((c=s.n[p]).valid&&c.fromVertex.layer!==e)for(l=c.fromVertex.index,c=c.portFromPos,y=0;y<d.count;y++)(f=d.n[y]).valid&&f.fromVertex.layer!==e&&(v=f.fromVertex.index,f=f.portFromPos,(l<v||l===v&&c<f)&&b++,(v<l||v===l&&f<c)&&g++);if(0>=i)for(s=n[a].Je,d=n[h].Je,p=0;p<s.count;p++)if((c=s.n[p]).valid&&c.toVertex.layer!==e)for(l=c.toVertex.index,u=c.portToPos,y=0;y<d.count;y++)(f=d.n[y]).valid&&f.toVertex.layer!==e&&(v=f.toVertex.index,m=f.portToPos,(l<v||l===v&&u<m)&&b++,(v<l||v===l&&m<u)&&g++);r[a*o+h]=g,r[h*o+a]=b}}return qd(t,e,n),r}function cd(t){for(var e=0,i=0;i<=t.sb;i++){for(var n=t,o=i,r=Ed(n,o),a=n.ke[o],s=0,l=0;l<a;l++){var h,u=null,c=0,f=0;if(null!==(u=r[l].Je))for(var d=0;d<u.count;d++)(h=u.n[d]).valid&&h.toVertex.layer!==o&&(c=h.fromVertex.column+h.portFromColOffset,f=h.toVertex.column+h.portToColOffset,s+=(Math.abs(c-f)+1)*sd(h))}qd(n,o,r),e+=s}return e}function fd(t,e,i){for(var n=Ed(t,e),o=t.ke[e],r=[],a=0;a<o;a++){var s=n[a],l=null;0>=i&&(l=s.Qe);var h=null;0<=i&&(h=s.Je);var u=0,c=0,f=s.near;if(null!==f&&f.layer===s.layer&&(u+=f.column-1,c++),null!==l)for(f=0;f<l.count;f++){var d=(s=l.n[f]).fromVertex;s.valid&&!s.rev&&d.layer!==e&&(u+=d.column,c++)}if(null!==h)for(l=0;l<h.count;l++)f=(s=h.n[l]).toVertex,s.valid&&!s.rev&&f.layer!==e&&(u+=f.column,c++);r[a]=0===c?-1:u/c}return qd(t,e,n),r}function dd(t,e,i){for(var n=Ed(t,e),o=t.ke[e],r=[],a=0;a<o;a++){var s=n[a],l=null;0>=i&&(l=s.Qe);var h=null;0<=i&&(h=s.Je);var u=0,c=[],f=s.near;if(null!==f&&f.layer===s.layer&&(c[u]=f.column-1,u++),null!==l)for(f=0;f<l.count;f++){var d=(s=l.n[f]).fromVertex;s.valid&&!s.rev&&d.layer!==e&&(c[u]=d.column+s.portFromColOffset,u++)}if(null!==h)for(l=0;l<h.count;l++)f=(s=h.n[l]).toVertex,s.valid&&!s.rev&&f.layer!==e&&(c[u]=f.column+s.portToColOffset,u++);0===u?r[a]=-1:(c.sort(function(t,e){return t-e}),h=u>>1,r[a]=0!=(1&u)?c[h]:c[h-1]+c[h]>>1)}return qd(t,e,n),r}function pd(t,e,i,n,o,r){if(e.component===n){e.component=i;var a=0;if(o)for(var s=e.kc;s.next();){var l=(a=s.value).toVertex;e.layer-l.layer===(a=t.linkMinLength(a))&&pd(t,l,i,n,o,r)}if(r)for(s=e.nc;s.next();)(l=(a=s.value).fromVertex).layer-e.layer===(a=t.linkMinLength(a))&&pd(t,l,i,n,o,r)}}function yd(t,e,i,n,o,r){if(e.component===n){if(e.component=i,o)for(var a=e.kc;a.next();)yd(t,a.value.toVertex,i,n,o,r);if(r)for(e=e.nc;e.next();)yd(t,e.value.fromVertex,i,n,o,r)}}function vd(t){for(t=t.vertexes.i;t.next();){var e=t.value;if(e.valid)return e}return null}function md(t){for(t=t.vertexes.i;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.kc;n.next();)if(n.value.toVertex.valid){i=!1;break}if(i)return e}}return null}function gd(t){for(t=t.vertexes.i;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.nc;n.next();)if(n.value.fromVertex.valid){i=!1;break}if(i)return e}}return null}function bd(t,e){e.Qp=t.zs,t.zs++;for(var i=e.kc;i.next();){var n=i.value,o=n.toVertex;-1===o.Qp&&(n.forest=!0,bd(t,o))}e.finish=t.zs,t.zs++}function xd(t){for(var e=t.network.vertexes.i;e.next();){var i=wd(t,e.value);t.sb=Math.max(i,t.sb)}}function wd(t,e){var i=0;if(-1===e.layer){for(var n=e.kc;n.next();){var o=(r=n.value).toVertex,r=t.linkMinLength(r);i=Math.max(i,wd(t,o)+r)}e.layer=i}else i=e.layer;return i}function kd(t,e){var i=0;if(-1===e.layer){for(var n=e.nc;n.next();){var o=(r=n.value).fromVertex,r=t.linkMinLength(r);i=Math.max(i,kd(t,o)+r)}e.layer=i}else i=e.layer;return i}function Md(t,e){if(!e.valid){e.valid=!0;for(var i=e.kc;i.next();)Md(t,i.value.toVertex);for(i=t.network.vertexes.i;i.next();)i.value.component=-1;for(var n=(l=e.Qe.n).length,o=0;o<n;o++){var r=(s=l[o]).fromVertex,a=s.toVertex,s=t.linkMinLength(s);r.layer-a.layer>s&&pd(t,r,0,-1,!0,!1)}for(pd(t,e,1,-1,!0,!0);0!==e.component;){r=0;for(var l=1/0,h=(a=0,null),u=t.network.vertexes.i;u.next();){var c=u.value;if(1===c.component){var f=0,d=!1,p=c.Qe.n;for(n=p.length,o=0;o<n;o++){var y=(s=p[o]).fromVertex;f=f+1;1!==y.component&&(r+=1,y=y.layer-c.layer,s=t.linkMinLength(s),l=Math.min(l,y-s))}for(n=(s=c.Je.n).length,o=0;o<n;o++)f-=1,1!==(p=s[o].toVertex).component?r-=1:d=!0;(null===h||f<a)&&!d&&(h=c,a=f)}}if(0<r){for(i.reset();i.next();)1===(n=i.value).component&&(n.layer+=l);e.component=0}else h.component=0}for(i=t.network.vertexes.i;i.next();)i.value.component=-1;for(pd(t,e,1,-1,!0,!1);0!==e.component;){for(o=0,n=1/0,l=0,s=null,r=t.network.vertexes.i;r.next();)if(1===(a=r.value).component){for(h=0,u=!1,c=(d=a.Qe.n).length,f=0;f<c;f++)h+=1,1!==(p=d[f].fromVertex).component?o+=1:u=!0;for(c=(d=a.Je.n).length,f=0;f<c;f++)h-=1,1!==(y=(p=d[f]).toVertex).component&&(o-=1,y=a.layer-y.layer,p=t.linkMinLength(p),n=Math.min(n,y-p));(null===s||h>l)&&!u&&(s=a,l=h)}if(0>o){for(i.reset();i.next();)1===(o=i.value).component&&(o.layer-=n);e.component=0}else s.component=0}}}function Sd(t,e,i){return 90===t.ba?i&&!e.rev||!i&&e.rev?270:90:180===t.ba?i&&!e.rev||!i&&e.rev?0:180:270===t.ba?i&&!e.rev||!i&&e.rev?90:270:i&&!e.rev||!i&&e.rev?180:0}function Td(t,e){var i=e.layer;e.index=t.ke[i],t.ke[i]++;i=e.Je.xc();for(var n=!0;n;){n=!1;for(var o=0;o<i.length-1;o++){var r=i[o],a=i[o+1];r.portFromColOffset>a.portFromColOffset&&(n=!0,i[o]=a,i[o+1]=r)}}for(o=0;o<i.length;o++)(n=i[o]).valid&&(-1===(n=n.toVertex).index&&Td(t,n))}function Pd(t,e){var i=e.layer;e.index=t.ke[i],t.ke[i]++;i=e.Qe.xc();for(var n=!0,o=0;n;)for(n=!1,o=0;o<i.length-1;o++){var r=i[o],a=i[o+1];r.portToColOffset>a.portToColOffset&&(n=!0,i[o]=a,i[o+1]=r)}for(o=0;o<i.length;o++)(n=i[o]).valid&&(-1===(n=n.fromVertex).index&&Pd(t,n))}function Nd(t,e,i){var n=0,o=Ed(t,e),r=t.ke[e],a=dd(t,e,i);for(i=fd(t,e,i),n=0;n<r;n++)-1===i[n]&&(i[n]=o[n].column),-1===a[n]&&(a[n]=o[n].column);for(var s,l=!0;l;)for(l=!1,n=0;n<r-1;n++)(a[n+1]<a[n]||a[n+1]===a[n]&&i[n+1]<i[n])&&(l=!0,s=a[n],a[n]=a[n+1],a[n+1]=s,s=i[n],i[n]=i[n+1],i[n+1]=s,s=o[n],o[n]=o[n+1],o[n+1]=s);for(n=a=0;n<r;n++)(s=o[n]).index=n,a+=t.nodeMinColumnSpace(s,!0),s.column=a,a+=1,a+=t.nodeMinColumnSpace(s,!1);qd(t,e,o)}function Cd(t,e,i){var n=Ed(t,e),o=t.ke[e];i=ud(t,e,i);var r,a,s=0;for(r=[],s=0;s<o;s++)r[s]=-1;for(a=[],s=0;s<o;s++)a[s]=-1;for(var l=!1,h=!0;h;)for(h=!1,s=0;s<o-1;s++){var u=i[n[s].index*o+n[s+1].index],c=i[n[s+1].index*o+n[s].index],f=0,d=0,p=n[s].column,y=n[s+1].column,v=t.nodeMinColumnSpace(n[s],!0),m=t.nodeMinColumnSpace(n[s],!1),g=t.nodeMinColumnSpace(n[s+1],!0),b=t.nodeMinColumnSpace(n[s+1],!1);v=p-v+g,m=y-m+b,g=g=0;for((x=n[s].nc.i).reset();x.next();)if(b=(g=x.value).fromVertex,g.valid&&b.layer===e){for(g=0;n[g]!==b;)g++;g<s&&(f+=2*(s-g),d+=2*(s+1-g)),g===s+1&&(f+=1),g>s+1&&(f+=4*(g-s),d+=4*(g-(s+1)))}for((x=n[s].kc.i).reset();x.next();)if(b=(g=x.value).toVertex,g.valid&&b.layer===e){for(g=0;n[g]!==b;)g++;g===s+1&&(d+=1)}for((x=n[s+1].nc.i).reset();x.next();)if(b=(g=x.value).fromVertex,g.valid&&b.layer===e){for(g=0;n[g]!==b;)g++;g<s&&(f+=2*(s+1-g),d+=2*(s-g)),g===s&&(d+=1),g>s+1&&(f+=4*(g-(s+1)),d+=4*(g-s))}for((x=n[s+1].kc.i).reset();x.next();)if(b=(g=x.value).toVertex,g.valid&&b.layer===e){for(g=0;n[g]!==b;)g++;g===s&&(f+=1)}g=b=0;var x=r[n[s].index],w=a[n[s].index],k=r[n[s+1].index],M=a[n[s+1].index];-1!==x&&(b+=Math.abs(x-p),g+=Math.abs(x-m)),-1!==w&&(b+=Math.abs(w-p),g+=Math.abs(w-m)),-1!==k&&(b+=Math.abs(k-y),g+=Math.abs(k-v)),-1!==M&&(b+=Math.abs(M-y),g+=Math.abs(M-v)),(d<f-.5||d===f&&c<u-.5||d===f&&c===u&&g<b-.5)&&(h=l=!0,n[s].column=m,n[s+1].column=v,u=n[s],n[s]=n[s+1],n[s+1]=u)}for(s=0;s<o;s++)n[s].index=s;return qd(t,e,n),l}function Ad(t,e,i){for(var n=!1;Fd(t,e,i);)n=!0;return n}function Fd(t,e,i){var n=0,o=Ed(t,e),r=t.ke[e],a=fd(t,e,-1);if(0<i)for(n=0;n<r;n++)a[n]=-1;var s=fd(t,e,1);if(0>i)for(n=0;n<r;n++)s[n]=-1;for(var l=!1,h=!0;h;)for(h=!1,n=0;n<r;n++){var u=o[n].column,c=t.nodeMinColumnSpace(o[n],!0),f=t.nodeMinColumnSpace(o[n],!1),d=0>n-1||u-o[n-1].column-1>c+t.nodeMinColumnSpace(o[n-1],!1)?u-1:u,p=(c=0,c=n+1>=r||o[n+1].column-u-1>f+t.nodeMinColumnSpace(o[n+1],!0)?u+1:u,f=0),y=0,v=0,m=0,g=0;if(0>=i)for(var b=o[n].nc.i;b.next();){var x=(g=b.value).fromVertex;g.valid&&x.layer!==e&&(v=sd(g),m=g.portFromColOffset,g=g.portToColOffset,x=x.column,f+=(Math.abs(u+g-(x+m))+1)*v,p+=(Math.abs(d+g-(x+m))+1)*v,y+=(Math.abs(c+g-(x+m))+1)*v)}if(0<=i)for(b=o[n].kc.i;b.next();)x=(g=b.value).toVertex,g.valid&&x.layer!==e&&(v=sd(g),m=g.portFromColOffset,g=g.portToColOffset,x=x.column,f+=(Math.abs(u+m-(x+g))+1)*v,p+=(Math.abs(d+m-(x+g))+1)*v,y+=(Math.abs(c+m-(x+g))+1)*v);g=m=v=0,b=a[o[n].index],x=s[o[n].index],-1!==b&&(v+=Math.abs(b-u),m+=Math.abs(b-d),g+=Math.abs(b-c)),-1!==x&&(v+=Math.abs(x-u),m+=Math.abs(x-d),g+=Math.abs(x-c)),p<f||p===f&&m<v?(h=l=!0,o[n].column=d):(y<f||y===f&&g<v)&&(h=l=!0,o[n].column=c)}return qd(t,e,o),t.normalize(),l}function Dd(t,e,i){var n=0,o=Ed(t,e),r=t.ke[e],a=dd(t,e,i);for(i=[],n=0;n<r;n++)i[n]=a[n];for(a=!0;a;)for(a=!1,n=0;n<r;n++){var s=o[n].column,l=t.nodeMinColumnSpace(o[n],!0),h=t.nodeMinColumnSpace(o[n],!1),u=0,c=0,f=0;f=c=0;-1===i[n]?0===n&&n===r-1?u=s:0===n?u=(c=o[n+1].column)-s===h+t.nodeMinColumnSpace(o[n+1],!0)?s-1:s:n===r-1?u=s-(f=o[n-1].column)===l+t.nodeMinColumnSpace(o[n-1],!1)?s+1:s:u=((f=(f=o[n-1].column)+t.nodeMinColumnSpace(o[n-1],!1)+l+1)+(c=(c=o[n+1].column)-t.nodeMinColumnSpace(o[n+1],!0)-h-1))/2|0:0===n&&n===r-1?u=i[n]:0===n?(c=(c=o[n+1].column)-t.nodeMinColumnSpace(o[n+1],!0)-h-1,u=Math.min(i[n],c)):n===r-1?(f=(f=o[n-1].column)+t.nodeMinColumnSpace(o[n-1],!1)+l+1,u=Math.max(i[n],f)):(f=(f=o[n-1].column)+t.nodeMinColumnSpace(o[n-1],!1)+l+1,c=(c=o[n+1].column)-t.nodeMinColumnSpace(o[n+1],!0)-h-1,f<i[n]&&i[n]<c?u=i[n]:f>=i[n]?u=f:c<=i[n]&&(u=c)),u!==s&&(a=!0,o[n].column=u)}qd(t,e,o),t.normalize()}function Ld(t,e){for(var i=!0,n=t.network.vertexes.i;n.next();){var o=n.value,r=t.nodeMinColumnSpace(o,!0),a=t.nodeMinColumnSpace(o,!1);if(o.column-r<=e&&o.column+a>=e){i=!1;break}}if(o=!1,i)for(n.reset();n.next();)(i=n.value).column>e&&(i.column-=1,o=!0);return o}function jd(t,e){var i=e,n=(i=e+1,0),o=[],r=[];for(n=0;n<=t.sb;n++)o[n]=!1,r[n]=!1;for(var a=t.network.vertexes.i;a.next();){var s=(n=a.value).column-t.nodeMinColumnSpace(n,!0),l=n.column+t.nodeMinColumnSpace(n,!1);s<=e&&l>=e&&(o[n.layer]=!0),s<=i&&l>=i&&(r[n.layer]=!0)}for(s=!0,i=!1,n=0;n<=t.sb;n++)s=s&&!(o[n]&&r[n]);if(s)for(a.reset();a.next();)(o=a.value).column>e&&(o.column-=1,i=!0);return i}function zd(t,e){for(var i=0;i<=t.Kb;i++)for(;Ld(t,i););for(t.normalize(),i=0;i<t.Kb;i++)for(;jd(t,i););t.normalize();i=0;var n,o=0,r=0,a=0;if(0<e)for(i=0;i<=t.Kb;i++)for(n=ld(t),r=(o=cd(t))+1;o<r;)r=o,Bd(t,i,1),(a=cd(t))>o?hd(t,n):a<o&&(o=a,n=ld(t));if(0>e)for(i=t.Kb;0<=i;i--)for(n=ld(t),r=(o=cd(t))+1;o<r;)r=o,Bd(t,i,-1),(a=cd(t))>o?hd(t,n):a<o&&(o=a,n=ld(t));t.normalize()}function Bd(t,e,i){t.Cg=0;for(var n=t.network.vertexes.i;n.next();)n.value.component=-1;if(0<i)for(n.reset();n.next();){var o=n.value;o.column-t.nodeMinColumnSpace(o,!0)<=e&&(o.component=t.Cg)}if(0>i)for(n.reset();n.next();)(o=n.value).column+t.nodeMinColumnSpace(o,!1)>=e&&(o.component=t.Cg);for(t.Cg++,n.reset();n.next();)-1===(e=n.value).component&&(yd(t,e,t.Cg,-1,!0,!0),t.Cg++);var r=0;for(e=[],r=0;r<t.Cg*t.Cg;r++)e[r]=!1;for(o=[],r=0;r<(t.sb+1)*(t.Kb+1);r++)o[r]=-1;for(n.reset();n.next();)for(var a=(r=n.value).layer,s=Math.max(0,r.column-t.nodeMinColumnSpace(r,!0)),l=Math.min(t.Kb,r.column+t.nodeMinColumnSpace(r,!1));s<=l;s++)o[a*(t.Kb+1)+s]=r.component;for(r=0;r<=t.sb;r++){if(0<i)for(s=0;s<t.Kb;s++)-1!==o[r*(t.Kb+1)+s]&&-1!==o[r*(t.Kb+1)+s+1]&&o[r*(t.Kb+1)+s]!==o[r*(t.Kb+1)+s+1]&&(e[o[r*(t.Kb+1)+s]*t.Cg+o[r*(t.Kb+1)+s+1]]=!0);if(0>i)for(s=t.Kb;0<s;s--)-1!==o[r*(t.Kb+1)+s]&&-1!==o[r*(t.Kb+1)+s-1]&&o[r*(t.Kb+1)+s]!==o[r*(t.Kb+1)+s-1]&&(e[o[r*(t.Kb+1)+s]*t.Cg+o[r*(t.Kb+1)+s-1]]=!0)}for(o=[],r=0;r<t.Cg;r++)o[r]=!0;for((a=new et("number")).add(0),l=0;0!==a.count;)if(l=a.n[a.count-1],a.dd(a.count-1),o[l])for(o[l]=!1,r=0;r<t.Cg;r++)e[l*t.Cg+r]&&a.Rd(0,r);if(0<i)for(n.reset();n.next();)o[(t=n.value).component]&&(t.column-=1);if(0>i)for(n.reset();n.next();)o[(i=n.value).component]&&(i.column+=1)}function Id(t,e){return 270===t.ba?e?N:F:90===t.ba?e?F:N:180===t.ba?e?C:A:e?A:C}function Od(t,e){var i=t-e;return-1<i&&1>i}function Ed(t,e){var i,n=t.ke[e];if(n>=t.ih.length){i=[];for(var o=0;o<t.ih.length;o++)i[o]=t.ih[o];t.ih=i}for(void 0===t.ih[n]||null===t.ih[n]?i=[]:(i=t.ih[n],t.ih[n]=null),n=t.As[e],o=0;o<n.length;o++){var r=n[o];i[r.index]=r}return i}function qd(t,e,i){t.ih[t.ke[e]]=i}function Rd(){this.index=this.se=this.Ye=this.ge=this.first=this.layer=0,this.link=null,this.ui=0}function Gd(){Nf.call(this)}function Vd(){Df.call(this),this.index=this.column=this.layer=-1,this.component=NaN,this.near=null,this.valid=!1,this.finish=this.Qp=NaN,this.ln=0,this.eB=this.fB=null}function _d(){Lf.call(this),this.forest=this.rev=this.valid=!1,this.portToPos=this.portFromPos=NaN,this.portToColOffset=this.portFromColOffset=0}function Hd(){0<arguments.length&&r.nd(Hd),Sf.call(this),this.xd=new nt(Object),this.Ls=Ju,this.Of=$u,this.At=cc,this.fw=gc,this.fC=null,this.Lh=!0,this.pd=yc,this.ng=new dt(10,10).freeze(),this.va=new Mp,this.wa=new Mp,this.Rz=[]}function Kd(t){var e=new nt(Mp);for(t=t.i;t.next();){var i=t.value;i.initialized||e.add(i)}return e}function Wd(t,e){for(var i=999999,n=null,o=e.i;o.next();){var a=o.value;switch(t.Of){case $u:a.nc.count<i&&(i=a.nc.count,n=a);break;case Yu:a.kc.count<i&&(i=a.kc.count,n=a);break;default:r.k("Unhandled path value "+t.Of.toString())}}return n}function Ud(t,e){if(null!==e){switch(t.Of){case $u:if(0<e.kc.count){for(var i=new et(Mp),n=e.PH;n.next();){var o=n.value;Jd(t,e,o)&&i.add(o)}0<i.count&&(e.children=i.xc())}break;case Yu:if(0<e.nc.count){for(i=new et(Mp),n=e.MJ;n.next();)Jd(t,e,o=n.value)&&i.add(o);0<i.count&&(e.children=i.xc())}break;default:r.k("Unhandled path value"+t.Of.toString())}for(n=(i=e.children).length,o=0;o<n;o++){var a=i[o];a.initialized=!0,a.level=e.level+1,a.parent=e,t.xd.remove(a)}for(o=0;o<n;o++)Ud(t,a=i[o])}}function Jd(t,e,i){if(i.initialized){var n;if(null===e)n=!1;else{for(n=e.parent;null!==n&&n!==i;)n=n.parent;n=n===i}if(n||i.level>e.level)return!1;t.removeChild(i.parent,i)}return!0}function $d(t,e){if(null!==e){t.initializeTreeVertexValues(e),e.alignment===ac&&t.sortTreeVertexChildren(e);for(var i=0,n=e.nn,o=0,r=e.children,a=r.length,s=0;s<a;s++){var l=r[s];$d(t,l),i+=l.descendantCount+1,n=Math.max(n,l.maxChildrenCount),o=Math.max(o,l.maxGenerationCount)}e.descendantCount=i,e.maxChildrenCount=n,e.maxGenerationCount=0<n?o+1:0}}function Yd(t,e){if(null!==e){t.assignTreeVertexValues(e);for(var i=e.children,n=i.length,o=0;o<n;o++)Yd(t,i[o])}}function Xd(t,e){if(null!==e){e.alignment!==ac&&t.sortTreeVertexChildren(e);for(var i=e.children,n=i.length,o=0;o<n;o++)Xd(t,i[o])}}function Qd(t){return t===rc||t===ac||t===sc||t===lc}function Zd(t){return t===rc||t===ac}function tp(t){var e=t.parent;if(null!==e){var i=e.alignment;if(Qd(i)){if(Zd(i)){for(e=e.children,i=0;i<e.length&&t!==e[i];)i++;return 0==i%2}if(i===sc)return!0}}return!1}function ep(t,e){if(0===e.nn){var i=!1,n=0,o=ic;null!==e.parent&&(n=e.parent.angle,i=Qd(o=e.parent.alignment)),o=tp(e),e.pa.m(0,0),e.kb.m(e.width,e.height),null===e.parent||null===e.comments||(180!==n&&270!==n||i)&&!o?e.Oa.m(0,0):180===n&&!i||(90===n||270===n)&&o?e.Oa.m(e.width-2*e.T.x,0):e.Oa.m(0,e.height-2*e.T.y)}else{n=90===(i=bp(e))||270===i;for(var a=0,s=(o=e.children).length,l=0;l<s;l++){var h=o[l];a=Math.max(a,n?h.kb.width:h.kb.height)}var u=e.alignment,c=u===nc,f=u===oc,d=Qd(u),p=Math.max(0,e.breadthLimit),y=xp(e),v=e.nodeSpacing,m=wp(e),g=c||f?0:m/2,b=e.rowSpacing,x=0;(c||f||e.uq||e.vq&&1===e.maxGenerationCount)&&(x=Math.max(0,e.rowIndent));c=e.width;var w=e.height,k=0,M=0,S=0,T=0,P=0,N=0,C=0,A=0,F=0,D=0;if(d&&!Zd(u)&&135<i&&o.reverse(),Zd(u))if(1<s)for(l=0;l<s;l++){var L=(h=o[l]).kb;0==l%2&&l!==s-1?F=Math.max(F,(n?L.width:L.height)+op(h)-v):0!=l%2&&(D=Math.max(D,(n?L.width:L.height)+op(h)-v))}else 1===s&&(F=n?o[0].kb.width:o[0].kb.height);if(d)switch(u){case rc:case ac:F=(M=135>i?ip(e,o,F,k,M):np(e,o,F,k,M)).x,k=M.width,M=M.height;break;case sc:for(l=0;l<s;l++)L=(h=o[l]).kb,p=0===C?0:b,n?(h.pa.m(a-L.width,P+p),k=Math.max(k,L.width),M=Math.max(M,P+p+L.height),P+=p+L.height):(h.pa.m(T+p,a-L.height),k=Math.max(k,T+p+L.width),M=Math.max(M,L.height),T+=p+L.width),C++;break;case lc:for(a=0;a<s;a++)L=(h=o[a]).kb,p=0===C?0:b,n?(h.pa.m(v/2+e.T.x,P+p),k=Math.max(k,L.width),M=Math.max(M,P+p+L.height),P+=p+L.height):(h.pa.m(T+p,v/2+e.T.y),k=Math.max(k,T+p+L.width),M=Math.max(M,L.height),T+=p+L.width),C++}else for(l=0;l<s;l++)L=(h=o[l]).kb,n?(0<p&&0<C&&T+v+L.width>p&&(T<a&&up(e,u,a-T,0,A,l-1),N++,C=0,A=l,S=M,T=0,P=135<i?-M-b:M+b),D=0===C?g:v,fp(t,h,0,P),h.pa.m(T+D,P),k=Math.max(k,T+D+L.width),M=Math.max(M,S+(0===N?0:b)+L.height),T+=D+L.width):(0<p&&0<C&&P+v+L.height>p&&(P<a&&up(e,u,0,a-P,A,l-1),N++,C=0,A=l,S=k,P=0,T=135<i?-k-b:k+b),D=0===C?g:v,fp(t,h,T,0),h.pa.m(T,P+D),M=Math.max(M,P+D+L.height),k=Math.max(k,S+(0===N?0:b)+L.width),P+=D+L.height),C++;switch(0<N&&(n?(M+=Math.max(0,y),T<k&&up(e,u,k-T,0,A,s-1),0<x&&(f||cp(e,x,0,0,s-1),k+=x)):(k+=Math.max(0,y),P<M&&up(e,u,0,M-P,A,s-1),0<x&&(f||cp(e,0,x,0,s-1),M+=x))),x=f=0,u){case ec:n?f+=k/2-e.T.x-m/2:x+=M/2-e.T.y-m/2;break;case ic:0<N?n?f+=k/2-e.T.x-m/2:x+=M/2-e.T.y-m/2:n?f+=(u=o[0].pa.x+o[0].Oa.x)+((v=o[s-1].pa.x+o[s-1].Oa.x+2*o[s-1].T.x)-u)/2-e.T.x-m/2:x+=(u=o[0].pa.y+o[0].Oa.y)+((v=o[s-1].pa.y+o[s-1].Oa.y+2*o[s-1].T.y)-u)/2-e.T.y-m/2;break;case nc:n?(f-=m,k+=m):(x-=m,M+=m);break;case oc:n?(f+=k-e.width+m,k+=m):(x+=M-e.height+m,M+=m);break;case rc:case ac:n?f=1<s?f+(F+v/2-e.T.x):f+(o[0].T.x-e.T.x+o[0].Oa.x):x=1<s?x+(F+v/2-e.T.y):x+(o[0].T.y-e.T.y+o[0].Oa.y);break;case sc:n?f+=k+v/2-e.T.x:x+=M+v/2-e.T.y;break;case lc:break;default:r.k("Unhandled alignment value "+u.toString())}for(l=0;l<s;l++)h=o[l],n?h.pa.m(h.pa.x+h.Oa.x-f,h.pa.y+(135<i?(d?-M:-h.kb.height)+h.Oa.y-y:w+y+h.Oa.y)):h.pa.m(h.pa.x+(135<i?(d?-k:-h.kb.width)+h.Oa.x-y:c+y+h.Oa.x),h.pa.y+h.Oa.y-x);n?(k=sp(e,k,f),0>f&&(f=0),135<i&&(x+=M+y),M+=w+y):(135<i&&(f+=k+y),k+=c+y,M=lp(e,M,x),0>x&&(x=0)),e.Oa.m(f,x),e.kb.m(k,M)}}function ip(t,e,i,n,o){var r=e.length;if(0===r)return new pt(i,0,n,o);if(1===r)return new pt(i,0,n=(d=e[0]).kb.width,o=d.kb.height);for(var a=t.nodeSpacing,s=t.rowSpacing,l=90===bp(t),h=0,u=0,c=0,f=0;f<r;f++)if(!(0!=f%2||1<r&&f===r-1)){var d,p=(d=e[f]).kb,y=0===h?0:s;if(l){var v=op(d)-a;d.pa.m(i-(p.width+v),c+y),n=Math.max(n,p.width+v),o=Math.max(o,c+y+p.height),c+=y+p.height}else v=op(d)-a,d.pa.m(u+y,i-(p.height+v)),o=Math.max(o,p.height+v),n=Math.max(n,u+y+p.width),u+=y+p.width;h++}h=0;var m=u,g=c;for(l?(u=i+a,c=0):(u=0,c=i+a),f=0;f<r;f++)0!=f%2&&(p=(d=e[f]).kb,y=0===h?0:s,l?(v=op(d)-a,d.pa.m(u+v,c+y),n=Math.max(n,u+p.width+v),o=Math.max(o,c+y+p.height),c+=y+p.height):(v=op(d)-a,d.pa.m(u+y,c+v),n=Math.max(n,u+y+p.width),o=Math.max(o,c+p.height+v),u+=y+p.width),h++);return 1<r&&1==r%2&&(p=(d=e[r-1]).kb,e=rp(d,l?Math.max(Math.abs(g),Math.abs(c)):Math.max(Math.abs(m),Math.abs(u))),l?(d.pa.m(i+a/2-d.T.x-d.Oa.x,o+e),l=i+a/2-d.T.x-d.Oa.x,n=Math.max(n,l+p.width),0>l&&(n-=l),o=Math.max(o,Math.max(g,c)+e+p.height),0>d.pa.x&&(i=ap(t,d.pa.x,!1,i,a))):(d.pa.m(n+e,i+a/2-d.T.y-d.Oa.y),n=Math.max(n,Math.max(m,u)+e+p.width),l=i+a/2-d.T.y-d.Oa.y,o=Math.max(o,l+p.height),0>l&&(o-=l),0>d.pa.y&&(i=ap(t,d.pa.y,!0,i,a)))),new pt(i,0,n,o)}function np(t,e,i,n,o){var r=e.length;if(0===r)return new pt(i,0,n,o);if(1===r)return new pt(i,0,n=(d=e[0]).kb.width,o=d.kb.height);for(var a=t.nodeSpacing,s=t.rowSpacing,l=270===bp(t),h=0,u=0,c=0,f=0;f<r;f++)if(!(0!=f%2||1<r&&f===r-1)){var d,p=(d=e[f]).kb,y=0===h?0:s;if(l){var v=op(d)-a;c=c-(y+p.height);d.pa.m(i-(p.width+v),c),n=Math.max(n,p.width+v),o=Math.max(o,Math.abs(c))}else v=op(d)-a,u-=y+p.width,d.pa.m(u,i-(p.height+v)),o=Math.max(o,p.height+v),n=Math.max(n,Math.abs(u));h++}h=0;var m=u,g=c;for(l?(u=i+a,c=0):(u=0,c=i+a),f=0;f<r;f++)0!=f%2&&(p=(d=e[f]).kb,y=0===h?0:s,l?(v=op(d)-a,c-=y+p.height,d.pa.m(u+v,c),n=Math.max(n,u+p.width+v),o=Math.max(o,Math.abs(c))):(v=op(d)-a,u-=y+p.width,d.pa.m(u,c+v),o=Math.max(o,c+p.height+v),n=Math.max(n,Math.abs(u))),h++);for(1<r&&1==r%2&&(p=(d=e[r-1]).kb,s=rp(d,l?Math.max(Math.abs(g),Math.abs(c)):Math.max(Math.abs(m),Math.abs(u))),l?(d.pa.m(i+a/2-d.T.x-d.Oa.x,-o-p.height-s),u=i+a/2-d.T.x-d.Oa.x,n=Math.max(n,u+p.width),0>u&&(n-=u),o=Math.max(o,Math.abs(Math.min(g,c))+s+p.height),0>d.pa.x&&(i=ap(t,d.pa.x,!1,i,a))):(d.pa.m(-n-p.width-s,i+a/2-d.T.y-d.Oa.y),n=Math.max(n,Math.abs(Math.min(m,u))+s+p.width),u=i+a/2-d.T.y-d.Oa.y,o=Math.max(o,u+p.height),0>u&&(o-=u),0>d.pa.y&&(i=ap(t,d.pa.y,!0,i,a)))),f=0;f<r;f++)d=e[f],l?d.pa.m(d.pa.x,d.pa.y+o):d.pa.m(d.pa.x+n,d.pa.y);return new pt(i,0,n,o)}function op(t){return null===t.parent?0:t.parent.nodeSpacing}function rp(t){return null===t.parent?0:t.parent.rowSpacing}function ap(t,e,i,n,o){for(var r=(t=t.children).length,a=0;a<r;a++)i?t[a].pa.m(t[a].pa.x,t[a].pa.y-e):t[a].pa.m(t[a].pa.x-e,t[a].pa.y);return e=t[r-1],Math.max(n,i?e.Oa.y+e.T.y-o/2:e.Oa.x+e.T.x-o/2)}function sp(t,e,i){switch(t.alignment){case ic:case ec:var n=e;return i+t.width>n&&(n=i+t.width),0>i&&(n-=i),n;case nc:return t.width>e?t.width:e;case oc:return 2*t.T.x>e?t.width:e+t.width-2*t.T.x;case rc:case ac:return n=Math.min(0,i),i=Math.max(e,i+t.width),Math.max(t.width,i-n);case sc:return t.width-t.T.x+t.nodeSpacing/2+e;case lc:return Math.max(t.width,t.T.x+t.nodeSpacing/2+e);default:return e}}function lp(t,e,i){switch(t.alignment){case ic:case ec:var n=e;return i+t.height>n&&(n=i+t.height),0>i&&(n-=i),n;case nc:return t.height>e?t.height:e;case oc:return 2*t.T.y>e?t.height:e+t.height-2*t.T.y;case rc:case ac:return n=Math.min(0,i),i=Math.max(e,i+t.height),Math.max(t.height,i-n);case sc:return t.height-t.T.y+t.nodeSpacing/2+e;case lc:return Math.max(t.height,t.T.y+t.nodeSpacing/2+e);default:return e}}function hp(t,e,i){switch(t){case ec:case ic:e/=2,i/=2;break;case nc:i=e=0;break;case oc:break;default:r.k("Unhandled alignment value "+t.toString())}return new ut(e,i)}function up(t,e,i,n,o,r){cp(t,(e=hp(e,i,n)).x,e.y,o,r)}function cp(t,e,i,n,o){if(0!==e||0!==i)for(t=t.children;n<=o;n++){var r=t[n].pa;r.x+=e,r.y+=i}}function fp(t,e,i,n){var o=e.parent;switch(t.Of){case $u:for(t=e.nc;t.next();)(e=t.value).fromVertex===o&&e.Ss.m(i,n);break;case Yu:for(t=e.kc;t.next();)(e=t.value).toVertex===o&&e.Ss.m(i,n);break;default:r.k("Unhandled path value "+t.Of.toString())}}function dp(t,e,i){for(var n=0;n<t.length;n++){var o=t[n];o.x+=e,o.y+=i}}function pp(t,e,i,n,o,r,a,s){var l=bp(e),h=90===l||270===l,u=e.nodeSpacing;e=n;var c=o;n=r,o=a;var f=i.wu,d=i.Ru;a=i.kb;var p=h?Math.max(o,a.height):Math.max(n,a.width);if(null!==f&&l===bp(i)||(f=yp(t,2),d=yp(t,2),h?(f[0].m(0,0),f[1].m(0,a.height),d[0].m(a.width,0),d[1].m(d[0].x,f[1].y)):(f[0].m(0,0),f[1].m(a.width,0),d[0].m(0,a.height),d[1].m(f[1].x,d[0].y))),h){if(i=n,n=9999999,!(null===c||2>c.length||null===f||2>f.length))for(h=l=0;l<c.length&&h<f.length;){o=c[l],r=(m=f[h]).x;var y=m.y;r+=i;var v=o;l+1<c.length&&(v=c[l+1]);var m=(g=m).x,g=g.y;h+1<f.length&&(m=(g=f[h+1]).x,g=g.y,m+=i);var b=n;o.y===y?b=r-o.x:o.y>y&&o.y<g?b=r+(o.y-y)/(g-y)*(m-r)-o.x:y>o.y&&y<v.y&&(b=r-(o.x+(y-o.y)/(v.y-o.y)*(v.x-o.x))),b<n&&(n=b),v.y<=o.y?l++:g<=y?h++:(v.y<=g&&l++,g<=v.y&&h++)}if(i-=n,l=f,h=i+=u,null===e||2>e.length||null===l||2>l.length)n=null;else{for(u=yp(t,e.length+l.length),n=r=o=0;r<l.length&&l[r].y<e[0].y;)y=l[r++],u[n++].m(y.x+h,y.y);for(;o<e.length;)y=e[o++],u[n++].m(y.x,y.y);for(o=e[e.length-1].y;r<l.length&&l[r].y<=o;)r++;for(;r<l.length&&l[r].y>o;)y=l[r++],u[n++].m(y.x+h,y.y);for(l=yp(t,n),o=0;o<n;o++)l[o].assign(u[o]);vp(t,u),n=l}if(r=d,y=i,null===c||2>c.length||null===r||2>r.length)o=null;else{for(u=yp(t,c.length+r.length),h=v=l=0;l<c.length&&c[l].y<r[0].y;)o=c[l++],u[h++].m(o.x,o.y);for(;v<r.length;)o=r[v++],u[h++].m(o.x+y,o.y);for(r=r[r.length-1].y;l<c.length&&c[l].y<=r;)l++;for(;l<c.length&&c[l].y>r;)o=c[l++],u[h++].m(o.x,o.y);for(o=yp(t,h),l=0;l<h;l++)o[l].assign(u[l]);vp(t,u)}r=Math.max(0,i)+a.width,a=p}else{if(i=o,n=9999999,!(null===c||2>c.length||null===f||2>f.length))for(h=l=0;l<c.length&&h<f.length;)o=c[l],r=(m=f[h]).x,y=m.y,y+=i,v=o,l+1<c.length&&(v=c[l+1]),m=(g=m).x,g=g.y,h+1<f.length&&(m=(g=f[h+1]).x,g=g.y,g+=i),b=n,o.x===r?b=y-o.y:o.x>r&&o.x<m?b=y+(o.x-r)/(m-r)*(g-y)-o.y:r>o.x&&r<v.x&&(b=y-(o.y+(r-o.x)/(v.x-o.x)*(v.y-o.y))),b<n&&(n=b),v.x<=o.x?l++:m<=r?h++:(v.x<=m&&l++,m<=v.x&&h++);if(i-=n,l=f,h=i+=u,null===e||2>e.length||null===l||2>l.length)n=null;else{for(u=yp(t,e.length+l.length),n=r=o=0;r<l.length&&l[r].x<e[0].x;)y=l[r++],u[n++].m(y.x,y.y+h);for(;o<e.length;)y=e[o++],u[n++].m(y.x,y.y);for(o=e[e.length-1].x;r<l.length&&l[r].x<=o;)r++;for(;r<l.length&&l[r].x>o;)y=l[r++],u[n++].m(y.x,y.y+h);for(l=yp(t,n),o=0;o<n;o++)l[o].assign(u[o]);vp(t,u),n=l}if(r=d,y=i,null===c||2>c.length||null===r||2>r.length)o=null;else{for(u=yp(t,c.length+r.length),h=v=l=0;l<c.length&&c[l].x<r[0].x;)o=c[l++],u[h++].m(o.x,o.y);for(;v<r.length;)o=r[v++],u[h++].m(o.x,o.y+y);for(r=r[r.length-1].x;l<c.length&&c[l].x<=r;)l++;for(;l<c.length&&c[l].x>r;)o=c[l++],u[h++].m(o.x,o.y);for(o=yp(t,h),l=0;l<h;l++)o[l].assign(u[l]);vp(t,u)}r=p,a=Math.max(0,i)+a.height}return vp(t,e),vp(t,f),vp(t,c),vp(t,d),s[0]=n,s[1]=o,new pt(i,0,r,a)}function yp(t,e){if(void 0!==(i=t.Rz[e])&&void 0!==(i=i.pop()))return i;for(var i=[],n=0;n<e;n++)i[n]=new ut;return i}function vp(t,e){var i=e.length,n=t.Rz[i];void 0===n&&(n=[],t.Rz[i]=n),n.push(e)}function mp(t,e,i,n){if(null!==e){e.x=i,e.y=n;for(var o=(e=e.children).length,r=0;r<o;r++){var a=e[r];mp(t,a,i+a.pa.x,n+a.pa.y)}}}function gp(t,e){if(null!==e){t.setPortSpots(e);for(var i=e.children,n=i.length,o=0;o<n;o++)gp(t,i[o])}}function bp(t){return 45>=(t=t.angle)?0:135>=t?90:225>=t?180:315>=t?270:0}function xp(t){var e=90===(e=bp(t))||270===e,i=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var n=Math.min(1,t.layerSpacingParentOverlap);i=i-(e?t.height*n:t.width*n)}return i<(e?-t.height:-t.width)&&(i=e?-t.height:-t.width),i}function wp(t){var e=90===(e=bp(t))||270===e,i=t.nodeIndent;if(0<t.nodeIndentPastParent){var n=Math.min(1,t.nodeIndentPastParent);i=i+(e?t.width*n:t.height*n)}return Math.max(0,i)}function kp(){Nf.call(this)}function Mp(){Df.call(this),this.initialized=!1,this.parent=null,this.children=[],this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0,this.comments=null,this.pa=new ut(0,0),this.kb=new dt(0,0),this.Oa=new ut(0,0),this.vq=this.uq=this.AJ=!1,this.Ru=this.wu=null,this.sorting=Xu,this.comparer=lu,this.angle=0,this.alignment=ic,this.nodeIndentPastParent=this.nodeIndent=0,this.nodeSpacing=20,this.layerSpacing=50,this.layerSpacingParentOverlap=0,this.compaction=uc,this.breadthLimit=0,this.rowSpacing=25,this.commentSpacing=this.rowIndent=10,this.commentMargin=20,this.setsPortSpot=!0,this.portSpot=m,this.setsChildPortSpot=!0,this.childPortSpot=m}function Sp(){Lf.call(this),this.Ss=new ut(0,0)}function Tp(){ls.call(this),this.Te=null}Ch.prototype.canCopy=function(){if(!this.IH)return!1;var t=this.layer;return null===t||!!t.xk&&(null===(t=t.g)||!!t.xk)},Ch.prototype.canDelete=function(){if(!this.NH)return!1;var t=this.layer;return null===t||!!t.hn&&(null===(t=t.g)||!!t.hn)},Ch.prototype.canEdit=function(){if(!this.QJ)return!1;var t=this.layer;return null===t||!!t.gx&&(null===(t=t.g)||!!t.gx)},Ch.prototype.canGroup=function(){if(!this.lI)return!1;var t=this.layer;return null===t||!!t.ax&&(null===(t=t.g)||!!t.ax)},Ch.prototype.canMove=function(){if(!this.eJ)return!1;var t=this.layer;return null===t||!!t.Kl&&(null===(t=t.g)||!!t.Kl)},Ch.prototype.canReshape=function(){if(!this.sJ)return!1;var t=this.layer;return null===t||!!t.bx&&(null===(t=t.g)||!!t.bx)},Ch.prototype.canResize=function(){if(!this.tJ)return!1;var t=this.layer;return null===t||!!t.Lt&&(null===(t=t.g)||!!t.Lt)},Ch.prototype.canRotate=function(){if(!this.wJ)return!1;var t=this.layer;return null===t||!!t.ex&&(null===(t=t.g)||!!t.ex)},Ch.prototype.canSelect=function(){if(!this.gm)return!1;var t=this.layer;return null===t||!!t.Af&&(null===(t=t.g)||!!t.Af)},r.defineProperty(Ch,{IH:"copyable"},function(){return 0!=(1&this.O)},function(t){var e=0!=(1&this.O);e!==t&&(this.O^=1,this.h("copyable",e,t))}),r.defineProperty(Ch,{NH:"deletable"},function(){return 0!=(2&this.O)},function(t){var e=0!=(2&this.O);e!==t&&(this.O^=2,this.h("deletable",e,t))}),r.defineProperty(Ch,{QJ:"textEditable"},function(){return 0!=(4&this.O)},function(t){var e=0!=(4&this.O);e!==t&&(this.O^=4,this.h("textEditable",e,t),this.ee())}),r.defineProperty(Ch,{lI:"groupable"},function(){return 0!=(8&this.O)},function(t){var e=0!=(8&this.O);e!==t&&(this.O^=8,this.h("groupable",e,t))}),r.defineProperty(Ch,{eJ:"movable"},function(){return 0!=(16&this.O)},function(t){var e=0!=(16&this.O);e!==t&&(this.O^=16,this.h("movable",e,t))}),r.defineProperty(Ch,{EJ:"selectionAdorned"},function(){return 0!=(32&this.O)},function(t){var e=0!=(32&this.O);e!==t&&(this.O^=32,this.h("selectionAdorned",e,t),this.ee())}),r.defineProperty(Ch,{RA:"isInDocumentBounds"},function(){return 0!=(64&this.O)},function(t){var e=0!=(64&this.O);if(e!==t){this.O^=64;var i=this.g;null!==i&&i.Fc(),this.h("isInDocumentBounds",e,t)}}),r.defineProperty(Ch,{EF:"isLayoutPositioned"},function(){return 0!=(128&this.O)},function(t){var e=0!=(128&this.O);e!==t&&(this.O^=128,this.h("isLayoutPositioned",e,t),this.J(t?4:8))}),r.defineProperty(Ch,{gm:"selectable"},function(){return 0!=(256&this.O)},function(t){var e=0!=(256&this.O);e!==t&&(this.O^=256,this.h("selectable",e,t),this.ee())}),r.defineProperty(Ch,{sJ:"reshapable"},function(){return 0!=(512&this.O)},function(t){var e=0!=(512&this.O);e!==t&&(this.O^=512,this.h("reshapable",e,t),this.ee())}),r.defineProperty(Ch,{tJ:"resizable"},function(){return 0!=(1024&this.O)},function(t){var e=0!=(1024&this.O);e!==t&&(this.O^=1024,this.h("resizable",e,t),this.ee())}),r.defineProperty(Ch,{wJ:"rotatable"},function(){return 0!=(2048&this.O)},function(t){var e=0!=(2048&this.O);e!==t&&(this.O^=2048,this.h("rotatable",e,t),this.ee())}),r.defineProperty(Ch,{ib:"isSelected"},function(){return 0!=(4096&this.O)},function(t){var e=0!=(4096&this.O);if(e!==t){var i=this.g;if(!t||this.canSelect()&&!(null!==i&&i.selection.count>=i.VI)){this.O^=4096;var n=!1;if(null!==i){n=i.cb,i.cb=!0;var o=i.selection;o.Qa(),t?o.add(this):o.remove(this),o.freeze()}this.h("isSelected",e,t),this.ee(),null!==(t=this.GJ)&&t(this),null!==i&&(i.Ne(),i.cb=n)}}}),r.defineProperty(Ch,{Og:"isHighlighted"},function(){return 0!=(524288&this.O)},function(t){var e=0!=(524288&this.O);if(e!==t){this.O^=524288;var i=this.g;null!==i&&((i=i.Yl).Qa(),t?i.add(this):i.remove(this),i.freeze()),this.h("isHighlighted",e,t),this.oa(),null!==(t=this.oI)&&t(this)}}),r.defineProperty(Ch,{cm:"isShadowed"},function(){return 0!=(8192&this.O)},function(t){var e=0!=(8192&this.O);e!==t&&(this.O^=8192,this.h("isShadowed",e,t),this.oa())}),Ch.prototype.Hf=function(t){this.O=t?131072|this.O:-131073&this.O},r.defineProperty(Ch,{xF:"isAnimated"},function(){return 0!=(262144&this.O)},function(t){var e=0!=(262144&this.O);e!==t&&(this.O^=262144,this.h("isAnimated",e,t))}),r.defineProperty(Ch,{oI:"highlightedChanged"},function(){return this.Pr},function(t){var e=this.Pr;e!==t&&(null!==t&&r.j(t,"function",Ch,"highlightedChanged"),this.Pr=t,this.h("highlightedChanged",e,t))}),r.defineProperty(Ch,{vB:"selectionObjectName"},function(){return this.gt},function(t){var e=this.gt;e!==t&&(this.gt=t,this.an=null,this.h("selectionObjectName",e,t))}),r.defineProperty(Ch,{FJ:"selectionAdornmentTemplate"},function(){return this.et},function(t){var e=this.et;e!==t&&(this instanceof Rc&&(t.type=Ks),this.et=t,this.h("selectionAdornmentTemplate",e,t))}),r.u(Ch,{Uu:"selectionObject"},function(){if(null===this.an){var t=this.vB;null!==t&&""!==t?(t=this.Bd(t),this.an=null!==t?t:this):this instanceof Rc?(t=this.path,this.an=null!==t?t:this):this.an=this}return this.an}),r.defineProperty(Ch,{GJ:"selectionChanged"},function(){return this.ft},function(t){var e=this.ft;e!==t&&(null!==t&&r.j(t,"function",Ch,"selectionChanged"),this.ft=t,this.h("selectionChanged",e,t))}),r.defineProperty(Ch,{fG:"resizeAdornmentTemplate"},function(){return this.Ts},function(t){var e=this.Ts;e!==t&&(this.Ts=t,this.h("resizeAdornmentTemplate",e,t))}),r.defineProperty(Ch,{hG:"resizeObjectName"},function(){return this.Vs},function(t){var e=this.Vs;e!==t&&(this.Vs=t,this.gp=null,this.h("resizeObjectName",e,t))}),r.u(Ch,{gG:"resizeObject"},function(){if(null===this.gp){var t=this.hG;null!==t&&""!==t?(t=this.Bd(t),this.gp=null!==t?t:this):this.gp=this}return this.gp}),r.defineProperty(Ch,{uJ:"resizeCellSize"},function(){return this.Us},function(t){var e=this.Us;e.L(t)||(this.Us=t=t.S(),this.h("resizeCellSize",e,t))}),r.defineProperty(Ch,{xJ:"rotateAdornmentTemplate"},function(){return this.Ws},function(t){var e=this.Ws;e!==t&&(this.Ws=t,this.h("rotateAdornmentTemplate",e,t))}),r.defineProperty(Ch,{yJ:"rotateObjectName"},function(){return this.Xs},function(t){var e=this.Xs;e!==t&&(this.Xs=t,this.hp=null,this.h("rotateObjectName",e,t))}),r.u(Ch,{qB:"rotateObject"},function(){if(null===this.hp){var t=this.yJ;null!==t&&""!==t?(t=this.Bd(t),this.hp=null!==t?t:this):this.hp=this}return this.hp}),r.defineProperty(Ch,{text:"text"},function(){return this.Md},function(t){var e=this.Md;e!==t&&(this.Md=t,this.h("text",e,t))}),r.defineProperty(Ch,{Da:"containingGroup"},function(){return this.fl},function(t){if(this.fe()){var e=this.fl;if(e!==t){null===t||this!==t&&!t.oi(this)||(this===t&&r.k("Cannot make a Group a member of itself: "+this.toString()),r.k("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.J(Mh);var i=this.g;if(null!==e?kf(e,this):this instanceof xf&&null!==i&&i.El.remove(this),this.fl=t,null!==t?wf(t,this):this instanceof xf&&null!==i&&i.El.add(this),this.J(kh),null!==i){var n=this.data,o=i.$;null!==n&&o instanceof Ci&&o.yB(n,o.qb(null!==t?t.data:null))}if(null!==(n=this.KE)&&(o=!0,null!==i&&(o=i.Ua,i.Ua=!0),n(this,e,t),null!==i&&(i.Ua=o)),this instanceof xf)for(Gi(i=new nt(Ch),this,!0,0,!0),i=i.i;i.next();)if((n=i.value)instanceof Fc)for(n=n.he;n.next();)Gc(n.value);if(this instanceof Fc){for(n=this.he;n.next();)Gc(n.value);null!==(i=this.Wb)&&Gc(i)}this.h("containingGroup",e,t),null!==t&&(null!==(e=t.layer)&&Xo(e,-1,t))}}else r.k("cannot set the Part.containingGroup of a Link or Adornment")}),(i=Ch.prototype).Lk=function(){var t=this.Da;null!==t&&(t.H(),null!==t.Lb&&t.Lb.H(),t.$f())},i.oa=function(){var t=this.g;null!==t&&!Ds(this)&&!Mc(this)&&this.isVisible()&&this.pc.I()&&t.oa(jh(this,this.pc))},i.H=function(){Ys.prototype.H.call(this);var t=this.g;null!==t&&(t.vg.add(this),this instanceof Fc&&null!==this.Wb&&xs(this.Wb),t.Ne(!0))},i.ju=function(t){t||null!==(t=this.fl)&&wf(t,this)},i.ku=function(t){t||null!==(t=this.fl)&&kf(t,this)},i.un=function(){var t=this.data;if(null!==t){var e=this.g;null!==e&&(null!==(e=e.$)&&e.ly(t))}},r.defineProperty(Ch,{KE:"containingGroupChanged"},function(){return this.ar},function(t){var e=this.ar;e!==t&&(null!==t&&r.j(t,"function",Ch,"containingGroupChanged"),this.ar=t,this.h("containingGroupChanged",e,t))}),Ch.prototype.findSubGraphLevel=function(){return function t(e,i){var n=i.Da;return null!==n?1+t(e,n):i instanceof Fc&&(n=i.Wb,null!==n)?t(e,n):0}(this,this)},Ch.prototype.findTopLevelPart=function(){return function t(e,i){var n=i.Da;return null!==n?t(e,n):i instanceof Fc&&(n=i.Wb,null!==n)?t(e,n):i}(this,this)},r.u(Ch,{dq:"isTopLevel"},function(){return!(null!==this.Da||this instanceof Fc&&null!==this.Wb)}),Ch.prototype.isMemberOf=Ch.prototype.oi=function(t){return t instanceof xf&&function t(e,i,n){if(i===n||null===n)return!1;var o=i.Da;return!(null===o||o!==n&&!t(e,o,n))||i instanceof Fc&&(i=i.Wb,null!==i)&&t(e,i,n)}(this,this,t)},Ch.prototype.findCommonContainingGroup=Ch.prototype.VH=function(t){if(null===t)return null;if(this===t)return this.Da;for(var e=this;null!==e;){if(e instanceof xf&&Nc(e,!0),e instanceof Fc){var i=e.Wb;null!==i&&(e=i)}e=e.Da}var n=null;for(e=t;null!==e;){if(0!=(1048576&e.O)){n=e;break}e instanceof Fc&&(null!==(i=e.Wb)&&(e=i)),e=e.Da}for(e=this;null!==e;)e instanceof xf&&Nc(e,!1),e instanceof Fc&&(null!==(i=e.Wb)&&(e=i)),e=e.Da;return n},r.defineProperty(Ch,{KI:"layoutConditions"},function(){return this.ds},function(t){var e=this.ds;e!==t&&(this.ds=t,this.h("layoutConditions",e,t))}),Ch.prototype.canLayout=function(){if(!this.EF||!this.isVisible())return!1;var t=this.layer;return!(null!==t&&t.Pc||this instanceof Fc&&this.Cf)},Ch.prototype.invalidateLayout=Ch.prototype.J=function(t){var e;if(void 0===t&&(t=16777215),this.EF&&0!=(t&this.KI)?null!==(e=this.layer)&&e.Pc||this instanceof Fc&&this.Cf?e=!1:e=null===(e=this.g)||!e.ja.lb:e=!1,e)if(null!==(e=this.fl)){var i=e.Sb;null!==i?i.J():e.J(t)}else null!==(t=this.g)&&(null!==(i=t.Sb)&&i.J())},r.defineProperty(Ch,{UE:"dragComputation"},function(){return this.vr},function(t){var e=this.vr;e!==t&&(null!==t&&r.j(t,"function",Ch,"dragComputation"),this.vr=t,this.h("dragComputation",e,t))}),r.defineProperty(Ch,{JJ:"shadowOffset"},function(){return this.cn},function(t){var e=this.cn;e.L(t)||(this.cn=t=t.S(),this.oa(),this.h("shadowOffset",e,t))}),r.defineProperty(Ch,{shadowColor:"shadowColor"},function(){return this.bn},function(t){var e=this.bn;e!==t&&(this.bn=t,this.oa(),this.h("shadowColor",e,t))}),r.defineProperty(Ch,{shadowBlur:"shadowBlur"},function(){return this.Eg},function(t){var e=this.Eg;e!==t&&(this.Eg=t,this.oa(),this.h("shadowBlur",e,t))}),r.La(Ac,Ch),r.ga("Adornment",Ac),Ac.prototype.toString=function(){var t=this.Xe;return"Adornment("+this.yd+")"+(null!==t?t.toString():"")},Ac.prototype.updateRelationshipsFromData=function(){},Ac.prototype.Bu=function(t){var e=this.tb.U,i=this.tb;if(e instanceof Rc&&i instanceof Ml){var n=e.path;i=n.of;for(e.Bu(t),i=n.of,e=(t=this.xa.n).length,n=0;n<e;n++){var o=t[n];o.ff&&o instanceof Ml&&(o.Sa=i)}}},r.u(Ac,{placeholder:"placeholder"},function(){return this.Lb}),r.defineProperty(Ac,{tb:"adornedObject"},function(){return this.Jc},function(t){var e=this.Xe,i=null;null!==t&&(i=t.U),null===e||null!==t&&e===i||e.Ej(this.yd),this.Jc=t,null!==i&&i.Hl(this.yd,this)}),r.u(Ac,{Xe:"adornedPart"},function(){var t=this.Jc;return null!==t?t.U:null}),Ac.prototype.bm=function(){var t=this.Jc;return null===t||(null===(t=t.U)||!Ds(t))},Ac.prototype.fe=function(){return!1},r.u(Ac,{Da:"containingGroup"},function(){return null}),Ac.prototype.Un=function(t,e,i,n,o,a,s){if(t===Yt&&"elements"===e)if(o instanceof Mf){var l=o;null===this.Lb?this.Lb=l:this.Lb!==l&&r.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")}else o instanceof Ys&&((l=o.Ut(function(t){return t instanceof Mf}))instanceof Mf&&(null===this.Lb?this.Lb=l:this.Lb!==l&&r.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")));else t===Xt&&"elements"===e&&null!==this.Lb&&(n===this.Lb?this.Lb=null:n instanceof Ys&&this.Lb.am(n)&&(this.Lb=null));Ch.prototype.Un.call(this,t,e,i,n,o,a,s)},Ac.prototype.updateAdornments=function(){},Ac.prototype.un=function(){},r.La(Fc,Ch),r.ga("Node",Fc),Fc.prototype.cloneProtected=function(t){Ch.prototype.cloneProtected.call(this,t),t.ya=this.ya,t.ya=-17&this.ya,t.es=this.es,t.fs=this.fs,t.ul=this.ul,t.zt=this.zt,t.Uq=this.Uq.S(),t.Ps=this.Ps},Fc.prototype.ni=function(t){Ch.prototype.ni.call(this,t),t.$f(),t.Kh=this.Kh,t.oe=null},Fc.DirectionDefault=Rh=r.p(Fc,"DirectionDefault",0),Fc.DirectionAbsolute=r.p(Fc,"DirectionAbsolute",1),Fc.DirectionRotatedNode=Gh=r.p(Fc,"DirectionRotatedNode",2),Fc.DirectionRotatedNodeOrthogonal=Vh=r.p(Fc,"DirectionRotatedNodeOrthogonal",3),Fc.SpreadingNone=r.p(Fc,"SpreadingNone",10),Fc.SpreadingEvenly=_h=r.p(Fc,"SpreadingEvenly",11),Fc.SpreadingPacked=Hh=r.p(Fc,"SpreadingPacked",12),Fc.prototype.invalidateLinkBundle=function(t,e,i){void 0!==e&&null!==e||(e=""),void 0!==i&&null!==i||(i=""),null!==(t=Lc(this,t,e,i))&&t.$p()},Fc.prototype.Un=function(t,e,i,n,o,r,a){t===Yt&&"elements"===e?this.oe=null:t===Xt&&"elements"===e&&(this.oe=null),Ch.prototype.Un.call(this,t,e,i,n,o,r,a)},Fc.prototype.invalidateConnectedLinks=Fc.prototype.$f=function(t){void 0===t&&(t=null);for(var e=this.he;e.next();){var i=e.value;null!==t&&t.contains(i)||(zc(this,i.lc),zc(this,i.Ic),i.Vb())}},Fc.prototype.bm=function(){return!0},r.defineProperty(Fc,{lJ:"portSpreading"},function(){return this.Ps},function(t){var e=this.Ps;e!==t&&(this.Ps=t,this.h("portSpreading",e,t),null!==(t=this.g)&&t.ja.lb||this.$f())}),r.defineProperty(Fc,{fA:"avoidable"},function(){return 0!=(8&this.ya)},function(t){var e=0!=(8&this.ya);if(e!==t){this.ya^=8;var i=this.g;null!==i&&i.MA(this),this.h("avoidable",e,t)}}),r.defineProperty(Fc,{rH:"avoidableMargin"},function(){return this.Uq},function(t){"number"==typeof t?t=new wt(t):r.G(t,wt,Fc,"avoidableMargin");var e=this.Uq;if(!e.L(t)){this.Uq=t=t.S();var i=this.g;null!==i&&i.MA(this),this.h("avoidableMargin",e,t)}}),Fc.prototype.getAvoidableRect=function(t){return t.set(this.Y),t.Zw(this.rH),t},Fc.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.isVisible();)t=t.Da;return t},Fc.prototype.isVisible=function(){if(!Ch.prototype.isVisible.call(this))return!1;var t=!0,e=Ko,i=this.g;if(null!==i){if((t=i.Ka).df&&(null!==(t=t.Rm.ka(this))&&t.iy))return!0;t=i.Ud,e=i.PB}if(e===Ko){if(null!==(i=this.Gk())&&!i.uc)return!1}else if(e===Wo){if(0<(i=t?this.aF():this.bF()).count&&i.all(function(t){return!t.uc}))return!1}else if(e===Uo&&(0<(i=t?this.aF():this.bF()).count&&i.any(function(t){return!t.uc})))return!1;return null===(i=this.Wb)||i.isVisible()},Fc.prototype.Cd=function(t){Ch.prototype.Cd.call(this,t);for(var e=this.he;e.next();)e.value.Cd(t)},r.u(Fc,{he:"linksConnected"},function(){return this.qc.i}),Fc.prototype.findLinksConnected=Fc.prototype.ZE=function(t){if(void 0===t&&(t=null),null===t)return this.qc.i;var e=new Z(this.qc),i=this;return e.qq=function(e){return e.W===i&&e.Ng===t||e.Z===i&&e.Hh===t},e},Fc.prototype.findLinksOutOf=Fc.prototype.zx=function(t){void 0===t&&(t=null);var e=new Z(this.qc),i=this;return e.qq=function(e){return e.W===i&&(null===t||e.Ng===t)},e},Fc.prototype.findLinksInto=Fc.prototype.Mg=function(t){void 0===t&&(t=null);var e=new Z(this.qc),i=this;return e.qq=function(e){return e.Z===i&&(null===t||e.Hh===t)},e},Fc.prototype.findNodesConnected=Fc.prototype.$E=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.qc.i;n.next();){var o=n.value;o.W===this?null!==t&&o.Ng!==t||(o=o.Z,null!==e?e.add(o):null!==i&&i!==o?((e=new nt(Fc)).add(i),e.add(o)):i=o):o.Z!==this||null!==t&&o.Hh!==t||(o=o.W,null!==e?e.add(o):null!==i&&i!==o?((e=new nt(Fc)).add(i),e.add(o)):i=o)}return null!==e?e.i:null!==i?new X(i):Y},Fc.prototype.findNodesOutOf=Fc.prototype.bF=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.qc.i;n.next();){var o=n.value;o.W!==this||null!==t&&o.Ng!==t||(o=o.Z,null!==e?e.add(o):null!==i&&i!==o?((e=new nt(Fc)).add(i),e.add(o)):i=o)}return null!==e?e.i:null!==i?new X(i):Y},Fc.prototype.findNodesInto=Fc.prototype.aF=function(t){void 0===t&&(t=null);for(var e=null,i=null,n=this.qc.i;n.next();){var o=n.value;o.Z!==this||null!==t&&o.Hh!==t||(o=o.W,null!==e?e.add(o):null!==i&&i!==o?((e=new nt(Fc)).add(i),e.add(o)):i=o)}return null!==e?e.i:null!==i?new X(i):Y},Fc.prototype.findLinksBetween=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=new Z(this.qc),o=this;return n.qq=function(n){return!(n.W!==o||n.Z!==t||null!==e&&n.Ng!==e||null!==i&&n.Hh!==i)||!(n.W!==t||n.Z!==o||null!==i&&n.Ng!==i||null!==e&&n.Hh!==e)},n},Fc.prototype.findLinksTo=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=new Z(this.qc),o=this;return n.qq=function(n){return!(n.W!==o||n.Z!==t||null!==e&&n.Ng!==e||null!==i&&n.Hh===i)},n},r.defineProperty(Fc,{LI:"linkConnected"},function(){return this.es},function(t){var e=this.es;e!==t&&(null!==t&&r.j(t,"function",Fc,"linkConnected"),this.es=t,this.h("linkConnected",e,t))}),r.defineProperty(Fc,{MI:"linkDisconnected"},function(){return this.fs},function(t){var e=this.fs;e!==t&&(null!==t&&r.j(t,"function",Fc,"linkDisconnected"),this.fs=t,this.h("linkDisconnected",e,t))}),r.defineProperty(Fc,{Sx:"linkValidation"},function(){return this.ul},function(t){var e=this.ul;e!==t&&(null!==t&&r.j(t,"function",Fc,"linkValidation"),this.ul=t,this.h("linkValidation",e,t))}),Fc.prototype.updateRelationshipsFromData=function(){Ch.prototype.updateRelationshipsFromData.call(this);var t=this.data;if(null!==t){var e=this.g;if(null!==e){var i=e.$;i instanceof Li&&(t=i.An(t),(t=e.Ke(t))!==(i=this.Gk())&&(i=this.wn(),null!==t?null!==i?e.Ud?i.W=t:i.Z=t:Yr(e,t,this):null!==i&&Dr(e,i,!1)))}}},Fc.prototype.ju=function(t){Ch.prototype.ju.call(this,t),t||(Oc(this),null!==(t=this.Ro)&&Vc(t,this))},Fc.prototype.ku=function(t){Ch.prototype.ku.call(this,t),t||null!==(t=this.Ro)&&null!==t.xf&&(t.xf.remove(this),t.H())},Fc.prototype.un=function(){if(0<this.qc.count){var t=this.g;if(null!==t)for(var e=t.pb.TE,i=this.qc.copy().i;i.next();){var n=i.value;e?t.remove(n):(n.W===this&&(n.W=null),n.Z===this&&(n.Z=null))}}this.Wb=null,Ch.prototype.un.call(this)},r.u(Fc,{Cf:"isLinkLabel"},function(){return null!==this.Ro}),r.defineProperty(Fc,{Wb:"labeledLink"},function(){return this.Ro},function(t){var e=this.Ro;if(e!==t){var i=this.g,n=this.data;if(null!==e){if(null!==e.xf&&(e.xf.remove(this),e.H()),null!==i&&null!==n&&!i.ja.lb){var o=e.data,r=i.$;if(null!==o&&r instanceof Ci){var a=r.qb(n);void 0!==a&&r.qJ(o,a)}}this.Da=null}this.Ro=t,null!==t&&(Vc(t,this),null===i||null===n||i.ja.lb||(o=t.data,r=i.$,null!==o&&r instanceof Ci&&(void 0!==(a=r.qb(n))&&r.vE(o,a))),this.Da=t.Da),xs(this),this.h("labeledLink",e,t)}}),Fc.prototype.findPort=Fc.prototype.yA=function(t){if(null===this.oe){if(""===t&&!1===this.Kk)return this;Ec(this)}var e=this.oe.ka(t);return null!==e||""!==t&&null!==(e=this.oe.ka(""))?e:this},r.u(Fc,{port:"port"},function(){return this.yA("")}),r.u(Fc,{ports:"ports"},function(){return null===this.oe&&Ec(this),this.oe.JF}),Fc.prototype.isInTreeOf=function(t){if(null===t||t===this)return!1;var e=!0,i=this.g;if(null!==i&&(e=i.Ud),i=this,e)for(;i!==t;){e=null;for(var n=i.qc.i;n.next();){var o=n.value;if(o.bc&&((e=o.W)!==i&&e!==this))break}if(e===this||null===e||e===i)return!1;i=e}else for(;i!==t;){for(e=null,n=i.qc.i;n.next()&&(!(o=n.value).bc||((e=o.Z)===i||e===this)););if(e===this||null===e||e===i)return!1;i=e}return!0},Fc.prototype.findTreeRoot=function(){var t=!0,e=this.g;if(null!==e&&(t=e.Ud),e=this,t)for(;;){t=null;for(var i=e.qc.i;i.next();){var n=i.value;if(n.bc&&((t=n.W)!==e&&t!==this))break}if(t===this)return this;if(null===t||t===e)return e;e=t}else for(;;){for(t=null,i=e.qc.i;i.next()&&(!(n=i.value).bc||((t=n.Z)===e||t===this)););if(t===this)return this;if(null===t||t===e)return e;e=t}},Fc.prototype.findCommonTreeParent=function(t){if(null===t)return null;if(this===t)return this;for(var e=this;null!==e;)Nc(e,!0),e=e.Gk();var i=null;for(e=t;null!==e;){if(0!=(1048576&e.O)){i=e;break}e=e.Gk()}for(e=this;null!==e;)Nc(e,!1),e=e.Gk();return i},Fc.prototype.findTreeParentLink=Fc.prototype.wn=function(){var t=!0,e=this.g;if(null!==e&&(t=e.Ud),e=this.qc.i,t){for(;e.next();)if((t=e.value).bc&&t.W!==this)return t}else for(;e.next();)if((t=e.value).bc&&t.Z!==this)return t;return null},Fc.prototype.findTreeParentNode=Fc.prototype.Gk=function(){if(null===(t=this.vk))return null;if(t instanceof Fc)return t;var t,e=!0;if(null!==(t=this.g)&&(e=t.Ud),t=this.qc.i,e){for(;t.next();)if((e=t.value).bc&&(e=e.W)!==this)return this.vk=e}else for(;t.next();)if((e=t.value).bc&&(e=e.Z)!==this)return this.vk=e;return this.vk=null},Fc.prototype.findTreeParentChain=function(){var t=new nt(Ch);return function t(e,i){if(null!==e){i.add(e);var n=e.wn();null!==n&&(i.add(n),t(e.Gk(),i))}}(this,t),t},Fc.prototype.findTreeLevel=function(){return function t(e,i){var n=i.Gk();return null===n?0:1+t(e,n)}(this,this)},Fc.prototype.findTreeChildrenLinks=Fc.prototype.Bx=function(){var t=!0;null!==(e=this.g)&&(t=e.Ud);var e,i=this;return(e=new Z(this.qc)).qq=t?function(t){return!(!t.bc||t.W!==i)}:function(t){return!(!t.bc||t.Z!==i)},e},Fc.prototype.findTreeChildrenNodes=Fc.prototype.dF=function(){var t=!0,e=this.g;null!==e&&(t=e.Ud);var i=e=null,n=this.qc.i;if(t)for(;n.next();)(t=n.value).bc&&t.W===this&&(t=t.Z,null!==e?e.add(t):null!==i&&i!==t?((e=new et(Fc)).add(i),e.add(t)):i=t);else for(;n.next();)(t=n.value).bc&&t.Z===this&&(t=t.W,null!==e?e.add(t):null!==i&&i!==t?((e=new et(Fc)).add(i),e.add(t)):i=t);return null!==e?e.i:null!==i?new X(i):Y},Fc.prototype.findTreeParts=function(t){void 0===t&&(t=1/0),r.j(t,"number",Fc,"findTreeParts:level");var e=new nt(Ch);return Gi(e,this,!1,t,!0),e},Fc.prototype.collapseTree=Fc.prototype.collapseTree=function(t){void 0===t&&(t=1),r.zd(t,Fc,"collapseTree:level"),1>t&&(t=1);var e=this.g;if(null!==e&&!e.xh){e.xh=!0;var i=new nt(Fc);i.add(this),function t(e,i,n,o,r,a,s){if(1<o)for(var l=n?e.zx():e.Mg();l.next();){var h=l.value;h.bc&&(null===(h=h.DA(e))||h===e||i.contains(h)||(i.add(h),t(h,i,n,o-1,r,a,s)))}else!function t(e,i,n,o,r,a){for(var s=r===e||e.uc,l=n?e.zx():e.Mg();l.next();){var h=l.value;h.bc&&(null===(h=h.DA(e))||h===e||i.contains(h)||(i.add(h),s&&(a&&Fo(o,h,r),h.Lk(),h.Cd(!1)),h.uc&&(h.Fq=h.uc,t(h,i,n,o,r,a))))}e.uc=!1}(e,i,n,r,a,s)}(this,i,e.Ud,t,e.Ka,this,e.PB===Ko),e.xh=!1}},Fc.prototype.expandTree=Fc.prototype.expandTree=function(t){void 0===t&&(t=2),r.zd(t,Fc,"expandTree:level"),2>t&&(t=2);var e=this.g;if(null!==e&&!e.xh){e.xh=!0;var i=new nt(Fc);i.add(this),function t(e,i,n,o,r,a,s){for(var l=a!==e&&e.uc,h=n?e.zx():e.Mg();h.next();){var u=h.value;u.bc&&(l||u.Mf||u.Vb(),null!==(u=u.DA(e))&&u!==e&&!i.contains(u)&&(i.add(u),l||(u.Cd(!0),u.Lk(),s&&Ao(r,u,a)),2<o||u.Fq))&&(u.Fq=!1,t(u,i,n,o-1,r,a,s))}e.uc=!0}(this,i,e.Ud,t,e.Ka,this,e.PB===Ko),e.xh=!1}},r.defineProperty(Fc,{uc:"isTreeExpanded"},function(){return 0!=(1&this.ya)},function(t){var e=0!=(1&this.ya);if(e!==t){this.ya^=1;var i=this.g;if(this.h("isTreeExpanded",e,t),null!==(e=this.XJ)){var n=!0;null!==i&&(n=i.Ua,i.Ua=!0),e(this),null!==i&&(i.Ua=n)}null!==i&&i.ja.lb?this.Cd(t):t?this.expandTree():this.collapseTree()}}),r.defineProperty(Fc,{Fq:"wasTreeExpanded"},function(){return 0!=(2&this.ya)},function(t){var e=0!=(2&this.ya);e!==t&&(this.ya^=2,this.h("wasTreeExpanded",e,t))}),r.defineProperty(Fc,{XJ:"treeExpandedChanged"},function(){return this.zt},function(t){var e=this.zt;e!==t&&(null!==t&&r.j(t,"function",Fc,"treeExpandedChanged"),this.zt=t,this.h("treeExpandedChanged",e,t))}),r.defineProperty(Fc,{zj:"isTreeLeaf"},function(){return 0!=(4&this.ya)},function(t){var e=0!=(4&this.ya);e!==t&&(this.ya^=4,this.h("isTreeLeaf",e,t))}),r.La(Rc,Ch),r.ga("Link",Rc),Rc.prototype.cloneProtected=function(t){Ch.prototype.cloneProtected.call(this,t),t.Zb=-113&this.Zb,t.Qh=this.Qh,t.Fr=this.Fr,t.ki=this.ki,t.yt=this.yt,t.Mq=this.Mq,t.gr=this.gr,t.jr=this.jr,t.kr=this.kr,t.Wm=this.Wm,t.nt=this.nt,null!==this.V&&(t.V=this.V.copy())},Rc.prototype.ni=function(t){Ch.prototype.ni.call(this,t),this.Qh=t.Qh,this.ki=t.ki,t.Ve=null,t.Vb(),t.xi=this.xi},Rc.prototype.hc=function(t){t.Ge===Rc?2==(2&t.value)?this.ny=t:t===Jh||t===$h||t===Yh?this.$e=t:t===Xh||t===Qh||t===Zh?this.Cp=t:t!==Kh&&t!==Uh&&r.k("Unknown Link enum value for a Link property: "+t):Ch.prototype.hc.call(this,t)},Rc.Normal=Kh=r.p(Rc,"Normal",1),Rc.Orthogonal=r.p(Rc,"Orthogonal",2),Rc.AvoidsNodes=r.p(Rc,"AvoidsNodes",6),Rc.AvoidsNodesStraight=Wh=r.p(Rc,"AvoidsNodesStraight",7),Rc.None=Uh=r.p(Rc,"None",0),Rc.Bezier=Jh=r.p(Rc,"Bezier",9),Rc.JumpGap=$h=r.p(Rc,"JumpGap",10),Rc.JumpOver=Yh=r.p(Rc,"JumpOver",11),Rc.End=Xh=r.p(Rc,"End",17),Rc.Scale=Qh=r.p(Rc,"Scale",18),Rc.Stretch=Zh=r.p(Rc,"Stretch",19),Rc.OrientAlong=tu=r.p(Rc,"OrientAlong",21),Rc.OrientPlus90=eu=r.p(Rc,"OrientPlus90",22),Rc.OrientMinus90=iu=r.p(Rc,"OrientMinus90",23),Rc.OrientOpposite=nu=r.p(Rc,"OrientOpposite",24),Rc.OrientUpright=ou=r.p(Rc,"OrientUpright",25),Rc.OrientPlus90Upright=ru=r.p(Rc,"OrientPlus90Upright",26),Rc.OrientMinus90Upright=au=r.p(Rc,"OrientMinus90Upright",27),Rc.OrientUpright45=su=r.p(Rc,"OrientUpright45",28),(i=Rc.prototype).Qd=function(){null===this.V&&(this.V=new bf)},i.bm=function(){var t=this.W;if(null!==t){var e=t.findVisibleNode();if(null!==e&&(t=e),Ds(t)||Mc(t))return!1}return null===(t=this.Z)||(null!==(e=t.findVisibleNode())&&(t=e),!Ds(t)&&!Mc(t))},i.AB=function(){return!1},i.BB=function(){},i.fe=function(){return!1},Rc.prototype.computeAngle=function(t,e,i){return Rc.computeAngle(e,i)},Rc.computeAngle=function(t,e){var i=0;switch(t){default:case Uh:i=0;break;case tu:i=e;break;case eu:i=e+90;break;case iu:i=e-90;break;case nu:i=e+180;break;case ou:90<(i=Re(e))&&270>i&&(i-=180);break;case ru:90<(i=Re(e+90))&&270>i&&(i-=180);break;case au:90<(i=Re(e-90))&&270>i&&(i-=180);break;case su:if(45<(i=Re(e))&&135>i||225<i&&315>i)return 0;90<i&&270>i&&(i-=180)}return Re(i)},r.defineProperty(Rc,{W:"fromNode"},function(){return this.rg},function(t){var e=this.rg;if(e!==t){var i=this.lc;null!==e&&(this.Hg!==e&&Ic(e,this,i),of(this),this.J(Mh)),this.rg=t,null!==t&&this.Cd(t.isVisible()),this.Ki=null,this.Vb();var n=this.g;if(null!==n){var o=this.data,r=n.$;if(null!==o)if(r instanceof Ci){var a=null!==t?t.data:null;r.wB(o,r.qb(a))}else r instanceof Li&&(a=null!==t?t.data:null,n.Ud?r.ri(o,r.qb(a)):(null!==e&&r.ri(e.data,void 0),r.ri(a,r.qb(null!==this.Hg?this.Hg.data:null))))}o=this.lc,null!==(r=this.gF)&&(a=!0,null!==n&&(a=n.Ua,n.Ua=!0),r(this,i,o),null!==n&&(n.Ua=a)),null!==t&&(this.Hg!==t&&Bc(t,this,o),nf(this),this.J(kh)),this.h("fromNode",e,t),Gc(this)}}),r.defineProperty(Rc,{Ng:"fromPortId"},function(){return this.Qh},function(t){var e=this.Qh;if(e!==t){var i=this.W,n=this.lc;null!==n&&zc(i,n),of(this),this.Qh=t;var o=this.lc;if(null!==o&&zc(i,o),null!==(i=this.g)){var r=this.data,a=i.$;null!==r&&a instanceof Ci&&a.xB(r,t)}n!==o&&(this.Ki=null,this.Vb(),null!==(r=this.gF)&&(a=!0,null!==i&&(a=i.Ua,i.Ua=!0),r(this,n,o),null!==i&&(i.Ua=a))),nf(this),this.h("fromPortId",e,t)}}),r.u(Rc,{lc:"fromPort"},function(){var t=this.rg;return null===t?null:t.yA(this.Qh)}),r.defineProperty(Rc,{gF:"fromPortChanged"},function(){return this.Fr},function(t){var e=this.Fr;e!==t&&(null!==t&&r.j(t,"function",Rc,"fromPortChanged"),this.Fr=t,this.h("fromPortChanged",e,t))}),r.defineProperty(Rc,{Z:"toNode"},function(){return this.Hg},function(t){var e=this.Hg;if(e!==t){var i=this.Ic;null!==e&&(this.rg!==e&&Ic(e,this,i),of(this),this.J(Mh)),this.Hg=t,null!==t&&this.Cd(t.isVisible()),this.Ki=null,this.Vb();var n=this.g;if(null!==n){var o=this.data,r=n.$;if(null!==o)if(r instanceof Ci){var a=null!==t?t.data:null;r.CB(o,r.qb(a))}else r instanceof Li&&(a=null!==t?t.data:null,n.Ud?(null!==e&&r.ri(e.data,void 0),r.ri(a,r.qb(null!==this.rg?this.rg.data:null))):r.ri(o,r.qb(a)))}o=this.Ic,null!==(r=this.BG)&&(a=!0,null!==n&&(a=n.Ua,n.Ua=!0),r(this,i,o),null!==n&&(n.Ua=a)),null!==t&&(this.rg!==t&&Bc(t,this,o),nf(this),this.J(kh)),this.h("toNode",e,t),Gc(this)}}),r.defineProperty(Rc,{Hh:"toPortId"},function(){return this.ki},function(t){var e=this.ki;if(e!==t){var i=this.Z,n=this.Ic;null!==n&&zc(i,n),of(this),this.ki=t;var o=this.Ic;if(null!==o&&zc(i,o),null!==(i=this.g)){var r=this.data,a=i.$;null!==r&&a instanceof Ci&&a.DB(r,t)}n!==o&&(this.Ki=null,this.Vb(),null!==(r=this.BG)&&(a=!0,null!==i&&(a=i.Ua,i.Ua=!0),r(this,n,o),null!==i&&(i.Ua=a))),nf(this),this.h("toPortId",e,t)}}),r.u(Rc,{Ic:"toPort"},function(){var t=this.Hg;return null===t?null:t.yA(this.ki)}),r.defineProperty(Rc,{BG:"toPortChanged"},function(){return this.yt},function(t){var e=this.yt;e!==t&&(null!==t&&r.j(t,"function",Rc,"toPortChanged"),this.yt=t,this.h("toPortChanged",e,t))}),r.defineProperty(Rc,{Ab:"fromSpot"},function(){return null!==this.V?this.V.Wj:m},function(t){this.Qd();var e=this.V.Wj;e.L(t)||(t=t.S(),this.V.Wj=t,this.h("fromSpot",e,t),this.Vb())}),r.defineProperty(Rc,{Ul:"fromEndSegmentLength"},function(){return null!==this.V?this.V.Uj:NaN},function(t){this.Qd();var e=this.V.Uj;e!==t&&(0>t&&r.Fa(t,">= 0",Rc,"fromEndSegmentLength"),this.V.Uj=t,this.h("fromEndSegmentLength",e,t),this.Vb())}),r.defineProperty(Rc,{du:"fromEndSegmentDirection"},function(){return null!==this.V?this.V.Tj:Rh},function(t){this.Qd();var e=this.V.Tj;e!==t&&(r.Qt("Link.fromEndSegmentDirection","2.0"),this.V.Tj=t,this.h("fromEndSegmentDirection",e,t),this.Vb())}),r.defineProperty(Rc,{eu:"fromShortLength"},function(){return null!==this.V?this.V.Vj:NaN},function(t){this.Qd();var e=this.V.Vj;e!==t&&(this.V.Vj=t,this.h("fromShortLength",e,t),this.Vb())}),r.defineProperty(Rc,{Bb:"toSpot"},function(){return null!==this.V?this.V.uk:m},function(t){this.Qd();var e=this.V.uk;e.L(t)||(t=t.S(),this.V.uk=t,this.h("toSpot",e,t),this.Vb())}),r.defineProperty(Rc,{nm:"toEndSegmentLength"},function(){return null!==this.V?this.V.sk:NaN},function(t){this.Qd();var e=this.V.sk;e!==t&&(0>t&&r.Fa(t,">= 0",Rc,"toEndSegmentLength"),this.V.sk=t,this.h("toEndSegmentLength",e,t),this.Vb())}),r.defineProperty(Rc,{av:"toEndSegmentDirection"},function(){return null!==this.V?this.V.rk:Rh},function(t){this.Qd();var e=this.V.rk;e!==t&&(r.Qt("Link.toEndSegmentDirection","2.0"),this.V.rk=t,this.h("toEndSegmentDirection",e,t),this.Vb())}),r.defineProperty(Rc,{bv:"toShortLength"},function(){return null!==this.V?this.V.tk:NaN},function(t){this.Qd();var e=this.V.tk;e!==t&&(this.V.tk=t,this.h("toShortLength",e,t),this.Vb())}),Rc.prototype.Lk=function(){var t=this.Da;null!==t&&this.W!==t&&this.Z!==t&&t.lx&&Ch.prototype.Lk.call(this)},Rc.prototype.getOtherNode=Rc.prototype.DA=function(t){var e=this.W;return t===e?this.Z:e},Rc.prototype.getOtherPort=function(t){var e=this.lc;return t===e?this.Ic:e},r.u(Rc,{zI:"isLabeledLink"},function(){return null!==this.xf&&0<this.xf.count}),r.u(Rc,{Ef:"labelNodes"},function(){return null===this.xf?Y:this.xf.i}),Rc.prototype.ju=function(t){if(Ch.prototype.ju.call(this,t),Qc(this)&&tf(this,this.Y),!t){var e=null;null!==(t=this.rg)&&Bc(t,this,e=this.lc);var i=this.Hg,n=null;null!==i&&(n=this.Ic,i===t&&n===e||Bc(i,this,n)),nf(this)}},Rc.prototype.ku=function(t){if(Ch.prototype.ku.call(this,t),Qc(this)&&tf(this,this.Y),!t){var e=null;null!==(t=this.rg)&&Ic(t,this,e=this.lc);var i=this.Hg,n=null;null!==i&&(n=this.Ic,i===t&&n===e||Ic(i,this,n)),of(this)}},Rc.prototype.un=function(){if(this.Mf=!0,null!==this.xf){var t=this.g;if(null!==t)for(var e=this.xf.copy().i;e.next();)t.remove(e.value)}null!==(e=this.data)&&(null!==(t=this.g)&&((t=t.$)instanceof Ci?t.ky(e):t instanceof Li&&t.ri(e,void 0)))},Rc.prototype.updateRelationshipsFromData=function(){var t=this.data;if(null!==t){var e=this.g;if(null!==e){var i=e.$;if(i instanceof Ci){var n=i.Wl(t);if(this.W=n=e.Ke(n),n=i.Xl(t),this.Z=n=e.Ke(n),0<(t=i.Ik(t)).length||0<this.Ef.count){if(1===t.length&&1===this.Ef.count){n=t[0];var o=this.Ef.first();if(i.qb(o.data)===n)return}n=(new nt).Nc(t);var r=new nt;if(this.Ef.each(function(t){null!==t.data&&(void 0!==(t=i.qb(t.data))&&r.add(t))}),(t=r.copy()).jy(n),(n=n.copy()).jy(r),0<t.count||0<n.count){var a=this;t.each(function(t){null!==(t=e.Ke(t))&&t.Wb===a&&(t.Wb=null)}),n.each(function(t){null!==(t=e.Ke(t))&&t.Wb!==a&&(t.Wb=a)})}}}}}},Rc.prototype.move=function(t){var e=this.position,i=e.x;for(isNaN(i)&&(i=0),e=e.y,isNaN(e)&&(e=0),i=t.x-i,e=t.y-e,Ch.prototype.move.call(this,t),this.Nk(i,e),t=this.Ef;t.next();){var n=t.value,o=n.position;n.moveTo(o.x+i,o.y+e)}},r.defineProperty(Rc,{oJ:"relinkableFrom"},function(){return 0!=(1&this.Zb)},function(t){var e=0!=(1&this.Zb);e!==t&&(this.Zb^=1,this.h("relinkableFrom",e,t),this.ee())}),r.defineProperty(Rc,{pJ:"relinkableTo"},function(){return 0!=(2&this.Zb)},function(t){var e=0!=(2&this.Zb);e!==t&&(this.Zb^=2,this.h("relinkableTo",e,t),this.ee())}),Rc.prototype.canRelinkFrom=function(){if(!this.oJ)return!1;var t=this.layer;return null===t||!!t.jn&&!(null!==(t=t.g)&&!t.jn)},Rc.prototype.canRelinkTo=function(){if(!this.pJ)return!1;var t=this.layer;return null===t||!!t.jn&&!(null!==(t=t.g)&&!t.jn)},r.defineProperty(Rc,{Qu:"resegmentable"},function(){return 0!=(4&this.Zb)},function(t){var e=0!=(4&this.Zb);e!==t&&(this.Zb^=4,this.h("resegmentable",e,t),this.ee())}),r.defineProperty(Rc,{bc:"isTreeLink"},function(){return 0!=(8&this.Zb)},function(t){var e=0!=(8&this.Zb);e!==t&&(this.Zb^=8,this.h("isTreeLink",e,t),null!==this.W&&Oc(this.W),null!==this.Z&&Oc(this.Z))}),r.u(Rc,{path:"path"},function(){var t=this.Ad();return t instanceof Ml?t:null}),r.u(Rc,{Vn:"routeBounds"},function(){this.ao();var t=new pt,e=1/0,i=1/0,n=this.qa;if(0===n)t.m(NaN,NaN,0,0);else{if(1===n)n=this.l(0),e=Math.min(n.x,e),i=Math.min(n.y,i),t.m(n.x,n.y,0,0);else if(2===n){var o=this.l(0),r=this.l(1);e=Math.min(o.x,r.x),i=Math.min(o.y,r.y);t.m(o.x,o.y,0,0),t.vi(r)}else if(this.computeCurve()===Jh&&3<=n&&!this.ac)if(e=(o=this.l(0)).x,i=o.y,t.m(e,i,0,0),3===n)n=this.l(1),e=Math.min(n.x,e),i=Math.min(n.y,i),r=this.l(2),e=Math.min(r.x,e),i=Math.min(r.y,i),Te(o.x,o.y,n.x,n.y,n.x,n.y,r.x,r.y,.5,t);else for(var a=3;a<n;a+=3){var s=this.l(a-2);a+3>=n&&(a=n-1);var l=this.l(a-1);r=this.l(a);Te(o.x,o.y,s.x,s.y,l.x,l.y,r.x,r.y,.5,t),e=Math.min(r.x,e),i=Math.min(r.y,i),o=r}else for(o=this.l(0),r=this.l(1),e=Math.min(o.x,r.x),i=Math.min(o.y,r.y),t.m(o.x,o.y,0,0),t.vi(r),a=2;a<n;a++)o=this.l(a),e=Math.min(o.x,e),i=Math.min(o.y,i),t.vi(o);this.Tz.m(e-t.x,i-t.y)}return this.Aw=t}),r.u(Rc,{PF:"midPoint"},function(){return this.ao(),this.computeMidPoint(new ut)}),Rc.prototype.computeMidPoint=function(t){if(0===(a=this.qa))return t.assign(fe),t;if(1===a)return t.assign(this.l(0)),t;if(2===a){var e=this.l(0),i=this.l(1);return t.m((e.x+i.x)/2,(e.y+i.y)/2),t}if(this.computeCurve()===Jh&&3<=a&&!this.ac){if(3===a)return this.l(1);var n=3*((e=(a-1)/3|0)/2|0);if(1==e%2){e=this.l(n),i=this.l(n+1);var o=this.l(n+2),a=(n=this.l(n+3),i.x),s=i.y,l=(i=o.x,o.y),h=(o=(a+i)/2,(s+l)/2);s=((e.y+s)/2+h)/2,l=(h+(l+n.y)/2)/2;t.x=(((e.x+a)/2+o)/2+(o+(i+n.x)/2)/2)/2,t.y=(s+l)/2}else t.assign(this.l(n));return t}for(n=0,o=r.eb(),s=0;s<a-1;s++)e=0,e=this.l(s),i=this.l(s+1),ke(e.x,i.x)?0>(e=i.y-e.y)&&(e=-e):ke(e.y,i.y)?0>(e=i.x-e.x)&&(e=-e):e=Math.sqrt(e.Bf(i)),o.push(e),n+=e;for(i=s=e=0;e<n/2&&s<a&&!(e+(i=o[s])>n/2);)e+=i,s++;return r.ta(o),a=this.l(s),o=this.l(s+1),a.x===o.x?a.y>o.y?t.m(a.x,a.y-(n/2-e)):t.m(a.x,a.y+(n/2-e)):a.y===o.y?a.x>o.x?t.m(a.x-(n/2-e),a.y):t.m(a.x+(n/2-e),a.y):(e=(n/2-e)/i,t.m(a.x+e*(o.x-a.x),a.y+e*(o.y-a.y))),t},r.u(Rc,{OF:"midAngle"},function(){return this.ao(),this.computeMidAngle()}),Rc.prototype.computeMidAngle=function(){if(2>(n=this.qa))return NaN;if(this.computeCurve()===Jh&&4<=n&&!this.ac){var t=3*((e=(n-1)/3|0)/2|0);if(1==e%2){t=Math.floor(t);var e=this.l(t),i=this.l(t+1),n=this.l(t+2),o=(t=this.l(t+3),i.x),r=(i=i.y,n.x),a=(o+r)/2,s=(i+(n=n.y))/2;return d(((e.x+o)/2+a)/2,((e.y+i)/2+s)/2,(a+(r+t.x)/2)/2,(s+(n+t.y)/2)/2)}if(0<t&&t+1<n)return e=this.l(t-1),i=this.l(t+1),e.Pb(i)}return t=n/2|0,0==n%2?(e=this.l(t-1),i=this.l(t),4<=n&&e.Oc(i)?(e=this.l(t-2),n=this.l(t+1),(t=e.Bf(i))>(o=i.Bf(n))+10?e.Pb(i):o>t+10?i.Pb(n):e.Pb(n)):null===this.Sa||this.ac?e.Pb(i):this.Sa.hF(.5)):null===this.Sa||this.ac?(e=this.l(t-1),i=this.l(t),n=this.l(t+1),(t=e.Bf(i))>(o=i.Bf(n))+10?e.Pb(i):o>t+10?i.Pb(n):e.Pb(n)):this.Sa.hF(.5)},r.defineProperty(Rc,{points:"points"},function(){return this.hd},function(t){var e=this.hd;if(e!==t){var i=null;if(Array.isArray(t)){var n=0==t.length%2;if(n)for(var o=0;o<t.length;o++)if("number"!=typeof t[o]||isNaN(t[o])){n=!1;break}if(n)for(i=new et(ut),n=0;n<t.length/2;n++)o=new ut(t[2*n],t[2*n+1]).freeze(),i.add(o);else{for(o=!0,n=0;n<t.length;n++){var a=t[n];if(!r.Pa(a)||"number"!=typeof a.x||isNaN(a.x)||"number"!=typeof a.y||isNaN(a.y)){o=!1;break}}if(o)for(i=new et(ut),n=0;n<t.length;n++)o=t[n],i.add(new ut(o.x,o.y).freeze());else r.k("Link.points array must contain only an even number of numbers or objects with x and y properties, not: "+t)}}else if(t instanceof et)for(t=(i=t.copy()).i;t.next();)t.value.freeze();else r.k("Link.points value is not an instance of List or Array: "+t);i.freeze(),this.hd=i,this.Me(),this.H(),_c(this),null!==(t=this.g)&&(t.Fn||t.ja.lb||t.Tx.add(this),t.Ka.rc&&(this.ip=i)),this.h("points",e,i)}}),r.u(Rc,{qa:"pointsCount"},function(){return this.hd.count}),Rc.prototype.getPoint=Rc.prototype.l=function(t){return this.hd.n[t]},Rc.prototype.setPoint=Rc.prototype.Vg=function(t,e){null===this.Ve&&r.k("Call Link.startRoute before modifying the points of the route."),this.hd.kg(t,e)},Rc.prototype.setPointAt=Rc.prototype.ca=function(t,e,i){null===this.Ve&&r.k("Call Link.startRoute before modifying the points of the route."),this.hd.kg(t,new ut(e,i))},Rc.prototype.insertPoint=function(t,e){null===this.Ve&&r.k("Call Link.startRoute before modifying the points of the route."),this.hd.Rd(t,e)},Rc.prototype.insertPointAt=Rc.prototype.w=function(t,e,i){null===this.Ve&&r.k("Call Link.startRoute before modifying the points of the route."),this.hd.Rd(t,new ut(e,i))},Rc.prototype.addPoint=Rc.prototype.li=function(t){null===this.Ve&&r.k("Call Link.startRoute before modifying the points of the route."),this.hd.add(t)},Rc.prototype.addPointAt=Rc.prototype.lj=function(t,e){null===this.Ve&&r.k("Call Link.startRoute before modifying the points of the route."),this.hd.add(new ut(t,e))},Rc.prototype.removePoint=Rc.prototype.bG=function(t){null===this.Ve&&r.k("Call Link.startRoute before modifying the points of the route."),this.hd.dd(t)},Rc.prototype.clearPoints=Rc.prototype.Ip=function(){null===this.Ve&&r.k("Call Link.startRoute before modifying the points of the route."),this.hd.clear()},Rc.prototype.movePoints=Rc.prototype.Nk=function(t,e){if(0!==t||0!==e){for(var i=this.Mf,n=new et(ut),o=this.hd.i;o.next();){var r=o.value;n.add(new ut(r.x+t,r.y+e).freeze())}n.freeze(),o=this.hd,this.hd=n,this.H(),i&&_c(this),null!==(i=this.g)&&i.Ka.rc&&(this.ip=n),this.h("points",o,n)}},Rc.prototype.startRoute=Rc.prototype.jm=function(){null===this.Ve&&(this.Ve=this.hd,this.hd=this.hd.copy())},Rc.prototype.commitRoute=Rc.prototype.nj=function(){if(null!==this.Ve){for(var t=this.Ve,e=this.hd,i=1/0,n=1/0,o=t.n,r=o.length,a=0;a<r;a++){var s=o[a];i=Math.min(s.x,i),n=Math.min(s.y,n)}var l=1/0,h=1/0,u=e.n,c=u.length;for(a=0;a<c;a++)s=u[a],l=Math.min(s.x,l),h=Math.min(s.y,h),s.freeze();if(e.freeze(),c===r){for(a=0;a<c;a++)if(r=o[a],s=u[a],r.x-i!=s.x-l||r.y-n!=s.y-h){this.H(),this.Me();break}}else this.H(),this.Me();this.Ve=null,null!==(i=this.g)&&i.Ka.rc&&(this.ip=e),_c(this),this.h("points",t,e)}},Rc.prototype.rollbackRoute=Rc.prototype.vJ=function(){null!==this.Ve&&(this.hd=this.Ve,this.Ve=null)},Rc.prototype.invalidateRoute=Rc.prototype.Vb=function(){if(!this.si){var t=this.g;t&&(t.Tx.contains(this)||t.ja.lb||t.Ka.FI&&!t.Ka.df)||null!==(t=this.path)&&(this.Mf=!1,this.H(),t.H())}},r.defineProperty(Rc,{Mf:null},function(){return 0!=(16&this.Zb)},function(t){0!=(16&this.Zb)!==t&&(this.Zb^=16)}),r.defineProperty(Rc,{si:"suspendsRouting"},function(){return 0!=(32&this.Zb)},function(t){0!=(32&this.Zb)!==t&&(this.Zb^=32)}),r.defineProperty(Rc,{jA:null},function(){return 0!=(64&this.Zb)},function(t){0!=(64&this.Zb)!==t&&(this.Zb^=64)}),r.defineProperty(Rc,{Np:"defaultFromPoint"},function(){return this.FC},function(t){this.FC=t.copy()}),r.defineProperty(Rc,{Op:"defaultToPoint"},function(){return this.LC},function(t){this.LC=t.copy()}),Rc.prototype.updateRoute=Rc.prototype.ao=function(){if(!this.Mf&&!this.jA){var t=!0;try{this.jA=!0,this.jm(),t=this.computePoints()}finally{this.jA=!1,t?this.nj():this.vJ()}}},Rc.prototype.computePoints=function(){if(null===(s=this.g))return!1;var t=this.W,e=null;(null===t?(s.zl||(s.Ys=new Ml,s.Ys.Ca=ae,s.Ys.mb=0,s.zl=new Fc,s.zl.add(s.Ys),s.zl.af()),this.Np&&(s.zl.position=s.zl.location=this.Np,s.zl.af(),t=s.zl,e=s.Ys)):e=this.lc,null===e||t.isVisible())||(null!==(a=t.findVisibleNode())&&a!==t?(t=a,e=a.port):t=a);if(this.$D=t,null===t||!t.location.I())return!1;for(;!(null===e||e.Y.I()&&e.Aj());)e=e.Q;if(null===e)return!1;var i=this.Z,n=null;if(null===i?(s.Al||(s.Zs=new Ml,s.Zs.Ca=ae,s.Zs.mb=0,s.Al=new Fc,s.Al.add(s.Zs),s.Al.af()),this.Op&&(s.Al.position=s.Al.location=this.Op,s.Al.af(),i=s.Al,n=s.Zs)):n=this.Ic,null===n||i.isVisible()||(null!==(s=i.findVisibleNode())&&s!==i?(i=s,n=s.port):i=s),this.aE=i,null===i||!i.location.I())return!1;for(;!(null===n||n.Y.I()&&n.Aj());)n=n.Q;if(null===n)return!1;var o=this.qa,a=this.computeSpot(!0,e),s=this.computeSpot(!1,n),l=a===v,h=s===v,u=e===n&&null!==e,c=this.ac,f=this.$e===Jh;this.Ki=!(!u||c)&&(f=!0);var d=this.Cp===Uh||u;if(!c&&!u&&l&&h){if(l=!1,!d&&3<=o&&(d=this.getLinkPoint(t,e,a,!0,!1,i,n),h=this.getLinkPoint(i,n,s,!1,!1,t,e),l=this.adjustPoints(0,d,o-1,h))&&(d=this.getLinkPoint(t,e,a,!0,!1,i,n),h=this.getLinkPoint(i,n,s,!1,!1,t,e),this.adjustPoints(0,d,o-1,h)),!l)if(this.Ip(),f){o=this.getLinkPoint(t,e,a,!0,!1,i,n),l=(d=this.getLinkPoint(i,n,s,!1,!1,t,e)).x-o.x,h=d.y-o.y,u=this.computeCurviness(),f=c=0;var p=w=o.x+l/3,y=m=o.y+h/3;we(h,0)?y=0<l?y-u:y+u:(c=-l/h,f=Math.sqrt(u*u/(c*c+1)),0>u&&(f=-f),y=c*((p=(0>h?-1:1)*f+w)-w)+m);var m,g=w=o.x+2*l/3,b=m=o.y+2*h/3;we(h,0)?b=0<l?b-u:b+u:b=c*((g=(0>h?-1:1)*f+w)-w)+m,this.Ip(),this.li(o),this.lj(p,y),this.lj(g,b),this.li(d),this.Vg(0,this.getLinkPoint(t,e,a,!0,!1,i,n)),this.Vg(3,this.getLinkPoint(i,n,s,!1,!1,t,e))}else a=this.getLinkPoint(t,e,a,!0,!1,i,n),s=this.getLinkPoint(i,n,s,!1,!1,t,e),this.hasCurviness()?(d=s.x-a.x,i=s.y-a.y,n=this.computeCurviness(),o=t=a.x+d/2,l=e=a.y+i/2,we(i,0)?l=0<d?l-n:l+n:(d=-d/i,o=Math.sqrt(n*n/(d*d+1)),0>n&&(o=-o),l=d*((o=(0>i?-1:1)*o+t)-t)+e),this.li(a),this.lj(o,l)):this.li(a),this.li(s)}else{f=this.Zl,d&&(c&&f||u)&&this.Ip();var x=u?this.computeCurviness():0,w=(f=this.getLinkPoint(t,e,a,!0,c,i,n),p=m=0);if((c||!l||u)&&(y=this.computeEndSegmentLength(t,e,a,!0),w=this.getLinkDirection(t,e,f,a,!0,c,i,n),u&&(l||a.L(s)||!c&&1===a.x+s.x&&1===a.y+s.y)&&(w-=c?90:30,0>x&&(w-=180)),0>w?w+=360:360<=w&&(w-=360),u&&(y+=Math.abs(x)*(c?1:2)),0===w?m=y:90===w?p=y:180===w?m=-y:270===w?p=-y:(m=y*Math.cos(w*Math.PI/180),p=y*Math.sin(w*Math.PI/180)),a.Td()&&u)){var M=e.Wa(k,r.K()),S=r.xb(M.x+1e3*m,M.y+1e3*p);this.getLinkPointFromPoint(t,e,M,S,!0,f),r.v(M),r.v(S)}y=this.getLinkPoint(i,n,s,!1,c,t,e);var T=b=g=0;(c||!h||u)&&(M=this.computeEndSegmentLength(i,n,s,!1),T=this.getLinkDirection(i,n,y,s,!1,c,t,e),u&&(h||a.L(s)||!c&&1===a.x+s.x&&1===a.y+s.y)&&(T+=c?0:30,0>x&&(T+=180)),0>T?T+=360:360<=T&&(T-=360),u&&(M+=Math.abs(x)*(c?1:2)),0===T?g=M:90===T?b=M:180===T?g=-M:270===T?b=-M:(g=M*Math.cos(T*Math.PI/180),b=M*Math.sin(T*Math.PI/180)),s.Td()&&u&&(M=n.Wa(k,r.K()),S=r.xb(M.x+1e3*g,M.y+1e3*b),this.getLinkPointFromPoint(i,n,M,S,!1,y),r.v(M),r.v(S))),s=f,(c||!l||u)&&(s=new ut(f.x+m,f.y+p)),a=y,(c||!h||u)&&(a=new ut(y.x+g,y.y+b)),!d&&!c&&l&&3<o&&this.adjustPoints(0,f,o-2,a)?this.Vg(o-1,y):!d&&!c&&h&&3<o&&this.adjustPoints(1,s,o-1,y)?this.Vg(0,f):!d&&(c?6<=o:4<o)&&this.adjustPoints(1,s,o-2,a)?(this.Vg(0,f),this.Vg(o-1,y)):(this.Ip(),this.li(f),(c||!l||u)&&this.li(s),c&&this.addOrthoPoints(s,w,a,T,t,i),(c||!h||u)&&this.li(a),this.li(y))}return!0},Rc.prototype.getLinkPointFromPoint=function(t,e,i,n,o,r){if(void 0===r&&(r=new ut),null===t||null===e)return r.assign(i),r;t.isVisible()||null!==(o=t.findVisibleNode())&&o!==t&&(e=o.port);var a=o=0,s=0,l=0;if(t=null,null===(o=e.Q)||o.Yg()||(o=o.Q),null===o)o=n.x,a=n.y,s=i.x,l=i.y;else{o=1/((t=o.ph).m11*t.m22-t.m12*t.m21);s=t.m22*o,l=-t.m12*o;var h=-t.m21*o,u=t.m11*o,c=o*(t.m21*t.dy-t.m22*t.dx),f=o*(t.m12*t.dx-t.m11*t.dy);o=n.x*s+n.y*h+c,a=n.x*l+n.y*u+f,s=i.x*s+i.y*h+c,l=i.x*l+i.y*u+f}return e.zn(o,a,s,l,r),null!==t&&r.transform(t),r},Rc.prototype.getLinkPoint=function(t,e,i,n,o,a,s,l){if(void 0===l&&(l=new ut),i.$c())return e.Wa(i,l),l;if(i.xj()&&null!==(h=Kc(this,e))){if(l.assign(h.hq),o&&this.ny===Wh)if(null!==(u=Kc(this,s))&&h.sn<u.sn){var h=r.K(),u=r.K(),c=new pt(e.Wa(g,h),e.Wa(P,u)),f=this.computeSpot(!n,s);t=this.getLinkPoint(a,s,f,!n,o,t,e,u),(i.vj(I)||i.vj(O))&&t.y>=c.y&&t.y<=c.y+c.height?l.y=t.y:(i.vj(B)||i.vj(E))&&t.x>=c.x&&t.x<=c.x+c.width&&(l.x=t.x),r.v(h),r.v(u)}return l}return i=e.Wa(k,r.K()),h=a=null,this.qa>(o?6:2)?(h=n?this.l(1):this.l(this.qa-2),o&&(h=Hc(i,h.copy()))):(a=r.K(),h=s.Wa(k,a),o&&(h=Hc(i,h)),r.v(a)),this.getLinkPointFromPoint(t,e,i,h,n,l),r.v(i),l},Rc.prototype.getLinkDirection=function(t,e,i,n,o,a,s,l){t:if(n.$c())i=n.x>n.y?n.x>1-n.y?0:n.x<1-n.y?270:315:n.x<n.y?n.x>1-n.y?90:n.x<1-n.y?180:135:.5>n.x?225:.5<n.x?45:0;else{if(n.xj())if(null!==(h=Kc(this,e)))switch(h.ye){case r.od:i=270;break t;case r.Tc:i=180;break t;default:case r.fd:i=0;break t;case r.ed:i=90;break t}var h=e.Wa(k,r.K()),u=null,c=null;this.qa>(a?6:2)?(c=o?this.l(1):this.l(this.qa-2),c=a?Hc(h,c.copy()):i):(u=r.K(),c=l.Wa(k,u),r.v(u)),i=0,i=Math.abs(c.x-h.x)>Math.abs(c.y-h.y)?c.x>=h.x?0:180:c.y>=h.y?90:270,r.v(h)}switch(n.Td()&&s.oi(t)&&(360<=(i+=180)&&(i-=360)),t=Rh,(t=o?this.du:this.av)===Rh&&(t=o?e.du:e.av),t){case Gh:360<=(i+=e=e.Vl())&&(i-=360);break;case Rh:case Vh:if(n.CI())break;if(0===(e=e.Vl()))break;45<=e&&135>e?i+=90:135<=e&&225>e?i+=180:225<=e&&315>e&&(i+=270),360<=i&&(i-=360)}return i},Rc.prototype.computeEndSegmentLength=function(t,e,i,n){return null!==e&&i.xj()&&null!==(t=Kc(this,e))?t.vx:(t=NaN,t=n?this.Ul:this.nm,null!==e&&isNaN(t)&&(t=n?e.Ul:e.nm),isNaN(t)&&(t=10),t)},Rc.prototype.computeSpot=function(t,e){var i;if(t)if(null===(i=e||this.lc))i=k;else{var n=this.Ab;n.Zc()&&null!==i&&(n=i.Ab),i=n===m?v:n}else null===(i=e||this.Ic)?i=k:((n=this.Bb).Zc()&&null!==i&&(n=i.Bb),i=n===m?v:n);return i},Rc.prototype.computeOtherPoint=function(t,e){var i,n=e.Wa(k);return null!==(i=null!==(i=e.Os)?mf(i,this):null)&&(n=i.hq),n},Rc.prototype.computeShortLength=function(t){if(t){if(t=this.eu,isNaN(t)){var e=this.lc;null!==e&&(t=e.eu)}}else t=this.bv,isNaN(t)&&(null!==(e=this.Ic)&&(t=e.bv));return isNaN(t)?0:t},Rc.prototype.Fk=function(t,e,i,n,o,a){if(!1===this.Ug)return!1;void 0===e&&(e=null),void 0===i&&(i=null);var s=a;if(void 0===a&&(s=r.Wg()).reset(),s.multiply(this.transform),this.pn(t,s))return al(this,e,i,o),void 0===a&&r.bf(s),!0;if(this.Zf(t,s)){var l=!1;if(!this.En)for(var h=this.xa.n,u=h.length;u--;){var c=h[u];if(c.visible||c===this.bg){var f=c.Y,d=this.Ja;if(!(f.x>d.width||f.y>d.height||0>f.x+f.width||0>f.y+f.height)){if((f=r.Wg()).set(s),c instanceof Ys)l=c.Fk(t,e,i,n,o,f);else if(this.path===c){if(c instanceof Ml){var p=t,y=n;d=f;if(!1===(l=c).Ug)l=!1;else if(d.multiply(l.transform),y)t:{var v=p,m=d;if(l.pn(v,m))l=!0;else{if(void 0===m&&(m=l.transform,v.Ak(l.Y))){l=!0;break t}d=v.left,p=v.right,y=v.top,v=v.bottom;var g=r.K(),b=r.K(),x=r.K(),w=r.Wg();w.set(m),w.RF(l.transform),w.NA(),b.x=p,b.y=y,b.transform(w),g.x=d,g.y=y,g.transform(w),m=!1,Fl(l,g,b,x)?m=!0:(g.x=p,g.y=v,g.transform(w),Fl(l,g,b,x)?m=!0:(b.x=d,b.y=v,b.transform(w),Fl(l,g,b,x)?m=!0:(g.x=d,g.y=y,g.transform(w),Fl(l,g,b,x)&&(m=!0)))),r.bf(w),r.v(g),r.v(b),r.v(x),l=m}}else l=l.pn(p,d)}}else l=ds(c,t,n,f);l&&(null!==e&&(c=e(c)),c&&(null===i||i(c))&&(o instanceof nt&&o.add(c),o instanceof et&&o.add(c))),r.bf(f)}}}return void 0===a&&r.bf(s),l||null!==this.background||null!==this.kn}return void 0===a&&r.bf(s),!1},r.u(Rc,{ac:"isOrthogonal"},function(){return 2==(2&this.Wm.value)}),r.u(Rc,{Zl:"isAvoiding"},function(){return 4==(4&this.Wm.value)}),Rc.prototype.computeCurve=function(){if(null===this.Ki){var t=this.lc,e=this.ac;this.Ki=null!==t&&t===this.Ic&&!e}return this.Ki?Jh:this.$e},Rc.prototype.computeCorner=function(){if(this.$e===Jh)return 0;var t=this.pA;return(isNaN(t)||0>t)&&(t=10),t},Rc.prototype.findMidLabel=function(){for(var t=this.path,e=this.xa.n,i=e.length,n=0;n<i;n++){var o=e[n];if(o!==t&&!o.ff&&(-1/0===o.Oe||isNaN(o.Oe)))return o}for(t=this.Ef;t.next();)if(-1/0===(e=t.value).Oe||isNaN(e.Oe))return e;return null},Rc.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t;t=Math.max(14,this.computeThickness());var e=this.lc,i=this.Ic;if(null!==e&&null!==i&&null!==(n=this.findMidLabel())){var n,o=n.Ja,r=n.margin,a=isNaN(o.width)?30:o.width*n.scale+r.left+r.right;o=isNaN(o.height)?14:o.height*n.scale+r.top+r.bottom;(n=n.xq)===tu||n===ou||n===nu?t=Math.max(t,o):n===iu||n===au||n===eu||n===ru?t=Math.max(t,a):(e=e.Wa(k).Pb(i.Wa(k))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*a)+Math.abs(Math.cos(e)*o)+1)),this.$e===Jh&&(t*=1.333)}return t},Rc.prototype.arrangeBundledLinks=function(t,e){if(e)for(var i=0;i<t.length;i++){var n=t[i];n.Cp===Uh&&n.Vb()}},Rc.prototype.computeCurviness=function(){var t=this.px;if(isNaN(t)){t=16;var e=this.xi;if(null!==e){for(var i=r.eb(),n=0,o=e.links,a=0;a<o.length;a++){var s=(s=o[a]).computeSpacing();i.push(s),n+=s}for(n=-n/2,a=0;a<o.length;a++){if((s=o[a])===this){t=n+i[a]/2;break}n+=i[a]}e.kq===this.W&&(t=-t),r.ta(i)}}return t},Rc.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return null!==t?Math.max(t.mb,1):1},Rc.prototype.hasCurviness=function(){return!isNaN(this.px)||null!==this.xi},Rc.prototype.adjustPoints=function(t,e,i,n){var o=this.Cp;if(this.ac){if(o===Qh)return!1;o===Zh&&(o=Xh)}switch(o){case Qh:var r=this.l(t),a=this.l(i);if(!r.Oc(e)||!a.Oc(n)){o=r.x,r=r.y;var s=a.x-o,l=a.y-r;if(!ke(d=Math.sqrt(s*s+l*l),0)){var h=0;ke(s,0)?h=0>l?-Math.PI/2:Math.PI/2:(h=Math.atan(l/Math.abs(s)),0>s&&(h=Math.PI-h));a=e.x;var u=e.y,c=(l=n.x-a,n.y-u),f=Math.sqrt(l*l+c*c);s=0;for(ke(l,0)?s=0>c?-Math.PI/2:Math.PI/2:(s=Math.atan(c/Math.abs(l)),0>l&&(s=Math.PI-s)),d=f/d,h=s-h,this.Vg(t,e),t+=1;t<i;t++)s=(e=this.l(t)).x-o,l=e.y-r,ke(e=Math.sqrt(s*s+l*l),0)||(c=0,ke(s,0)?c=0>l?-Math.PI/2:Math.PI/2:(c=Math.atan(l/Math.abs(s)),0>s&&(c=Math.PI-c)),s=c+h,e*=d,this.ca(t,a+e*Math.cos(s),u+e*Math.sin(s)));this.Vg(i,n)}}return!0;case Zh:if(r=this.l(t),u=this.l(i),!r.Oc(e)||!u.Oc(n)){o=r.x,r=r.y;var d=((a=u.x)-o)*(a-o)+((u=u.y)-r)*(u-r),p=(s=e.x,h=e.y,l=n.x,c=n.y,f=0,1);for(0!=l-s?(f=(c-h)/(l-s),p=Math.sqrt(1+1/(f*f))):f=9e9,this.Vg(t,e),t+=1;t<i;t++){var y=(e=this.l(t)).x,v=e.y,m=.5;0!==d&&(m=((o-y)*(o-a)+(r-v)*(r-u))/d);var g=o+m*(a-o),b=r+m*(u-r);e=Math.sqrt((y-g)*(y-g)+(v-b)*(v-b)),v<f*(y-g)+b&&(e=-e),0<f&&(e=-e),y=s+m*(l-s),m=h+m*(c-h),0!==f?(e=y+e/p,this.ca(t,e,m-(e-y)/f)):this.ca(t,y,m+e)}this.Vg(i,n)}return!0;case Xh:return this.ac&&(o=this.l(t),r=this.l(t+1),a=this.l(t+2),u=s=r.x,d=h=r.y,we(o.y,r.y)?we(r.x,a.x)?h=e.y:we(r.y,a.y)&&(s=e.x):we(o.x,r.x)&&(we(r.y,a.y)?s=e.x:we(r.x,a.x)&&(h=e.y)),this.ca(t+1,s,h),o=this.l(i),r=this.l(i-1),a=this.l(i-2),l=s=r.x,c=h=r.y,we(o.y,r.y)?we(r.x,a.x)?h=n.y:we(r.y,a.y)&&(s=n.x):we(o.x,r.x)&&(we(r.y,a.y)?s=n.x:we(r.x,a.x)&&(h=n.y)),this.ca(i-1,s,h),Wc(this))?(this.ca(t+1,u,d),this.ca(i-1,l,c),i=!1):(this.Vg(t,e),this.Vg(i,n),i=!0),i;default:return!1}},Rc.prototype.addOrthoPoints=function(t,e,i,n,o,a){e=-45<=e&&45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,n=-45<=n&&45>n?0:45<=n&&135>n?90:135<=n&&225>n?180:270;var s=o.Y.copy(),l=a.Y.copy();if(s.I()&&l.I()){var h,u;s.Yf(8,8),l.Yf(8,8),s.vi(t),l.vi(i),0===e?i.x>t.x||270===n&&i.y<t.y&&l.right>t.x||90===n&&i.y>t.y&&l.right>t.x?(h=new ut(i.x,t.y),u=new ut(i.x,(t.y+i.y)/2),180===n?(h.x=this.computeMidOrthoPosition(t.x,i.x,!1),u.x=h.x,u.y=i.y):270===n&&i.y<t.y||90===n&&i.y>t.y?(h.x=t.x<l.left?this.computeMidOrthoPosition(t.x,l.left,!1):t.x<l.right&&(270===n&&t.y<l.top||90===n&&t.y>l.bottom)?this.computeMidOrthoPosition(t.x,i.x,!1):l.right,u.x=h.x,u.y=i.y):0===n&&t.x<l.left&&t.y>l.top&&t.y<l.bottom&&(h.x=t.x,h.y=t.y<i.y?Math.min(i.y,l.top):Math.max(i.y,l.bottom),u.y=h.y)):(h=new ut(t.x,i.y),u=new ut((t.x+i.x)/2,i.y),(180===n||90===n&&i.y<s.top||270===n&&i.y>s.bottom)&&(180===n&&(l.Ia(t)||s.Ia(i))?h.y=this.computeMidOrthoPosition(t.y,i.y,!0):i.y<t.y&&(180===n||90===n)?h.y=this.computeMidOrthoPosition(s.top,Math.max(i.y,l.bottom),!0):i.y>t.y&&(180===n||270===n)&&(h.y=this.computeMidOrthoPosition(s.bottom,Math.min(i.y,l.top),!0)),u.x=i.x,u.y=h.y),h.y>s.top&&h.y<s.bottom&&(i.x>=s.left&&i.x<=t.x||t.x<=l.right&&t.x>=i.x?90!==n&&270!==n||(u=new ut((h=new ut(Math.max((t.x+i.x)/2,t.x),t.y)).x,i.y)):(h.y=270===n||(0===n||180===n)&&i.y<t.y?Math.min(i.y,0===n?s.top:Math.min(s.top,l.top)):Math.max(i.y,0===n?s.bottom:Math.max(s.bottom,l.bottom)),u.x=i.x,u.y=h.y))):180===e?i.x<t.x||270===n&&i.y<t.y&&l.left<t.x||90===n&&i.y>t.y&&l.left<t.x?(h=new ut(i.x,t.y),u=new ut(i.x,(t.y+i.y)/2),0===n?(h.x=this.computeMidOrthoPosition(t.x,i.x,!1),u.x=h.x,u.y=i.y):270===n&&i.y<t.y||90===n&&i.y>t.y?(h.x=t.x>l.right?this.computeMidOrthoPosition(t.x,l.right,!1):t.x>l.left&&(270===n&&t.y<l.top||90===n&&t.y>l.bottom)?this.computeMidOrthoPosition(t.x,i.x,!1):l.left,u.x=h.x,u.y=i.y):180===n&&t.x>l.right&&t.y>l.top&&t.y<l.bottom&&(h.x=t.x,h.y=t.y<i.y?Math.min(i.y,l.top):Math.max(i.y,l.bottom),u.y=h.y)):(h=new ut(t.x,i.y),u=new ut((t.x+i.x)/2,i.y),(0===n||90===n&&i.y<s.top||270===n&&i.y>s.bottom)&&(0===n&&(l.Ia(t)||s.Ia(i))?h.y=this.computeMidOrthoPosition(t.y,i.y,!0):i.y<t.y&&(0===n||90===n)?h.y=this.computeMidOrthoPosition(s.top,Math.max(i.y,l.bottom),!0):i.y>t.y&&(0===n||270===n)&&(h.y=this.computeMidOrthoPosition(s.bottom,Math.min(i.y,l.top),!0)),u.x=i.x,u.y=h.y),h.y>s.top&&h.y<s.bottom&&(i.x<=s.right&&i.x>=t.x||t.x>=l.left&&t.x<=i.x?90!==n&&270!==n||(u=new ut((h=new ut(Math.min((t.x+i.x)/2,t.x),t.y)).x,i.y)):(h.y=270===n||(0===n||180===n)&&i.y<t.y?Math.min(i.y,180===n?s.top:Math.min(s.top,l.top)):Math.max(i.y,180===n?s.bottom:Math.max(s.bottom,l.bottom)),u.x=i.x,u.y=h.y))):90===e?i.y>t.y||180===n&&i.x<t.x&&l.bottom>t.y||0===n&&i.x>t.x&&l.bottom>t.y?(h=new ut(t.x,i.y),u=new ut((t.x+i.x)/2,i.y),270===n?(h.y=this.computeMidOrthoPosition(t.y,i.y,!0),u.x=i.x,u.y=h.y):180===n&&i.x<t.x||0===n&&i.x>t.x?(h.y=t.y<l.top?this.computeMidOrthoPosition(t.y,l.top,!0):t.y<l.bottom&&(180===n&&t.x<l.left||0===n&&t.x>l.right)?this.computeMidOrthoPosition(t.y,i.y,!0):l.bottom,u.x=i.x,u.y=h.y):90===n&&t.y<l.top&&t.x>l.left&&t.x<l.right&&(h.x=t.x<i.x?Math.min(i.x,l.left):Math.max(i.x,l.right),h.y=t.y,u.x=h.x)):(h=new ut(i.x,t.y),u=new ut(i.x,(t.y+i.y)/2),(270===n||0===n&&i.x<s.left||180===n&&i.x>s.right)&&(270===n&&(l.Ia(t)||s.Ia(i))?h.x=this.computeMidOrthoPosition(t.x,i.x,!1):i.x<t.x&&(270===n||0===n)?h.x=this.computeMidOrthoPosition(s.left,Math.max(i.x,l.right),!1):i.x>t.x&&(270===n||180===n)&&(h.x=this.computeMidOrthoPosition(s.right,Math.min(i.x,l.left),!1)),u.x=h.x,u.y=i.y),h.x>s.left&&h.x<s.right&&(i.y>=s.top&&i.y<=t.y||t.y<=l.bottom&&t.y>=i.y?0!==n&&180!==n||(h=new ut(t.x,Math.max((t.y+i.y)/2,t.y)),u=new ut(i.x,h.y)):(h.x=180===n||(90===n||270===n)&&i.x<t.x?Math.min(i.x,90===n?s.left:Math.min(s.left,l.left)):Math.max(i.x,90===n?s.right:Math.max(s.right,l.right)),u.x=h.x,u.y=i.y))):i.y<t.y||180===n&&i.x<t.x&&l.top<t.y||0===n&&i.x>t.x&&l.top<t.y?(h=new ut(t.x,i.y),u=new ut((t.x+i.x)/2,i.y),90===n?(h.y=this.computeMidOrthoPosition(t.y,i.y,!0),u.x=i.x,u.y=h.y):180===n&&i.x<t.x||0===n&&i.x>=t.x?(h.y=t.y>l.bottom?this.computeMidOrthoPosition(t.y,l.bottom,!0):t.y>l.top&&(180===n&&t.x<l.left||0===n&&t.x>l.right)?this.computeMidOrthoPosition(t.y,i.y,!0):l.top,u.x=i.x,u.y=h.y):270===n&&t.y>l.bottom&&t.x>l.left&&t.x<l.right&&(h.x=t.x<i.x?Math.min(i.x,l.left):Math.max(i.x,l.right),h.y=t.y,u.x=h.x)):(h=new ut(i.x,t.y),u=new ut(i.x,(t.y+i.y)/2),(90===n||0===n&&i.x<s.left||180===n&&i.x>s.right)&&(90===n&&(l.Ia(t)||s.Ia(i))?h.x=this.computeMidOrthoPosition(t.x,i.x,!1):i.x<t.x&&(90===n||0===n)?h.x=this.computeMidOrthoPosition(s.left,Math.max(i.x,l.right),!1):i.x>t.x&&(90===n||180===n)&&(h.x=this.computeMidOrthoPosition(s.right,Math.min(i.x,l.left),!1)),u.x=h.x,u.y=i.y),h.x>s.left&&h.x<s.right&&(i.y<=s.bottom&&i.y>=t.y||t.y>=l.top&&t.y<=i.y?0!==n&&180!==n||(h=new ut(t.x,Math.min((t.y+i.y)/2,t.y)),u=new ut(i.x,h.y)):(h.x=180===n||(90===n||270===n)&&i.x<t.x?Math.min(i.x,270===n?s.left:Math.min(s.left,l.left)):Math.max(i.x,270===n?s.right:Math.max(s.right,l.right)),u.x=h.x,u.y=i.y)));var c=h,f=u;if(this.Zl){var d,p=this.g;if((d=null===p)||(p.Ka.df?d=!1:d=!((d=p.$a)instanceof Wi)||(!d.Pw||d.wI),d=!d),d||s.Ia(i)&&!a.oi(o)||l.Ia(t)&&!o.oi(a)||o===a||this.layer.Pc)e=!1;else{var y=da(p,!0,this.Da,null);if(y.fq(Math.min(t.x,c.x),Math.min(t.y,c.y),Math.abs(t.x-c.x),Math.abs(t.y-c.y))&&y.fq(Math.min(c.x,f.x),Math.min(c.y,f.y),Math.abs(c.x-f.x),Math.abs(c.y-f.y))&&y.fq(Math.min(f.x,i.x),Math.min(f.y,i.y),Math.abs(f.x-i.x),Math.abs(f.y-i.y)))e=!1;else{o=t,a=i;var v=d=null;if(p.SA){(p=y.ab.copy()).Yf(-y.Hp,-y.Fp);var m=r.K();sf(y,t.x,t.y)||(Be(p.x,p.y,p.x+p.width,p.y+p.height,t.x,t.y,c.x,c.y,m)?(d=t=m.copy(),e=m.Pb(c)):Be(p.x,p.y,p.x+p.width,p.y+p.height,c.x,c.y,f.x,f.y,m)?(d=t=m.copy(),e=m.Pb(f)):Be(p.x,p.y,p.x+p.width,p.y+p.height,f.x,f.y,i.x,i.y,m)&&(d=t=m.copy(),e=m.Pb(i))),sf(y,i.x,i.y)||(Be(p.x,p.y,p.x+p.width,p.y+p.height,i.x,i.y,f.x,f.y,m)?(v=i=m.copy(),n=f.Pb(m)):Be(p.x,p.y,p.x+p.width,p.y+p.height,f.x,f.y,c.x,c.y,m)?(v=i=m.copy(),n=c.Pb(m)):Be(p.x,p.y,p.x+p.width,p.y+p.height,c.x,c.y,t.x,t.y,m)&&(v=i=m.copy(),n=t.Pb(m))),r.v(m)}s=s.copy().Ih(l),l=y.tG,s.Yf(y.Hp*l,y.Fp*l),pf(y,t,e,i,n,s),l=lf(y,i.x,i.y),!y.abort&&999999<=l&&(uf(y),l=y.KF,s.Yf(y.Hp*l,y.Fp*l),pf(y,t,e,i,n,s),l=lf(y,i.x,i.y)),!y.abort&&999999<=l&&y.KG&&(uf(y),pf(y,t,e,i,n,y.ab),l=lf(y,i.x,i.y)),!y.abort&&999999>l&&0!==lf(y,i.x,i.y)?(!function t(e,i,n,o,r,a){var s=i.Hp,l=i.Fp,h=lf(i,n,o),u=n,c=o;for(0===r?u+=s:90===r?c+=l:180===r?u-=s:c-=l;1<h&&lf(i,u,c)===h-1;)n=u,o=c,0===r?u+=s:90===r?c+=l:180===r?u-=s:c-=l,h-=1;a?1<h&&(180===r||0===r?n=Math.floor(n/s)*s+s/2:90!==r&&270!==r||(o=Math.floor(o/l)*l+l/2)):(n=Math.floor(n/s)*s+s/2,o=Math.floor(o/l)*l+l/2);1<h&&(a=r,u=n,c=o,0===r?(a=90,c+=l):90===r?(a=180,u-=s):180===r?(a=270,c-=l):270===r&&(a=0,u+=s),lf(i,u,c)===h-1?t(e,i,u,c,a,!1):(u=n,c=o,0===r?(a=270,c-=l):90===r?(a=0,u+=s):180===r?(a=90,c+=l):270===r&&(a=180,u-=s),lf(i,u,c)===h-1&&t(e,i,u,c,a,!1)));e.lj(n,o)}(this,y,i.x,i.y,n,!0),s=this.l(2),4>this.qa?(0===e||180===e?(s.x=t.x,s.y=i.y):(s.x=i.x,s.y=t.y),this.ca(2,s.x,s.y),this.w(3,s.x,s.y)):(i=this.l(3),0===e||180===e?we(s.x,i.x)?(s=0===e?Math.max(s.x,t.x):Math.min(s.x,t.x),this.ca(2,s,t.y),this.ca(3,s,i.y)):we(s.y,i.y)?(Math.abs(t.y-s.y)<=y.Fp/2&&(this.ca(2,s.x,t.y),this.ca(3,i.x,t.y)),this.w(2,s.x,t.y)):this.ca(2,t.x,s.y):90!==e&&270!==e||(we(s.y,i.y)?(s=90===e?Math.max(s.y,t.y):Math.min(s.y,t.y),this.ca(2,t.x,s),this.ca(3,i.x,s)):we(s.x,i.x)?(Math.abs(t.x-s.x)<=y.Hp/2&&(this.ca(2,t.x,s.y),this.ca(3,t.x,i.y)),this.w(2,t.x,s.y)):this.ca(2,s.x,t.y))),null!==d&&(t=this.l(1),i=this.l(2),t.x!==i.x&&t.y!==i.y?0===e||180===e?this.w(2,t.x,i.y):this.w(2,i.x,t.y):0===e||180===e?this.w(2,o.x,d.y):this.w(2,d.x,o.y)),null!==v&&(0===n||180===n?this.lj(a.x,v.y):this.lj(v.x,a.y)),e=!0):e=!1}}}else e=!1;e||(this.li(h),this.li(u))}},Rc.prototype.computeMidOrthoPosition=function(t,e){return this.hasCurviness()?(t+e)/2+this.computeCurviness():(t+e)/2},Rc.prototype.findClosestSegment=function(t){var e=t.x;t=t.y;for(var i=this.l(0),n=this.l(1),o=c(e,t,i.x,i.y,n.x,n.y),r=0,a=1;a<this.qa-1;a++){i=this.l(a+1);var s=c(e,t,n.x,n.y,i.x,i.y);n=i;s<o&&(r=a,o=s)}return r},Rc.prototype.Me=function(){this.Sa=null},r.u(Rc,{of:"geometry"},function(){return null===this.Sa&&(this.ao(),this.Sa=this.makeGeometry()),this.Sa}),Rc.prototype.Bu=function(t){if(!t){if(!1===this.Mf)return;if(t=this.Ad(),null!==this.Sa&&(null===t||null!==t.of))return}if(this.Sa=this.makeGeometry(),null!==(t=this.path)){t.Sa=this.Sa;for(var e=this.xa.n,i=e.length,n=0;n<i;n++){var o=e[n];o!==t&&o.ff&&o instanceof Ml&&(o.Sa=this.Sa)}}},Rc.prototype.makeGeometry=function(){if(2>(h=this.qa))return new He(It);var t=!1;null!==(n=this.g)&&Qc(this)&&n.hl.contains(this)&&null!==this.Aw&&(t=!0);var e=n=0,i=(s=this.l(0).copy()).copy(),n=this.hd.n;if((l=this.computeCurve())===Jh&&3<=h&&!ke(this.Bq,0))if(3===h){var o=this.l(1);n=Math.min(s.x,o.x),e=Math.min(s.y,o.y),o=this.l(2),n=Math.min(n,o.x),e=Math.min(e,o.y)}else{if(this.ac)for(o=0;o<h;o++)e=n[o],i.x=Math.min(e.x,i.x),i.y=Math.min(e.y,i.y);else for(o=3;o<h;o+=3)o+3>=h&&(o=h-1),n=this.l(o),i.x=Math.min(n.x,i.x),i.y=Math.min(n.y,i.y);n=i.x,e=i.y}else{for(o=0;o<h;o++)e=n[o],i.x=Math.min(e.x,i.x),i.y=Math.min(e.y,i.y);n=i.x,e=i.y}if(n-=this.Tz.x,e-=this.Tz.y,s.x-=n,s.y-=e,2!==h||Qc(this)){var a=r.s();if(0!==this.computeShortLength(!0)&&(s=Jc(this,s,!0,i)),ch(a,s.x,s.y,!1,!1),l===Jh&&3<=h&&!ke(this.Bq,0))if(3===h)h=(o=this.l(1)).x-n,t=o.y-e,(o=this.l(2).copy()).x-=n,o.y-=e,0!==this.computeShortLength(!1)&&(o=Jc(this,o,!1,i)),ph(a,h,t,h,t,o.x,o.y);else if(this.ac){i=new ut(n,e);var s=this.l(1).copy(),l=new ut(n,e),h=new ut(n,e),u=(t=this.l(0),null),c=this.Bq/3;for(o=1;o<this.qa-1;o++){var f=t,d=u=this.l(o),p=this.l($c(this,u,o,!1));if(!(ke(f.x,d.x)&&ke(d.x,p.x)||ke(f.y,d.y)&&ke(d.y,p.y))){var y=c,v=l,m=h;isNaN(y)&&(y=this.Bq/3);var g=f.x,b=(f=f.y,d.x),x=(d=d.y,p.x),w=(p=p.y,y*Uc(g,f,b,d));y=y*Uc(b,d,x,p);ke(f,d)&&ke(b,x)&&(b>g?p>d?(v.x=b-w,v.y=d-w,m.x=b+y,m.y=d+y):(v.x=b-w,v.y=d+w,m.x=b+y,m.y=d-y):p>d?(v.x=b+w,v.y=d-w,m.x=b-y,m.y=d+y):(v.x=b+w,v.y=d+w,m.x=b-y,m.y=d-y)),ke(g,b)&&ke(d,p)&&(d>f?(x>b?(v.x=b-w,v.y=d-w,m.x=b+y):(v.x=b+w,v.y=d-w,m.x=b-y),m.y=d+y):(x>b?(v.x=b-w,v.y=d+w,m.x=b+y):(v.x=b+w,v.y=d+w,m.x=b-y),m.y=d-y)),(ke(g,b)&&ke(b,x)||ke(f,d)&&ke(d,p))&&(g=.5*(g+x),f=.5*(f+p),v.x=g,v.y=f,m.x=g,m.y=f),1===o?(s.x=.5*(t.x+u.x),s.y=.5*(t.y+u.y)):2===o&&ke(t.x,this.l(0).x)&&ke(t.y,this.l(0).y)&&(s.x=.5*(t.x+u.x),s.y=.5*(t.y+u.y)),ph(a,s.x-n,s.y-e,l.x-n,l.y-e,u.x-n,u.y-e),i.set(l),s.set(h),t=u}}o=t.x,t=t.y,i=this.l(this.qa-1),0!==this.computeShortLength(!1)&&(i=Jc(this,i.copy(),!1,Zt)),o=.5*(o+i.x),t=.5*(t+i.y),ph(a,h.x-n,h.y-e,o-n,t-e,i.x-n,i.y-e)}else for(o=3;o<h;o+=3)t=this.l(o-2),o+3>=h&&(o=h-1),i=this.l(o-1),s=this.l(o),o===h-1&&0!==this.computeShortLength(!1)&&(s=Jc(this,s.copy(),!1,Zt)),ph(a,t.x-n,t.y-e,i.x-n,i.y-e,s.x-n,s.y-e);else{for((i=r.K()).assign(this.l(0)),o=1,s=0;o<h;){if(o=$c(this,i,o,1<o),v=this.l(o),o>=h-1){if(i.L(v)){if(0===s)for(o=1;o<h;)Yc(this,a,-n,-e,i,v=this.l(o++),t),i.assign(v)}else 0!==this.computeShortLength(!1)&&(v=Jc(this,v.copy(),!1,Zt)),Yc(this,a,-n,-e,i,v,t);break}s=$c(this,v,o+1,o<h-3),o=a,l=-n,u=-e,c=i,m=this.l(s),g=i,f=t,we(c.y,v.y)&&we(v.x,m.x)?(y=this.computeCorner(),y=Math.min(y,Math.abs(v.x-c.x)/2),we(y=b=Math.min(y,Math.abs(m.y-v.y)/2),0)?(Yc(this,o,l,u,c,v,f),g.assign(v)):(p=d=v.x,w=x=v.y,d=v.x>c.x?v.x-y:v.x+y,w=m.y>v.y?v.y+b:v.y-b,Yc(this,o,l,u,c,new ut(d,x),f),yh(o,v.x+l,v.y+u,p+l,w+u),g.m(p,w))):we(c.x,v.x)&&we(v.y,m.y)?(y=this.computeCorner(),b=Math.min(y,Math.abs(v.y-c.y)/2),b=y=Math.min(b,Math.abs(m.x-v.x)/2),we(y,0)?(Yc(this,o,l,u,c,v,f),g.assign(v)):(d=v.x,w=x=v.y,x=v.y>c.y?v.y-b:v.y+b,p=m.x>v.x?v.x+y:v.x-y,Yc(this,o,l,u,c,new ut(d,x),f),yh(o,v.x+l,v.y+u,p+l,w+u),g.m(p,w))):(Yc(this,o,l,u,c,v,f),g.assign(v)),o=s}r.v(i)}n=a.o,r.q(a)}else(a=this.l(1).copy()).x-=n,a.y-=e,0!==this.computeShortLength(!0)&&(s=Jc(this,s,!0,i)),0!==this.computeShortLength(!1)&&(a=Jc(this,a,!1,i)),(n=new He(It)).ha=s.x,n.fa=s.y,n.C=a.x,n.D=a.y;return n},r.u(Rc,{Yt:"firstPickIndex"},function(){var t;return 2>=this.qa?t=0:((t=this.ac)||(t=this.computeSpot(!0)!==v),t=t?1:0),t}),r.u(Rc,{Ox:"lastPickIndex"},function(){var t=this.qa;if(0===t)t=0;else if(2>=t)t-=1;else{var e;(e=this.ac)||(e=this.computeSpot(!1)!==v),t=e?t-2:t-1}return t}),Rc.prototype.usesSamePort=function(t){var e=this.qa,i=t.qa;if(0<e&&0<i){var n=this.l(0),o=t.l(0);if(n.Oc(o))return!0;if(e=this.l(e-1),t=t.l(i-1),e.Oc(t)||n.Oc(t)||e.Oc(o))return!0}else if(this.W===t.W||this.Z===t.Z||this.W===t.Z||this.Z===t.W)return!0;return!1},Rc.prototype.isVisible=function(){if(!Ch.prototype.isVisible.call(this))return!1;var t=this.Da,e=!0,i=this.g;null!==i&&(e=i.Ud);var n=this.W;if(null!==n){if(this.bc&&e&&!n.uc)return!1;if(n===t)return!0;for(i=n;null!==i;){if(i.Wb===this)return!0;i=i.Da}if(null===(i=n.findVisibleNode())||i===t)return!1}if(null!==(n=this.Z)){if(this.bc&&!e&&!n.uc)return!1;if(n===t)return!0;for(i=n;null!==i;){if(i.Wb===this)return!0;i=i.Da}if(null===(e=n.findVisibleNode())||e===t)return!1}return!0},Rc.prototype.Cd=function(t){if(Ch.prototype.Cd.call(this,t),null!==this.xi&&this.xi.$p(),null!==this.xf)for(var e=this.xf.i;e.next();)e.value.Cd(t)},r.defineProperty(Rc,{Cp:"adjusting"},function(){return this.Mq},function(t){var e=this.Mq;e!==t&&(this.Mq=t,this.h("adjusting",e,t))}),r.defineProperty(Rc,{pA:"corner"},function(){return this.gr},function(t){var e=this.gr;e!==t&&(this.gr=t,this.Me(),this.h("corner",e,t))}),r.defineProperty(Rc,{$e:"curve"},function(){return this.jr},function(t){var e=this.jr;e!==t&&(this.jr=t,this.Vb(),this.Me(),Zc(this,e===$h||e===Yh||t===$h||t===Yh),this.h("curve",e,t))}),r.defineProperty(Rc,{px:"curviness"},function(){return this.kr},function(t){var e=this.kr;e!==t&&(this.kr=t,this.Vb(),this.Me(),this.h("curviness",e,t))}),r.defineProperty(Rc,{ny:"routing"},function(){return this.Wm},function(t){var e=this.Wm;e!==t&&(this.Wm=t,this.Ki=null,this.Vb(),Zc(this,2==(2&e.value)||2==(2&t.value)),this.h("routing",e,t))}),r.defineProperty(Rc,{Bq:"smoothness"},function(){return this.nt},function(t){var e=this.nt;e!==t&&(this.nt=t,this.Me(),this.h("smoothness",e,t))}),r.u(Rc,{key:"key"},function(){var t=this.g;return null!==t&&t.$ instanceof Ci?t.$.cf(this.data):void 0},{configurable:!0}),rf.prototype.$p=function(){if(!this.Xv){var t=this.links;0<t.length&&(null!==(t=t[0].g)&&(t.aD.add(this),this.fh=t.ja.lb))}this.Xv=!0},rf.prototype.RB=function(){if(this.Xv){this.Xv=!1;var t=this.links;if(0<t.length){var e=t[0],i=null===(i=e.g)||i.Fn&&!this.fh;this.fh=!1,e.arrangeBundledLinks(t,i),1===t.length&&(e.xi=null,t.length=0)}0===t.length&&(t=this.kq,null!==this&&null!==t.Kh&&t.Kh.remove(this),t=this.Gu,null!==this&&null!==t.Kh&&t.Kh.remove(this))}},r.be(rf,{kq:!0,ay:!0,Gu:!0,by:!0,links:!0,spacing:!0}),r.be(af,{group:!0,FB:!0,lu:!0,abort:!0,KG:!0,tG:!0,KF:!0}),af.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,i=t.x+t.width,n=t.y+t.height;if(this.Ag=Math.floor((t.x-this.Be)/this.Be)*this.Be,this.Bg=Math.floor((e-this.Ce)/this.Ce)*this.Ce,this.ls=Math.ceil((i+2*this.Be)/this.Be)*this.Be,this.ms=Math.ceil((n+2*this.Ce)/this.Ce)*this.Ce,t=1+(0|Math.ceil((this.ls-this.Ag)/this.Be)),e=1+(0|Math.ceil((this.ms-this.Bg)/this.Ce)),null===this.qd||this.yp<t-1||this.zp<e-1){for(i=[],n=0;n<=t;n++)i[n]=[];this.qd=i,this.yp=t-1,this.zp=e-1}if(null!==this.qd)for(t=0;t<=this.yp;t++)for(e=0;e<=this.zp;e++)this.qd[t][e]=1e6}},r.u(af,{ab:null},function(){return new pt(this.Ag,this.Bg,this.ls-this.Ag,this.ms-this.Bg)}),r.defineProperty(af,{Hp:null},function(){return this.Be},function(t){0<t&&t!==this.Be&&(this.Be=t,this.initialize(this.ab))}),r.defineProperty(af,{Fp:null},function(){return this.Ce},function(t){0<t&&t!==this.Ce&&(this.Ce=t,this.initialize(this.ab))}),af.prototype.fq=function(t,e,i,n){if(t>this.ls||t+i<this.Ag||e>this.ms||e+n<this.Bg)return!0;t=(t-this.Ag)/this.Be|0,e=(e-this.Bg)/this.Ce|0,i=Math.max(0,i)/this.Be+1|0;var o=Math.max(0,n)/this.Ce+1|0;if(0>t&&(i+=t,t=0),0>e&&(o+=e,e=0),0>i||0>o)return!0;for(n=0|Math.min(t+i-1,this.yp),i=0|Math.min(e+o-1,this.zp);t<=n;t++)for(o=e;o<=i;o++)if(0===this.qd[t][o])return!1;return!0},r.be(yf,{Qc:!0,port:!0,fg:!0,jq:!0}),yf.prototype.toString=function(){for(var t=this.fg,e=this.Qc.toString()+" "+t.length.toString()+":",i=0;i<t.length;i++){var n=t[i];null!==n&&(e+="\n  "+n.toString())}return e},yf.prototype.$p=function(){this.fg.length=0},yf.prototype.gJ=function(t,e){return t===e?0:null===t?-1:null===e?1:t.ye<e.ye?-1:t.ye>e.ye?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},yf.prototype.computeEndSegmentLength=function(t){var e=(o=t.link).computeEndSegmentLength(this.Qc,this.port,v,o.lc===this.port),i=t.Yp;if(0>i)return e;var n=t.sn;if(1>=n||!o.ac)return e;var o=t.Zx,a=t.hq;return t.ye!==r.Tc&&t.ye!==r.ed||(i=n-1-i),((t=t.ye===r.Tc||t.ye===r.fd)?o.y<a.y:o.x<a.x)?e+8*i:(t?o.y===a.y:o.x===a.x)?e:e+8*(n-1-i)},r.be(gf,{link:!0,angle:!0,ye:!0,Zx:!0,Yp:!0,sn:!0,hq:!0,vx:!0}),gf.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.ye.toString()+":"+this.Yp.toString()+"/"+this.sn.toString()+" "+this.hq.toString()+" "+this.vx.toString()+" "+this.Zx.toString()},bf.prototype.copy=function(){var t=new bf;return t.Wj=this.Wj.S(),t.uk=this.uk.S(),t.Uj=this.Uj,t.sk=this.sk,t.Tj=this.Tj,t.rk=this.rk,t.Vj=this.Vj,t.tk=this.tk,t.Dr=this.Dr,t.wt=this.wt,t.Er=this.Er,t.xt=this.xt,t},r.La(xf,Fc),r.ga("Group",xf),xf.prototype.cloneProtected=function(t){Fc.prototype.cloneProtected.call(this,t),this.ya&=-32769,t.ns=this.ns,t.ps=this.ps,t.wl=this.wl,t.rt=this.rt;var e=t.Ut(function(t){return t instanceof Mf});t.Lb=e instanceof Mf?e:null,null!==this.le?(t.le=this.le.copy(),t.le.group=t):(null!==t.le&&(t.le.group=null),t.le=null)},xf.prototype.ni=function(t){Fc.prototype.ni.call(this,t);var e=t.Up();for(t=t.vc;t.next();){var i=t.value;if(i.H(),i.J(8),i.Mt(),i instanceof Fc)i.$f(e);else if(i instanceof Rc)for(i=i.Ef;i.next();)i.value.$f(e)}},xf.prototype.Un=function(t,e,i,n,o,a,s){if(t===Yt&&"elements"===e)if(o instanceof Mf){var l=o;null===this.Lb?this.Lb=l:this.Lb!==l&&r.k("Cannot insert a second Placeholder into the visual tree of a Group.")}else o instanceof Ys&&((l=o.Ut(function(t){return t instanceof Mf}))instanceof Mf&&(null===this.Lb?this.Lb=l:this.Lb!==l&&r.k("Cannot insert a second Placeholder into the visual tree of a Group.")));else t===Xt&&"elements"===e&&null!==this.Lb&&(n===this.Lb?this.Lb=null:n instanceof Ys&&this.Lb.am(n)&&(this.Lb=null));Fc.prototype.Un.call(this,t,e,i,n,o,a,s)},xf.prototype.mj=function(t,e,i,n){this.vl=this.Lb,Ys.prototype.mj.call(this,t,e,i,n)},xf.prototype.bm=function(){if(!Fc.prototype.bm.call(this))return!1;for(var t=this.vc;t.next();){var e=t.value;if(e instanceof Fc){if(e.isVisible()&&Ds(e))return!1}else if(e instanceof Rc&&e.isVisible()&&Ds(e)&&e.W!==this&&e.Z!==this)return!1}return!0},r.u(xf,{placeholder:"placeholder"},function(){return this.Lb}),r.defineProperty(xf,{BH:"computesBoundsAfterDrag"},function(){return 0!=(2048&this.ya)},function(t){var e=0!=(2048&this.ya);e!==t&&(r.j(t,"boolean",xf,"computesBoundsAfterDrag"),this.ya^=2048,this.h("computesBoundsAfterDrag",e,t))}),r.defineProperty(xf,{lx:"computesBoundsIncludingLinks"},function(){return 0!=(4096&this.ya)},function(t){r.j(t,"boolean",xf,"computesBoundsIncludingLinks");var e=0!=(4096&this.ya);e!==t&&(this.ya^=4096,this.h("computesBoundsIncludingLinks",e,t))}),r.defineProperty(xf,{CH:"computesBoundsIncludingLocation"},function(){return 0!=(8192&this.ya)},function(t){r.j(t,"boolean",xf,"computesBoundsIncludingLocation");var e=0!=(8192&this.ya);e!==t&&(this.ya^=8192,this.h("computesBoundsIncludingLocation",e,t))}),r.defineProperty(xf,{mI:"handlesDragDropForMembers"},function(){return 0!=(16384&this.ya)},function(t){r.j(t,"boolean",xf,"handlesDragDropForMembers");var e=0!=(16384&this.ya);e!==t&&(this.ya^=16384,this.h("handlesDragDropForMembers",e,t))}),r.u(xf,{vc:"memberParts"},function(){return this.os.i}),xf.prototype.un=function(){if(0<this.os.count){var t=this.g;if(null!==t)for(var e=this.os.copy().i;e.next();)t.remove(e.value)}Fc.prototype.un.call(this)},r.defineProperty(xf,{Sb:"layout"},function(){return this.le},function(t){var e=this.le;e!==t&&(null!==t&&r.G(t,Sf,xf,"layout"),null!==e&&(e.g=null,e.group=null),this.le=t,null!==t&&(t.g=this.g,t.group=this),this.h("layout",e,t))}),r.defineProperty(xf,{XI:"memberAdded"},function(){return this.ns},function(t){var e=this.ns;e!==t&&(null!==t&&r.j(t,"function",xf,"memberAdded"),this.ns=t,this.h("memberAdded",e,t))}),r.defineProperty(xf,{YI:"memberRemoved"},function(){return this.ps},function(t){var e=this.ps;e!==t&&(null!==t&&r.j(t,"function",xf,"memberRemoved"),this.ps=t,this.h("memberRemoved",e,t))}),r.defineProperty(xf,{$A:"memberValidation"},function(){return this.wl},function(t){var e=this.wl;e!==t&&(null!==t&&r.j(t,"function",xf,"memberValidation"),this.wl=t,this.h("memberValidation",e,t))}),xf.prototype.canAddMembers=function(t){var e=this.g;if(null===e)return!1;for(e=e.pb,t=_i(t).i;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},xf.prototype.addMembers=function(t,e){if(null===(i=this.g))return!1;for(var i=i.pb,n=!0,o=_i(t).i;o.next();){var r=o.value;!e||i.isValidMember(this,r)?r.Da=this:n=!1}return n},r.defineProperty(xf,{ZJ:"ungroupable"},function(){return 0!=(256&this.ya)},function(t){var e=0!=(256&this.ya);e!==t&&(r.j(t,"boolean",xf,"ungroupable"),this.ya^=256,this.h("ungroupable",e,t))}),xf.prototype.canUngroup=function(){if(!this.ZJ)return!1;var t=this.layer;return!(null!==t&&!t.hx)&&!(null!==(t=t.g)&&!t.hx)},xf.prototype.$f=function(t){void 0===t&&(t=null);var e=0!=(65536&this.ya);if(Fc.prototype.$f.call(this,t),!e)for(0!=(65536&this.ya)!=!0&&(this.ya^=65536),e=this.YE();e.next();){var i=e.value;if(null===t||!t.contains(i)){var n=i.W;null!==n&&n!==this&&n.oi(this)&&!n.isVisible()?(zc(n,i.lc),zc(n,i.Ic),i.Vb()):null!==(n=i.Z)&&n!==this&&n.oi(this)&&!n.isVisible()&&(zc(n,i.lc),zc(n,i.Ic),i.Vb())}}},xf.prototype.findExternalLinksConnected=xf.prototype.YE=function(){var t=this.Up();t.add(this);for(var e=new nt(Rc),i=t.i;i.next();){var n=i.value;if(n instanceof Fc)for(n=n.he;n.next();){var o=n.value;t.contains(o)||e.add(o)}}return e.i},xf.prototype.findExternalNodesConnected=function(){var t=this.Up();t.add(this);for(var e=new nt(Fc),i=t.i;i.next();){var n=i.value;if(n instanceof Fc)for(n=n.he;n.next();){var o=n.value,r=o.W;t.contains(r)&&r!==this||e.add(r),o=o.Z,t.contains(o)&&o!==this||e.add(o)}}return e.i},xf.prototype.findContainingGroupChain=function(){var t=new nt(xf);return function t(e,i){null!==e&&(i.add(e),t(e.Da,i))}(this,t),t},xf.prototype.findSubGraphParts=xf.prototype.Up=function(){var t=new nt(Ch);return Gi(t,this,!0,0,!0),t.remove(this),t},xf.prototype.Cd=function(t){Fc.prototype.Cd.call(this,t);for(var e=this.vc;e.next();)e.value.Cd(t)},xf.prototype.collapseSubGraph=xf.prototype.collapseSubGraph=function(){var t=this.g;null===t||t.xh||(t.xh=!0,function t(e,i,n,o){for(var r=e.vc;r.next();){var a=r.value;if(a.Cd(!1),a instanceof xf){var s=a;s.ad&&(s.By=s.ad,t(s,i,n,o))}if(a instanceof Fc)a.$f(i),Fo(n,a,o);else if(a instanceof Rc)for(a=a.Ef;a.next();)a.value.$f(i)}e.ad=!1}(this,this.Up(),t.Ka,this),t.xh=!1)},xf.prototype.expandSubGraph=xf.prototype.expandSubGraph=function(){var t=this.g;null===t||t.xh||(t.xh=!0,function t(e,i,n,o){for(var r=e.vc;r.next();){var a=r.value;if(a.Cd(!0),a instanceof xf){var s=a;s.By&&(s.By=!1,t(s,i,n,o))}if(a instanceof Fc)a.$f(i),Ao(n,a,o);else if(a instanceof Rc)for(a=a.Ef;a.next();)a.value.$f(i)}e.ad=!0}(this,this.Up(),t.Ka,this),t.xh=!1)},r.defineProperty(xf,{ad:"isSubGraphExpanded"},function(){return 0!=(512&this.ya)},function(t){var e=0!=(512&this.ya);if(e!==t){r.j(t,"boolean",xf,"isSubGraphExpanded"),this.ya^=512;var i=this.g;if(this.h("isSubGraphExpanded",e,t),null!==(e=this.OJ)){var n=!0;null!==i&&(n=i.Ua,i.Ua=!0),e(this),null!==i&&(i.Ua=n)}null!==i&&i.ja.lb?null!==this.Lb&&this.Lb.H():t?this.expandSubGraph():this.collapseSubGraph()}}),r.defineProperty(xf,{By:"wasSubGraphExpanded"},function(){return 0!=(1024&this.ya)},function(t){var e=0!=(1024&this.ya);e!==t&&(r.j(t,"boolean",xf,"wasSubGraphExpanded"),this.ya^=1024,this.h("wasSubGraphExpanded",e,t))}),r.defineProperty(xf,{OJ:"subGraphExpandedChanged"},function(){return this.rt},function(t){var e=this.rt;e!==t&&(null!==t&&r.j(t,"function",xf,"subGraphExpandedChanged"),this.rt=t,this.h("subGraphExpandedChanged",e,t))}),xf.prototype.move=function(t){var e=(i=this.position).x;isNaN(e)&&(e=0),i=i.y,isNaN(i)&&(i=0);e=t.x-e;var i=t.y-i,n=r.xb(e,i);Fc.prototype.move.call(this,t),t=new nt(Rc);for(var o=this.Up().i;o.next();){var a=o.value;a instanceof Rc&&(a.si&&t.add(a),a.si=!0)}for(o.reset();o.next();)if(!((a=o.value)instanceof Rc||a instanceof Fc&&a.Cf)){var s=a.position,l=a.location;s.I()?(n.x=s.x+e,n.y=s.y+i,a.position=n):l.I()&&(n.x=l.x+e,n.y=l.y+i,a.location=n)}for(o.reset();o.next();)(a=o.value)instanceof Rc&&(a.si=t.contains(a),a.Mf||a.W!==this&&a.Z!==this)&&(s=a.position,n.x=s.x+e,n.y=s.y+i,a.move(n),Wc(a)&&a.Vb());r.v(n)},r.defineProperty(xf,{Rn:null},function(){return 0!=(32768&this.ya)},function(t){0!=(32768&this.ya)!==t&&(this.ya^=32768)}),r.La(Mf,ls),r.ga("Placeholder",Mf),Mf.prototype.cloneProtected=function(t){ls.prototype.cloneProtected.call(this,t),t.mf=this.mf.S(),t.bt=this.bt.copy()},Mf.prototype.zk=function(t){if(null===this.background&&null===this.kn)return!1;var e=this.Ja;return p(0,0,e.width,e.height,t.x,t.y)},Mf.prototype.Ln=function(){var t=this.U;if(null!==t&&(t instanceof xf||t instanceof Ac)||r.k("Placeholder is not inside a Group or Adornment."),t instanceof xf){var e=this.computeBorder(this.bt);yt(n=this.Wc,e.width||0,e.height||0),fs(this,0,0,n.width,n.height);for(var i=t.vc,n=!1;i.next();)if(i.value.isVisible()){n=!0;break}i=t.g,!n||null===i||i.Ka.df||isNaN(e.x)||isNaN(e.y)||((n=r.K()).Wn(e,t.Ff),t.location=new ut(n.x,n.y),r.v(n))}else{e=this.Ca,n=this.Wc;var o=(i=this.padding).left+i.right,a=i.top+i.bottom;if(e.I())yt(n,e.width+o||0,e.height+a||0),fs(this,-i.left,-i.top,n.width,n.height);else{var s=t.tb,l=s.Wa(g,r.K());(e=r.lg(l.x,l.y,0,0)).vi(s.Wa(P,l)),e.vi(s.Wa(x,l)),e.vi(s.Wa(S,l)),t.Ui.m(e.x,e.y),yt(n,e.width+o||0,e.height+a||0),fs(this,-i.left,-i.top,n.width,n.height),r.v(l),r.Eb(e)}}},Mf.prototype.mj=function(t,e,i,n){var o=this.Y;o.x=t,o.y=e,o.width=i,o.height=n},Mf.prototype.computeBorder=function(t){var e=this.U;if(e instanceof xf&&((i=e).BH&&this.bt.I()&&null!==(n=i.g)&&(n=n.$a)instanceof Wi&&!n.xr&&null!==n.$b&&!n.$b.contains(i)))return t.assign(this.bt),t;var i=r.Kf(),n=this.computeMemberBounds(i),o=this.padding;return t.m(n.x-o.left,n.y-o.top,Math.max(n.width+o.left+o.right,0),Math.max(n.height+o.top+o.bottom,0)),r.Eb(i),e instanceof xf&&((i=e).CH&&i.location.I()&&t.vi(i.location)),t},Mf.prototype.computeMemberBounds=function(t){if(!(this.U instanceof xf))return t.m(0,0,0,0),t;for(var e=this.U,i=1/0,n=1/0,o=-1/0,r=-1/0,a=e.vc;a.next();){var s=a.value;if(s.isVisible()){if(s instanceof Rc){var l=s;if(!e.lx)continue;if(As(l))continue;if(l.W===e||l.Z===e)continue}(s=s.Y).left<i&&(i=s.left),s.top<n&&(n=s.top),s.right>o&&(o=s.right),s.bottom>r&&(r=s.bottom)}}return isFinite(i)&&isFinite(n)?t.m(i,n,o-i,r-n):(e=e.location,i=this.padding,t.m(e.x+i.left,e.y+i.top,0,0)),t},r.defineProperty(Mf,{padding:"padding"},function(){return this.mf},function(t){"number"==typeof t?t=new wt(t):r.G(t,wt,Mf,"padding");var e=this.mf;e.L(t)||(this.mf=t=t.S(),this.h("padding",e,t))}),r.ga("Layout",Sf),Sf.prototype.cloneProtected=function(t){t.Ur=this.Ur,t.pl=this.pl,t.$r=this.$r,t.Qq.assign(this.Qq),t.Xr=this.Xr,t.Wr=this.Wr,t.OC=this.OC,t.Zr=!0},Sf.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Sf.prototype.hc=function(t){r.Ij(this,t)},Sf.prototype.toString=function(){var t=(t=r.pf(Object.getPrototypeOf(this)))+"(";return null!==this.group&&(t+=" in "+this.group),null!==this.g&&(t+=" for "+this.g),t+")"},r.defineProperty(Sf,{g:"diagram"},function(){return this.aa},function(t){null!==t&&r.G(t,Qo,Sf,"diagram"),this.aa=t}),r.defineProperty(Sf,{group:"group"},function(){return this.rz},function(t){this.rz!==t&&(null!==t&&r.G(t,xf,Sf,"group"),this.rz=t,null!==t&&(this.aa=t.g))}),r.defineProperty(Sf,{DI:"isOngoing"},function(){return this.Ur},function(t){this.Ur!==t&&(r.j(t,"boolean",Sf,"isOngoing"),this.Ur=t)}),r.defineProperty(Sf,{DF:"isInitial"},function(){return this.pl},function(t){r.j(t,"boolean",Sf,"isInitial"),this.pl=t,t||(this.Zr=!0)}),r.defineProperty(Sf,{Mx:"isViewportSized"},function(){return this.$r},function(t){this.$r!==t&&(r.j(t,"boolean",Sf,"isViewportSized"),(this.$r=t)&&this.J())}),r.defineProperty(Sf,{uu:"isRouting"},function(){return this.Xr},function(t){this.Xr!==t&&(r.j(t,"boolean",Sf,"isRouting"),this.Xr=t)}),r.defineProperty(Sf,{GF:"isRealtime"},function(){return this.Wr},function(t){this.Wr!==t&&(r.j(t,"boolean",Sf,"isRealtime"),this.Wr=t)}),r.defineProperty(Sf,{sf:"isValidLayout"},function(){return this.Zr},function(t){this.Zr!==t&&(r.j(t,"boolean",Sf,"isValidLayout"),this.Zr=t,t||null!==(t=this.g)&&(t.dl=!0))}),Sf.prototype.invalidateLayout=Sf.prototype.J=function(){if(this.sf){var t=this.g;if(null!==t&&!t.ja.lb){var e=t.Ka;!e.Po&&(e.df&&e.Gh(),this.DI&&t.Fn||this.DF&&!t.Fn)&&(this.sf=!1,t.Ne())}}},r.defineProperty(Sf,{network:"network"},function(){return this.Fz},function(t){var e=this.Fz;e!==t&&(null!==t&&r.G(t,Nf,Sf,"network"),null!==e&&(e.Sb=null),this.Fz=t,null!==t&&(t.Sb=this))}),Sf.prototype.createNetwork=function(){return new Nf},Sf.prototype.makeNetwork=function(t){var e=this.createNetwork();return e.Sb=this,t instanceof Qo?(e.wk(t.ig,!0),e.wk(t.links,!0)):t instanceof xf?e.wk(t.vc):e.wk(t.i),e},Sf.prototype.updateParts=function(){var t=this.g;if(null===t&&null!==this.network)for(var e=this.network.vertexes.i;e.next();){var i=e.value.Qc;if(null!==i&&null!==(t=i.g))break}this.sf=!0;try{null!==t&&t.Hb("Layout"),this.commitLayout()}finally{null!==t&&t.Yc("Layout")}},Sf.prototype.commitLayout=function(){for(var t=this.network.vertexes.i;t.next();)t.value.commit();if(this.uu)for(t=this.network.edges.i;t.next();)t.value.commit()},Sf.prototype.doLayout=function(t){null===t&&r.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var e=new nt(Ch);t instanceof Qo?(Tf(this,e,t.ig,!0,this.Rn,!0,!1,!0),Tf(this,e,t.Pk,!0,this.Rn,!0,!1,!0)):t instanceof xf?Tf(this,e,t.vc,!1,this.Rn,!0,!1,!0):e.Nc(t.i);var i=e.count;if(0<i){null!==(t=this.g)&&t.Hb("Layout"),i=Math.ceil(Math.sqrt(i)),this.Nd=this.initialOrigin(this.Nd);var n=this.Nd.x,o=n,a=this.Nd.y,s=0,l=0;for(e=e.i;e.next();){var h=e.value;h.af();var u=(c=h.za).width,c=c.height;h.moveTo(o,a),h instanceof xf&&(h.Rn=!1),o+=Math.max(u,50)+20,l=Math.max(l,Math.max(c,50)),s>=i-1?(s=0,o=n,a+=l+20,l=0):s++}null!==t&&t.Yc("Layout")}this.sf=!0},Sf.prototype.Rn=function(t){return!(t.location.I()&&!(t instanceof xf&&t.Rn))},Sf.prototype.collectParts=Sf.prototype.wH=function(t){var e=new nt(Ch);return t instanceof Qo?(Tf(this,e,t.ig,!0,null,!0,!0,!0),Tf(this,e,t.links,!0,null,!0,!0,!0),Tf(this,e,t.Pk,!0,null,!0,!0,!0)):Tf(this,e,t instanceof xf?t.vc:t.i,!1,null,!0,!0,!0),e},r.defineProperty(Sf,{Nd:"arrangementOrigin"},function(){return this.Qq},function(t){r.G(t,ut,Sf,"arrangementOrigin"),this.Qq.L(t)||(this.Qq.assign(t),this.J())}),Sf.prototype.initialOrigin=function(t){var e=this.group;if(null!==e){var i=e.position.copy();return(isNaN(i.x)||isNaN(i.y))&&i.set(t),null!==(e=e.placeholder)&&(i=e.Wa(g),(isNaN(i.x)||isNaN(i.y))&&i.set(t),i.x+=e.padding.left,i.y+=e.padding.top),i}return t},r.ga("LayoutNetwork",Nf),Nf.prototype.clear=function(){if(this.vertexes)for(var t=this.vertexes.i;t.next();){var e=t.value;e.clear(),e.network=null}if(this.edges)for(t=this.edges.i;t.next();)(e=t.value).clear(),e.network=null;this.vertexes=new nt(Df),this.edges=new nt(Lf),this.Wx=new ht(Fc,Df),this.Rx=new ht(Rc,Lf)},Nf.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutNetwork"+(null!==this.Sb?"("+this.Sb.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.vertexes.count+" edges: "+this.edges.count,1<t){for(var i=this.vertexes.i;i.next();)e+="\n    "+i.value.toString(t-1);for(i=this.edges.i;i.next();)e+="\n    "+i.value.toString(t-1)}return e},r.defineProperty(Nf,{Sb:"layout"},function(){return this.le},function(t){this.le=t}),Nf.prototype.createVertex=function(){return new Df},Nf.prototype.createEdge=function(){return new Lf},Nf.prototype.addParts=Nf.prototype.wk=function(t,e,i){if(null!==t){for(void 0===e&&(e=!1),r.j(e,"boolean",Nf,"addParts:toplevelonly"),void 0===i&&(i=null),null===i&&(i=function(t){if(t instanceof Fc)return!t.Cf;if(t instanceof Rc){var e=t.W;return null!==e&&!e.Cf&&(null!==(t=t.Z)&&!t.Cf)}return!1}),t=t.i;t.next();){var n=t.value;if(n instanceof Fc&&(!e||n.dq)&&n.canLayout()&&i(n))if(n instanceof xf&&null===n.Sb)this.wk(n.vc,!1);else if(null===this.xn(n)){(a=this.createVertex()).Qc=n,this.Jl(a)}}for(t.reset();t.next();)if((n=t.value)instanceof Rc&&(!e||n.dq)&&n.canLayout()&&i(n)&&null===this.xx(n)){var o=n.W,a=n.Z;null!==o&&null!==a&&o!==a&&(o=this.findGroupVertex(o),a=this.findGroupVertex(a),null!==o&&null!==a&&this.iq(o,a,n))}}},Nf.prototype.findGroupVertex=function(t){if(null===t)return null;var e=t.findVisibleNode();if(null===e)return null;if(null!==(t=this.xn(e)))return t;for(e=e.Da;null!==e;){if(null!==(t=this.xn(e)))return t;e=e.Da}return null},Nf.prototype.addVertex=Nf.prototype.Jl=function(t){if(null!==t){this.vertexes.add(t);var e=t.Qc;null!==e&&this.Wx.add(e,t),t.network=this}},Nf.prototype.addNode=Nf.prototype.Ht=function(t){if(null===t)return null;var e=this.xn(t);return null===e&&((e=this.createVertex()).Qc=t,this.Jl(e)),e},Nf.prototype.deleteVertex=Nf.prototype.SE=function(t){if(null!==t&&Cf(this,t)){for(var e=t.Qe,i=e.count-1;0<=i;i--){var n=e.ea(i);this.Pp(n)}for(i=(e=t.Je).count-1;0<=i;i--)n=e.ea(i),this.Pp(n)}},Nf.prototype.deleteNode=function(t){null!==t&&(null!==(t=this.xn(t))&&this.SE(t))},Nf.prototype.findVertex=Nf.prototype.xn=function(t){return null===t?null:this.Wx.ka(t)},Nf.prototype.addEdge=Nf.prototype.Bp=function(t){if(null!==t){this.edges.add(t);var e=t.link;null!==e&&null===this.xx(e)&&this.Rx.add(e,t),null!==(e=t.toVertex)&&e.wE(t),null!==(e=t.fromVertex)&&e.uE(t),t.network=this}},Nf.prototype.addLink=function(t){if(null===t)return null;var e=t.W,i=t.Z,n=this.xx(t);return null===n?((n=this.createEdge()).link=t,null!==e&&(n.fromVertex=this.Ht(e)),null!==i&&(n.toVertex=this.Ht(i)),this.Bp(n)):(n.fromVertex=null!==e?this.Ht(e):null,n.toVertex=null!==i?this.Ht(i):null),n},Nf.prototype.deleteEdge=Nf.prototype.Pp=function(t){if(null!==t){var e=t.toVertex;null!==e&&e.RE(t),null!==(e=t.fromVertex)&&e.QE(t),Af(this,t)}},Nf.prototype.deleteLink=function(t){null!==t&&(null!==(t=this.xx(t))&&this.Pp(t))},Nf.prototype.findEdge=Nf.prototype.xx=function(t){return null===t?null:this.Rx.ka(t)},Nf.prototype.linkVertexes=Nf.prototype.iq=function(t,e,i){if(null===t||null===e)return null;if(t.network===this&&e.network===this){var n=this.createEdge();return n.link=i,n.fromVertex=t,n.toVertex=e,this.Bp(n),n}return null},Nf.prototype.reverseEdge=Nf.prototype.my=function(t){if(null!==t){var e=t.fromVertex,i=t.toVertex;null!==e&&null!==i&&(e.QE(t),i.RE(t),t.my(),e.wE(t),i.uE(t))}},Nf.prototype.deleteSelfEdges=Nf.prototype.sx=function(){for(var t=r.eb(),e=this.edges.i;e.next();){var i=e.value;i.fromVertex===i.toVertex&&t.push(i)}for(e=t.length,i=0;i<e;i++)this.Pp(t[i]);r.ta(t)},Nf.prototype.deleteArtificialVertexes=function(){for(var t=r.eb(),e=this.vertexes.i;e.next();){null===(i=e.value).Qc&&t.push(i)}for(var i=t.length,n=0;n<i;n++)this.SE(t[n]);for(e=r.eb(),i=this.edges.i;i.next();)null===(n=i.value).link&&e.push(n);for(i=e.length,n=0;n<i;n++)this.Pp(e[n]);r.ta(t),r.ta(e)},Nf.prototype.splitIntoSubNetworks=Nf.prototype.NJ=function(){this.deleteArtificialVertexes(),function(t){for(var e=r.eb(),i=t.edges.i;i.next();){var n=i.value;null!==n.fromVertex&&null!==n.toVertex||e.push(n)}for(i=e.length,n=0;n<i;n++)t.Pp(e[n]);r.ta(e)}(this),this.sx();for(var t=new et(Nf),e=!0;e;){e=!1;for(var i=this.vertexes.i;i.next();){var n=i.value;if(0<n.Qe.count||0<n.Je.count){e=this.Sb.createNetwork(),t.add(e),Ff(this,e,n),e=!0;break}}}return t.sort(function(t,e){return null===t||null===e||t===e?0:e.vertexes.count-t.vertexes.count}),t},Nf.prototype.findAllParts=function(){for(var t=new nt(Ch),e=this.vertexes.i;e.next();)t.add(e.value.Qc);for(e=this.edges.i;e.next();)t.add(e.value.link);return t},r.ga("LayoutVertex",Df),Df.prototype.clear=function(){this.vd=this.Zd=null,this.Qe=new et(Lf),this.Je=new et(Lf)},Df.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutVertex#"+r.Pd(this);if(0<t&&(e+=null!==this.Qc?"("+this.Qc.toString()+")":"",1<t)){t="";for(var i=!0,n=this.Qe.i;n.next();){var o=n.value;i?i=!1:t+=",",t+=o.toString(0)}for(o="",i=!0,n=this.Je.i;n.next();){var a=n.value;i?i=!1:o+=",",o+=a.toString(0)}e+=" sources: "+t+" destinations: "+o}return e},r.defineProperty(Df,{data:"data"},function(){return this.Zd},function(t){if(this.Zd=t,null!==t){t=(n=t.bounds).x;var e=n.y,i=n.width,n=n.height;this.T.m(i/2,n/2),this.M.m(t,e,i,n)}}),r.defineProperty(Df,{Qc:"node"},function(){return this.vd},function(t){if(this.vd!==t){this.vd=t,t.af();var e=(o=t.Y).x,i=o.y,n=o.width,o=o.height;if(isNaN(e)&&(e=0),isNaN(i)&&(i=0),this.M.m(e,i,n,o),!(t instanceof xf)&&(t=t.bg.Wa(k)).I())return void this.T.m(t.x-e,t.y-i);this.T.m(n/2,o/2)}}),r.defineProperty(Df,{ab:"bounds"},function(){return this.M},function(t){this.M.L(t)||this.M.assign(t)}),r.defineProperty(Df,{focus:"focus"},function(){return this.T},function(t){this.T.L(t)||this.T.assign(t)}),r.defineProperty(Df,{la:"centerX"},function(){return this.M.x+this.T.x},function(t){var e=this.M;e.x+this.T.x!==t&&(e.Qa(),e.x=t-this.T.x,e.freeze())}),r.defineProperty(Df,{ra:"centerY"},function(){return this.M.y+this.T.y},function(t){var e=this.M;e.y+this.T.y!==t&&(e.Qa(),e.y=t-this.T.y,e.freeze())}),r.defineProperty(Df,{bu:"focusX"},function(){return this.T.x},function(t){var e=this.T;e.x!==t&&(e.Qa(),e.x=t,e.freeze())}),r.defineProperty(Df,{cu:"focusY"},function(){return this.T.y},function(t){var e=this.T;e.y!==t&&(e.Qa(),e.y=t,e.freeze())}),r.defineProperty(Df,{x:"x"},function(){return this.M.x},function(t){var e=this.M;e.x!==t&&(e.Qa(),e.x=t,e.freeze())}),r.defineProperty(Df,{y:"y"},function(){return this.M.y},function(t){var e=this.M;e.y!==t&&(e.Qa(),e.y=t,e.freeze())}),r.defineProperty(Df,{width:"width"},function(){return this.M.width},function(t){var e=this.M;e.width!==t&&(e.Qa(),e.width=t,e.freeze())}),r.defineProperty(Df,{height:"height"},function(){return this.M.height},function(t){var e=this.M;e.height!==t&&(e.Qa(),e.height=t,e.freeze())}),Df.prototype.commit=function(){var t=this.Zd;if(null!==t){var e=this.ab,i=t.bounds;r.Pa(i)?(i.x=e.x,i.y=e.y,i.width=e.width,i.height=e.height):t.bounds=e.copy()}else if(null!==(t=this.Qc)){if(e=this.ab,!(t instanceof xf)){i=t.Y;var n=t.bg.Wa(k);if(i.I()&&n.I())return void t.moveTo(e.x+this.bu-(n.x-i.x),e.y+this.cu-(n.y-i.y))}t.moveTo(e.x,e.y)}},Df.prototype.addSourceEdge=Df.prototype.wE=function(t){null!==t&&(this.Qe.contains(t)||this.Qe.add(t))},Df.prototype.deleteSourceEdge=Df.prototype.RE=function(t){null!==t&&this.Qe.remove(t)},Df.prototype.addDestinationEdge=Df.prototype.uE=function(t){null!==t&&(this.Je.contains(t)||this.Je.add(t))},Df.prototype.deleteDestinationEdge=Df.prototype.QE=function(t){null!==t&&this.Je.remove(t)},r.u(Df,{MJ:"sourceVertexes"},function(){for(var t=new nt(Df),e=this.nc;e.next();)t.add(e.value.fromVertex);return t.i}),r.u(Df,{PH:"destinationVertexes"},function(){for(var t=new nt(Df),e=this.kc;e.next();)t.add(e.value.toVertex);return t.i}),r.u(Df,{vertexes:"vertexes"},function(){for(var t=new nt(Df),e=this.nc;e.next();)t.add(e.value.fromVertex);for(e=this.kc;e.next();)t.add(e.value.toVertex);return t.i}),r.u(Df,{nc:"sourceEdges"},function(){return this.Qe.i}),r.u(Df,{kc:"destinationEdges"},function(){return this.Je.i}),r.u(Df,{edges:"edges"},function(){for(var t=new et(Lf),e=this.nc;e.next();)t.add(e.value);for(e=this.kc;e.next();)t.add(e.value);return t.i}),r.u(Df,{UH:"edgesCount"},function(){return this.Qe.count+this.Je.count}),Df.standardComparer=lu=function(t,e){var i=t.vd,n=e.vd;return i?n?(i=i.text)<(n=n.text)?-1:i>n?1:0:1:null!==n?-1:0},Df.smartComparer=function(t,e){if(null!==t){if(null!==e){var i=t.vd,n=e.vd;if(null!==i){if(null!==n){i=i.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),n=n.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/);for(var o=0;o<i.length;o++)if(""!==n[o]&&void 0!==n[o]){var r=parseFloat(i[o]),a=parseFloat(n[o]);if(isNaN(r)){if(!isNaN(a))return 1;if(0!==i[o].localeCompare(n[o]))return i[o].localeCompare(n[o])}else{if(isNaN(a))return-1;if(0!=r-a)return r-a}}else if(""!==i[o])return 1;return""!==n[o]&&void 0!==n[o]?-1:0}return 1}return null!==n?-1:0}return 1}return null!==e?-1:0},r.ga("LayoutEdge",Lf),Lf.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=this.data=null},Lf.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutEdge#"+r.Pd(this);return 0<t&&(e+=null!==this.link?"("+this.link.toString()+")":"",1<t&&(e+=" "+(this.fromVertex?this.fromVertex.toString():"null")+" --\x3e "+(this.toVertex?this.toVertex.toString():"null"))),e},Lf.prototype.my=function(){var t=this.fromVertex;this.fromVertex=this.toVertex,this.toVertex=t},Lf.prototype.commit=function(){},Lf.prototype.getOtherVertex=Lf.prototype.dI=function(t){return this.toVertex===t?this.fromVertex:this.fromVertex===t?this.toVertex:null},r.La(jf,Sf),r.ga("GridLayout",jf),jf.prototype.cloneProtected=function(t){Sf.prototype.cloneProtected.call(this,t),t.Dt=this.Dt,t.Ct=this.Ct,t.Nj.assign(this.Nj),t.di.assign(this.di),t.je=this.je,t.pd=this.pd,t.ci=this.ci,t.Mh=this.Mh},jf.prototype.hc=function(t){t.Ge===jf?t===vu||t===mu||t===pu||t===yu?this.sorting=t:t===fu||t===du?this.Vf=t:t===cu||t===uu?this.alignment=t:r.k("Unknown enum value: "+t):Sf.prototype.hc.call(this,t)},jf.prototype.doLayout=function(t){null===t&&r.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.Nd=this.initialOrigin(this.Nd);for(var e=this.g,i=(t=this.wH(t)).copy().i;i.next();){var n=i.value;if(n instanceof Rc){var o=n;if(null!==o.W||null!==o.Z){t.remove(o);continue}}if(n.af(),n instanceof xf)for(n=n.vc;n.next();)t.remove(n.value)}if(0!==(o=t.xc()).length){switch(this.sorting){case yu:o.reverse();break;case vu:o.sort(this.comparer);break;case mu:o.sort(this.comparer),o.reverse()}var a=this.cK;isNaN(a)&&(a=0);var s=this.MG;s=isNaN(s)&&null!==e?Math.max(e.rb.width-e.padding.left-e.padding.right,0):Math.max(this.MG,0);switch(0>=a&&0>=s&&(a=1),t=this.spacing.width,isFinite(t)||(t=0),i=this.spacing.height,isFinite(i)||(i=0),null!==e&&e.Hb("Layout"),n=[],this.alignment){case uu:var l=t,h=i,u=Math.max(this.Gp.width,1);if(!isFinite(u))for(var c=u=0;c<o.length;c++){var f=(x=o[c]).za;u=Math.max(u,f.width)}u=Math.max(u+l,1);var d=Math.max(this.Gp.height,1);if(!isFinite(d))for(c=d=0;c<o.length;c++)f=(x=o[c]).za,d=Math.max(d,f.height);d=Math.max(d+h,1);var p=this.Vf,y=this.Nd.x,v=y,m=this.Nd.y,g=0,b=0;for(c=0;c<o.length;c++){f=(x=o[c]).za;var x,w=Math.ceil((f.width+l)/u)*u,k=Math.ceil((f.height+h)/d)*d,M=0;switch(p){case du:M=Math.abs(v-f.width);break;default:M=v+f.width}switch((0<a&&g>a-1||0<s&&0<g&&M>s)&&(n.push(new pt(0,m,s+l,b)),g=0,v=y,m+=b,b=0),b=Math.max(b,k),k=0,p){case du:k=-f.width;break;default:k=0}switch(x.moveTo(v+k,m),p){case du:v-=w;break;default:v+=w}g++}n.push(new pt(0,m,s+l,b));break;case cu:for(l=a,h=t,u=i,c=Math.max(this.Gp.width,1),x=m=w=0,f=r.K(),a=0;a<o.length;a++)p=(d=o[a]).za,y=Lh(d,d.bg,d.Ff,f),w=Math.max(w,y.x),m=Math.max(m,p.width-y.x),x=Math.max(x,y.y);switch(v=this.Vf){case du:w+=h;break;default:m+=h}c=isFinite(c)?Math.max(c+h,1):Math.max(w+m,1);var S=m=this.Nd.x;g=this.Nd.y,b=0;s>=w&&(s-=w);w=k=0,M=Math.max(this.Gp.height,1);var T=x=0,P=!0,N=r.K();for(a=0;a<o.length;a++){if(p=(d=o[a]).za,y=Lh(d,d.bg,d.Ff,f),0<b)switch(v){case du:S=(S-m-(p.width-y.x))/c,S=(S=ke(Math.round(S),S)?Math.round(S):Math.floor(S))*c+m;break;default:S=(S-m+y.x)/c,S=(S=ke(Math.round(S),S)?Math.round(S):Math.ceil(S))*c+m}else switch(v){case du:k=S+y.x+p.width;break;default:k=S-y.x}var C=0;switch(v){case du:C=-(S+y.x)+k;break;default:C=S+p.width-y.x-k}if(0<l&&b>l-1||0<s&&0<b&&C>s){for(n.push(new pt(0,P?g-x:g,s+h,T+x+u)),S=0;S<b&&a!==b;S++){var A=Lh(C=o[a-b+S],C.bg,C.Ff,N);C.moveTo(C.position.x,C.position.y+x-A.y)}T+=u,g=P?g+T:g+(T+x),b=T=x=0,S=m,P=!1}switch(S===m&&(w=v===du?Math.max(w,p.width-y.x):Math.min(w,-y.x)),x=Math.max(x,y.y),T=Math.max(T,p.height-y.y),isFinite(M)&&(T=Math.max(T,Math.max(p.height,M)-y.y)),P?d.moveTo(S-y.x,g-y.y):d.moveTo(S-y.x,g),v){case du:S-=y.x+h;break;default:S+=p.width-y.x+h}b++}for(n.push(new pt(0,g,s+h,(P?T:T+x)+u)),S=0;S<b&&a!==b;S++)A=Lh(C=o[a-b+S],C.bg,C.Ff,f),C.moveTo(C.position.x,C.position.y+x-A.y);if(r.v(f),r.v(N),v===du)for(a=0;a<n.length;a++)(o=n[a]).width+=w,o.x-=w;else for(a=0;a<n.length;a++)(o=n[a]).x>w&&(o.width+=o.x-w,o.x=w)}for(l=a=s=o=0;l<n.length;l++)h=n[l],o=Math.min(o,h.x),s=Math.min(s,h.y),a=Math.max(a,h.x+h.width);this.Vf===du?this.commitLayers(n,new ut(o+t/2-(a+o),s-i/2)):this.commitLayers(n,new ut(o-t/2,s-i/2)),null!==e&&e.Yc("Layout"),this.sf=!0}},jf.prototype.commitLayers=function(){},r.defineProperty(jf,{MG:"wrappingWidth"},function(){return this.Dt},function(t){this.Dt!==t&&(r.j(t,"number",jf,"wrappingWidth"),0<t||isNaN(t))&&(this.Dt=t,this.Mx=isNaN(t),this.J())}),r.defineProperty(jf,{cK:"wrappingColumn"},function(){return this.Ct},function(t){this.Ct!==t&&(r.j(t,"number",jf,"wrappingColumn"),0<t||isNaN(t))&&(this.Ct=t,this.J())}),r.defineProperty(jf,{Gp:"cellSize"},function(){return this.Nj},function(t){r.G(t,dt,jf,"cellSize"),this.Nj.L(t)||(this.Nj.assign(t),this.J())}),r.defineProperty(jf,{spacing:"spacing"},function(){return this.di},function(t){r.G(t,dt,jf,"spacing"),this.di.L(t)||(this.di.assign(t),this.J())}),r.defineProperty(jf,{alignment:"alignment"},function(){return this.je},function(t){this.je!==t&&(r.ob(t,jf,jf,"alignment"),t===cu||t===uu)&&(this.je=t,this.J())}),r.defineProperty(jf,{Vf:"arrangement"},function(){return this.pd},function(t){this.pd!==t&&(r.ob(t,jf,jf,"arrangement"),t===fu||t===du)&&(this.pd=t,this.J())}),r.defineProperty(jf,{sorting:"sorting"},function(){return this.ci},function(t){this.ci!==t&&(r.ob(t,jf,jf,"sorting"),t===pu||t===yu||t===vu||t===mu)&&(this.ci=t,this.J())}),r.defineProperty(jf,{comparer:"comparer"},function(){return this.Mh},function(t){this.Mh!==t&&(r.j(t,"function",jf,"comparer"),this.Mh=t,this.J())}),jf.standardComparer=hu=function(t,e){var i=t.text,n=e.text;return i<n?-1:i>n?1:0},jf.smartComparer=function(t,e){if(null!==t){if(null!==e){for(var i=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),n=e.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),o=0;o<i.length;o++)if(""!==n[o]&&void 0!==n[o]){var r=parseFloat(i[o]),a=parseFloat(n[o]);if(isNaN(r)){if(!isNaN(a))return 1;if(0!==i[o].localeCompare(n[o]))return i[o].localeCompare(n[o])}else{if(isNaN(a))return-1;if(0!=r-a)return r-a}}else if(""!==i[o])return 1;return""!==n[o]&&void 0!==n[o]?-1:0}return 1}return null!==e?-1:0},jf.Position=uu=r.p(jf,"Position",0),jf.Location=cu=r.p(jf,"Location",1),jf.LeftToRight=fu=r.p(jf,"LeftToRight",2),jf.RightToLeft=du=r.p(jf,"RightToLeft",3),jf.Forward=pu=r.p(jf,"Forward",4),jf.Reverse=yu=r.p(jf,"Reverse",5),jf.Ascending=vu=r.p(jf,"Ascending",6),jf.Descending=mu=r.p(jf,"Descending",7),r.La(zf,Sf),r.ga("CircularLayout",zf),zf.prototype.cloneProtected=function(t){Sf.prototype.cloneProtected.call(this,t),t.Qs=this.Qs,t.Sq=this.Sq,t.qt=this.qt,t.st=this.st,t.pd=this.pd,t.ba=this.ba,t.ci=this.ci,t.Mh=this.Mh,t.di=this.di,t.Ds=this.Ds},zf.prototype.hc=function(t){t.Ge===zf?t===Cu||t===Au||t===Pu||t===Nu||t===Fu?this.sorting=t:t===Su||t===Tu||t===ku||t===Mu?this.direction=t:t===xu||t===bu||t===gu||t===wu?this.Vf=t:t!==Lu&&t!==Du||(this.Vx=t):Sf.prototype.hc.call(this,t)},zf.prototype.createNetwork=function(){return new Kf},zf.prototype.doLayout=function(t){if(null===t&&r.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),this.Nd=this.initialOrigin(this.Nd),1>=(t=this.network.vertexes).count)1===t.count&&((t=t.first()).la=0,t.ra=0);else{(u=new et(Wf)).Nc(t.i),t=new et(Wf);var e,i=new et(Wf);e=this.sort(u);var n=this.hz,o=this.UC,a=this.Fd,s=this.Bo,l=this.iz,h=this.yr,u=this.il,c=this.iE,f=this.Uf,d=this.wv;n=this.Vf,o=this.Vx,a=this.mJ;if((!isFinite(a)||0>=a)&&(a=NaN),s=this.qH,(!isFinite(s)||0>=s)&&(s=1),l=this.ze,isFinite(l)||(l=0),h=this.uf,(!isFinite(h)||360<h||1>h)&&(h=360),u=this.spacing,isFinite(u)||(u=NaN),n===wu&&o===Lu?n=gu:n===wu&&o!==Lu&&(o=Lu,n=this.Vf),(this.direction===Su||this.direction===Tu)&&this.sorting!==Fu){for(var p=0;!(p>=e.length)&&(t.add(e.ea(p)),!(p+1>=e.length));p+=2)i.add(e.ea(p+1));this.direction===Su?(this.Vf===wu&&t.reverse(),(e=new et(Wf)).Nc(t),e.Nc(i)):(this.Vf===wu&&i.reverse(),(e=new et(Wf)).Nc(i),e.Nc(t))}var y=e.length,v=c=0;for(p=0;p<e.length;p++){f=l+h*v*(this.direction===ku?1:-1)/y;var m=e.ea(p).diameter;isNaN(m)&&(m=Uf(e.ea(p),f)),360>h&&(0===p||p===e.length-1)&&(m/=2),c+=m,v++}if(isNaN(a)||n===wu){if(isNaN(u)&&(u=6),n!==gu&&n!==wu){for(m=-1/0,p=0;p<y;p++){d=e.ea(p);var g=e.ea(p===y-1?0:p+1);isNaN(d.diameter)&&Uf(d,0),isNaN(g.diameter)&&Uf(g,0),m=Math.max(m,(d.diameter+g.diameter)/2)}d=m+u,n===xu?a=(m+u)/(f=2*Math.PI/y):a=Vf(this,d*(360<=h?y:y-1),s,l*Math.PI/180,h*Math.PI/180)}else a=Vf(this,c+(360<=h?y:y-1)*(n!==wu?u:1.6*u),s,l*Math.PI/180,h*Math.PI/180);f=a*s}else if(v=Gf(this,a,f=a*s,l*Math.PI/180,h*Math.PI/180),isNaN(u))n!==gu&&n!==wu||(u=(v-c)/(360<=h?y:y-1));else if(n===gu||n===wu)(p=(v-c)/(360<=h?y:y-1))<u?f=(a=Vf(this,c+u*(360<=h?y:y-1),s,l*Math.PI/180,h*Math.PI/180))*s:u=p;else{for(m=-1/0,p=0;p<y;p++)d=e.ea(p),g=e.ea(p===y-1?0:p+1),isNaN(d.diameter)&&Uf(d,0),isNaN(g.diameter)&&Uf(g,0),m=Math.max(m,(d.diameter+g.diameter)/2);(p=Vf(this,(d=m+u)*(360<=h?y:y-1),s,l*Math.PI/180,h*Math.PI/180))>a?f=(a=p)*s:d=v/(360<=h?y:y-1)}if(this.hz=n,this.UC=o,this.Fd=a,this.Bo=s,this.iz=l,this.yr=h,this.il=u,this.iE=c,this.Uf=f,this.wv=d,u=e,e=this.hz,n=this.Fd,o=this.iz,s=this.yr,l=this.il,h=this.Uf,c=this.wv,this.direction!==Su&&this.direction!==Tu||e!==wu)if(this.direction===Su||this.direction===Tu){switch(a=0,e){case bu:a=180*_f(this,n,h,o,c)/Math.PI;break;case gu:c=u=0,null!==(a=t.first())&&(u=Uf(a,Math.PI/2)),null!==(a=i.first())&&(c=Uf(a,Math.PI/2)),a=180*_f(this,n,h,o,l+(u+c)/2)/Math.PI;break;case xu:a=s/u.length}if(this.direction===Su){switch(e){case bu:Of(this,t,o,Mu);break;case gu:If(this,t,o,Mu);break;case xu:Bf(this,t,s/2,o,Mu)}switch(e){case bu:Of(this,i,o+a,ku);break;case gu:If(this,i,o+a,ku);break;case xu:Bf(this,i,s/2,o+a,ku)}}else{switch(e){case bu:Of(this,i,o,Mu);break;case gu:If(this,i,o,Mu);break;case xu:Bf(this,i,s/2,o,Mu)}switch(e){case bu:Of(this,t,o+a,ku);break;case gu:If(this,t,o+a,ku);break;case xu:Bf(this,t,s/2,o+a,ku)}}}else switch(e){case bu:Of(this,u,o,this.direction);break;case gu:If(this,u,o,this.direction);break;case xu:Bf(this,u,s,o,this.direction);break;case wu:Ef(this,u,s,o,this.direction)}else Ef(this,u,s,o-s/2,ku)}this.updateParts(),this.network=null,this.sf=!0},zf.prototype.commitLayout=function(){this.commitNodes(),this.uu&&this.commitLinks()},zf.prototype.commitNodes=function(){var t=this.iH,e=null!==this.group&&null!==this.group.placeholder&&this.group.ad,i=e?this.group.location.copy():null;e?t=new ut(0,0):(t.x=this.Nd.x+this.Fd,t.y=this.Nd.y+this.Uf);for(var n=this.network.vertexes.i;n.next();){var o=n.value;o.x+=t.x,o.y+=t.y,o.commit()}e&&(this.group.af(),t=this.group.position.copy(),e=this.group.location.copy(),i=i.Hj(e.Hj(t)),this.group.move(i),this.eC=i.Hj(t))},zf.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},zf.prototype.sort=function(t){switch(this.sorting){case Pu:break;case Nu:t.reverse();break;case Cu:t.sort(this.comparer);break;case Au:t.sort(this.comparer),t.reverse();break;case Fu:for(var e=[],i=0;i<t.length;i++)e.push(0);var n=new et(Wf);for(i=0;i<t.length;i++){var o=-1,a=-1;if(0===i)for(var s=0;s<t.length;s++){(h=t.ea(s).UH)>o&&(o=h,a=s)}else for(s=0;s<t.length;s++)(h=e[s])>o&&(o=h,a=s);for(n.add(t.ea(a)),e[a]=-1,o=0,s=(a=t.ea(a)).nc;s.next();)0>(o=t.indexOf(s.value.fromVertex))||0<=e[o]&&e[o]++;for(a=a.kc;a.next();)0>(o=t.indexOf(a.value.toVertex))||0<=e[o]&&e[o]++}for(t=[],a=0;a<n.length;a++){e=n.ea(a),t[a]=[];var l=0;for(i=e.kc;i.next();)(l=n.indexOf(i.value.toVertex))!==a&&0>t[a].indexOf(l)&&t[a].push(l);for(e=e.nc;e.next();)(l=n.indexOf(e.value.fromVertex))!==a&&0>t[a].indexOf(l)&&t[a].push(l)}for(s=[],a=0;a<t.length;a++)s[a]=0;e=[];var h=[],u=[],c=(i=[],o=new et(Wf),0);for(a=0;a<t.length;a++){if(1===(v=t[a].length))i.push(a);else if(0===v)o.add(n.ea(a));else{if(0===c)e.push(a);else{for(var f=1/0,d=1/0,p=-1,y=[],v=0;v<e.length;v++)0>t[e[v]].indexOf(e[v===e.length-1?0:v+1])&&y.push(v===e.length-1?0:v+1);if(0===y.length)for(v=0;v<e.length;v++)y.push(v);for(v=0;v<y.length;v++){var m,g=y[v];l=t[a];m=h;for(var b=u,x=s,w=g,k=e,M=0,S=0;S<m.length;S++){var T=x[m[S]],P=x[b[S]],N=0,C=0;if(T<P?(N=T,C=P):(N=P,C=T),N<w&&w<=C)for(T=0;T<l.length;T++)P=l[T],0>k.indexOf(P)||N<x[P]&&x[P]<C||N===x[P]||C===x[P]||M++;else for(T=0;T<l.length;T++)P=l[T],0>k.indexOf(P)||N<x[P]&&x[P]<C&&N!==x[P]&&C!==x[P]&&M++}for(m=M,x=b=0;x<t[a].length;x++)0<=(l=e.indexOf(t[a][x]))&&(b+=(l=Math.abs(g-(l>=g?l+1:l)))<e.length+1-l?l:e.length+1-l);for(x=0;x<h.length;x++)l=s[h[x]],w=s[u[x]],l>=g&&l++,w>=g&&w++,l>w&&(k=w,w=l,l=k),w-l<(e.length+2)/2==(l<g&&g<=w)&&b++;(m<f||m===f&&b<d)&&(f=m,d=b,p=g)}for(e.splice(p,0,a),v=0;v<e.length;v++)s[e[v]]=v;for(v=0;v<t[a].length;v++)f=t[a][v],0<=e.indexOf(f)&&(h.push(a),u.push(f))}c++}}for(a=!1,s=e.length;;){for(a=!0,h=0;h<i.length;h++)if(c=t[u=i[h]][0],0<=(l=e.indexOf(c))){for(d=v=0;d<t[c].length;d++)f=t[c][d],0>(f=e.indexOf(f))||f===l||(v+=f<l!=(p=f>l?f-l:l-f)>s-p?1:-1);e.splice(0>v?l:l+1,0,u),i.splice(h,1),h--}else a=!1;if(a)break;e.push(i[0]),i.splice(0,1)}for(a=0;a<e.length;a++)o.add(n.ea(e[a]));return o;default:r.k("Invalid sorting type.")}return t},r.defineProperty(zf,{mJ:"radius"},function(){return this.Qs},function(t){this.Qs!==t&&(r.j(t,"number",zf,"radius"),0<t||isNaN(t))&&(this.Qs=t,this.J())}),r.defineProperty(zf,{qH:"aspectRatio"},function(){return this.Sq},function(t){this.Sq!==t&&(r.j(t,"number",zf,"aspectRatio"),0<t&&(this.Sq=t,this.J()))}),r.defineProperty(zf,{ze:"startAngle"},function(){return this.qt},function(t){this.qt!==t&&(r.j(t,"number",zf,"startAngle"),this.qt=t,this.J())}),r.defineProperty(zf,{uf:"sweepAngle"},function(){return this.st},function(t){this.st!==t&&(r.j(t,"number",zf,"sweepAngle"),this.st=0<t&&360>=t?t:360,this.J())}),r.defineProperty(zf,{Vf:"arrangement"},function(){return this.pd},function(t){this.pd!==t&&(r.ob(t,zf,zf,"arrangement"),t===wu||t===gu||t===bu||t===xu)&&(this.pd=t,this.J())}),r.defineProperty(zf,{direction:"direction"},function(){return this.ba},function(t){this.ba!==t&&(r.ob(t,zf,zf,"direction"),t===ku||t===Mu||t===Su||t===Tu)&&(this.ba=t,this.J())}),r.defineProperty(zf,{sorting:"sorting"},function(){return this.ci},function(t){this.ci!==t&&(r.ob(t,zf,zf,"sorting"),t===Pu||t===Nu||t===Cu||Au||t===Fu)&&(this.ci=t,this.J())}),r.defineProperty(zf,{comparer:"comparer"},function(){return this.Mh},function(t){this.Mh!==t&&(r.j(t,"function",zf,"comparer"),this.Mh=t,this.J())}),r.defineProperty(zf,{spacing:"spacing"},function(){return this.di},function(t){this.di!==t&&(r.j(t,"number",zf,"spacing"),this.di=t,this.J())}),r.defineProperty(zf,{Vx:"nodeDiameterFormula"},function(){return this.Ds},function(t){this.Ds!==t&&(r.ob(t,zf,zf,"nodeDiameterFormula"),t===Du||t===Lu)&&(this.Ds=t,this.J())}),r.u(zf,{fK:"actualXRadius"},function(){return this.Fd}),r.u(zf,{gK:"actualYRadius"},function(){return this.Uf}),r.u(zf,{eK:"actualSpacing"},function(){return this.il}),r.u(zf,{iH:"actualCenter"},function(){return this.eC}),zf.ConstantSpacing=gu=r.p(zf,"ConstantSpacing",0),zf.ConstantDistance=bu=r.p(zf,"ConstantDistance",1),zf.ConstantAngle=xu=r.p(zf,"ConstantAngle",2),zf.Packed=wu=r.p(zf,"Packed",3),zf.Clockwise=ku=r.p(zf,"Clockwise",4),zf.Counterclockwise=Mu=r.p(zf,"Counterclockwise",5),zf.BidirectionalLeft=Su=r.p(zf,"BidirectionalLeft",6),zf.BidirectionalRight=Tu=r.p(zf,"BidirectionalRight",7),zf.Forwards=Pu=r.p(zf,"Forwards",8),zf.Reverse=Nu=r.p(zf,"Reverse",9),zf.Ascending=Cu=r.p(zf,"Ascending",10),zf.Descending=Au=r.p(zf,"Descending",11),zf.Optimized=Fu=r.p(zf,"Optimized",12),zf.Pythagorean=Du=r.p(zf,"Pythagorean",13),zf.Circular=Lu=r.p(zf,"Circular",14),Hf.prototype.compare=function(t,e){if(0<t&&0>this.Vp||Math.abs(t)<Math.abs(this.Vp)&&!(0>t&&0<this.Vp)){this.Vp=t,this.co=[],this.Gq=[];for(var i=0;i<e.length;i++)this.co[i]=e[i].ab.x,this.Gq[i]=e[i].ab.y}},Hf.prototype.commit=function(t){if(null!==this.co&&null!==this.Gq)for(var e=0;e<this.co.length;e++){var i=t.ea(e);i.x=this.co[e],i.y=this.Gq[e]}},r.La(Kf,Nf),r.ga("CircularNetwork",Kf),Kf.prototype.createVertex=function(){return new Wf},Kf.prototype.createEdge=function(){return new Jf},r.La(Wf,Df),r.ga("CircularVertex",Wf),r.La(Jf,Lf),r.ga("CircularEdge",Jf),r.La($f,Sf),r.ga("ForceDirectedLayout",$f),$f.prototype.cloneProtected=function(t){Sf.prototype.cloneProtected.call(this,t),t.ng.assign(this.ng),t.Rq=this.Rq,t.bi=this.bi,t.Lh=this.Lh,t.Yo=this.Yo,t.Br=this.Br,t.Mi=this.Mi,t.xs=this.xs,t.Rs=this.Rs,t.yo=this.yo,t.xo=this.xo,t.vo=this.vo,t.wo=this.wo,t.or=this.or,t.nr=this.nr},$f.prototype.createNetwork=function(){return new nd},$f.prototype.doLayout=function(t){if(null===t&&r.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),t=this.ZA,0<this.network.vertexes.count){this.network.sx();for(var e=this.network.vertexes.i;e.next();){var i=e.value;i.charge=this.electricalCharge(i),i.mass=this.gravitationalMass(i)}for(e=this.network.edges.i;e.next();)(i=e.value).stiffness=this.springStiffness(i),i.length=this.springLength(i);if(this.dA(),this.bs=0,this.needsClusterLayout()){for(i=(e=this.network).NJ().i;i.next();){this.network=i.value;for(var n=this.network.vertexes.i;n.next();){var o=n.value;o.jg=o.vertexes.count,o.Ok=1,o.on=null,o.Fh=null}Yf(this,0,t)}this.network=e,i.reset();n=this.CE;for(var a=i.count,s=!0,l=o=0,h=r.eb(),u=0;u<a+e.vertexes.count+2;u++)h[u]=null;a=0,i.reset();for(var c=r.Kf();i.next();)if(u=i.value,this.sh(u,c),s)s=!1,o=c.x+c.width/2,l=c.y+c.height/2,h[0]=new ut(c.x+c.width+n.width,c.y),h[1]=new ut(c.x,c.y+c.height+n.height),a=2;else{var f=Qf(h,a,o,l,c.width,c.height,n),d=h[f],p=new ut(d.x+c.width+n.width,d.y),y=new ut(d.x,d.y+c.height+n.height);for(f+1<a&&h.splice(f+1,0,null),h[f]=p,h[f+1]=y,a++,f=d.x-c.x,d=d.y-c.y,u=u.vertexes.i;u.next();)(p=u.value).la+=f,p.ra+=d}for(r.Eb(c),u=e.vertexes.i;u.next();)c=(s=u.value).ab,2>a?(o=c.x+c.width/2,l=c.y+c.height/2,h[0]=new ut(c.x+c.width+n.width,c.y),h[1]=new ut(c.x,c.y+c.height+n.height),a=2):(p=new ut((d=h[f=Qf(h,a,o,l,c.width,c.height,n)]).x+c.width+n.width,d.y),y=new ut(d.x,d.y+c.height+n.height),f+1<a&&h.splice(f+1,0,null),h[f]=p,h[f+1]=y,a++,s.la=d.x+s.width/2,s.ra=d.y+s.height/2);for(r.ta(h),i.reset();i.next();){for(o=(n=i.value).vertexes.i;o.next();)e.Jl(o.value);for(n=n.edges.i;n.next();)e.Bp(n.value)}}td(this,t),this.updateParts()}this.Yo=t,this.network=null,this.sf=!0},$f.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,i=this.network.vertexes.first().ab,n=this.network.vertexes.i;n.next();){if(n.value.ab.Zf(i)&&2<++t)return!0;if(10<e)break;e++}return!1},$f.prototype.sh=function(t,e){for(var i=!0,n=t.vertexes.i;n.next();){var o=n.value;i?(i=!1,e.set(o.ab)):e.Ih(o.ab)}return e},$f.prototype.dA=function(){if(this.comments)for(var t=this.network.vertexes.i;t.next();)this.addComments(t.value)},$f.prototype.addComments=function(t){var e=t.Qc;if(null!==e)for(e=e.$E();e.next();){if("Comment"===(n=e.value).yd&&n.isVisible()){var i=this.network.xn(n);null===i&&(i=this.network.Ht(n)),i.charge=this.KH;for(var n=null,o=i.kc;o.next();){var r=o.value;if(r.toVertex===t){n=r;break}}if(null===n)for(o=i.nc;o.next();)if((r=o.value).fromVertex===t){n=r;break}null===n&&(n=this.network.iq(t,i,null)),n.length=this.LH}}},$f.prototype.moveFixedVertex=function(){},$f.prototype.commitLayout=function(){this.zB(),this.commitNodes(),this.uu&&this.commitLinks()},$f.prototype.zB=function(){if(this.Aq)for(var t=this.network.edges.i;t.next();){var e=t.value.link;null!==e&&(e.Ab=m,e.Bb=m)}},$f.prototype.commitNodes=function(){var t=0,e=0;if(this.pH){var i=r.Kf();this.sh(this.network,i),t=(e=this.Nd).x-i.x,e=e.y-i.y,r.Eb(i)}i=r.Kf();for(var n=this.network.vertexes.i;n.next();){var o=n.value;0===t&&0===e||(i.assign(o.ab),i.x+=t,i.y+=e,o.ab=i),o.commit()}r.Eb(i)},$f.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},$f.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.yo:t},$f.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.xo:t},$f.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.vo:t},$f.prototype.electricalFieldX=function(){return 0},$f.prototype.electricalFieldY=function(){return 0},$f.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.wo:t},$f.prototype.gravitationalFieldX=function(){return 0},$f.prototype.gravitationalFieldY=function(){return 0},$f.prototype.isFixed=function(t){return t.isFixed},r.u($f,{NK:"currentIteration"},function(){return this.bs}),r.defineProperty($f,{CE:"arrangementSpacing"},function(){return this.ng},function(t){r.G(t,dt,$f,"arrangementSpacing"),this.ng.L(t)||(this.ng.assign(t),this.J())}),r.defineProperty($f,{pH:"arrangesToOrigin"},function(){return this.Rq},function(t){this.Rq!==t&&(r.j(t,"boolean",$f,"arrangesToOrigin"),this.Rq=t,this.J())}),r.defineProperty($f,{Aq:"setsPortSpots"},function(){return this.bi},function(t){this.bi!==t&&(r.j(t,"boolean",$f,"setsPortSpots"),this.bi=t,this.J())}),r.defineProperty($f,{comments:"comments"},function(){return this.Lh},function(t){this.Lh!==t&&(r.j(t,"boolean",$f,"comments"),this.Lh=t,this.J())}),r.defineProperty($f,{ZA:"maxIterations"},function(){return this.Yo},function(t){this.Yo!==t&&(r.j(t,"number",$f,"maxIterations"),0<=t&&(this.Yo=t,this.J()))}),r.defineProperty($f,{XE:"epsilonDistance"},function(){return this.Br},function(t){this.Br!==t&&(r.j(t,"number",$f,"epsilonDistance"),0<t&&(this.Br=t,this.J()))}),r.defineProperty($f,{gL:"infinityDistance"},function(){return this.Mi},function(t){this.Mi!==t&&(r.j(t,"number",$f,"infinityDistance"),1<t&&(this.Mi=t,this.J()))}),r.defineProperty($f,{fJ:"moveLimit"},function(){return this.xs},function(t){this.xs!==t&&(r.j(t,"number",$f,"moveLimit"),1<t&&(this.xs=t,this.J()))}),r.defineProperty($f,{gy:"randomNumberGenerator"},function(){return this.Rs},function(t){this.Rs!==t&&(null!==t&&"function"!=typeof t.random&&r.k('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.Rs=t)}),r.defineProperty($f,{ZK:"defaultSpringStiffness"},function(){return this.yo},function(t){this.yo!==t&&(r.j(t,"number",$f,"defaultSpringStiffness"),this.yo=t,this.J())}),r.defineProperty($f,{YK:"defaultSpringLength"},function(){return this.xo},function(t){this.xo!==t&&(r.j(t,"number",$f,"defaultSpringLength"),this.xo=t,this.J())}),r.defineProperty($f,{SK:"defaultElectricalCharge"},function(){return this.vo},function(t){this.vo!==t&&(r.j(t,"number",$f,"defaultElectricalCharge"),this.vo=t,this.J())}),r.defineProperty($f,{TK:"defaultGravitationalMass"},function(){return this.wo},function(t){this.wo!==t&&(r.j(t,"number",$f,"defaultGravitationalMass"),this.wo=t,this.J())}),r.defineProperty($f,{LH:"defaultCommentSpringLength"},function(){return this.or},function(t){this.or!==t&&(r.j(t,"number",$f,"defaultCommentSpringLength"),this.or=t,this.J())}),r.defineProperty($f,{KH:"defaultCommentElectricalCharge"},function(){return this.nr},function(t){this.nr!==t&&(r.j(t,"number",$f,"defaultCommentElectricalCharge"),this.nr=t,this.J())}),r.La(nd,Nf),r.ga("ForceDirectedNetwork",nd),nd.prototype.createVertex=function(){return new od},nd.prototype.createEdge=function(){return new rd},r.La(od,Df),r.ga("ForceDirectedVertex",od),r.La(rd,Lf),r.ga("ForceDirectedEdge",rd),r.La(ad,Sf),r.ga("LayeredDigraphLayout",ad),ad.prototype.cloneProtected=function(t){Sf.prototype.cloneProtected.call(this,t),t.Jm=this.Jm,t.Yd=this.Yd,t.ba=this.ba,t.uo=this.uo,t.Uo=this.Uo,t.Ko=this.Ko,t.Im=this.Im,t.io=this.io,t.aj=this.aj,t.bi=this.bi,t.gs=this.gs},ad.prototype.hc=function(t){t.Ge===ad?0===t.name.indexOf("Aggressive")?this.oH=t:0===t.name.indexOf("Cycle")?this.JH=t:0===t.name.indexOf("Init")?this.vI=t:0===t.name.indexOf("Layer")?this.JI=t:r.k("Unknown enum value: "+t):Sf.prototype.hc.call(this,t)},ad.prototype.createNetwork=function(){return new Gd},ad.prototype.doLayout=function(t){for(null===t&&r.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),this.Nd=this.initialOrigin(this.Nd),this.iw=-1,this.Rf=this.qs=0,this.As=this.ys=this.Om=null,t=0;t<this.ih.length;t++)this.ih[t]=null;if(0<this.network.vertexes.count){for(this.network.sx(),t=this.network.edges.i;t.next();)t.value.rev=!1;switch(this.uo){default:case zu:var e=0,i=(t=this.network).vertexes.count-1,n=[];n.length=i+1;for(var o=t.vertexes.i;o.next();)o.value.valid=!0;for(;null!==vd(t);){for(o=md(t);null!==o;)n[i]=o,i--,o.valid=!1,o=md(t);for(o=gd(t);null!==o;)n[e]=o,e++,o.valid=!1,o=gd(t);o=null;for(var a=0,s=this.network.vertexes.i;s.next();){if((d=s.value).valid){for(var l=0,h=d.kc;h.next();)h.value.toVertex.valid&&l++;h=0;for(var u=d.nc;u.next();)u.value.fromVertex.valid&&h++;(null===o||a<l-h)&&(o=d,a=l-h)}}null!==o&&(n[e]=o,e++,o.valid=!1)}for(e=0;e<t.vertexes.count;e++)n[e].index=e;for(n=t.edges.i;n.next();)(e=n.value).fromVertex.index>e.toVertex.index&&(t.my(e),e.rev=!0);break;case ju:for(n=this.network.vertexes.i;n.next();)(t=n.value).Qp=-1,t.finish=-1;for(t=this.network.edges.i;t.next();)t.value.forest=!1;for(this.zs=0,n.reset();n.next();)0===(e=n.value).nc.count&&bd(this,e);for(n.reset();n.next();)-1===(e=n.value).Qp&&bd(this,e);for(t.reset();t.next();)(n=t.value).forest||(i=(e=n.fromVertex).finish,a=(o=n.toVertex).finish,o.Qp<e.Qp&&i<a&&(this.network.my(n),n.rev=!0))}for(t=this.network.vertexes.i;t.next();)t.value.layer=-1;for(this.sb=-1,this.assignLayers(),t.reset();t.next();)this.sb=Math.max(this.sb,t.value.layer);for(n=[],i=(t=this.network).edges.i;i.next();)(e=i.value).valid=!1,n.push(e);for(i=0;i<n.length;i++)if(a=(e=n[i]).fromVertex,o=e.toVertex,!e.valid&&(null!==a.vd&&null!==o.vd||a.layer!==o.layer)){if(h=d=l=s=0,null!==e.link){if(null===(l=e.link))continue;var c=a.vd;s=o.vd;if(null===c||null===s)continue;var f=l.W,d=l.Z,p=l.lc;h=l.Ic;e.rev&&(l=f,u=p,f=d,p=h,d=l,h=u);var y=a.T,m=(l=o.T,e.rev?o.M:a.M);u=r.K();m.I()?(Lh(f,p,k,u),u.I()||u.assign(y)):u.assign(y),c!==f&&m.I()&&f.isVisible()&&((c=a.M).I()&&(u.x+=m.x-c.x,u.y+=m.y-c.y)),f=e.rev?a.M:o.M,c=r.K(),f.I()?(Lh(d,h,k,c),c.I()||c.assign(l)):c.assign(l),s!==d&&f.I()&&d.isVisible()&&((s=o.M).I()&&(c.x+=f.x-s.x,c.y+=f.y-s.y)),90===this.ba||270===this.ba?(s=Math.round((u.x-y.x)/this.Yd),d=u.x,l=Math.round((c.x-l.x)/this.Yd),h=c.x):(s=Math.round((u.y-y.y)/this.Yd),d=u.y,l=Math.round((c.y-l.y)/this.Yd),h=c.y),r.v(u),r.v(c),e.portFromColOffset=s,e.portFromPos=d,e.portToColOffset=l,e.portToPos=h}else e.portFromColOffset=0,e.portFromPos=0,e.portToColOffset=0,e.portToPos=0;u=a.layer,y=o.layer;t:if(c=e,f=0,m=c.link,null!==m){var g=m.lc,b=m.Ic;if(null!==g&&null!==b){var x=m.W;p=m.Z;if(null!==x&&null!==p){var w=g.Ab,M=b.Bb;this.Aq||(m.Ab.Zc()||(w=m.Ab),m.Bb.Zc()||(M=m.Bb));var S=m.ac,T=Id(this,!0);(w.Zc()||w===v)&&(w=T);var P=Id(this,!1);if((M.Zc()||M===v)&&(M=P),w.xj()&&w.vj(P)&&M.xj()&&M.vj(T)){f=0;break t}T=m.getLinkPoint(x,g,w,!0,S,p,b,r.K()),w=m.getLinkDirection(x,g,T,w,!0,S,p,b),r.v(T),w===Sd(this,c,!0)?f+=1:this.Aq&&null!==x&&1===x.ports.count&&c.rev&&(f+=1),w=m.getLinkPoint(p,b,M,!1,S,x,g,r.K()),m=m.getLinkDirection(p,b,w,M,!1,S,x,g),r.v(w),m===Sd(this,c,!1)?f+=2:this.Aq&&null!==p&&1===p.ports.count&&c.rev&&(f+=2)}}}if(c=1===f||3===f,(f=2===f||3===f)&&((p=t.createVertex()).vd=null,p.ln=1,p.layer=u,p.near=a,t.Jl(p),(a=t.iq(a,p,e.link)).valid=!1,a.rev=e.rev,a.portFromColOffset=s,a.portToColOffset=0,a.portFromPos=d,a.portToPos=0,a=p),m=1,c&&m--,u-y>m&&0<u){for(e.valid=!1,(p=t.createVertex()).vd=null,p.ln=2,p.layer=u-1,t.Jl(p),(a=t.iq(a,p,e.link)).valid=!0,a.rev=e.rev,a.portFromColOffset=f?0:s,a.portToColOffset=0,a.portFromPos=f?0:d,a.portToPos=0,a=p,u--;u-y>m&&0<u;)(p=t.createVertex()).vd=null,p.ln=3,p.layer=u-1,t.Jl(p),(a=t.iq(a,p,e.link)).valid=!0,a.rev=e.rev,a.portFromColOffset=0,a.portToColOffset=0,a.portFromPos=0,a.portToPos=0,a=p,u--;(a=t.iq(p,o,e.link)).valid=!c,c&&(p.near=o),a.rev=e.rev,a.portFromColOffset=0,a.portToColOffset=l,a.portFromPos=0,a.portToPos=h}else e.valid=!0}for(n=this.ke=[],e=0;e<=this.sb;e++)n[e]=0;for(t=this.network.vertexes.i;t.next();)t.value.index=-1;for(this.initializeIndices(),this.iw=-1,e=this.Rf=this.qs=0;e<=this.sb;e++)n[e]>n[this.Rf]&&(this.iw=n[e]-1,this.Rf=e),n[e]<n[this.qs]&&(this.qs=e);for(this.As=[],e=0;e<n.length;e++)this.As[e]=[];for(t.reset();t.next();)n=t.value,this.As[n.layer][n.index]=n;for(this.Kb=-1,t=0;t<=this.sb;t++){for(n=Ed(this,t),e=0,i=this.ke[t],o=0;o<i;o++)a=n[o],e+=this.nodeMinColumnSpace(a,!0),a.column=e,e+=1,e+=this.nodeMinColumnSpace(a,!1);this.Kb=Math.max(this.Kb,e-1),qd(this,t,n)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.sf=!0},ad.prototype.linkMinLength=function(){return 1},ad.prototype.nodeMinLayerSpace=function(t,e){return null===t.vd?0:90===this.ba||270===this.ba?e?t.T.y+10:t.M.height-t.T.y+10:e?t.T.x+10:t.M.width-t.T.x+10},ad.prototype.nodeMinColumnSpace=function(t,e){if(null===t.vd)return 0;var i=e?t.fB:t.eB;return null!==i?i:90===(i=this.ba)||270===i?e?t.fB=t.T.x/this.Yd+1|0:t.eB=(t.M.width-t.T.x)/this.Yd+1|0:e?t.fB=t.T.y/this.Yd+1|0:t.eB=(t.M.height-t.T.y)/this.Yd+1|0},ad.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.sb;e++)for(var i=ud(this,e,1),n=this.ke[e],o=0;o<n;o++)for(var r=o;r<n;r++)t+=i[o*n+r];return t},ad.prototype.normalize=function(){var t=1/0;this.Kb=-1;for(var e=this.network.vertexes.i;e.next();){var i=e.value;t=Math.min(t,i.column-this.nodeMinColumnSpace(i,!0));this.Kb=Math.max(this.Kb,i.column+this.nodeMinColumnSpace(i,!1))}for(e.reset();e.next();)e.value.column-=t;this.Kb-=t},ad.prototype.assignLayers=function(){switch(this.Uo){case Iu:xd(this);break;case Ou:for(var t=0,e=this.network.vertexes.i;e.next();)t=kd(this,e.value),this.sb=Math.max(t,this.sb);for(e.reset();e.next();)(t=e.value).layer=this.sb-t.layer;break;default:case Bu:for(xd(this),e=this.network.vertexes.i;e.next();)e.value.valid=!1;for(e.reset();e.next();)0===(t=e.value).nc.count&&Md(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.sb=-1,e.reset();e.next();){var i=e.value;i.layer-=t,this.sb=Math.max(this.sb,i.layer)}}},ad.prototype.initializeIndices=function(){switch(this.Ko){default:case Ru:for(var t=this.network.vertexes.i;t.next();){var e=t.value,i=e.layer;e.index=this.ke[i],this.ke[i]++}break;case Eu:for(t=this.network.vertexes.i,e=this.sb;0<=e;e--)for(t.reset();t.next();)(i=t.value).layer===e&&-1===i.index&&Td(this,i);break;case qu:for(t=this.network.vertexes.i,e=0;e<=this.sb;e++)for(t.reset();t.next();)(i=t.value).layer===e&&-1===i.index&&Pd(this,i)}},ad.prototype.reduceCrossings=function(){var t=this.countCrossings(),e=ld(this),i=0,n=0,o=0;for(i=0;i<this.Im;i++){for(n=0;n<=this.sb;n++)Nd(this,n,1),Cd(this,n,1);for((o=this.countCrossings())<t&&(t=o,e=ld(this)),n=this.sb;0<=n;n--)Nd(this,n,-1),Cd(this,n,-1);(o=this.countCrossings())<t&&(t=o,e=ld(this))}for(hd(this,e),i=0;i<this.Im;i++){for(n=0;n<=this.sb;n++)Nd(this,n,0),Cd(this,n,0);for((o=this.countCrossings())<t&&(t=o,e=ld(this)),n=this.sb;0<=n;n--)Nd(this,n,0),Cd(this,n,0);(o=this.countCrossings())<t&&(t=o,e=ld(this))}hd(this,e);var r=!1,a=i=0,s=0;n=0;switch(this.io){case Gu:break;case _u:for(s=t+1;(n=this.countCrossings())<s;)for(s=n,i=this.sb;0<=i;i--)for(a=0;a<=i;a++){for(r=!0;r;)for(r=!1,n=i;n>=a;n--)r=Cd(this,n,-1)||r;for((o=this.countCrossings())>=t?hd(this,e):(t=o,e=ld(this)),r=!0;r;)for(r=!1,n=i;n>=a;n--)r=Cd(this,n,1)||r;for((o=this.countCrossings())>=t?hd(this,e):(t=o,e=ld(this)),r=!0;r;)for(r=!1,n=a;n<=i;n++)r=Cd(this,n,1)||r;for(o>=t?hd(this,e):(t=o,e=ld(this)),r=!0;r;)for(r=!1,n=a;n<=i;n++)r=Cd(this,n,-1)||r;for(o>=t?hd(this,e):(t=o,e=ld(this)),r=!0;r;)for(r=!1,n=i;n>=a;n--)r=Cd(this,n,0)||r;for(o>=t?hd(this,e):(t=o,e=ld(this)),r=!0;r;)for(r=!1,n=a;n<=i;n++)r=Cd(this,n,0)||r;o>=t?hd(this,e):(t=o,e=ld(this))}break;default:case Vu:for(i=this.sb,a=0,s=t+1;(n=this.countCrossings())<s;){for(s=n,r=!0;r;)for(r=!1,n=i;n>=a;n--)r=Cd(this,n,-1)||r;for((o=this.countCrossings())>=t?hd(this,e):(t=o,e=ld(this)),r=!0;r;)for(r=!1,n=i;n>=a;n--)r=Cd(this,n,1)||r;for((o=this.countCrossings())>=t?hd(this,e):(t=o,e=ld(this)),r=!0;r;)for(r=!1,n=a;n<=i;n++)r=Cd(this,n,1)||r;for(o>=t?hd(this,e):(t=o,e=ld(this)),r=!0;r;)for(r=!1,n=a;n<=i;n++)r=Cd(this,n,-1)||r;for(o>=t?hd(this,e):(t=o,e=ld(this)),r=!0;r;)for(r=!1,n=i;n>=a;n--)r=Cd(this,n,0)||r;for(o>=t?hd(this,e):(t=o,e=ld(this)),r=!0;r;)for(r=!1,n=a;n<=i;n++)r=Cd(this,n,0)||r;o>=t?hd(this,e):(t=o,e=ld(this))}}hd(this,e)},ad.prototype.straightenAndPack=function(){var t=0,e=!1,i=0!=(this.aj&Hu);t=this.aj===Uu;if(1e3<this.network.edges.count&&!t&&(i=!1),i){for(e=[],t=t=0;t<=this.sb;t++)e[t]=0;for(var n=0,o=this.network.vertexes.i;o.next();){t=(r=o.value).layer,n=r.column;var r=this.nodeMinColumnSpace(r,!1);e[t]=Math.max(e[t],n+r)}for(o.reset();o.next();)t=(r=o.value).layer,n=r.column,r.column=(8*(this.Kb-e[t])>>1)+8*n;this.Kb*=8}if(0!=(this.aj&Ku))for(e=!0;e;){for(e=!1,t=this.Rf+1;t<=this.sb;t++)e=Ad(this,t,1)||e;for(t=this.Rf-1;0<=t;t--)e=Ad(this,t,-1)||e;e=Ad(this,this.Rf,0)||e}if(0!=(this.aj&Wu)){for(t=this.Rf+1;t<=this.sb;t++)Dd(this,t,1);for(t=this.Rf-1;0<=t;t--)Dd(this,t,-1);Dd(this,this.Rf,0)}if(i&&(zd(this,-1),zd(this,1)),0!=(this.aj&Ku))for(e=!0;e;){for(e=!1,e=Ad(this,this.Rf,0)||e,t=this.Rf+1;t<=this.sb;t++)e=Ad(this,t,0)||e;for(t=this.Rf-1;0<=t;t--)e=Ad(this,t,0)||e}},ad.prototype.commitLayout=function(){if(this.Aq)for(var t=Id(this,!0),e=Id(this,!1),i=this.network.edges.i;i.next();){var n=i.value.link;null!==n&&(n.Ab=t,n.Bb=e)}this.commitNodes(),this.iA(),this.uu&&this.commitLinks()},ad.prototype.commitNodes=function(){this.yg=[],this.Qf=[],this.Pf=[],this.Ob=[];for(var t=0;t<=this.sb;t++)this.yg[t]=0,this.Qf[t]=0,this.Pf[t]=0,this.Ob[t]=0;for(t=this.network.vertexes.i;t.next();){var e=(i=t.value).layer;this.yg[e]=Math.max(this.yg[e],this.nodeMinLayerSpace(i,!0)),this.Qf[e]=Math.max(this.Qf[e],this.nodeMinLayerSpace(i,!1))}var i=0,n=this.Jm;for(e=0;e<=this.sb;e++){var o=n;0>=this.yg[e]+this.Qf[e]&&(o=0),0<e&&(i+=o/2),90===this.ba||0===this.ba?(i+=this.Qf[e],this.Pf[e]=i,i+=this.yg[e]):(i+=this.yg[e],this.Pf[e]=i,i+=this.Qf[e]),e<this.sb&&(i+=o/2),this.Ob[e]=i}for(n=i,i=this.Nd,e=0;e<=this.sb;e++)270===this.ba?this.Pf[e]=i.y+this.Pf[e]:90===this.ba?(this.Pf[e]=i.y+n-this.Pf[e],this.Ob[e]=n-this.Ob[e]):180===this.ba?this.Pf[e]=i.x+this.Pf[e]:(this.Pf[e]=i.x+n-this.Pf[e],this.Ob[e]=n-this.Ob[e]);for(t.reset(),n=o=1/0;t.next();){var r=(e=t.value).layer,a=0|e.column,s=0,l=0;270===this.ba||90===this.ba?(s=i.x+this.Yd*a,l=this.Pf[r]):(s=this.Pf[r],l=i.y+this.Yd*a),e.la=s,e.ra=l,o=Math.min(e.x,o),n=Math.min(e.y,n)}for(o=i.x-o,i=i.y-n,this.kC=new ut(o,i),t.reset();t.next();)(e=t.value).x+=o,e.y+=i,e.commit()},ad.prototype.iA=function(){for(var t=0,e=this.Jm,i=0;i<=this.sb;i++)t+=this.yg[i],t+=this.Qf[i];t+=this.sb*e,e=[],i=this.Yd*this.Kb;for(var n=this.SI;0<=n;n--)270===this.ba?0===n?e.push(new pt(0,0,i,Math.abs(this.Ob[0]))):e.push(new pt(0,this.Ob[n-1],i,Math.abs(this.Ob[n-1]-this.Ob[n]))):90===this.ba?0===n?e.push(new pt(0,this.Ob[0],i,Math.abs(this.Ob[0]-t))):e.push(new pt(0,this.Ob[n],i,Math.abs(this.Ob[n-1]-this.Ob[n]))):180===this.ba?0===n?e.push(new pt(0,0,Math.abs(this.Ob[0]),i)):e.push(new pt(this.Ob[n-1],0,Math.abs(this.Ob[n-1]-this.Ob[n]),i)):0===n?e.push(new pt(this.Ob[0],0,Math.abs(this.Ob[0]-t),i)):e.push(new pt(this.Ob[n],0,Math.abs(this.Ob[n-1]-this.Ob[n]),i));this.commitLayers(e,this.kC)},ad.prototype.commitLayers=function(){},ad.prototype.commitLinks=function(){for(var t,e=this.network.edges.i;e.next();)null!==(t=e.value.link)&&(t.jm(),t.Ip(),t.nj());for(e.reset();e.next();)null!==(t=e.value.link)&&t.ao();for(e.reset();e.next();){var i=e.value;if(null!==(t=i.link)){t.jm();var n=t,o=n.W,r=n.Z,a=n.lc,s=n.Ic;if(null!==o){var l=o.findVisibleNode();null!==l&&l!==o&&(o=l,a=l.port)}if(null!==r){var h=r.findVisibleNode();null!==h&&h!==r&&(r=h,s=h.port)}var u=t.computeSpot(!0,a),c=t.computeSpot(!1,s),f=i.fromVertex,d=i.toVertex;if(i.valid){if(t.$e===Jh&&4===t.qa){if(i.rev){var p=o,y=(o=r,r=p,a);a=s,s=y}if(f.column===d.column){var m=t.getLinkPoint(o,a,u,!0,!1,r,s),g=t.getLinkPoint(r,s,c,!1,!1,o,a);m.I()||m.set(o.Y.Nl),g.I()||g.set(r.Y.Nl),t.Ip(),t.lj(m.x,m.y),t.lj((2*m.x+g.x)/3,(2*m.y+g.y)/3),t.lj((m.x+2*g.x)/3,(m.y+2*g.y)/3),t.lj(g.x,g.y)}else{var b=!1,x=!1;if(null!==a&&u===v&&(b=!0),null!==s&&c===v&&(x=!0),b||x){var w=t.l(0).x,k=t.l(0).y,M=t.l(1).x,S=t.l(1).y,T=t.l(2).x,P=t.l(2).y,N=t.l(3).x,C=t.l(3).y;if(b){90===this.ba||270===this.ba?(M=w,S=(k+C)/2):(M=(w+N)/2,S=k),t.ca(1,M,S);var A=t.getLinkPoint(o,a,u,!0,!1,r,s);A.I()||A.set(o.Y.Nl),t.ca(0,A.x,A.y)}x&&(90===this.ba||270===this.ba?(T=N,P=(k+C)/2):(T=(w+N)/2,P=C),t.ca(2,T,P),(A=t.getLinkPoint(r,s,c,!1,!1,o,a)).I()||A.set(r.Y.Nl),t.ca(3,A.x,A.y))}}}t.nj()}else if(f.layer===d.layer)t.nj();else{var F,D,L=!1,j=!1,z=0,B=t.Yt+1;if(t.ac)j=!0,4<(z=t.qa)&&t.points.removeRange(2,z-3);else if(t.$e===Jh)L=!0,4<(z=t.qa)&&t.points.removeRange(2,z-3),B=2;else{z=t.qa;var I=u===v,O=c===v;2<z&&I&&O?t.points.removeRange(1,z-2):3<z&&I&&!O?t.points.removeRange(1,z-3):3<z&&!I&&O?t.points.removeRange(2,z-2):4<z&&!I&&!O&&t.points.removeRange(2,z-3)}if(i.rev){for(var E=0;null!==d&&f!==d;){D=F=null;for(var q=d.nc.i;q.next();){var R=q.value;if(R.link===i.link&&(F=R.fromVertex,D=R.toVertex,null===F.vd))break}if(F!==f)if(W=t.l(B-1).x,U=t.l(B-1).y,J=F.la,$=F.ra,j)180===this.ba||0===this.ba?2===B?(t.w(B++,W,U),t.w(B++,W,$)):(Z=null!==D?D.ra:U)!==$&&(Y=this.Ob[F.layer-1],t.w(B++,Y,U),t.w(B++,Y,$)):2===B?(t.w(B++,W,U),t.w(B++,J,U)):(tt=null!==D?D.la:W)!==J&&(Y=this.Ob[F.layer-1],t.w(B++,W,Y),t.w(B++,J,Y));else if(2===B)if(X=Math.max(10,this.yg[d.layer]),Q=Math.max(10,this.Qf[d.layer]),L)180===this.ba?J<=d.M.x?(E=d.M.x,t.w(B++,E-X,$),t.w(B++,E,$),t.w(B++,E+Q,$)):(t.w(B++,J-X,$),t.w(B++,J,$),t.w(B++,J+Q,$)):90===this.ba?$>=d.M.bottom?(E=d.M.y+d.M.height,t.w(B++,J,E+Q),t.w(B++,J,E),t.w(B++,J,E-X)):(t.w(B++,J,$+Q),t.w(B++,J,$),t.w(B++,J,$-X)):270===this.ba?$<=d.M.y?(E=d.M.y,t.w(B++,J,E-X),t.w(B++,J,E),t.w(B++,J,E+Q)):(t.w(B++,J,$-X),t.w(B++,J,$),t.w(B++,J,$+Q)):0===this.ba&&(J>=d.M.right?(E=d.M.x+d.M.width,t.w(B++,E+Q,$),t.w(B++,E,$),t.w(B++,E-X,$)):(t.w(B++,J+Q,$),t.w(B++,J,$),t.w(B++,J-X,$)));else{t.w(B++,W,U);var G=0;180===this.ba||0===this.ba?((180===this.ba?J>=d.M.right:J<=d.M.x)&&(G=(0===this.ba?-X:Q)/2),t.w(B++,W+G,$)):((270===this.ba?$>=d.M.bottom:$<=d.M.y)&&(G=(90===this.ba?-X:Q)/2),t.w(B++,J,U+G)),t.w(B++,J,$)}else X=Math.max(10,this.yg[F.layer]),Q=Math.max(10,this.Qf[F.layer]),180===this.ba?(L&&t.w(B++,J-X,$),t.w(B++,J,$),L&&t.w(B++,J+Q,$)):90===this.ba?(L&&t.w(B++,J,$+Q),t.w(B++,J,$),L&&t.w(B++,J,$-X)):270===this.ba?(L&&t.w(B++,J,$-X),t.w(B++,J,$),L&&t.w(B++,J,$+Q)):(L&&t.w(B++,J+Q,$),t.w(B++,J,$),L&&t.w(B++,J-X,$));d=F}if(null===s||u!==v||j)if(W=t.l(B-1).x,U=t.l(B-1).y,J=t.l(B).x,$=t.l(B).y,j){var V=this.Qf[f.layer],_=0;180===this.ba||0===this.ba?((_=U)>=f.M.y&&_<=f.M.bottom&&(180===this.ba?J>=f.M.x:J<=f.M.right)&&(E=f.la+(180===this.ba?-V:V),_=_<f.M.y+f.M.height/2?f.M.y-this.Yd/2:f.M.bottom+this.Yd/2,t.w(B++,E,U),t.w(B++,E,_)),t.w(B++,J,_)):((_=W)>=f.M.x&&_<=f.M.right&&(270===this.ba?$>=f.M.y:$<=f.M.bottom)&&(E=f.ra+(270===this.ba?-V:V),_=_<f.M.x+f.M.width/2?f.M.x-this.Yd/2:f.M.right+this.Yd/2,t.w(B++,W,E),t.w(B++,_,E)),t.w(B++,_,$)),t.w(B++,J,$)}else L?(X=Math.max(10,this.yg[f.layer]),Q=Math.max(10,this.Qf[f.layer]),180===this.ba&&J>=f.M.x?(E=f.M.x+f.M.width,t.ca(B-2,E,U),t.ca(B-1,E+Q,U)):90===this.ba&&$<=f.M.bottom?(E=f.M.y,t.ca(B-2,W,E),t.ca(B-1,W,E-X)):270===this.ba&&$>=f.M.y?(E=f.M.y+f.M.height,t.ca(B-2,W,E),t.ca(B-1,W,E+Q)):0===this.ba&&J<=f.M.right&&(E=f.M.x,t.ca(B-2,E,U),t.ca(B-1,E-X,U))):(X=Math.max(10,this.yg[f.layer]),Q=Math.max(10,this.Qf[f.layer]),G=0,180===this.ba||0===this.ba?((180===this.ba?J<=f.M.x:J>=f.M.right)&&(G=(0===this.ba?Q:-X)/2),t.w(B++,J+G,U)):((270===this.ba?$<=f.M.y:$>=f.M.bottom)&&(G=(90===this.ba?Q:-X)/2),t.w(B++,W,$+G)),t.w(B++,J,$))}else{for(;null!==f&&f!==d;){D=F=null;for(var H=f.kc.i;H.next();){var K=H.value;if(K.link===i.link&&(F=K.toVertex,null!==(D=K.fromVertex).vd&&(D=null),null===F.vd))break}var W=0,U=0,J=0,$=0,Y=0,X=0,Q=0;if(F!==d)if(W=t.l(B-1).x,U=t.l(B-1).y,J=F.la,$=F.ra,j)if(180===this.ba||0===this.ba){var Z=null!==D?D.ra:U;Z!==$&&(Y=this.Ob[F.layer],2===B&&(Y=0===this.ba?Math.max(Y,W):Math.min(Y,W)),t.w(B++,Y,U),t.w(B++,Y,$))}else{var tt=null!==D?D.la:W;tt!==J&&(Y=this.Ob[F.layer],2===B&&(Y=90===this.ba?Math.max(Y,U):Math.min(Y,U)),t.w(B++,W,Y),t.w(B++,J,Y))}else X=Math.max(10,this.yg[F.layer]),Q=Math.max(10,this.Qf[F.layer]),180===this.ba?(t.w(B++,J+Q,$),L&&t.w(B++,J,$),t.w(B++,J-X,$)):90===this.ba?(t.w(B++,J,$-X),L&&t.w(B++,J,$),t.w(B++,J,$+Q)):270===this.ba?(t.w(B++,J,$+Q),L&&t.w(B++,J,$),t.w(B++,J,$-X)):(t.w(B++,J-X,$),L&&t.w(B++,J,$),t.w(B++,J+Q,$));f=F}j&&(W=t.l(B-1).x,U=t.l(B-1).y,J=t.l(B).x,$=t.l(B).y,180===this.ba||0===this.ba?U!==$&&(Y=0===this.ba?Math.min(Math.max((J+W)/2,this.Ob[d.layer]),J):Math.max(Math.min((J+W)/2,this.Ob[d.layer]),J),t.w(B++,Y,U),t.w(B++,Y,$)):W!==J&&(Y=90===this.ba?Math.min(Math.max(($+U)/2,this.Ob[d.layer]),$):Math.max(Math.min(($+U)/2,this.Ob[d.layer]),$),t.w(B++,W,Y),t.w(B++,J,Y)))}if(null!==n&&L){if(null!==a){if(u===v){var it=t.l(0),nt=t.l(2);it.L(nt)||t.ca(1,(it.x+nt.x)/2,(it.y+nt.y)/2)}(A=t.getLinkPoint(o,a,v,!0,!1,r,s)).I()||A.set(o.Y.Nl),t.ca(0,A.x,A.y)}null!==s&&(c===v&&(it=t.l(t.qa-1),nt=t.l(t.qa-3),it.L(nt)||t.ca(t.qa-2,(it.x+nt.x)/2,(it.y+nt.y)/2)),(A=t.getLinkPoint(r,s,v,!1,!1,o,a)).I()||A.set(r.Y.Nl),t.ca(t.qa-1,A.x,A.y))}t.nj(),i.commit()}}}for(var ot=new et(Rc),rt=this.network.edges.i;rt.next();){var at=rt.value.link;null!==at&&at.ac&&!ot.contains(at)&&ot.add(at)}if(0<ot.count)if(90===this.ba||270===this.ba){for(var st,lt,ht=new et(Rd),ut=ot.i;ut.next();){var ct=ut.value;if(null!==ct&&ct.ac)for(var ft=2;ft<ct.qa-3;ft++)if(st=ct.l(ft),lt=ct.l(ft+1),Od(st.y,lt.y)&&!Od(st.x,lt.x)){var dt=new Rd;dt.layer=Math.floor(st.y/2);var pt=ct.l(0),yt=ct.l(ct.qa-1);if(dt.first=pt.x*pt.x+pt.y,dt.ge=yt.x*yt.x+yt.y,dt.Ye=Math.min(st.x,lt.x),dt.se=Math.max(st.x,lt.x),dt.index=ft,dt.link=ct,ft+2<ct.qa){var vt=ct.l(ft-1),mt=ct.l(ft+2),gt=0;vt.y<st.y?gt=mt.y<st.y?3:st.x<lt.x?2:1:vt.y>st.y&&(gt=mt.y>st.y?0:lt.x<st.x?2:1),dt.ui=gt}ht.add(dt)}}if(1<ht.count){ht.sort(this.mG);for(var bt=0;bt<ht.count;){for(var xt=ht.n[bt].layer,wt=bt+1;wt<ht.count&&ht.n[wt].layer===xt;)wt++;if(1<wt-bt)for(var kt=bt;kt<wt;){for(var Mt=ht.n[kt].se,St=bt+1;St<wt&&ht.n[St].Ye<Mt;)Mt=Math.max(Mt,ht.n[St].se),St++;var Tt=St-kt;if(1<Tt){ht.Cq(this.py,kt,kt+Tt);var Pt=1,Nt=ht.n[kt].ge;for(ft=kt;ft<St;ft++){var Ct=ht.n[ft];Ct.ge!==Nt&&(Pt++,Nt=Ct.ge)}ht.Cq(this.lG,kt,kt+Tt);var At=1;for(Nt=ht.n[kt].first,ft=kt;ft<St;ft++)(Ct=ht.n[ft]).first!==Nt&&(At++,Nt=Ct.first);var Ft=!0,Dt=At;Pt<At?(Ft=!1,Dt=Pt,Nt=ht.n[kt].ge,ht.Cq(this.py,kt,kt+Tt)):Nt=ht.n[kt].first;var Lt=0;for(ft=kt;ft<St;ft++){Ct=ht.n[ft],(Ft?Ct.first:Ct.ge)!==Nt&&(Lt++,Nt=Ft?Ct.first:Ct.ge),st=(ct=Ct.link).l(Ct.index),lt=ct.l(Ct.index+1);var jt=this.LF*(Lt-(Dt-1)/2);0,ct.jm(),ct.ca(Ct.index,st.x,st.y+jt),ct.ca(Ct.index+1,lt.x,lt.y+jt),ct.nj()}}kt=St}bt=wt}}}else{for(var zt,Bt,It=new et(Rd),Ot=ot.i;Ot.next();){var Et=Ot.value;if(null!==Et&&Et.ac)for(var qt=2;qt<Et.qa-3;qt++)if(zt=Et.l(qt),Bt=Et.l(qt+1),Od(zt.x,Bt.x)&&!Od(zt.y,Bt.y)){var Rt=new Rd;Rt.layer=Math.floor(zt.x/2);var Gt=Et.l(0),Vt=Et.l(Et.qa-1);if(Rt.first=Gt.x+Gt.y*Gt.y,Rt.ge=Vt.x+Vt.y*Vt.y,Rt.Ye=Math.min(zt.y,Bt.y),Rt.se=Math.max(zt.y,Bt.y),Rt.index=qt,Rt.link=Et,qt+2<Et.qa){var _t=Et.l(qt-1),Ht=Et.l(qt+2),Kt=0;_t.x<zt.x?Kt=Ht.x<zt.x?3:zt.y<Bt.y?2:1:_t.x>zt.x&&(Kt=Ht.x>zt.x?0:Bt.y<zt.y?2:1),Rt.ui=Kt}It.add(Rt)}}if(1<It.count){It.sort(this.mG);for(var Wt=0;Wt<It.count;){for(var Ut=It.n[Wt].layer,Jt=Wt+1;Jt<It.count&&It.n[Jt].layer===Ut;)Jt++;if(1<Jt-Wt)for(var $t=Wt;$t<Jt;){for(var Yt=It.n[$t].se,Xt=Wt+1;Xt<Jt&&It.n[Xt].Ye<Yt;)Yt=Math.max(Yt,It.n[Xt].se),Xt++;var Qt=Xt-$t;if(1<Qt){It.Cq(this.py,$t,$t+Qt);var Zt=1,te=It.n[$t].ge;for(qt=$t;qt<Xt;qt++){var ee=It.n[qt];ee.ge!==te&&(Zt++,te=ee.ge)}It.Cq(this.lG,$t,$t+Qt);var ie=1;for(te=It.n[$t].first,qt=$t;qt<Xt;qt++)(ee=It.n[qt]).first!==te&&(ie++,te=ee.first);var ne=!0,oe=ie;Zt<ie?(ne=!1,oe=Zt,te=It.n[$t].ge,It.Cq(this.py,$t,$t+Qt)):te=It.n[$t].first;var re=0;for(qt=$t;qt<Xt;qt++){ee=It.n[qt],(ne?ee.first:ee.ge)!==te&&(re++,te=ne?ee.first:ee.ge),zt=(Et=ee.link).l(ee.index),Bt=Et.l(ee.index+1);var ae=this.LF*(re-(oe-1)/2);0,Et.jm(),Et.ca(ee.index,zt.x+ae,zt.y),Et.ca(ee.index+1,Bt.x+ae,Bt.y),Et.nj()}}$t=Xt}Wt=Jt}}}},ad.prototype.mG=function(t,e){return t instanceof Rd&&e instanceof Rd&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.Ye<e.Ye?-1:t.Ye>e.Ye?1:t.se<e.se?-1:t.se>e.se?1:0:0},ad.prototype.lG=function(t,e){return t instanceof Rd&&e instanceof Rd&&t!==e?t.first<e.first?-1:t.first>e.first||t.ui<e.ui?1:t.ui>e.ui||t.Ye<e.Ye?-1:t.Ye>e.Ye?1:t.se<e.se?-1:t.se>e.se?1:0:0},ad.prototype.py=function(t,e){return t instanceof Rd&&e instanceof Rd&&t!==e?t.ge<e.ge?-1:t.ge>e.ge||t.ui<e.ui?1:t.ui>e.ui||t.Ye<e.Ye?-1:t.Ye>e.Ye?1:t.se<e.se?-1:t.se>e.se?1:0:0},r.defineProperty(ad,{layerSpacing:"layerSpacing"},function(){return this.Jm},function(t){this.Jm!==t&&(r.j(t,"number",ad,"layerSpacing"),0<=t&&(this.Jm=t,this.J()))}),r.defineProperty(ad,{KK:"columnSpacing"},function(){return this.Yd},function(t){this.Yd!==t&&(r.j(t,"number",ad,"columnSpacing"),0<t&&(this.Yd=t,this.J()))}),r.defineProperty(ad,{direction:"direction"},function(){return this.ba},function(t){this.ba!==t&&(r.j(t,"number",ad,"direction"),0===t||90===t||180===t||270===t?(this.ba=t,this.J()):r.k("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}),r.defineProperty(ad,{angle:"angle"},function(){return this.direction},function(t){this.direction=t}),r.defineProperty(ad,{JH:"cycleRemoveOption"},function(){return this.uo},function(t){this.uo!==t&&(r.ob(t,ad,ad,"cycleRemoveOption"),t===zu||t===ju)&&(this.uo=t,this.J())}),r.defineProperty(ad,{JI:"layeringOption"},function(){return this.Uo},function(t){this.Uo!==t&&(r.ob(t,ad,ad,"layeringOption"),t===Bu||t===Iu||t===Ou)&&(this.Uo=t,this.J())}),r.defineProperty(ad,{vI:"initializeOption"},function(){return this.Ko},function(t){this.Ko!==t&&(r.ob(t,ad,ad,"initializeOption"),t===Eu||t===qu||t===Ru)&&(this.Ko=t,this.J())}),r.defineProperty(ad,{nL:"iterations"},function(){return this.Im},function(t){this.Im!==t&&(r.zd(t,Gd,"iterations"),0<=t&&(this.Im=t,this.J()))}),r.defineProperty(ad,{oH:"aggressiveOption"},function(){return this.io},function(t){this.io!==t&&(r.ob(t,ad,ad,"aggressiveOption"),t===Gu||t===Vu||t===_u)&&(this.io=t,this.J())}),r.defineProperty(ad,{HL:"packOption"},function(){return this.aj},function(t){this.aj!==t&&(r.j(t,"number",ad,"packOption"),0<=t&&8>t&&(this.aj=t,this.J()))}),r.defineProperty(ad,{Aq:"setsPortSpots"},function(){return this.bi},function(t){this.bi!==t&&(r.j(t,"boolean",ad,"setsPortSpots"),this.bi=t,this.J())}),r.defineProperty(ad,{LF:"linkSpacing"},function(){return this.gs},function(t){this.gs!==t&&(r.j(t,"number",ad,"linkSpacing"),0<=t&&(this.gs=t,this.J()))}),r.u(ad,{SI:"maxLayer"},function(){return this.sb}),r.u(ad,{tL:"maxIndex"},function(){return this.iw}),r.u(ad,{sL:"maxColumn"},function(){return this.Kb}),r.u(ad,{yL:"minIndexLayer"},function(){return this.qs}),r.u(ad,{uL:"maxIndexLayer"},function(){return this.Rf}),ad.CycleDepthFirst=ju=r.p(ad,"CycleDepthFirst",0),ad.CycleGreedy=zu=r.p(ad,"CycleGreedy",1),ad.LayerOptimalLinkLength=Bu=r.p(ad,"LayerOptimalLinkLength",0),ad.LayerLongestPathSink=Iu=r.p(ad,"LayerLongestPathSink",1),ad.LayerLongestPathSource=Ou=r.p(ad,"LayerLongestPathSource",2),ad.InitDepthFirstOut=Eu=r.p(ad,"InitDepthFirstOut",0),ad.InitDepthFirstIn=qu=r.p(ad,"InitDepthFirstIn",1),ad.InitNaive=Ru=r.p(ad,"InitNaive",2),ad.AggressiveNone=Gu=r.p(ad,"AggressiveNone",0),ad.AggressiveLess=Vu=r.p(ad,"AggressiveLess",1),ad.AggressiveMore=_u=r.p(ad,"AggressiveMore",2),ad.PackNone=0,ad.PackExpand=Hu=1,ad.PackStraighten=Ku=2,ad.PackMedian=Wu=4,ad.PackAll=Uu=7,r.be(Rd,{layer:!0,first:!0,ge:!0,Ye:!0,se:!0,index:!0,link:!0,ui:!0}),r.La(Gd,Nf),r.ga("LayeredDigraphNetwork",Gd),Gd.prototype.createVertex=function(){return new Vd},Gd.prototype.createEdge=function(){return new _d},r.La(Vd,Df),r.ga("LayeredDigraphVertex",Vd),r.La(_d,Lf),r.ga("LayeredDigraphEdge",_d),r.La(Hd,Sf),r.ga("TreeLayout",Hd),Hd.prototype.cloneProtected=function(t){Sf.prototype.cloneProtected.call(this,t),t.Ls=this.Ls,t.At=this.At,t.fw=this.fw,t.Lh=this.Lh,t.pd=this.pd,t.ng.assign(this.ng),t.va.copyInheritedPropertiesFrom(this.va),t.wa.copyInheritedPropertiesFrom(this.wa)},Hd.prototype.hc=function(t){t.Ge===Hd?0===t.name.indexOf("Alignment")?this.alignment=t:0===t.name.indexOf("Arrangement")?this.Vf=t:0===t.name.indexOf("Compaction")?this.compaction=t:0===t.name.indexOf("Path")?this.path=t:0===t.name.indexOf("Sorting")?this.sorting=t:0===t.name.indexOf("Style")?this.YJ=t:r.k("Unknown enum value: "+t):Sf.prototype.hc.call(this,t)},Hd.prototype.createNetwork=function(){return new kp},Hd.prototype.makeNetwork=function(t){function e(t){if(t instanceof Fc)return!t.Cf&&"Comment"!==t.yd;if(t instanceof Rc){var e=t.W;return null!==e&&!e.Cf&&"Comment"!==e.yd&&(null!==(t=t.Z)&&!t.Cf&&"Comment"!==t.yd)}return!1}var i=this.createNetwork();return i.Sb=this,t instanceof Qo?(i.wk(t.ig,!0,e),i.wk(t.links,!0,e)):t instanceof xf?i.wk(t.vc,!1,e):i.wk(t.i,!1,e),i},Hd.prototype.doLayout=function(t){if(null===t&&r.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),this.Vf!==mc&&(this.Nd=this.initialOrigin(this.Nd)),null===(n=this.g)&&t instanceof Qo&&(n=t),this.Of=this.path===Ju&&null!==n?n.Ud?$u:Yu:this.path===Ju?$u:this.path,0<this.network.vertexes.count){for(this.network.sx(),t=this.network.vertexes.i;t.next();)(n=t.value).initialized=!1,n.level=0,n.parent=null,n.children=[];if(0<this.xd.count){for(t=new nt(Mp),n=this.xd.i;n.next();){var e=n.value;e instanceof Fc?null!==(e=this.network.xn(e))&&t.add(e):e instanceof Mp&&t.add(e)}this.xd=t}for(0===this.xd.count&&this.findRoots(),t=this.xd.copy().i;t.next();)(n=t.value).initialized||(n.initialized=!0,Ud(this,n));for(n=this.network.vertexes,t=null;0<(t=Kd(n)).count;)null!==(n=Wd(this,t))&&this.xd.add(n),n.initialized=!0,Ud(this,n),n=t;for(t=this.xd.i;t.next();)(n=t.value)instanceof Mp&&$d(this,n);for(t=this.xd.i;t.next();)(n=t.value)instanceof Mp&&Yd(this,n);for(t=this.xd.i;t.next();)(n=t.value)instanceof Mp&&Xd(this,n);if(this.dA(),this.TA===xc){for(e=[],t=this.network.vertexes.i;t.next();){var i=t.value;null===(n=i.parent)&&(n=i);var n=0===n.angle||180===n.angle;void 0===(a=e[i.level])&&(a=0),e[i.level]=Math.max(a,n?i.width:i.height)}for(i=0;i<e.length;i++)void 0===e[i]&&(e[i]=0);for(this.fC=e,t=this.network.vertexes.i;t.next();)null===(n=(i=t.value).parent)&&(n=i),0===n.angle||180===n.angle?(180===n.angle&&(i.bu+=e[i.level]-i.width),i.width=e[i.level]):(270===n.angle&&(i.cu+=e[i.level]-i.height),i.height=e[i.level])}else if(this.TA===bc)for(t=this.network.vertexes.i;t.next();){for(n=0===(e=t.value).angle||180===e.angle,a=-1,i=0;i<e.children.length;i++)var o=e.children[i],a=Math.max(a,n?o.width:o.height);if(0<=a)for(i=0;i<e.children.length;i++)o=e.children[i],n?(180===e.angle&&(o.bu+=a-o.width),o.width=a):(270===e.angle&&(o.cu+=a-o.height),o.height=a)}for(t=this.xd.i;t.next();)(n=t.value)instanceof Mp&&this.layoutTree(n);this.arrangeTrees(),this.updateParts()}this.network=null,this.xd=new nt(Object),this.sf=!0},Hd.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.i;e.next();){var i=e.value;switch(this.Of){case $u:0===i.nc.count&&this.xd.add(i);break;case Yu:0===i.kc.count&&this.xd.add(i);break;default:r.k("Unhandled path value "+this.Of.toString())}}0===this.xd.count&&(null!==(t=Wd(this,t))&&this.xd.add(t))},Hd.prototype.removeChild=function(t,e){if(null!==t&&null!==e){for(var i=t.children,n=0,o=0;o<i.length;o++)i[o]===e&&n++;if(0<n){n=Array(i.length-n);var r=0;for(o=0;o<i.length;o++)i[o]!==e&&(n[r++]=i[o]);t.children=n}}},Hd.prototype.initializeTreeVertexValues=function(t){var e=function(t,e){switch(t.At){default:case cc:return null!==e.parent?e.parent:t.va;case pc:return null===e.parent?t.va:null===e.parent.parent?t.wa:e.parent;case dc:return null!==e.parent?null!==e.parent.parent?e.parent.parent:t.wa:t.va;case fc:var i=!0;if(0===e.nn)i=!1;else for(var n=e.children,o=n.length,r=0;r<o;r++)if(0<n[r].nn){i=!1;break}return i&&null!==e.parent?t.wa:null!==e.parent?e.parent:t.va}}(this,t);if(t.copyInheritedPropertiesFrom(e),null!==t.parent&&t.parent.alignment===ac){e=t.angle;for(var i=t.parent.children,n=0;n<i.length&&t!==i[n];)n++;0==n%2?n!==i.length-1&&(e=90===e?180:180===e?270:270===e?180:270):e=90===e?0:180===e?90:270===e?0:90,t.angle=e}t.initialized=!0},Hd.prototype.assignTreeVertexValues=function(){},Hd.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case Xu:break;case Qu:t.children.reverse();break;case Zu:t.children.sort(t.comparer);break;case tc:t.children.sort(t.comparer),t.children.reverse();break;default:r.k("Unhandled sorting value "+t.sorting.toString())}},Hd.prototype.dA=function(){if(this.comments)for(var t=this.network.vertexes.i;t.next();)this.addComments(t.value)},Hd.prototype.addComments=function(t){var e=t.angle,i=t.parent,n=0,o=ic;o=!1;null!==i&&(n=i.angle,o=Qd(o=i.alignment));e=90===e||270===e,n=90===n||270===n,i=0===t.nn;var a=0,s=0,l=0,h=t.commentSpacing;if(null!==t.Qc)for(var u=t.Qc.$E();u.next();){var c=u.value;"Comment"===c.yd&&c.canLayout()&&(null===t.comments&&(t.comments=[]),t.comments.push(c),c.af(),c=c.za,e&&!i||!o&&!n&&i||o&&n&&i?(a=Math.max(a,c.width),s+=c.height+Math.abs(l)):(a+=c.width+Math.abs(l),s=Math.max(s,c.height)),l=h)}null!==t.comments&&(e&&!i||!o&&!n&&i||o&&n&&i?(a+=Math.abs(t.commentMargin),s=Math.max(0,s-t.height)):(s+=Math.abs(t.commentMargin),a=Math.max(0,a-t.width)),o=r.lg(0,0,t.M.width+a,t.M.height+s),t.ab=o,r.Eb(o))},Hd.prototype.layoutComments=function(t){if(null!==t.comments){var e=t.Qc.za,i=t.parent,n=t.angle,o=0,a=ic;a=!1;null!==i&&(o=i.angle,a=Qd(a=i.alignment));i=90===n||270===n,n=90===o||270===o;for(var s=0===t.nn,l=tp(t),h=0,u=t.comments,c=u.length,f=r.K(),d=0;d<c;d++){var p=u[d],y=p.za;if(i&&!s||!a&&!n&&s||a&&n&&s){if(135<o&&!a||n&&l)if(0<=t.commentMargin)for(f.m(t.M.x-t.commentMargin-y.width,t.M.y+h),p.move(f),p=p.Mg();p.next();){var v=p.value;v.Ab=C,v.Bb=A}else for(f.m(t.M.x+2*t.T.x-t.commentMargin,t.M.y+h),p.move(f),p=p.Mg();p.next();)(v=p.value).Ab=A,v.Bb=C;else if(0<=t.commentMargin)for(f.m(t.M.x+2*t.T.x+t.commentMargin,t.M.y+h),p.move(f),p=p.Mg();p.next();)(v=p.value).Ab=A,v.Bb=C;else for(f.m(t.M.x+t.commentMargin-y.width,t.M.y+h),p.move(f),p=p.Mg();p.next();)(v=p.value).Ab=C,v.Bb=A;h=0<=t.commentSpacing?h+(y.height+t.commentSpacing):h+(t.commentSpacing-y.height)}else{if(135<o&&!a||!n&&l)if(0<=t.commentMargin)for(f.m(t.M.x+h,t.M.y-t.commentMargin-y.height),p.move(f),p=p.Mg();p.next();)(v=p.value).Ab=N,v.Bb=F;else for(f.m(t.M.x+h,t.M.y+2*t.T.y-t.commentMargin),p.move(f),p=p.Mg();p.next();)(v=p.value).Ab=F,v.Bb=N;else if(0<=t.commentMargin)for(f.m(t.M.x+h,t.M.y+2*t.T.y+t.commentMargin),p.move(f),p=p.Mg();p.next();)(v=p.value).Ab=F,v.Bb=N;else for(f.m(t.M.x+h,t.M.y+t.commentMargin-y.height),p.move(f),p=p.Mg();p.next();)(v=p.value).Ab=N,v.Bb=F;h=0<=t.commentSpacing?h+(y.width+t.commentSpacing):h+(t.commentSpacing-y.width)}}if(r.v(f),e=h-t.commentSpacing-(i?e.height:e.width),this.Of===$u)for(o=t.kc;o.next();)null===(t=o.value.link)||t.Zl||(t.Ul=0<e?e:NaN);else for(o=t.nc;o.next();)null===(t=o.value.link)||t.Zl||(t.nm=0<e?e:NaN)}},Hd.prototype.layoutTree=function(t){if(null!==t){for(var e=(n=t.children).length,i=0;i<e;i++)this.layoutTree(n[i]);switch(t.compaction){case hc:ep(this,t);break;case uc:if(t.alignment===ac)ep(this,t);else if(0===t.nn){i=t.parent;var n=!1,o=(e=0,ic);null!==i&&(e=i.angle,n=Qd(o=i.alignment)),i=tp(t),t.pa.m(0,0),t.kb.m(t.width,t.height),null===t.parent||null===t.comments||(180!==e&&270!==e||n)&&!i?t.Oa.m(0,0):180===e&&!n||(90===e||270===e)&&i?t.Oa.m(t.width-2*t.T.x,0):t.Oa.m(0,t.height-2*t.T.y),t.wu=null,t.Ru=null}else{for(var a=bp(t),s=(n=90===a||270===a,0),l=t.children,h=l.length,u=0;u<h;u++){var c=l[u];s=Math.max(s,n?c.kb.width:c.kb.height)}var f=t.alignment,d=(i=f===nc,f===oc),p=Qd(f),y=Math.max(0,t.breadthLimit),v=(e=xp(t),t.nodeSpacing),m=wp(t),g=t.rowSpacing,b=0;(i||d||t.uq||t.vq&&1===t.maxGenerationCount)&&(b=Math.max(0,t.rowIndent));i=t.width,o=t.height;var x=0,w=0,k=0,M=null,S=null,T=0,P=0,N=0,C=0,A=0,F=0,D=0,L=0;c=0;if(p&&!Zd(f)&&135<a&&l.reverse(),Zd(f))if(1<h)for(u=0;u<h;u++)0==u%2&&u!==h-1?L=Math.max(L,n?l[u].kb.width:l[u].kb.height):0!=u%2&&(c=Math.max(c,n?l[u].kb.width:l[u].kb.height));else 1===h&&(L=n?l[0].kb.width:l[0].kb.height);if(p){switch(f){case rc:L=(w=135>a?ip(t,l,L,x,w):np(t,l,L,x,w)).x,x=w.width,w=w.height;break;case sc:for(u=0;u<h;u++){var j=(c=l[u]).kb;M=0===F?0:g;n?(c.pa.m(s-j.width,C+M),x=Math.max(x,j.width),w=Math.max(w,C+M+j.height),C+=M+j.height):(c.pa.m(N+M,s-j.height),x=Math.max(x,N+M+j.width),w=Math.max(w,j.height),N+=M+j.width),F++}break;case lc:for(u=0;u<h;u++)j=(c=l[u]).kb,M=0===F?0:g,n?(c.pa.m(v/2+t.T.x,C+M),x=Math.max(x,j.width),w=Math.max(w,C+M+j.height),C+=M+j.height):(c.pa.m(N+M,v/2+t.T.y),x=Math.max(x,N+M+j.width),w=Math.max(w,j.height),N+=M+j.width),F++}M=yp(this,2),S=yp(this,2),n?(M[0].m(0,0),M[1].m(0,w),S[0].m(x,0)):(M[0].m(0,0),M[1].m(x,0),S[0].m(0,w)),S[1].m(x,w)}else for(u=0;u<h;u++){if(j=(c=l[u]).kb,n){0<y&&0<F&&N+v+j.width>y&&(N<s&&up(t,f,s-N,0,D,u-1),A++,F=0,D=u,k=w,N=0,C=135<a?-w-g:w+g),fp(this,c,0,C);var z=0;if(0===F)M=c.wu,S=c.Ru,T=j.width,P=j.height,(null===M||null===S||a!==bp(c))&&(M=yp(this,2),S=yp(this,2),M[0].m(0,0),M[1].m(0,P),S[0].m(T,0),S[1].m(T,P));else{var B=r.eb();z=(P=pp(this,t,c,M,S,T,P,B)).x,M=B[0],S=B[1],T=P.width,P=P.height;r.ta(B),N<j.width&&0>z&&(cp(t,-z,0,D,u-1),dp(M,-z,0),dp(S,-z,0),z=0)}c.pa.m(z,C),x=Math.max(x,T),w=Math.max(w,k+(0===A?0:g)+j.height),N=T}else 0<y&&0<F&&C+v+j.height>y&&(C<s&&up(t,f,0,s-C,D,u-1),A++,F=0,D=u,k=x,C=0,N=135<a?-x-g:x+g),fp(this,c,N,0),z=0,0===F?(M=c.wu,S=c.Ru,T=j.width,P=j.height,(null===M||null===S||a!==bp(c))&&(M=yp(this,2),S=yp(this,2),M[0].m(0,0),M[1].m(T,0),S[0].m(0,P),S[1].m(T,P))):(z=(P=pp(this,t,c,M,S,T,P,B=r.eb())).x,M=B[0],S=B[1],T=P.width,P=P.height,r.ta(B),C<j.height&&0>z&&(cp(t,0,-z,D,u-1),dp(M,0,-z),dp(S,0,-z),z=0)),c.pa.m(N,z),w=Math.max(w,P),x=Math.max(x,k+(0===A?0:g)+j.width),C=P;F++}switch(0<A&&(n?(w+=Math.max(0,e),N<x&&up(t,f,x-N,0,D,h-1),0<b&&(d||cp(t,b,0,0,h-1),x+=b)):(x+=Math.max(0,e),C<w&&up(t,f,0,w-C,D,h-1),0<b&&(d||cp(t,0,b,0,h-1),w+=b))),b=d=0,f){case ec:n?d+=x/2-t.T.x-m/2:b+=w/2-t.T.y-m/2;break;case ic:0<A?n?d+=x/2-t.T.x-m/2:b+=w/2-t.T.y-m/2:n?d+=(L=l[0].pa.x+l[0].Oa.x)+((u=l[h-1].pa.x+l[h-1].Oa.x+2*l[h-1].T.x)-L)/2-t.T.x-m/2:b+=(L=l[0].pa.y+l[0].Oa.y)+((u=l[h-1].pa.y+l[h-1].Oa.y+2*l[h-1].T.y)-L)/2-t.T.y-m/2;break;case nc:n?(d-=m,x+=m):(b-=m,w+=m);break;case oc:n?(d+=x-t.width+m,x+=m):(b+=w-t.height+m,w+=m);break;case rc:n?d=1<h?d+(L+v/2-t.T.x):d+(l[0].T.x-t.T.x+l[0].Oa.x):b=1<h?b+(L+v/2-t.T.y):b+(l[0].T.y-t.T.y+l[0].Oa.y);break;case sc:n?d+=x+v/2-t.T.x:b+=w+v/2-t.T.y;break;case lc:break;default:r.k("Unhandled alignment value "+f.toString())}for(u=0;u<h;u++)c=l[u],n?c.pa.m(c.pa.x+c.Oa.x-d,c.pa.y+(135<a?(p?-w:-c.kb.height)+c.Oa.y-e:o+e+c.Oa.y)):c.pa.m(c.pa.x+(135<a?(p?-x:-c.kb.width)+c.Oa.x-e:i+e+c.Oa.x),c.pa.y+c.Oa.y-b);if(h=l=0,p?n?(x=sp(t,x,d),0>d&&(d=0),135<a&&(b+=w+e),w+=o+e,f===lc&&(l+=v/2+t.T.x),h+=o+e):(135<a&&(d+=x+e),x+=i+e,w=lp(t,w,b),0>b&&(b=0),f===lc&&(h+=v/2+t.T.y),l+=i+e):n?(null===t.comments?i>x&&(l=(f=hp(f,i-x,0)).x,h=f.y,x=i,d=0):x=sp(t,x,d),0>d&&(l-=d,d=0),135<a&&(b+=w+e),w=Math.max(Math.max(w,o),w+o+e),h+=o+e):(135<a&&(d+=x+e),x=Math.max(Math.max(x,i),x+i+e),null===t.comments?o>w&&(l=(f=hp(f,0,o-w)).x,h=f.y,w=o,b=0):w=lp(t,w,b),0>b&&(h-=b,b=0),l+=i+e),0<A)a=yp(this,4),f=yp(this,4),n?(a[2].m(0,o+e),a[3].m(a[2].x,w),f[2].m(x,a[2].y),f[3].m(f[2].x,a[3].y)):(a[2].m(i+e,0),a[3].m(x,a[2].y),f[2].m(a[2].x,w),f[3].m(a[3].x,f[2].y));else{for(a=yp(this,M.length+2),f=yp(this,S.length+2),u=0;u<M.length;u++)p=M[u],a[u+2].m(p.x+l,p.y+h);for(u=0;u<S.length;u++)p=S[u],f[u+2].m(p.x+l,p.y+h)}n?(a[0].m(d,0),a[1].m(a[0].x,o),a[2].y<a[1].y&&(a[2].x>a[0].x?a[2].assign(a[1]):a[1].assign(a[2])),a[3].y<a[2].y&&(a[3].x>a[0].x?a[3].assign(a[2]):a[2].assign(a[3])),f[0].m(d+i,0),f[1].m(f[0].x,o),f[2].y<f[1].y&&(f[2].x<f[0].x?f[2].assign(f[1]):f[1].assign(f[2])),f[3].y<f[2].y&&(f[3].x<f[0].x?f[3].assign(f[2]):f[2].assign(f[3])),a[2].y-=e/2,f[2].y-=e/2):(a[0].m(0,b),a[1].m(i,a[0].y),a[2].x<a[1].x&&(a[2].y>a[0].y?a[2].assign(a[1]):a[1].assign(a[2])),a[3].x<a[2].x&&(a[3].y>a[0].y?a[3].assign(a[2]):a[2].assign(a[3])),f[0].m(0,b+o),f[1].m(i,f[0].y),f[2].x<f[1].x&&(f[2].y<f[0].y?f[2].assign(f[1]):f[1].assign(f[2])),f[3].x<f[2].x&&(f[3].y<f[0].y?f[3].assign(f[2]):f[2].assign(f[3])),a[2].x-=e/2,f[2].x-=e/2),vp(this,M),vp(this,S),t.wu=a,t.Ru=f,t.Oa.m(d,b),t.kb.m(x,w)}break;default:r.k("Unhandled compaction value "+t.compaction.toString())}}},Hd.prototype.arrangeTrees=function(){if(this.pd===mc)for(var t=this.xd.i;t.next();){var e=t.value;if(e instanceof Mp)if(null!==(i=e.Qc)){var i=(n=i.position).x,n=n.y;isFinite(i)||(i=0),isFinite(n)||(n=0),mp(this,e,i,n)}}else{for(i=[],t=this.xd.i;t.next();)(e=t.value)instanceof Mp&&i.push(e);switch(this.sorting){case Xu:break;case Qu:i.reverse();break;case Zu:i.sort(this.comparer);break;case tc:i.sort(this.comparer),i.reverse();break;default:r.k("Unhandled sorting value "+this.sorting.toString())}for(t=(e=this.Nd).x,e=e.y,n=0;n<i.length;n++){var o=i[n];switch(mp(this,o,t+o.Oa.x,e+o.Oa.y),this.pd){case yc:e+=o.kb.height+this.ng.height;break;case vc:t+=o.kb.width+this.ng.width;break;default:r.k("Unhandled arrangement value "+this.pd.toString())}}}},Hd.prototype.commitLayout=function(){this.zB(),this.commitNodes(),this.iA(),this.uu&&this.commitLinks()},Hd.prototype.commitNodes=function(){for(var t=this.network.vertexes.i;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},Hd.prototype.iA=function(){if(this.TA===xc){for(var t=this.fC,e=[],i=null,n=this.network.vertexes.i;n.next();){var o=n.value;null===i?i=o.ab.copy():i.Ih(o.ab);var r=void 0===(r=e[o.level])?xp(o):Math.max(r,xp(o));e[o.level]=r}for(n=0;n<e.length;n++)void 0===e[n]&&(e[n]=0);90===this.angle||270===this.angle?(i.Yf(this.nodeSpacing/2,this.layerSpacing),o=new ut(-this.nodeSpacing/2,-this.layerSpacing/2)):(i.Yf(this.layerSpacing,this.nodeSpacing/2),o=new ut(-this.layerSpacing/2,-this.nodeSpacing/2));r=[],i=90===this.angle||270===this.angle?i.width:i.height;var a=0;if(180===this.angle||270===this.angle)for(n=0;n<t.length;n++)a+=t[n]+e[n];for(n=0;n<t.length;n++){var s=t[n]+e[n];270===this.angle?(a-=s,r.push(new pt(0,a,i,s))):90===this.angle?(r.push(new pt(0,a,i,s)),a+=s):180===this.angle?(a-=s,r.push(new pt(a,0,s,i))):(r.push(new pt(a,0,s,i)),a+=s)}this.commitLayers(r,o)}},Hd.prototype.commitLayers=function(){},Hd.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},Hd.prototype.zB=function(){for(var t=this.xd.i;t.next();){var e=t.value;e instanceof Mp&&gp(this,e)}},Hd.prototype.setPortSpots=function(t){var e=t.alignment;if(Qd(e)){var i,n=this.Of===$u,o=bp(t);switch(o){case 0:i=A;break;case 90:i=F;break;case 180:i=C;break;default:i=N}var r=t.children,a=r.length;switch(e){case rc:case ac:for(e=0;e<a;e++){var s=r[e];if(null!==(s=(n?s.nc:s.kc).first())&&null!==(s=s.link)){var l=90===o||270===o?C:N;if(1===a||e===a-1&&1==a%2)switch(o){case 0:l=C;break;case 90:l=N;break;case 180:l=A;break;default:l=F}else 0==e%2&&(l=90===o||270===o?A:F);n?(t.setsPortSpot&&(s.Ab=i),t.setsChildPortSpot&&(s.Bb=l)):(t.setsPortSpot&&(s.Ab=l),t.setsChildPortSpot&&(s.Bb=i))}}break;case sc:for(l=90===o||270===o?A:F,o=n?t.kc:t.nc;o.next();)null!==(s=o.value.link)&&(n?(t.setsPortSpot&&(s.Ab=i),t.setsChildPortSpot&&(s.Bb=l)):(t.setsPortSpot&&(s.Ab=l),t.setsChildPortSpot&&(s.Bb=i)));break;case lc:for(l=90===o||270===o?C:N,o=n?t.kc:t.nc;o.next();)null!==(s=o.value.link)&&(n?(t.setsPortSpot&&(s.Ab=i),t.setsChildPortSpot&&(s.Bb=l)):(t.setsPortSpot&&(s.Ab=l),t.setsChildPortSpot&&(s.Bb=i)))}}else if(n=bp(t),this.Of===$u){for(i=t.kc;i.next();)if(null!==(o=i.value.link)){if(t.setsPortSpot)if(t.portSpot.Zc())switch(n){case 0:o.Ab=A;break;case 90:o.Ab=F;break;case 180:o.Ab=C;break;default:o.Ab=N}else o.Ab=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Zc())switch(n){case 0:o.Bb=C;break;case 90:o.Bb=N;break;case 180:o.Bb=A;break;default:o.Bb=F}else o.Bb=t.childPortSpot}}else for(i=t.nc;i.next();)if(null!==(o=i.value.link)){if(t.setsPortSpot)if(t.portSpot.Zc())switch(n){case 0:o.Bb=A;break;case 90:o.Bb=F;break;case 180:o.Bb=C;break;default:o.Bb=N}else o.Bb=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Zc())switch(n){case 0:o.Ab=C;break;case 90:o.Ab=N;break;case 180:o.Ab=A;break;default:o.Ab=F}else o.Ab=t.childPortSpot}},r.defineProperty(Hd,{OL:"roots"},function(){return this.xd},function(t){this.xd!==t&&(r.G(t,nt,Hd,"roots"),this.xd=t,this.J())}),r.defineProperty(Hd,{path:"path"},function(){return this.Ls},function(t){this.Ls!==t&&(r.ob(t,Hd,Hd,"path"),this.Ls=t,this.J())}),r.defineProperty(Hd,{YJ:"treeStyle"},function(){return this.At},function(t){this.pd!==t&&(r.ob(t,Hd,Hd,"treeStyle"),t===cc||t===dc||t===fc||t===pc)&&(this.At=t,this.J())}),r.defineProperty(Hd,{TA:"layerStyle"},function(){return this.fw},function(t){this.pd!==t&&(r.ob(t,Hd,Hd,"layerStyle"),t===gc||t===bc||t===xc)&&(this.fw=t,this.J())}),r.defineProperty(Hd,{comments:"comments"},function(){return this.Lh},function(t){this.Lh!==t&&(r.j(t,"boolean",Hd,"comments"),this.Lh=t,this.J())}),r.defineProperty(Hd,{Vf:"arrangement"},function(){return this.pd},function(t){this.pd!==t&&(r.ob(t,Hd,Hd,"arrangement"),t===yc||t===vc||t===mc)&&(this.pd=t,this.J())}),r.defineProperty(Hd,{CE:"arrangementSpacing"},function(){return this.ng},function(t){r.G(t,dt,Hd,"arrangementSpacing"),this.ng.L(t)||(this.ng.assign(t),this.J())}),r.defineProperty(Hd,{NL:"rootDefaults"},function(){return this.va},function(t){this.va!==t&&(r.G(t,Mp,Hd,"rootDefaults"),this.va=t,this.J())}),r.defineProperty(Hd,{qK:"alternateDefaults"},function(){return this.wa},function(t){this.wa!==t&&(r.G(t,Mp,Hd,"alternateDefaults"),this.wa=t,this.J())}),r.defineProperty(Hd,{sorting:"sorting"},function(){return this.va.sorting},function(t){this.va.sorting!==t&&(r.ob(t,Hd,Hd,"sorting"),t===Xu||t===Qu||t===Zu||tc)&&(this.va.sorting=t,this.J())}),r.defineProperty(Hd,{comparer:"comparer"},function(){return this.va.comparer},function(t){this.va.comparer!==t&&(r.j(t,"function",Hd,"comparer"),this.va.comparer=t,this.J())}),r.defineProperty(Hd,{angle:"angle"},function(){return this.va.angle},function(t){this.va.angle!==t&&(r.j(t,"number",Hd,"angle"),0===t||90===t||180===t||270===t?(this.va.angle=t,this.J()):r.k("TreeLayout.angle must be 0, 90, 180, or 270"))}),r.defineProperty(Hd,{alignment:"alignment"},function(){return this.va.alignment},function(t){this.va.alignment!==t&&(r.ob(t,Hd,Hd,"alignment"),this.va.alignment=t,this.J())}),r.defineProperty(Hd,{nodeIndent:"nodeIndent"},function(){return this.va.nodeIndent},function(t){this.va.nodeIndent!==t&&(r.j(t,"number",Hd,"nodeIndent"),0<=t&&(this.va.nodeIndent=t,this.J()))}),r.defineProperty(Hd,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.va.nodeIndentPastParent},function(t){this.va.nodeIndentPastParent!==t&&(r.j(t,"number",Hd,"nodeIndentPastParent"),0<=t&&1>=t&&(this.va.nodeIndentPastParent=t,this.J()))}),r.defineProperty(Hd,{nodeSpacing:"nodeSpacing"},function(){return this.va.nodeSpacing},function(t){this.va.nodeSpacing!==t&&(r.j(t,"number",Hd,"nodeSpacing"),this.va.nodeSpacing=t,this.J())}),r.defineProperty(Hd,{layerSpacing:"layerSpacing"},function(){return this.va.layerSpacing},function(t){this.va.layerSpacing!==t&&(r.j(t,"number",Hd,"layerSpacing"),this.va.layerSpacing=t,this.J())}),r.defineProperty(Hd,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.va.layerSpacingParentOverlap},function(t){this.va.layerSpacingParentOverlap!==t&&(r.j(t,"number",Hd,"layerSpacingParentOverlap"),0<=t&&1>=t&&(this.va.layerSpacingParentOverlap=t,this.J()))}),r.defineProperty(Hd,{compaction:"compaction"},function(){return this.va.compaction},function(t){this.va.compaction!==t&&(r.ob(t,Hd,Hd,"compaction"),t===hc||t===uc)&&(this.va.compaction=t,this.J())}),r.defineProperty(Hd,{breadthLimit:"breadthLimit"},function(){return this.va.breadthLimit},function(t){this.va.breadthLimit!==t&&(r.j(t,"number",Hd,"breadthLimit"),0<=t&&(this.va.breadthLimit=t,this.J()))}),r.defineProperty(Hd,{rowSpacing:"rowSpacing"},function(){return this.va.rowSpacing},function(t){this.va.rowSpacing!==t&&(r.j(t,"number",Hd,"rowSpacing"),this.va.rowSpacing=t,this.J())}),r.defineProperty(Hd,{rowIndent:"rowIndent"},function(){return this.va.rowIndent},function(t){this.va.rowIndent!==t&&(r.j(t,"number",Hd,"rowIndent"),0<=t&&(this.va.rowIndent=t,this.J()))}),r.defineProperty(Hd,{commentSpacing:"commentSpacing"},function(){return this.va.commentSpacing},function(t){this.va.commentSpacing!==t&&(r.j(t,"number",Hd,"commentSpacing"),this.va.commentSpacing=t,this.J())}),r.defineProperty(Hd,{commentMargin:"commentMargin"},function(){return this.va.commentMargin},function(t){this.va.commentMargin!==t&&(r.j(t,"number",Hd,"commentMargin"),this.va.commentMargin=t,this.J())}),r.defineProperty(Hd,{setsPortSpot:"setsPortSpot"},function(){return this.va.setsPortSpot},function(t){this.va.setsPortSpot!==t&&(r.j(t,"boolean",Hd,"setsPortSpot"),this.va.setsPortSpot=t,this.J())}),r.defineProperty(Hd,{portSpot:"portSpot"},function(){return this.va.portSpot},function(t){r.G(t,Mt,Hd,"portSpot"),this.va.portSpot.L(t)||(this.va.portSpot=t,this.J())}),r.defineProperty(Hd,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.va.setsChildPortSpot},function(t){this.va.setsChildPortSpot!==t&&(r.j(t,"boolean",Hd,"setsChildPortSpot"),this.va.setsChildPortSpot=t,this.J())}),r.defineProperty(Hd,{childPortSpot:"childPortSpot"},function(){return this.va.childPortSpot},function(t){r.G(t,Mt,Hd,"childPortSpot"),this.va.childPortSpot.L(t)||(this.va.childPortSpot=t,this.J())}),r.defineProperty(Hd,{BK:"alternateSorting"},function(){return this.wa.sorting},function(t){this.wa.sorting!==t&&(r.ob(t,Hd,Hd,"alternateSorting"),t===Xu||t===Qu||t===Zu||tc)&&(this.wa.sorting=t,this.J())}),r.defineProperty(Hd,{pK:"alternateComparer"},function(){return this.wa.comparer},function(t){this.wa.comparer!==t&&(r.j(t,"function",Hd,"alternateComparer"),this.wa.comparer=t,this.J())}),r.defineProperty(Hd,{jK:"alternateAngle"},function(){return this.wa.angle},function(t){this.wa.angle!==t&&(r.j(t,"number",Hd,"alternateAngle"),0===t||90===t||180===t||270===t)&&(this.wa.angle=t,this.J())}),r.defineProperty(Hd,{iK:"alternateAlignment"},function(){return this.wa.alignment},function(t){this.wa.alignment!==t&&(r.ob(t,Hd,Hd,"alternateAlignment"),this.wa.alignment=t,this.J())}),r.defineProperty(Hd,{tK:"alternateNodeIndent"},function(){return this.wa.nodeIndent},function(t){this.wa.nodeIndent!==t&&(r.j(t,"number",Hd,"alternateNodeIndent"),0<=t&&(this.wa.nodeIndent=t,this.J()))}),r.defineProperty(Hd,{uK:"alternateNodeIndentPastParent"},function(){return this.wa.nodeIndentPastParent},function(t){this.wa.nodeIndentPastParent!==t&&(r.j(t,"number",Hd,"alternateNodeIndentPastParent"),0<=t&&1>=t&&(this.wa.nodeIndentPastParent=t,this.J()))}),r.defineProperty(Hd,{vK:"alternateNodeSpacing"},function(){return this.wa.nodeSpacing},function(t){this.wa.nodeSpacing!==t&&(r.j(t,"number",Hd,"alternateNodeSpacing"),this.wa.nodeSpacing=t,this.J())}),r.defineProperty(Hd,{rK:"alternateLayerSpacing"},function(){return this.wa.layerSpacing},function(t){this.wa.layerSpacing!==t&&(r.j(t,"number",Hd,"alternateLayerSpacing"),this.wa.layerSpacing=t,this.J())}),r.defineProperty(Hd,{sK:"alternateLayerSpacingParentOverlap"},function(){return this.wa.layerSpacingParentOverlap},function(t){this.wa.layerSpacingParentOverlap!==t&&(r.j(t,"number",Hd,"alternateLayerSpacingParentOverlap"),0<=t&&1>=t&&(this.wa.layerSpacingParentOverlap=t,this.J()))}),r.defineProperty(Hd,{oK:"alternateCompaction"},function(){return this.wa.compaction},function(t){this.wa.compaction!==t&&(r.ob(t,Hd,Hd,"alternateCompaction"),t===hc||t===uc)&&(this.wa.compaction=t,this.J())}),r.defineProperty(Hd,{kK:"alternateBreadthLimit"},function(){return this.wa.breadthLimit},function(t){this.wa.breadthLimit!==t&&(r.j(t,"number",Hd,"alternateBreadthLimit"),0<=t&&(this.wa.breadthLimit=t,this.J()))}),r.defineProperty(Hd,{yK:"alternateRowSpacing"},function(){return this.wa.rowSpacing},function(t){this.wa.rowSpacing!==t&&(r.j(t,"number",Hd,"alternateRowSpacing"),this.wa.rowSpacing=t,this.J())}),r.defineProperty(Hd,{xK:"alternateRowIndent"},function(){return this.wa.rowIndent},function(t){this.wa.rowIndent!==t&&(r.j(t,"number",Hd,"alternateRowIndent"),0<=t&&(this.wa.rowIndent=t,this.J()))}),r.defineProperty(Hd,{nK:"alternateCommentSpacing"},function(){return this.wa.commentSpacing},function(t){this.wa.commentSpacing!==t&&(r.j(t,"number",Hd,"alternateCommentSpacing"),this.wa.commentSpacing=t,this.J())}),r.defineProperty(Hd,{mK:"alternateCommentMargin"},function(){return this.wa.commentMargin},function(t){this.wa.commentMargin!==t&&(r.j(t,"number",Hd,"alternateCommentMargin"),this.wa.commentMargin=t,this.J())}),r.defineProperty(Hd,{AK:"alternateSetsPortSpot"},function(){return this.wa.setsPortSpot},function(t){this.wa.setsPortSpot!==t&&(r.j(t,"boolean",Hd,"alternateSetsPortSpot"),this.wa.setsPortSpot=t,this.J())}),r.defineProperty(Hd,{wK:"alternatePortSpot"},function(){return this.wa.portSpot},function(t){r.G(t,Mt,Hd,"alternatePortSpot"),this.wa.portSpot.L(t)||(this.wa.portSpot=t,this.J())}),r.defineProperty(Hd,{zK:"alternateSetsChildPortSpot"},function(){return this.wa.setsChildPortSpot},function(t){this.wa.setsChildPortSpot!==t&&(r.j(t,"boolean",Hd,"alternateSetsChildPortSpot"),this.wa.setsChildPortSpot=t,this.J())}),r.defineProperty(Hd,{lK:"alternateChildPortSpot"},function(){return this.wa.childPortSpot},function(t){r.G(t,Mt,Hd,"alternateChildPortSpot"),this.wa.childPortSpot.L(t)||(this.wa.childPortSpot=t,this.J())}),Hd.PathDefault=Ju=r.p(Hd,"PathDefault",-1),Hd.PathDestination=$u=r.p(Hd,"PathDestination",0),Hd.PathSource=Yu=r.p(Hd,"PathSource",1),Hd.SortingForwards=Xu=r.p(Hd,"SortingForwards",10),Hd.SortingReverse=Qu=r.p(Hd,"SortingReverse",11),Hd.SortingAscending=Zu=r.p(Hd,"SortingAscending",12),Hd.SortingDescending=tc=r.p(Hd,"SortingDescending",13),Hd.AlignmentCenterSubtrees=ec=r.p(Hd,"AlignmentCenterSubtrees",20),Hd.AlignmentCenterChildren=ic=r.p(Hd,"AlignmentCenterChildren",21),Hd.AlignmentStart=nc=r.p(Hd,"AlignmentStart",22),Hd.AlignmentEnd=oc=r.p(Hd,"AlignmentEnd",23),Hd.AlignmentBus=rc=r.p(Hd,"AlignmentBus",24),Hd.AlignmentBusBranching=ac=r.p(Hd,"AlignmentBusBranching",25),Hd.AlignmentTopLeftBus=sc=r.p(Hd,"AlignmentTopLeftBus",26),Hd.AlignmentBottomRightBus=lc=r.p(Hd,"AlignmentBottomRightBus",27),Hd.CompactionNone=hc=r.p(Hd,"CompactionNone",30),Hd.CompactionBlock=uc=r.p(Hd,"CompactionBlock",31),Hd.StyleLayered=cc=r.p(Hd,"StyleLayered",40),Hd.StyleLastParents=fc=r.p(Hd,"StyleLastParents",41),Hd.StyleAlternating=dc=r.p(Hd,"StyleAlternating",42),Hd.StyleRootOnly=pc=r.p(Hd,"StyleRootOnly",43),Hd.ArrangementVertical=yc=r.p(Hd,"ArrangementVertical",50),Hd.ArrangementHorizontal=vc=r.p(Hd,"ArrangementHorizontal",51),Hd.ArrangementFixedRoots=mc=r.p(Hd,"ArrangementFixedRoots",52),Hd.LayerIndividual=gc=r.p(Hd,"LayerIndividual",60),Hd.LayerSiblings=bc=r.p(Hd,"LayerSiblings",61),Hd.LayerUniform=xc=r.p(Hd,"LayerUniform",62),r.La(kp,Nf),r.ga("TreeNetwork",kp),kp.prototype.createVertex=function(){return new Mp},kp.prototype.createEdge=function(){return new Sp},r.La(Mp,Df),r.ga("TreeVertex",Mp),Mp.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.sorting=t.sorting,this.comparer=t.comparer,this.angle=t.angle,this.alignment=t.alignment,this.nodeIndent=t.nodeIndent,this.nodeIndentPastParent=t.nodeIndentPastParent,this.nodeSpacing=t.nodeSpacing,this.layerSpacing=t.layerSpacing,this.layerSpacingParentOverlap=t.layerSpacingParentOverlap,this.compaction=t.compaction,this.breadthLimit=t.breadthLimit,this.rowSpacing=t.rowSpacing,this.rowIndent=t.rowIndent,this.commentSpacing=t.commentSpacing,this.commentMargin=t.commentMargin,this.setsPortSpot=t.setsPortSpot,this.portSpot=t.portSpot,this.setsChildPortSpot=t.setsChildPortSpot,this.childPortSpot=t.childPortSpot)},r.u(Mp,{nn:"childrenCount"},function(){return this.children.length}),r.defineProperty(Mp,{ML:"relativePosition"},function(){return this.pa},function(t){this.pa.set(t)}),r.defineProperty(Mp,{ZL:"subtreeSize"},function(){return this.kb},function(t){this.kb.set(t)}),r.defineProperty(Mp,{YL:"subtreeOffset"},function(){return this.Oa},function(t){this.Oa.set(t)}),r.La(Sp,Lf),r.ga("TreeEdge",Sp),Sp.prototype.commit=function(){var t=this.link;if(null!==t&&!t.Zl){var e=this.network.Sb,i=null,n=null;switch(e.Of){case $u:i=this.fromVertex,n=this.toVertex;break;case Yu:i=this.toVertex,n=this.fromVertex;break;default:r.k("Unhandled path value "+e.Of.toString())}if(null!==i&&null!==n)if(0!==(e=this.Ss).x||0!==e.y||i.AJ){n=i.ab;var o=bp(i),a=xp(i),s=i.rowSpacing;t.ao();var l,h,u=t.$e===Jh,c=t.ac,f=0;if(t.jm(),c||u){for(f=2;4<t.qa;)t.bG(2);l=t.l(1),h=t.l(2)}else{for(f=1;3<t.qa;)t.bG(1);l=t.l(0),h=t.l(t.qa-1)}var d=t.l(t.qa-1),p=0;0===o?(i.alignment===oc?(p=n.bottom+e.y,0===e.y&&l.y>d.y+i.rowIndent&&(p=Math.min(p,Math.max(l.y,p-wp(i))))):i.alignment===nc?(p=n.top+e.y,0===e.y&&l.y<d.y-i.rowIndent&&(p=Math.max(p,Math.min(l.y,p+wp(i))))):p=i.uq||i.vq&&1===i.maxGenerationCount?n.top-i.Oa.y+e.y:n.y+n.height/2+e.y,u?(t.w(f,l.x,p),f++,t.w(f,n.right+a,p),f++,t.w(f,n.right+a+(e.x-s)/3,p),f++,t.w(f,n.right+a+2*(e.x-s)/3,p),f++,t.w(f,n.right+a+(e.x-s),p),f++,t.w(f,h.x,p)):(c&&(t.w(f,n.right+a/2,l.y),f++),t.w(f,n.right+a/2,p),f++,t.w(f,n.right+a+e.x-(c?s/2:s),p),f++,c&&t.w(f,t.l(f-1).x,h.y))):90===o?(i.alignment===oc?(p=n.right+e.x,0===e.x&&l.x>d.x+i.rowIndent&&(p=Math.min(p,Math.max(l.x,p-wp(i))))):i.alignment===nc?(p=n.left+e.x,0===e.x&&l.x<d.x-i.rowIndent&&(p=Math.max(p,Math.min(l.x,p+wp(i))))):p=i.uq||i.vq&&1===i.maxGenerationCount?n.left-i.Oa.x+e.x:n.x+n.width/2+e.x,u?(t.w(f,p,l.y),f++,t.w(f,p,n.bottom+a),f++,t.w(f,p,n.bottom+a+(e.y-s)/3),f++,t.w(f,p,n.bottom+a+2*(e.y-s)/3),f++,t.w(f,p,n.bottom+a+(e.y-s)),f++,t.w(f,p,h.y)):(c&&(t.w(f,l.x,n.bottom+a/2),f++),t.w(f,p,n.bottom+a/2),f++,t.w(f,p,n.bottom+a+e.y-(c?s/2:s)),f++,c&&t.w(f,h.x,t.l(f-1).y))):180===o?(i.alignment===oc?(p=n.bottom+e.y,0===e.y&&l.y>d.y+i.rowIndent&&(p=Math.min(p,Math.max(l.y,p-wp(i))))):i.alignment===nc?(p=n.top+e.y,0===e.y&&l.y<d.y-i.rowIndent&&(p=Math.max(p,Math.min(l.y,p+wp(i))))):p=i.uq||i.vq&&1===i.maxGenerationCount?n.top-i.Oa.y+e.y:n.y+n.height/2+e.y,u?(t.w(f,l.x,p),f++,t.w(f,n.left-a,p),f++,t.w(f,n.left-a+(e.x+s)/3,p),f++,t.w(f,n.left-a+2*(e.x+s)/3,p),f++,t.w(f,n.left-a+(e.x+s),p),f++,t.w(f,h.x,p)):(c&&(t.w(f,n.left-a/2,l.y),f++),t.w(f,n.left-a/2,p),f++,t.w(f,n.left-a+e.x+(c?s/2:s),p),f++,c&&t.w(f,t.l(f-1).x,h.y))):270===o?(i.alignment===oc?(p=n.right+e.x,0===e.x&&l.x>d.x+i.rowIndent&&(p=Math.min(p,Math.max(l.x,p-wp(i))))):i.alignment===nc?(p=n.left+e.x,0===e.x&&l.x<d.x-i.rowIndent&&(p=Math.max(p,Math.min(l.x,p+wp(i))))):p=i.uq||i.vq&&1===i.maxGenerationCount?n.left-i.Oa.x+e.x:n.x+n.width/2+e.x,u?(t.w(f,p,l.y),f++,t.w(f,p,n.top-a),f++,t.w(f,p,n.top-a+(e.y+s)/3),f++,t.w(f,p,n.top-a+2*(e.y+s)/3),f++,t.w(f,p,n.top-a+(e.y+s)),f++,t.w(f,p,h.y)):(c&&(t.w(f,l.x,n.top-a/2),f++),t.w(f,p,n.top-a/2),f++,t.w(f,p,n.top-a+e.y+(c?s/2:s)),f++,c&&t.w(f,h.x,t.l(f-1).y))):r.k("Invalid angle "+o),t.nj()}else o=i,a=n,t=this.link,(i=bp(o))!==bp(a)&&(e=xp(o),n=o.ab,o=a.ab,0===i&&o.left-n.right<e+1||90===i&&o.top-n.bottom<e+1||180===i&&n.left-o.right<e+1||270===i&&n.top-o.bottom<e+1||(t.ao(),o=t.$e===Jh,a=t.ac,s=Qd(this.fromVertex.alignment),t.jm(),0===i?(i=n.right+e/2,o?4===t.qa&&(e=t.l(3).y,t.ca(1,i-20,t.l(1).y),t.w(2,i-20,e),t.w(3,i,e),t.w(4,i+20,e),t.ca(5,t.l(5).x,e)):a?s?t.ca(3,t.l(2).x,t.l(4).y):6===t.qa&&(t.ca(2,i,t.l(2).y),t.ca(3,i,t.l(3).y)):4===t.qa?t.w(2,i,t.l(2).y):3===t.qa?t.ca(1,i,t.l(2).y):2===t.qa&&t.w(1,i,t.l(1).y)):90===i?(e=n.bottom+e/2,o?4===t.qa&&(i=t.l(3).x,t.ca(1,t.l(1).x,e-20),t.w(2,i,e-20),t.w(3,i,e),t.w(4,i,e+20),t.ca(5,i,t.l(5).y)):a?s?t.ca(3,t.l(2).x,t.l(4).y):6===t.qa&&(t.ca(2,t.l(2).x,e),t.ca(3,t.l(3).x,e)):4===t.qa?t.w(2,t.l(2).x,e):3===t.qa?t.ca(1,t.l(2).x,e):2===t.qa&&t.w(1,t.l(1).x,e)):180===i?(i=n.left-e/2,o?4===t.qa&&(e=t.l(3).y,t.ca(1,i+20,t.l(1).y),t.w(2,i+20,e),t.w(3,i,e),t.w(4,i-20,e),t.ca(5,t.l(5).x,e)):a?s?t.ca(3,t.l(2).x,t.l(4).y):6===t.qa&&(t.ca(2,i,t.l(2).y),t.ca(3,i,t.l(3).y)):4===t.qa?t.w(2,i,t.l(2).y):3===t.qa?t.ca(1,i,t.l(2).y):2===t.qa&&t.w(1,i,t.l(1).y)):270===i&&(e=n.top-e/2,o?4===t.qa&&(i=t.l(3).x,t.ca(1,t.l(1).x,e+20),t.w(2,i,e+20),t.w(3,i,e),t.w(4,i,e-20),t.ca(5,i,t.l(5).y)):a?s?t.ca(3,t.l(2).x,t.l(4).y):6===t.qa&&(t.ca(2,t.l(2).x,e),t.ca(3,t.l(3).x,e)):4===t.qa?t.w(2,t.l(2).x,e):3===t.qa?t.ca(1,t.l(2).x,e):2===t.qa&&t.w(1,t.l(1).x,e)),t.nj()))}},r.defineProperty(Sp,{LL:"relativePoint"},function(){return this.Ss},function(t){this.Ss.set(t)}),r.La(Tp,ls),Tp.prototype.cloneProtected=function(t){ls.prototype.cloneProtected.call(this,t),t.element=this.Te.cloneNode(!0)},Tp.prototype.toString=function(){return"HTMLHost("+this.Te.toString()+")#"+r.Pd(this)},Tp.prototype.Ek=function(t,e){var i=this.Te;if(null!==i){(n=this.Wa(k)).x-=this.Y.width/2,n.y-=this.Y.height/2,n.x-=this.Y.x,n.y-=this.Y.y;var n=e.FG(n),o=e.qj;null===o||o.contains(i)||o.appendChild(i),o=this.transform,i.style.transform="matrix("+o.m11+","+o.m12+","+o.m21+","+o.m22+","+o.dx+","+o.dy+")",i.style.transformOrigin="0 0",o=n.y,i.style.left=n.x+"px",i.style.top=o+"px"}},Tp.prototype.Ln=function(t,e,i,n){var o=this.Ca;isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(e=o.height);o=this.Gf;var r=this.qi;i=Math.max(i,r.width),n=Math.max(n,r.height),t=Math.min(o.width,t),e=Math.min(o.height,e),t=Math.max(i,t),e=Math.max(n,e),null!==(i=this.Te)&&(t=(e=i.getBoundingClientRect()).width,e=e.height),yt(this.Wc,t,e),fs(this,0,0,t,e)},Tp.prototype.mj=function(t,e,i,n){ys(this,t,e,i,n)},r.u(Tp,{Ja:"naturalBounds"},function(){return this.Wc}),r.defineProperty(Tp,{element:"element"},function(){return this.Te},function(t){var e=this.Te;e!==t&&(t instanceof HTMLElement||r.k("HTMLHost.element must be an instance of Element."),this.Te=t,t.className="HTMLHost",this.h("element",e,t),this.oa())}),n.version="1.8.14",e&&(e.module&&"object"==typeof e.module&&"object"==typeof e.module.exports?e.module.exports=n:e.define&&"function"==typeof e.define&&e.define.amd?(e.go=n,e.define(n)):e.go=n),void 0!==t&&"object"==typeof t.exports&&(t.exports=n)}(window)}});