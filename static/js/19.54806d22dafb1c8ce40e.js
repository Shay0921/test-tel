webpackJsonp([19],{CErQ:function(l,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=a("mvHQ"),c=a.n(t),o={data:function(){return{delVisible:!1,showAddComplex:!1,showAddCallBlack:!1,searchCallBlack:"",addCallBlackTitle:"新建外呼黑名单",complexAddForm:{complexFile:[]},complexAddRules:{},multipleSelection:[],callBlackTableData:[{id:1,company:"北京海硅信息技术有限公司",name:"刘欣雨1",phone:"18211103898",date:"2018-10-20",ps:"客服组客服组客服组客服组客服组客服组客服组客服组客服组客服组"},{id:2,company:"北京海硅信息技术有限公司",name:"刘欣雨2",phone:"18211103898",date:"2018-10-20",ps:"客服组客服组客服组客服组客服组客服组客服组客服组客服组客服组"},{id:3,company:"北京海硅信息技术有限公司",name:"刘欣雨3",phone:"18211103898",date:"2018-10-20",ps:"客服组客服组客服组客服组客服组客服组客服组客服组客服组客服组"}],callBlackAddForm:{company:"",name:"",phone:"",ps:""},callBlackAddRules:{company:[{required:!0,message:"请输入客户名称",trigger:"blur"}],phone:[{required:!0,validator:function(l,e,a){""===e?a(new Error("请输入手机号")):/^[1][3,4,5,6,7,8][0-9]{9}$/.test(e)?a():a(new Error("请输入正确的手机号"))},trigger:"blur"}]},groupOp:[{value:1,label:"坐席1"},{value:2,label:"坐席2"}],callBlackTotal:150,callBlackCurrentPage:2,callBlackPageSize:100}},watch:{searchCallBlack:function(l){}},methods:{handleSelectCall:function(l){this.multipleSelection=l},refreshBtn:function(){this.searchCallBlack="",this.$message.success("刷新成功"),this.$refs.callBlackTable.clearSelection()},clickDelCheckCall:function(){var l=this;if(this.multipleSelection.length>0){var e=[];this.multipleSelection.forEach(function(l,a){e.push(l.id)}),this.callBlackTableData=this.callBlackTableData.filter(function(e){return-1===l.multipleSelection.indexOf(e)}),this.$refs.callBlackTable.clearSelection(),this.$message.success("删除成功")}else this.$message.error("请先选择需要删除的黑名单")},clickshowCallBlack:function(l,e){this.showAddCallBlack=!0,"add"===l?this.addCallBlackTitle="新建外呼黑名单":(this.addCallBlackTitle="编辑外呼黑名单",this.callBlackAddForm=JSON.parse(c()(e)))},closeCallBlackModal:function(l){this.showAddCallBlack=!1,this.showAddComplex=!1,this.$refs[l].resetFields()},submitCallBlackBtn:function(){var l=this;this.$refs.callBlackAddForm.validate(function(e){if(e){var a=JSON.parse(c()(l.callBlackAddForm));if("新建外呼黑名单"===l.addCallBlackTitle)l.callBlackTableData.push(a),l.$message.success("新建成功");else{var t=JSON.parse(c()(l.callBlackAddForm));l.callBlackTableData.forEach(function(e,a){t.id===e.id&&(l.$set(l.callBlackTableData,a,t),l.$message.success("修改成功"))})}l.closeCallBlackModal("callBlackAddForm")}})},clickDelCallBlack:function(l,e){e.splice(l,1),this.$message.success("删除成功")},submitComplexBtn:function(){var l=this;this.$refs.complexAddForm.validate(function(e){if(e)if(0===l.$refs.complexUpload.uploadFiles.length)l.$message.warning("请上传文件");else{JSON.parse(c()(l.complexAddForm));var a=new FormData,t=l.$refs.complexUpload.uploadFiles[0].raw;a.append("file",t),l.$message.success("批量导入成功"),l.closeCallBlackModal("complexAddForm")}})},clickComplexDownload:function(){var l=document.createElement("a");l.download="批量导入模板",l.style.display="none",l.href="../../../static/image/批量导入模板.xlsx",document.body.appendChild(l),l.click(),document.body.removeChild(l)},handleComplexBefore:function(l,e){var a="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===l.raw.type||"application/vnd.ms-excel"===l.raw.type;return a?(e.length>1&&e.splice(0,1),a):(e.length>1?e.splice(1,1):e.splice(0,1),this.$message.warning("请上传csv或xlsx格式的文件"),!1)},callBlackHandleSizeChange:function(l){},callBlackHandleCurrentChange:function(l){},delPopover:a("NZyr").d}},i={render:function(){var l=this,e=l.$createElement,a=l._self._c||e;return a("div",{staticClass:"callBlack haigui-section scrollbar"},[a("div",{staticClass:"callBlack-title"},[a("el-input",{attrs:{placeholder:"搜索号码","suffix-icon":"el-icon-search"},model:{value:l.searchCallBlack,callback:function(e){l.searchCallBlack=e},expression:"searchCallBlack"}}),l._v(" "),a("div",{staticClass:"callBlack-btn"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){l.clickshowCallBlack("add")}}},[l._v("添加号码")]),l._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){l.showAddComplex=!0}}},[l._v("批量导入")]),l._v(" "),a("el-popover",{attrs:{placement:"top",width:"160"},model:{value:l.delVisible,callback:function(e){l.delVisible=e},expression:"delVisible"}},[a("p",[l._v("是否删除选中的黑名单？")]),l._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){l.delVisible=!1}}},[l._v("取消")]),l._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){l.delVisible=!1,l.clickDelCheckCall()}}},[l._v("确定")])],1),l._v(" "),a("el-button",{staticStyle:{padding:"9px","margin-left":"10px"},attrs:{slot:"reference",type:"primary",icon:"el-icon-delete"},on:{click:function(e){l.delVisible=!l.delVisible}},slot:"reference"},[l._v("删除")])],1),l._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:l.refreshBtn}},[l._v("刷新")])],1)],1),l._v(" "),a("el-table",{ref:"callBlackTable",staticStyle:{width:"100%"},attrs:{data:l.callBlackTableData},on:{"selection-change":l.handleSelectCall}},[a("el-table-column",{attrs:{width:"20"}}),l._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),l._v(" "),a("el-table-column",{attrs:{prop:"company",label:"客户名称","show-overflow-tooltip":"","min-width":"200"}}),l._v(" "),a("el-table-column",{attrs:{prop:"name",label:"联系人","min-width":"100"}}),l._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"联系电话","min-width":"150"}}),l._v(" "),a("el-table-column",{attrs:{prop:"date",label:"创建时间","min-width":"150"}}),l._v(" "),a("el-table-column",{attrs:{prop:"ps",label:"备注","show-overflow-tooltip":"","min-width":"200"}}),l._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"120"},scopedSlots:l._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){l.clickshowCallBlack("edit",e.row)}}},[l._v("编辑")]),l._v(" "),a("el-popover",{attrs:{"popper-class":"callBlackPopover"+e.row.id,placement:"top",width:"160"},model:{value:e.row.visible,callback:function(a){l.$set(e.row,"visible",a)},expression:"scope.row.visible"}},[a("p",[l._v("确定删除此黑名单吗？")]),l._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(l){e.row.visible=!1}}},[l._v("取消")]),l._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.row.visible=!1,l.clickDelCallBlack(e.$index,l.callBlackTableData)}}},[l._v("确定")])],1),l._v(" "),a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},on:{click:function(a){a.stopPropagation(),e.row.visible=!e.row.visible,l.delPopover("callBlack",e.row.id)}},slot:"reference"},[l._v("删除")])],1)]}}])})],1),l._v(" "),a("el-pagination",{attrs:{"current-page":l.callBlackCurrentPage,"page-sizes":[100,200,300,400],"page-size":l.callBlackPageSize,layout:"total, sizes, prev, pager, next, jumper",total:l.callBlackTotal},on:{"size-change":l.callBlackHandleSizeChange,"current-change":l.callBlackHandleCurrentChange}}),l._v(" "),a("el-dialog",{attrs:{width:"500px",title:l.addCallBlackTitle,visible:l.showAddCallBlack},on:{"update:visible":function(e){l.showAddCallBlack=e},close:function(e){l.closeCallBlackModal("callBlackAddForm")}}},[a("el-form",{ref:"callBlackAddForm",attrs:{model:l.callBlackAddForm,rules:l.callBlackAddRules,"label-width":"95px"}},[a("el-form-item",{attrs:{label:"客户名称",prop:"company"}},[a("el-input",{attrs:{maxlength:30,placeholder:"请输入客户名称"},model:{value:l.callBlackAddForm.company,callback:function(e){l.$set(l.callBlackAddForm,"company",e)},expression:"callBlackAddForm.company"}})],1),l._v(" "),a("el-form-item",{attrs:{label:"联系人",prop:"name"}},[a("el-input",{attrs:{maxlength:8,placeholder:"请输入联系人"},model:{value:l.callBlackAddForm.name,callback:function(e){l.$set(l.callBlackAddForm,"name",e)},expression:"callBlackAddForm.name"}})],1),l._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[a("el-input",{attrs:{maxlength:15,placeholder:"请输入联系电话"},model:{value:l.callBlackAddForm.phone,callback:function(e){l.$set(l.callBlackAddForm,"phone",e)},expression:"callBlackAddForm.phone"}})],1),l._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"ps"}},[a("el-input",{attrs:{maxlength:50,placeholder:"请输入备注"},model:{value:l.callBlackAddForm.ps,callback:function(e){l.$set(l.callBlackAddForm,"ps",e)},expression:"callBlackAddForm.ps"}})],1)],1),l._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){l.closeCallBlackModal("callBlackAddForm")}}},[l._v("取 消")]),l._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:l.submitCallBlackBtn}},[l._v("确 定")])],1)],1),l._v(" "),a("el-dialog",{attrs:{width:"400px",title:"批量导入",visible:l.showAddComplex},on:{"update:visible":function(e){l.showAddComplex=e},close:function(e){l.closeCallBlackModal("complexAddForm")}}},[a("el-form",{ref:"complexAddForm",staticClass:"complexAddForm",attrs:{model:l.complexAddForm,rules:l.complexAddRules}},[a("el-form-item",{attrs:{label:"01.填写批量导入的客户模板文件"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:l.clickComplexDownload}},[l._v("下载模板")])],1),l._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"02.上传文件",prop:"complexFile"}},[a("el-upload",{ref:"complexUpload",staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-change":l.handleComplexBefore,"auto-upload":!1,"file-list":l.complexAddForm.complexFile}},[a("el-button",{attrs:{type:"primary",size:"small"}},[l._v("点击上传文件")])],1),l._v(" "),a("p",{staticStyle:{"margin-top":"10px","line-height":"20px",color:"#909399"}},[l._v("1、文件格式必须是.csv或.xlsx扩展名")]),l._v(" "),a("p",{staticStyle:{"line-height":"20px",color:"#909399"}},[l._v("2、单个人最多可以同时提交一个大任务（大于10000条），")]),l._v(" "),a("p",{staticStyle:{"line-height":"20px",color:"#909399"}},[l._v("五个小任务（小于10000条）")])],1)],1),l._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){l.closeCallBlackModal("complexAddForm")}}},[l._v("取 消")]),l._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:l.submitComplexBtn}},[l._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(o,i,!1,function(l){a("fLXI")},null,null);e.default=s.exports},fLXI:function(l,e){}});