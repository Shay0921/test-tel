webpackJsonp([14],{"1Pjl":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("lgcr"),l={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"setCRMAttr haigui-section scrollbar"},[t("el-tabs",{on:{"tab-click":e.handleTabsClick},model:{value:e.attrTabsIndex,callback:function(a){e.attrTabsIndex=a},expression:"attrTabsIndex"}},[t("el-tab-pane",{staticClass:"followState",attrs:{label:"跟进状态",name:"first"}},[t("p",{staticClass:"crmAttr-title"},[e._v("是否使用“客户跟进状态”"),t("span",{staticClass:"crmAttr-tip"},[t("i",{staticClass:"el-icon-question"}),e._v("帮助说明")])]),e._v(" "),t("el-radio-group",{model:{value:e.followStateForm.radio,callback:function(a){e.$set(e.followStateForm,"radio",a)},expression:"followStateForm.radio"}},[t("el-radio",{attrs:{label:1}},[e._v("使用")]),e._v(" "),t("el-radio",{attrs:{label:2}},[e._v("不使用")])],1),e._v(" "),t("p",{staticClass:"crmAttr-ps",staticStyle:{"margin-top":"15px"}},[e._v("使用“客户阶段”能够跟踪客户当前的销售状态，帮助企业了解每个状态下的客户情况。")]),e._v(" "),t("p",{staticClass:"crmAttr-title"},[e._v("客户跟进状态")]),e._v(" "),t("p",{staticClass:"crmAttr-ps"},[e._v("最多可以设置6个跟进状态")]),e._v(" "),t("div",{staticClass:"followState-list"},e._l(e.followStateForm.list,function(a,s){return t("div",{key:s,staticClass:"followState-item"},[t("b",[e._v(e._s(s+1))]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入状态名"},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}),e._v(" "),t("span",[t("i",{staticClass:"el-icon-delete"}),t("i",{staticClass:"el-icon-plus"})])],1)}))],1),e._v(" "),t("el-tab-pane",{staticClass:"customerField",attrs:{label:"客户字段",name:"second"}},[t("div",{staticClass:"field-left"},[t("h3",[e._v("字段分组")]),e._v(" "),t("ul",[t("li",{class:1===e.fieldClassName?"active":"",on:{click:function(a){e.clickFieldClass(1)}}},[e._v("客户字段")]),e._v(" "),t("li",{class:2===e.fieldClassName?"active":"",on:{click:function(a){e.clickFieldClass(2)}}},[e._v("合同字段")])])]),e._v(" "),t("div",{staticClass:"field-right"},[t("div",{staticClass:"field-title"},[t("h3",[e._v("客户字段("+e._s(e.fieldCount)+"个)")]),e._v(" "),t("div",{staticClass:"field-btn"},[t("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.clickRefreshField}},[e._v("刷新")]),e._v(" "),t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(a){e.clickShowAddFieldModal()}}},[e._v("添加字段")])],1)]),e._v(" "),0===e.dataJson.json.length?t("p",{staticClass:"el-table__empty-text"},[e._v("- 暂无字段 -")]):e._e(),e._v(" "),t("div",{staticClass:"field-content scrollbar"},[t("div",{staticClass:"field-form"},[t("el-form",{ref:"dataJson",attrs:{model:e.dataJson,"label-width":"106px"}},e._l(e.dataJson.json,function(a,s){return t("el-form-item",{key:a.id,ref:a.type+s,refInFor:!0,attrs:{label:a.name,prop:"json."+s+".value"}},["input"===a.type?t("el-input",{attrs:{placeholder:a.placeholder,maxlength:"20",disabled:a.disabled},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):e._e(),e._v(" "),"textarea"===a.type?t("el-input",{attrs:{type:"textarea",rows:2,placeholder:a.placeholder,disabled:a.disabled},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):e._e(),e._v(" "),"number"===a.type?t("el-input-number",{attrs:{label:a.placeholder,disabled:a.disabled,controls:!1},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):e._e(),e._v(" "),"date"===a.type?t("el-date-picker",{attrs:{type:"date",placeholder:a.placeholder,disabled:a.disabled},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):e._e(),e._v(" "),"time"===a.type?t("el-time-picker",{attrs:{placeholder:a.placeholder,disabled:a.disabled},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):e._e(),e._v(" "),"datetime"===a.type?t("el-date-picker",{attrs:{type:"datetime",placeholder:a.placeholder,disabled:a.disabled},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):e._e(),e._v(" "),"select"===a.type?t("el-select",{attrs:{placeholder:a.placeholder,disabled:a.disabled},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}},e._l(a.options,function(e){return t("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})):e._e(),e._v(" "),"radio"===a.type?t("el-radio-group",{attrs:{disabled:a.disabled},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}},e._l(a.options,function(a){return t("el-radio",{key:a.key,attrs:{label:a.key}},[e._v(e._s(a.value))])})):e._e(),e._v(" "),"checkbox"===a.type?t("el-checkbox-group",{attrs:{disabled:a.disabled},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}},e._l(a.options,function(a){return t("el-checkbox",{key:a.key,attrs:{label:a.key}},[e._v(e._s(a.value))])})):e._e(),e._v(" "),"money"===a.type?t("el-input",{staticClass:"inputMoney",attrs:{placeholder:a.placeholder,disabled:a.disabled},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):e._e(),e._v(" "),"filterSelect"===a.type?t("el-select",{attrs:{filterable:"",placeholder:a.placeholder,disabled:a.disabled},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}},e._l(a.options,function(e){return t("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})):e._e(),e._v(" "),"upload"===a.type?t("el-upload",{ref:"upload"+s,refInFor:!0,staticClass:"upload-demo",attrs:{disabled:a.disabled,multiple:"",limit:5,"auto-upload":!1,action:"https://jsonplaceholder.typicode.com/posts/","on-exceed":e.handleExceed,"file-list":a.value}},[t("el-button",{attrs:{type:"primary",disabled:a.disabled}},[e._v("点击上传")]),e._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传5个附件")])],1):e._e(),e._v(" "),t("p",[t("i",{staticClass:"el-icon-edit",on:{click:function(t){e.clickEditField(a,s)}}}),e._v(" "),t("el-popover",{attrs:{placement:"top",width:"160"},model:{value:a.visible,callback:function(t){e.$set(a,"visible",t)},expression:"item.visible"}},[t("p",[e._v("确定删除此字段吗？")]),e._v(" "),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){a.visible=!1}}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){a.visible=!1,e.clickDelField(s)}}},[e._v("确定")])],1),e._v(" "),t("i",{staticClass:"el-icon-delete",attrs:{slot:"reference"},on:{click:function(e){e.stopPropagation(),a.visible=!a.visible}},slot:"reference"})])],1)],1)}))],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showFieldTypeModal,expression:"showFieldTypeModal"}],staticClass:"field-addModal"},e._l(e.addFieldList,function(a,s){return t("div",{key:s,staticClass:"addField-item",on:{click:function(t){e.clickAddField(a.name,a.type)}}},[t("i",{class:a.icon}),e._v(" "),t("span",[e._v(e._s(a.name))])])}))])])]),e._v(" "),t("el-tab-pane",{staticClass:"customerTag",attrs:{label:"客户标签",name:"third"}},[t("div",{staticClass:"setCRMAttr-title"},[t("span",[e._v("通过标签，客服可对客户进行属性分类，以方便后续的整理和分析。")]),e._v(" "),t("i",{staticClass:"el-icon-question"}),e._v(" "),t("u",[e._v("在哪里能看到")])]),e._v(" "),t("div",{staticClass:"customerTag-content"},[t("div",{staticClass:"customerTag-content-left"},[t("div",{staticClass:"customerTag-content-left-top"},[t("span",[e._v("标签分组")]),e._v(" "),t("el-button",{on:{click:function(a){e.clickAddClass("add")}}},[e._v("创建分组")])],1),e._v(" "),t("div",{staticClass:"customerTag-content-left-bottom"},[t("ul",e._l(e.tagClassList,function(a,s){return t("li",{class:e.clickTagId===a.id?"active":"",on:{click:function(t){e.clickSTagItem(a)}}},[t("p",[t("i",{staticClass:"el-icon-menu",style:"color:"+a.color}),t("span",{attrs:{title:a.className}},[e._v(e._s(a.className))]),t("i",{staticClass:"fas fa-ellipsis-v",on:{click:function(t){e.clickTagClassHandle(a)}}})])])})),e._v(" "),0===e.tagClassList.length?t("div",{staticClass:"el-tree__empty-block"},[t("span",{staticClass:"el-tree__empty-text"},[e._v("暂无数据")])]):e._e()])]),e._v(" "),t("div",{staticClass:"customerTag-content-right"},[t("div",{staticClass:"customerTag-content-right-title"},[t("h2",[e._v("客户成熟度(9个)")]),e._v(" "),t("div",{staticClass:"customerTag-content-btn"},[t("el-button",{on:{click:function(a){e.clickAddTag("add")}}},[e._v("添加标签")]),e._v(" "),e.isBatch?t("div",{staticClass:"customerTag-batch-btn"},[t("el-button",{on:{click:e.clickSetClassTag}},[e._v("设置分组")]),e._v(" "),t("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.delVisible,callback:function(a){e.delVisible=a},expression:"delVisible"}},[t("p",[e._v("确定删除选中的标签吗？")]),e._v(" "),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.delVisible=!1}}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.delVisible=!1,e.clickDelCheckTag()}}},[e._v("确定")])],1),e._v(" "),t("el-button",{attrs:{slot:"reference"},on:{click:function(a){a.stopPropagation(),e.delVisible=!e.delVisible}},slot:"reference"},[e._v("删除标签")])],1)],1):e._e(),e._v(" "),t("el-button",{staticStyle:{float:"right"},attrs:{type:"text"},domProps:{textContent:e._s(e.isBatch?"退出管理":"批量管理")},on:{click:function(a){e.isBatch=!e.isBatch}}})],1)]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isBatch,expression:"!isBatch"}],staticClass:"customerTag-content-right-box"},[t("div",{staticClass:"customerTag-list"},e._l(e.tagsList,function(a,s){return t("el-tag",{key:s,attrs:{size:"normal","disable-transitions":!0}},[t("span",[e._v(e._s(a.name))]),t("i",{staticClass:"el-icon-caret-bottom",on:{click:function(t){e.clickTagHandle(a)}}})])}))]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isBatch,expression:"isBatch"}],staticClass:"customerTag-content-right-box customerTag-checkedList"},e._l(e.tagsList,function(a,s){return t("el-tag",{key:s,attrs:{size:"normal","disable-transitions":!0}},[t("el-checkbox",{model:{value:a.checked,callback:function(t){e.$set(a,"checked",t)},expression:"tag.checked"}},[e._v(e._s(a.name))])],1)})),e._v(" "),t("div",{staticClass:"customerTag-content-right-bottom"},[t("el-checkbox",{model:{value:e.checkedMultipleTag,callback:function(a){e.checkedMultipleTag=a},expression:"checkedMultipleTag"}},[e._v("允许这组标签多选")])],1)])]),e._v(" "),t("div",{staticClass:"customerTag-bottom"},[t("i",{staticClass:"el-icon-warning"}),t("span",[e._v("帮助说明")]),e._v(" "),t("p",[e._v("1、您最多可以创建30个分组，200个标签，每个分组所容纳的标签数量不限；")]),e._v(" "),t("p",[e._v("2、对标签组设定不同的颜色，有助于销售员在客户资料上快速确认标签的分类信息；")])])])],1),e._v(" "),e.showOverlayClick?t("div",{staticClass:"haigui-overlay_click",on:{click:e.clickHiddenMask}}):e._e(),e._v(" "),t("el-dialog",{staticClass:"addFieldModal",attrs:{width:"480px",title:e.showFieldModalTitle,visible:e.showAddFieldModal},on:{"update:visible":function(a){e.showAddFieldModal=a},close:function(a){e.closeModal("formJson")}}},[t("el-form",{ref:"formJson",staticClass:"scrollbar",attrs:{model:e.formJson,rules:e.formJsonRules,"label-width":"85px"}},[t("el-form-item",{attrs:{label:"字段类型"}},[t("p",[e._v(e._s(e.formJson.fieldType))])]),e._v(" "),t("el-form-item",{attrs:{label:"字段类型"}},[t("p",[e._v(e._s(e.formJson.typeName))])]),e._v(" "),t("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[t("el-input",{attrs:{autocomplete:"off",maxlength:"6"},model:{value:e.formJson.name,callback:function(a){e.$set(e.formJson,"name",a)},expression:"formJson.name"}})],1),e._v(" "),"input"===e.formJson.type||"textarea"===e.formJson.type||"date"===e.formJson.type||"time"===e.formJson.type||"datetime"===e.formJson.type||"select"===e.formJson.type||"filterSelect"===e.formJson.type||"money"===e.formJson.type?t("el-form-item",{attrs:{label:"提示文字",prop:"placeholder"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.formJson.placeholder,callback:function(a){e.$set(e.formJson,"placeholder",a)},expression:"formJson.placeholder"}})],1):e._e(),e._v(" "),"select"===e.formJson.type||"radio"===e.formJson.type||"checkbox"===e.formJson.type||"filterSelect"===e.formJson.type?t("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"添加选项"}},[t("el-button",{on:{click:e.addOption}},[e._v("新增选项")]),e._v(" "),t("div",{staticClass:"addOption",staticStyle:{"margin-top":"15px"}},e._l(e.formJson.options,function(a,s){return t("el-form-item",{key:a.key,attrs:{"label-width":"70px",label:"选项"+(s+1),prop:"options."+s+".value",rules:{required:!0,message:"选项不能为空",trigger:"blur"}}},[t("el-input",{staticStyle:{width:"213px","margin-right":"10px","margin-bottom":"5px"},attrs:{maxlength:10},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"op.value"}}),t("el-button",{on:{click:function(t){t.preventDefault(),e.removeOption(a)}}},[e._v("删除")])],1)}))],1):e._e(),e._v(" "),"input"===e.formJson.type?t("el-form-item",{attrs:{label:"验证类型",prop:"validate"}},[t("el-select",{attrs:{placeholder:"请选择验证类型"},model:{value:e.formJson.validate,callback:function(a){e.$set(e.formJson,"validate",a)},expression:"formJson.validate"}},e._l(e.validateOp,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"是否必填",prop:"required"}},[t("el-radio-group",{model:{value:e.formJson.required,callback:function(a){e.$set(e.formJson,"required",a)},expression:"formJson.required"}},[t("el-radio",{attrs:{label:!0}},[e._v("必填")]),e._v(" "),t("el-radio",{attrs:{label:!1}},[e._v("非必填")])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"状态",prop:"disabled"}},[t("el-radio-group",{model:{value:e.formJson.disabled,callback:function(a){e.$set(e.formJson,"disabled",a)},expression:"formJson.disabled"}},[t("el-radio",{attrs:{label:!1}},[e._v("启用")]),e._v(" "),t("el-radio",{attrs:{label:!0}},[e._v("禁用")])],1)],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.closeModal("formJson")}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.submitModal}},[e._v("确 定")])],1)],1),e._v(" "),t("ul",{directives:[{name:"show",rawName:"v-show",value:e.showTagClassHandle,expression:"showTagClassHandle"}],staticClass:"groupsHandle tagClassHandle"},[t("li",{on:{click:function(a){e.clickAddClass("edit")}}},[e._v("修改")]),e._v(" "),t("li",{on:{click:e.delTagClass}},[e._v("删除")])]),e._v(" "),t("ul",{directives:[{name:"show",rawName:"v-show",value:e.showTagHandle,expression:"showTagHandle"}],staticClass:"groupsHandle tagHandle"},[t("li",{on:{click:function(a){e.clickAddTag("edit")}}},[e._v("修改")]),e._v(" "),t("li",{on:{click:e.delTag}},[e._v("删除")])]),e._v(" "),e.showConfirmDelTagClass?t("v-confirmModal",{attrs:{titleMsg:"删除分组",contentMsg:"确认要删除此标签分组吗?"},on:{close:e.cancelConfirm,confirm:e.confirmDelTagClass}}):e._e(),e._v(" "),e.showConfirmDelTag?t("v-confirmModal",{attrs:{titleMsg:"删除标签",contentMsg:"确认要删除此标签吗?"},on:{close:e.cancelConfirm,confirm:e.confirmDelTag}}):e._e(),e._v(" "),e.showOverlay?t("div",{staticClass:"overlay"}):e._e(),e._v(" "),t("el-dialog",{attrs:{width:"400px",title:e.tagClassModalTitle,visible:e.showAddTagClass},on:{"update:visible":function(a){e.showAddTagClass=a},close:function(a){e.closeTagModal("addTagClassForm")}}},[t("el-form",{ref:"addTagClassForm",attrs:{model:e.addTagClassForm,rules:e.tagClassAddRules,"label-width":"105px"}},[t("el-form-item",{attrs:{label:"标签名称",prop:"className"}},[t("el-input",{attrs:{maxlength:15,placeholder:"请输入标签名称"},model:{value:e.addTagClassForm.className,callback:function(a){e.$set(e.addTagClassForm,"className",a)},expression:"addTagClassForm.className"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"选择标签颜色"}},[t("el-color-picker",{attrs:{predefine:e.predefineColors},model:{value:e.addTagClassForm.color,callback:function(a){e.$set(e.addTagClassForm,"color",a)},expression:"addTagClassForm.color"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(a){e.closeTagModal("addTagClassForm")}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitTagClassBtn}},[e._v("确 定")])],1)],1),e._v(" "),t("el-dialog",{attrs:{width:"400px",title:e.tagModalTitle,visible:e.showAddTag},on:{"update:visible":function(a){e.showAddTag=a},close:function(a){e.closeTagModal("addTagForm")}}},[t("el-form",{ref:"addTagForm",attrs:{model:e.addTagForm,rules:e.tagAddRules,"label-width":"85px"}},[t("el-form-item",{attrs:{label:"标签名称",prop:"name"}},[t("el-input",{attrs:{maxlength:15,placeholder:"请输入标签名称"},model:{value:e.addTagForm.name,callback:function(a){e.$set(e.addTagForm,"name",a)},expression:"addTagForm.name"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(a){e.closeTagModal("addTagForm")}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitTagBtn}},[e._v("确 定")])],1)],1),e._v(" "),t("el-dialog",{attrs:{width:"400px",title:"设置分组",visible:e.showSetTagClass},on:{"update:visible":function(a){e.showSetTagClass=a},close:function(a){e.closeTagModal("setTagClassForm")}}},[t("el-form",{ref:"setTagClassForm",attrs:{model:e.setTagClassForm,rules:e.setTagClassRules,"label-width":"85px"}},[t("el-form-item",{attrs:{label:"分组名称",prop:"className"}},[t("el-select",{attrs:{placeholder:"请选择分组"},model:{value:e.setTagClassForm.className,callback:function(a){e.$set(e.setTagClassForm,"className",a)},expression:"setTagClassForm.className"}},e._l(e.tagClassList,function(e){return t("el-option",{key:e.id,attrs:{label:e.className,value:e.id}})}))],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(a){e.closeTagModal("setTagClassForm")}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitSetClass}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var i=function(e){t("d39E")},o=t("VU/8")(s.a,l,!1,i,null,null);a.default=o.exports},d39E:function(e,a){},lgcr:function(e,a,t){"use strict";(function(e){var s=t("mvHQ"),l=t.n(s),i=t("Lokx"),o=t.n(i),r=t("gEXf");a.a={data:function(){return{attrTabsIndex:"second",followStateForm:{radio:1,list:[{value:""},{value:""},{value:""}]},fieldClassName:1,fieldCount:2,showFieldTypeModal:!1,showAddFieldModal:!1,showFieldModalTitle:"添加字段",clickEditFieldIndex:"",dataJson:{json:[]},formJson:{fieldType:"自定义字段",value:"",name:"",type:"",typeName:"",placeholder:"",validate:"0",required:!0,disabled:!1,options:[]},formJsonRules:{name:[{required:!0,message:"请输入字段名",trigger:"blur"}],placeholder:[{required:!0,message:"请输入提示文字",trigger:"blur"}],validate:[{required:!0,message:"请选择验证类型",trigger:"change"}]},validateOp:[{value:"0",label:"不需要"},{value:"phone",label:"手机号"},{value:"email",label:"邮箱"},{value:"QQ",label:"QQ"},{value:"wechat",label:"微信"},{value:"number",label:"数字"}],addFieldSortable:"",addFieldSortableId:"",addFieldtargetId:"",addFieldList:[{name:"文本",type:"input",icon:"fa fa-plus"},{name:"多行文本",type:"textarea",icon:"fa fa-plus"},{name:"数字",type:"number",icon:"fa fa-plus"},{name:"日期",type:"date",icon:"fa fa-plus"},{name:"时间",type:"time",icon:"fa fa-plus"},{name:"日期时间",type:"datetime",icon:"fa fa-plus"},{name:"下拉",type:"select",icon:"fa fa-plus"},{name:"单选",type:"radio",icon:"fa fa-plus"},{name:"多选",type:"checkbox",icon:"fa fa-plus"},{name:"货币",type:"money",icon:"fa fa-plus"},{name:"高级下拉",type:"filterSelect",icon:"fa fa-plus"},{name:"附件",type:"upload",icon:"fa fa-plus"}],showOverlay:!1,showOverlayClick:!1,showTagClassHandle:!1,showTagHandle:!1,showConfirmDelTagClass:!1,showConfirmDelTag:!1,showAddTagClass:!1,showSetTagClass:!1,delVisible:!1,showAddTag:!1,clickTagId:"",tagClassList:[{id:1,color:"#67C23A",className:"客户成熟度客户成熟度客户成熟度客户成熟度"},{id:2,color:"#E6A23C",className:"客户职业"},{id:3,color:"#F56C6C",className:"客户行业"}],handleTagClassData:{},tagClassModalTitle:"新建分组",predefineColors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"],addTagClassForm:{className:"",color:"rgba(255, 69, 0, 0.68)"},tagClassAddRules:{className:[{required:!0,message:"请输入标签分组名称",trigger:"blur"}]},tagClassSortable:"",tagClassSortableId:"",tagClasstargetId:"",isBatch:!1,checkedMultipleTag:!1,tagsList:[{id:1,name:"标签1",checked:!1},{id:2,name:"标签2",checked:!1},{id:3,name:"标签3",checked:!1},{id:4,name:"标签4",checked:!1},{id:5,name:"标签5",checked:!1},{id:6,name:"标签6",checked:!1}],tagsSortable:"",tagsSortableId:"",tagstargetId:"",checkedTagId:[],setTagClassForm:{className:""},setTagClassRules:{className:[{required:!0,message:"请选择标签分组",trigger:"change"}]},tagModalTitle:"新建标签",addTagForm:{name:""},tagAddRules:{name:[{required:!0,message:"请输入标签名称",trigger:"blur"}]},handleTagData:{}}},watch:{isBatch:function(){this.isBatch||this.tagsList.forEach(function(e,a){e.checked=!1})}},mounted:function(){var e=this;this.$nextTick(function(){e.clickTagId=e.tagClassList[0].id,e.addFieldDrag(),e.dragFollow(),e.tagClassDrag(),e.tagsDrag()})},methods:{handleTabsClick:function(e,a){},clickHiddenMask:function(){this.showOverlayClick=!1,this.showFieldTypeModal=!1,this.showTagClassHandle=!1,this.showTagHandle=!1},dragFollow:function(){},clickFieldClass:function(e){this.fieldClassName=e;1===e||2===e&&(this.dataJson.json=[{fieldType:"自定义字段",value:"",name:"字段1",type:"input",typeName:"文本",placeholder:"请输入你想要的",validate:"QQ",required:!1,disabled:!0,options:[]},{fieldType:"自定义字段",value:"",name:"字段2",type:"radio",typeName:"单选",placeholder:"",validate:"0",required:!1,disabled:!1,options:[{key:1,value:"1"},{key:2,value:"2"},{key:3,value:"3"}]},{fieldType:"自定义字段",value:"",name:"字段3",type:"select",typeName:"多选",placeholder:"",validate:"0",required:!0,disabled:!0,options:[{key:1,value:"1"},{key:2,value:"2"},{key:3,value:"3"}]},{fieldType:"自定义字段",value:"",name:"字段4",type:"date",typeName:"日期",placeholder:"请选择啦啦",validate:"0",required:!0,disabled:!1,options:[]}])},clickRefreshField:function(){},addFieldDrag:function(){var e=this,a=document.querySelectorAll(".customerField .field-form form")[0];this.addFieldSortable=o.a.create(a,{ghostClass:"sortable-ghost",onEnd:function(a){a.item;e.addFieldSortableId=e.addFieldList[a.oldIndex].id,e.addFieldtargetId=e.addFieldList[a.newIndex].id,e.$message({message:"顺序更新成功",type:"success"})}})},clickShowAddFieldModal:function(){this.showOverlayClick=!0,this.showFieldTypeModal=!0},clickAddField:function(e,a){this.showFieldModalTitle="添加字段",this.formJson={fieldType:"自定义字段",name:"",typeName:e,value:"",type:a,placeholder:"",validate:"0",required:!0,disabled:!1,options:[]},this.showOverlayClick=!1,this.showFieldTypeModal=!1,this.showAddFieldModal=!0},addOption:function(){this.formJson.options.push({value:"",key:Date.now()})},removeOption:function(e){var a=this.formJson.options.indexOf(e);-1!==a&&this.formJson.options.splice(a,1)},closeModal:function(e){this.showAddFieldModal=!1,this.$refs[e].resetFields()},addFormItemFun:function(){var e=JSON.parse(l()(this.formJson));"添加字段"===this.showFieldModalTitle?(e.id=e.type+Date.now(),"checkbox"!==e.type&&"upload"!==e.type||(e.value=[]),this.dataJson.json.push(e),this.$message.success("新建成功")):"编辑字段"===this.showFieldModalTitle&&(this.$set(this.dataJson.json,this.clickEditFieldIndex,e),this.$message.success("修改成功")),this.closeModal("formJson")},filterRules:function(e){if(!e)return"";var a={},t=e.required,s=t&&!e.disabled,l=function(e,a,t){if(""===a)s?t(new Error("请输入手机号")):t();else{/^[1][3,4,5,6,7,8][0-9]{9}$/.test(a)?t():t(new Error("请输入正确的手机号"))}},i=function(e,a,t){if(""===a)s?t(new Error("请输入QQ号")):t();else{/^[1-9][0-9]\d{2,12}$/.test(a)?t():t(new Error("请输入正确QQ号码"))}},o=function(e,a,t){if(""===a)s?t(new Error("请输入微信号")):t();else{/[\u4e00-\u9fa5]/.test(a)?t(new Error("禁止输入中文")):t()}},r=function(e,a,t){if(""===a)s?t(new Error("请输入数字")):t();else{/^\d{0,20}$/.test(a)?t():t(new Error("请输入正确的数字"))}},n=function(e,a,t){if(""===a)s?t(new Error("请输入货币")):t();else{/^(-)?\d+(\.\d\d{0,1})?$/.test(a)?t():t(new Error("请输入正确的货币"))}};return"input"===e.type?"0"===e.validate?s&&(a={required:!0,message:"请输入相应内容",trigger:"blur"}):"phone"===e.validate?a=e.disabled?{validator:l,trigger:"blur"}:{required:t,validator:l,trigger:"blur"}:"email"===e.validate?a=e.disabled?[{message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]:[{required:t,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]:"QQ"===e.validate?a=e.disabled?{validator:i,trigger:"blur"}:{required:t,validator:i,trigger:"blur"}:"wechat"===e.validate?a=e.disabled?{validator:o,trigger:"blur"}:{required:t,validator:o,trigger:"blur"}:"number"===e.validate&&(a=e.disabled?{validator:r,trigger:"blur"}:{required:t,validator:r,trigger:"blur"}):"select"===e.type||"radio"===e.type||"checkbox"===e.type||"filterSelect"===e.type?s&&(a={required:!0,message:"请选择相应内容",trigger:"change"}):"textarea"===e.type?s&&(a={required:!0,message:"请输入相应内容",trigger:"blur"}):"date"===e.type?s&&(a={required:!0,message:"请选择相应日期",trigger:"blur"}):"time"===e.type?s&&(a={required:!0,message:"请选择相应时间",trigger:"blur"}):"datetime"===e.type?s&&(a={required:!0,message:"请选择相应日期时间",trigger:"blur"}):"upload"===e.type?a={required:t,validator:function(e,a,t){t()}}:"money"===e.type?a=e.disabled?{validator:n,trigger:"blur"}:{required:t,validator:n,trigger:"blur"}:"number"===e.type&&(a=e.disabled?{message:"请输入数字",trigger:"blur"}:{required:t,message:"请输入数字",trigger:"blur"}),a},submitModal:function(){var e=this;this.$refs.formJson.validate(function(a){a&&("select"===e.formJson.type||"radio"===e.formJson.type||"checkbox"===e.formJson.type||"filterSelect"===e.formJson.type?e.formJson.options.length>0?e.addFormItemFun():e.$message.error("请添加选项"):e.addFormItemFun())})},handleExceed:function(e,a){this.$message.warning("最多只能上传 5 个文件，本次选择了 "+e.length+" 个文件")},clickDelField:function(e){this.dataJson.json.splice(e,1),this.$message.success("删除成功")},clickEditField:function(e,a){this.showFieldModalTitle="编辑字段",this.clickEditFieldIndex=a,this.formJson=JSON.parse(l()(e)),this.showAddFieldModal=!0},validateUploadFun:function(e){var a=this,t=!0;return this[e].json.forEach(function(e,s){if("upload"===e.type&&!e.disabled){var l=a.$refs["upload"+s][0].uploadFiles;e.value=l,0===l.length&&e.required&&!e.disabled&&(t=!1)}}),t},submitForm:function(e){var a=this;this.$refs[e].validate(function(t){if(t){var s=a.validateUploadFun(e);s?a.$message.success("提交成功"):a.$message.error("请上传附件")}})},clickTagClassHandle:function(a){var t=event.target.getBoundingClientRect();e(".setCRMAttr .tagClassHandle").css("top",t.top),e(".setCRMAttr .tagClassHandle").css("left",t.left+30),this.handleTagClassData=a,this.showOverlayClick=!0,this.showTagClassHandle=!0},clickAddClass:function(e){"add"===e?(this.tagClassModalTitle="新建分组",this.addTagClassForm={className:"",color:"rgba(255, 69, 0, 0.68)"}):(this.showTagClassHandle=!1,this.showOverlayClick=!1,this.tagClassModalTitle="编辑分组",this.addTagClassForm=JSON.parse(l()(this.handleTagClassData))),this.showAddTagClass=!0},submitTagClassBtn:function(){var e=this;this.$refs.addTagClassForm.validate(function(a){if(a){var t=JSON.parse(l()(e.addTagClassForm));"新建分组"===e.tagClassModalTitle?e.tagClassList.push(t):"编辑分组"===e.tagClassModalTitle&&e.tagClassList.forEach(function(a,s){a.id===t.id&&e.$set(e.tagClassList,s,t)}),e.closeTagModal("addTagClassForm")}})},closeTagModal:function(e){this.showAddTagClass=!1,this.showAddTag=!1,this.showSetTagClass=!1,this.$refs[e].resetFields()},delTagClass:function(){this.showConfirmDelTagClass=!0,this.showOverlay=!0,this.showTagClassHandle=!1,this.showOverlayClick=!1},confirmDelTagClass:function(){var e=this;this.tagClassList.forEach(function(a,t){a.id===e.handleTagClassData.id&&e.tagClassList.splice(t,1)}),this.$message.success("删除成功"),this.cancelConfirm()},cancelConfirm:function(){this.showConfirmDelTagClass=!1,this.showConfirmDelTag=!1,this.showOverlay=!1},tagClassDrag:function(){var e=this,a=document.querySelectorAll(".customerTag-content-left .customerTag-content-left-bottom ul")[0];this.tagClassSortable=o.a.create(a,{ghostClass:"sortable-ghost",onEnd:function(a){a.item;e.tagClassSortableId=e.tagClassList[a.oldIndex].id,e.tagClasstargetId=e.tagClassList[a.newIndex].id,e.$message({message:"顺序更新成功",type:"success"})}})},clickSTagItem:function(e){"fas fa-ellipsis-v"!==event.target.className&&"active"!==event.currentTarget.className&&(this.clickTagId=e.id,this.isBatch=!1)},tagsDrag:function(){var e=this,a=document.querySelectorAll(".customerTag-content-right-box .customerTag-list")[0];this.tagsSortable=o.a.create(a,{ghostClass:"sortable-ghost",onEnd:function(a){a.item;e.tagsSortableId=e.tagsList[a.oldIndex].id,e.tagstargetId=e.tagsList[a.newIndex].id,e.$message({message:"顺序更新成功",type:"success"})}})},hasCheckedTag:function(){var e=[];this.tagsList.forEach(function(a,t){a.checked&&e.push(a.id)}),this.checkedTagId=e},delTagFun:function(){var e=this;this.checkedTagId.forEach(function(a,t){for(var s=0;s<e.tagsList.length;s++)a===e.tagsList[s].id&&e.tagsList.splice(s,1)})},clickDelCheckTag:function(){this.hasCheckedTag(),this.checkedTagId.length>0?(this.delTagFun(),this.$message.success("删除成功")):this.$message.error("请先选择需要删除的标签")},clickSetClassTag:function(){this.hasCheckedTag(),this.checkedTagId.length>0?this.showSetTagClass=!0:this.$message.error("请先选择需要设置分组的标签")},submitSetClass:function(e){var a=this;this.$refs.setTagClassForm.validate(function(e){e&&(a.delTagFun(),a.closeTagModal("setTagClassForm"),a.$message.success("设置成功"))})},clickTagHandle:function(a){var t=event.target.getBoundingClientRect();e(".setCRMAttr .tagHandle").css("top",t.top),e(".setCRMAttr .tagHandle").css("left",t.left+30),this.handleTagData=a,this.showOverlayClick=!0,this.showTagHandle=!0},clickAddTag:function(e){"add"===e?(this.tagModalTitle="新建标签",this.addTagForm={name:""}):(this.showTagHandle=!1,this.showOverlayClick=!1,this.tagModalTitle="编辑标签",this.addTagForm=JSON.parse(l()(this.handleTagData))),this.showAddTag=!0},submitTagBtn:function(){var e=this;this.$refs.addTagForm.validate(function(a){if(a){var t=JSON.parse(l()(e.addTagForm));"新建标签"===e.tagModalTitle?(t.id=66,t.checked=!1,e.tagsList.push(t)):"编辑标签"===e.tagModalTitle&&e.tagsList.forEach(function(a,s){a.id===t.id&&e.$set(e.tagsList,s,t)}),e.closeTagModal("addTagForm")}})},delTag:function(){this.showConfirmDelTag=!0,this.showOverlay=!0,this.showTagHandle=!1,this.showOverlayClick=!1},confirmDelTag:function(){var e=this;this.tagsList.forEach(function(a,t){a.id===e.handleTagData.id&&e.tagsList.splice(t,1)}),this.$message.success("删除成功"),this.cancelConfirm()}},components:{"v-confirmModal":r.a}}}).call(a,t("7t+N"))}});