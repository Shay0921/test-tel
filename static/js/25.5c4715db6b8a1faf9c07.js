webpackJsonp([25],{JzvM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),o=a.n(l),n={data:function(){return{messageTabActive:"first",showRecordModal:!1,recordTabActive:"1",handleOp:[{label:"shay",value:1},{label:"刘欣雨",value:2}],sendStateOp:[{label:"发送成功",value:1},{label:"发送失败",value:2}],searchRecord:{input:"",handle:"",date:"",state:""},recordTableData:[{id:1,company:"北京海硅信息技术有限公司",phone:"135****3159",send:"挂机短信",task:"客户咨询",mould:"二次跟进",state:"发送成功",date:"2018-12-18"},{id:2,company:"北京海硅信息技术有限公司22",phone:"135****3159",send:"挂机短信",task:"客户咨询",mould:"二次跟进",state:"发送成功",date:"2018-12-18"}],recordModalText:"【天度创想】尊敬的客户您好，我是腾讯EC的张天美，电话里给您简单介绍了我们的产品，更多产品信息可点击 www.88918.com.cn ，这是我的名片 ecurl.cn/dg72 ，可随时联系我 13522690418 ，祝您生活愉快，工作顺利。",recordTotal:150,recordCurrentPage:2,recordPageSize:100,showAddMould:!1,addMouldTitle:"新建短信模板",mouldTabActive:"1",examineOp:[{label:"已审核",value:1},{label:"待审核",value:2},{label:"审核失败",value:3}],searchMould:{input:"",examine:"",date:""},mouldTableData:[{id:"201800012",title:"费用咨询",content:"您好，智能电话机器人您好，智能电话机器人您好，智能电话机器人",state:"已审核",date:"2018-12-18",ps:""},{id:"201800013",title:"挂机",content:"您好，智能电话机器人您好，智能电话机器人您好，智能电话机器人",state:"已审核",date:"2018-12-18",ps:""},{id:"201800014",title:"意向客户",content:"您好，智能电话机器人您好，智能电话机器人您好，智能电话机器人",state:"已审核",date:"2018-12-18",ps:""}],mouldAddForm:{title:"",content:"",wordCount:0,smsCount:1},mouldAddRules:{title:[{required:!0,message:"请输入模板名称",trigger:"blur"}],content:[{required:!0,message:"请输入模板内容",trigger:"blur"}]},mouldCursurPosition:-1,mouldTotal:150,mouldCurrentPage:2,mouldPageSize:100,showAddSign:!1,addSignTitle:"新建短信签名",searchSign:{input:"",examine:"",date:""},signTableData:[{id:"201800012",content:"海归企业服务",state:"已审核",date:"2018-12-18",ps:""},{id:"201800013",content:"海归企业服务",state:"已审核",date:"2018-12-18",ps:""},{id:"201800014",content:"海归企业服务",state:"已审核",date:"2018-12-18",ps:""}],signAddForm:{content:""},signAddRules:{content:[{required:!0,message:"请输入短信签名",trigger:"blur"}]},signCursurPosition:-1,signTotal:150,signCurrentPage:2,signPageSize:100}},watch:{"mouldAddForm.content":function(e,t){var a=e.length;this.mouldAddForm.wordCount=a;var l=parseInt(a/71)+1;this.mouldAddForm.smsCount=l}},methods:{handleTabClick:function(e,t){},delPopover:a("NZyr").d,clickRecordTab:function(e){this.recordTabActive=e},changeSearchRecord:function(){var e=JSON.parse(o()(this.searchRecord.input));this.searchRecord={input:e,handle:"",date:"",state:""}},changeRecordHandle:function(e){this.searchRecord.input=""},changeRecordState:function(e){this.searchRecord.input=""},changeRecordDate:function(e){this.searchRecord.input=""},clickRecordItem:function(e,t){this.showRecordModal=!0},recordHandleSizeChange:function(e){},recordHandleCurrentChange:function(e){},clickMouldTab:function(e){this.mouldTabActive=e},changeSearchMould:function(){var e=JSON.parse(o()(this.searchMould.input));this.searchMould={input:e,examine:"",date:""}},changeMouldState:function(e){this.searchMould.input=""},changeMouldDate:function(e){this.searchMould.input=""},addMould:function(e,t){"add"===e?(this.addMouldTitle="新建短信模板",this.mouldAddForm={title:"",content:"",wordCount:0,smsCount:1}):"edit"===e&&(this.addMouldTitle="编辑短信模板",this.mouldAddForm=JSON.parse(o()(t))),this.showAddMould=!0},handleCommandAddVar:function(e){var t;"company"===e?t="#客户称呼#":"send"===e?t="#发信人#":"url"===e?t="#微名片URL#":"phone"===e?t="#手机号#":"custom"===e&&(t="#请输入变量名#"),this.insert_flg(t),this.$message.success(""+this.mouldCursurPosition)},insert_flg:function(e){var t="",a=JSON.parse(o()(this.mouldAddForm.content)),l=this.mouldCursurPosition;-1===this.mouldCursurPosition?t+=a+e:(t+=a.substring(0,l)+e+a.substring(l,a.length),this.mouldCursurPosition+=e.length);this.mouldAddForm.content=t},getFocusPosition:function(e){var t=document.getElementById("qq");if(t.selectionStart||0===t.selectionStart)this.mouldCursurPosition=t.selectionStart;else if(document.selection){var a=document.selection.createRange();a.moveStart("character",-t.value.length),this.mouldCursurPosition=a.text.length}},submitMouldBtn:function(){var e=this;this.$refs.mouldAddForm.validate(function(t){if(t){var a=JSON.parse(o()(e.mouldAddForm));"新建短信模板"===e.addMouldTitle?(e.mouldTableData.push(a),e.$message.success("添加成功")):(e.mouldTableData.forEach(function(t,l){a.id===t.id&&e.$set(e.mouldTableData,l,a)}),e.$message.success("修改成功")),e.closeMouldModal("mouldAddForm")}})},closeMouldModal:function(e){this.showAddMould=!1,this.mouldCursurPosition=-1,this.$refs[e].resetFields()},clickDelMould:function(e,t){this.mouldTableData.splice(t,1)},mouldHandleSizeChange:function(e){},mouldHandleCurrentChange:function(e){},changeSearchSign:function(){var e=JSON.parse(o()(this.searchSign.input));this.searchSign={input:e,examine:"",date:""}},changeSignState:function(e){this.searchSign.input=""},changeSignDate:function(e){this.searchSign.input=""},addSign:function(e,t){"add"===e?(this.signAddTitle="新建短信签名",this.signAddForm={content:""}):"edit"===e&&(this.addSignTitle="编辑短信签名",this.signAddForm=JSON.parse(o()(t))),this.showAddSign=!0},submitSignBtn:function(){var e=this;this.$refs.signAddForm.validate(function(t){if(t){var a=JSON.parse(o()(e.signAddForm));"新建短信签名"===e.addSignTitle?(e.signTableData.push(a),e.$message.success("添加成功")):(e.signTableData.forEach(function(t,l){a.id===t.id&&e.$set(e.signTableData,l,a)}),e.$message.success("修改成功")),e.closeSignModal("signAddForm")}})},closeSignModal:function(e){this.showAddSign=!1,this.$refs[e].resetFields()},clickDelSign:function(e,t){this.signTableData.splice(t,1)},signHandleSizeChange:function(e){},signHandleCurrentChange:function(e){}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"setMessage haigui-section scrollbar"},[a("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.messageTabActive,callback:function(t){e.messageTabActive=t},expression:"messageTabActive"}},[a("el-tab-pane",{staticClass:"messageRecord",attrs:{label:"短信记录",name:"first"}},[a("div",{staticClass:"setMessage-type"},[a("h3",[e._v("短信类型")]),e._v(" "),a("ul",[a("li",{class:"1"===e.recordTabActive?"active":"",on:{click:function(t){e.clickRecordTab("1")}}},[e._v("挂机短信")]),e._v(" "),a("li",{class:"2"===e.recordTabActive?"active":"",on:{click:function(t){e.clickRecordTab("2")}}},[e._v("场景短信")])])]),e._v(" "),a("div",{staticClass:"setMessage-table"},[a("div",{staticClass:"setMessage-btn"},[a("el-input",{attrs:{placeholder:"搜索客户名称","prefix-icon":"el-icon-search"},on:{input:e.changeSearchRecord},model:{value:e.searchRecord.input,callback:function(t){e.$set(e.searchRecord,"input",t)},expression:"searchRecord.input"}}),e._v(" "),a("el-select",{attrs:{placeholder:"选择发送人",clearable:""},on:{change:e.changeRecordHandle},model:{value:e.searchRecord.handle,callback:function(t){e.$set(e.searchRecord,"handle",t)},expression:"searchRecord.handle"}},e._l(e.handleOp,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeRecordDate},model:{value:e.searchRecord.date,callback:function(t){e.$set(e.searchRecord,"date",t)},expression:"searchRecord.date"}}),e._v(" "),a("el-select",{attrs:{size:"small",placeholder:"选择发送状态",clearable:""},on:{change:e.changeRecordState},model:{value:e.searchRecord.state,callback:function(t){e.$set(e.searchRecord,"state",t)},expression:"searchRecord.state"}},e._l(e.sendStateOp,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.recordTableData},on:{"row-click":e.clickRecordItem}},[a("el-table-column",{attrs:{width:"20"}}),e._v(" "),a("el-table-column",{attrs:{prop:"company",label:"客户名称","show-overflow-tooltip":"","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"send",label:"发送场景","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"task",label:"任务名称","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mould",label:"模板名称","show-overflow-tooltip":"","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"发送状态","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"发送时间","min-width":"150"}})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.recordCurrentPage,"page-sizes":[100,200,300,400],"page-size":e.recordPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.recordTotal},on:{"size-change":e.recordHandleSizeChange,"current-change":e.recordHandleCurrentChange}})],1)]),e._v(" "),a("el-tab-pane",{staticClass:"messageMould",attrs:{label:"短信模板",name:"second"}},[a("div",{staticClass:"setMessage-type"},[a("h3",[e._v("短信类型")]),e._v(" "),a("ul",[a("li",{class:"1"===e.mouldTabActive?"active":"",on:{click:function(t){e.clickMouldTab("1")}}},[e._v("挂机短信")]),e._v(" "),a("li",{class:"2"===e.mouldTabActive?"active":"",on:{click:function(t){e.clickMouldTab("2")}}},[e._v("场景短信")])])]),e._v(" "),a("div",{staticClass:"setMessage-table"},[a("div",{staticClass:"setMessage-btn"},[a("el-input",{attrs:{placeholder:"搜索模板名称","prefix-icon":"el-icon-search"},on:{input:e.changeSearchMould},model:{value:e.searchMould.input,callback:function(t){e.$set(e.searchMould,"input",t)},expression:"searchMould.input"}}),e._v(" "),a("el-select",{attrs:{size:"small",placeholder:"选择审核状态",clearable:""},on:{change:e.changeMouldState},model:{value:e.searchMould.examine,callback:function(t){e.$set(e.searchMould,"examine",t)},expression:"searchMould.examine"}},e._l(e.examineOp,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeMouldDate},model:{value:e.searchMould.date,callback:function(t){e.$set(e.searchMould,"date",t)},expression:"searchMould.date"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.addMould("add")}}},[e._v("新建短信模板")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.mouldTableData}},[a("el-table-column",{attrs:{width:"20"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"模板ID","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"模板名称","show-overflow-tooltip":"","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"短信内容","show-overflow-tooltip":"","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"审核状态","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"更新时间","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ps",label:"审核备注","show-overflow-tooltip":"","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"text"},on:{click:function(a){e.addMould("edit",t.row)}}},[e._v("编辑")]),e._v(" "),a("el-popover",{attrs:{"popper-class":"mouldPopover"+t.row.id,placement:"top",width:"160"},model:{value:t.row.visible,callback:function(a){e.$set(t.row,"visible",a)},expression:"scope.row.visible"}},[a("p",[e._v("是否确定删除此模板？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.row.visible=!1,e.clickDelMould(t.row,t.$index)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(a){t.row.visible=!t.row.visible,e.delPopover("mould",t.row.id)}},slot:"reference"},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.mouldCurrentPage,"page-sizes":[100,200,300,400],"page-size":e.mouldPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.mouldTotal},on:{"size-change":e.mouldHandleSizeChange,"current-change":e.mouldHandleCurrentChange}})],1)]),e._v(" "),a("el-tab-pane",{staticClass:"messageSign",attrs:{label:"签名管理",name:"third"}},[a("div",{staticClass:"setMessage-table"},[a("div",{staticClass:"setMessage-btn"},[a("el-input",{attrs:{placeholder:"搜索签名名称","prefix-icon":"el-icon-search"},on:{input:e.changeSearchSign},model:{value:e.searchSign.input,callback:function(t){e.$set(e.searchSign,"input",t)},expression:"searchSign.input"}}),e._v(" "),a("el-select",{attrs:{placeholder:"选择审核状态",clearable:""},on:{change:e.changeSignState},model:{value:e.searchSign.examine,callback:function(t){e.$set(e.searchSign,"examine",t)},expression:"searchSign.examine"}},e._l(e.examineOp,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeSignDate},model:{value:e.searchSign.date,callback:function(t){e.$set(e.searchSign,"date",t)},expression:"searchSign.date"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.addSign("add")}}},[e._v("新建短信签名")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.signTableData}},[a("el-table-column",{attrs:{width:"20"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"签名内容","show-overflow-tooltip":"","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"审核状态","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"申请时间","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ps",label:"未通过原因","show-overflow-tooltip":"","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"text"},on:{click:function(a){e.addSign("edit",t.row)}}},[e._v("编辑")]),e._v(" "),a("el-popover",{attrs:{"popper-class":"signPopover"+t.row.id,placement:"top",width:"160"},model:{value:t.row.visible,callback:function(a){e.$set(t.row,"visible",a)},expression:"scope.row.visible"}},[a("p",[e._v("是否确定删除此签名？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.row.visible=!1,e.clickDelSign(t.row,t.$index)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(a){t.row.visible=!t.row.visible,e.delPopover("sign",t.row.id)}},slot:"reference"},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.signCurrentPage,"page-sizes":[100,200,300,400],"page-size":e.signPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.signTotal},on:{"size-change":e.signHandleSizeChange,"current-change":e.signHandleCurrentChange}})],1)])],1),e._v(" "),a("el-dialog",{staticClass:"recordModal",attrs:{title:"短信内容",visible:e.showRecordModal,width:"400px"},on:{"update:visible":function(t){e.showRecordModal=t}}},[a("div",{staticClass:"recordModalText scrollbar"},[e._v(e._s(e.recordModalText))]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showRecordModal=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticClass:"mouldAddModal",attrs:{width:"500px",title:e.addMouldTitle,visible:e.showAddMould},on:{"update:visible":function(t){e.showAddMould=t},close:function(t){e.closeMouldModal("mouldAddForm")}}},[a("el-form",{ref:"mouldAddForm",attrs:{model:e.mouldAddForm,rules:e.mouldAddRules,"label-width":"85px"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"title"}},[a("el-input",{attrs:{maxlength:30,placeholder:"请输入模板名称"},model:{value:e.mouldAddForm.title,callback:function(t){e.$set(e.mouldAddForm,"title",t)},expression:"mouldAddForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板内容",prop:"content"}},[a("div",{staticClass:"mouldModalContent"},[a("p",[a("el-dropdown",{on:{command:e.handleCommandAddVar}},[a("span",{staticClass:"el-dropdown-link"},[e._v("添加变量")]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"company"}},[e._v("客户称呼")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"send"}},[e._v("发信人")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"url"}},[e._v("微名片URL")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"phone"}},[e._v("手机号")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"custom"}},[e._v("自定义")])],1)],1)],1),e._v(" "),a("el-input",{ref:"aa",attrs:{id:"qq",type:"textarea",rows:2,placeholder:"请输入模板内容"},on:{blur:e.getFocusPosition},model:{value:e.mouldAddForm.content,callback:function(t){e.$set(e.mouldAddForm,"content",t)},expression:"mouldAddForm.content"}}),e._v(" "),a("b",{staticClass:"smsMouldPs"},[e._v(e._s(e.mouldAddForm.wordCount)+"共个字，"+e._s(e.mouldAddForm.smsCount)+"条短信\n            "),a("el-tooltip",{attrs:{effect:"dark",placement:"top","popper-class":"smsModalTip"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("运营商将按照短信字数计费，70字"),a("br"),e._v("为一条，总字数不限。")]),e._v(" "),a("i",{staticClass:"far fa-question-circle"})])],1)],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.closeMouldModal("mouldAddForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitMouldBtn}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"signAddModal",attrs:{width:"500px",title:e.addSignTitle,visible:e.showAddSign},on:{"update:visible":function(t){e.showAddSign=t},close:function(t){e.closeSignModal("signAddForm")}}},[a("el-form",{ref:"signAddForm",attrs:{model:e.signAddForm,rules:e.signAddRules,"label-width":"85px"}},[a("el-form-item",{attrs:{label:"短信签名",prop:"content"}},[a("el-input",{attrs:{maxlength:30,placeholder:"请输入签名内容：如产品/网站/公司名称"},model:{value:e.signAddForm.content,callback:function(t){e.$set(e.signAddForm,"content",t)},expression:"signAddForm.content"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:""}},[a("span",{staticStyle:{color:"#909399"}},[e._v("短信签名需过运营商审核，审核时间可能比较久，")]),a("br"),e._v(" "),a("span",{staticStyle:{color:"#909399"}},[e._v("平均审核周期2个工作日，最长可能5个工作日。")]),a("br"),e._v(" "),a("span",{staticStyle:{color:"#909399"}},[e._v("(工作时间: 9:00-18:00)")])])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.closeSignModal("signAddForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitSignBtn}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,i,!1,function(e){a("tika")},null,null);t.default=s.exports},tika:function(e,t){}});