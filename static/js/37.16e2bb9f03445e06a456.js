webpackJsonp([37],{Ly3u:function(l,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t={data:function(){return{activeCallRecordTab:"first",showSlider:!1,clickSliderObj:{id:"",index:""},callTypeOp:[{label:"通话类型1",value:1},{label:"通话类型2",value:2}],callTalkingOp:[{label:"AI话术1",value:1},{label:"AI话术2",value:2}],callTaskOp:[{label:"AI外呼任务1",value:1},{label:"AI外呼任务2",value:2}],callStateOp:[{label:"通话状态1",value:1},{label:"通话状态2",value:2}],callLevelOp:[{label:"意向等级1",value:1},{label:"意向等级2",value:2}],callTimeOp:[{label:"通话时长1",value:1},{label:"通话时长2",value:2}],callFollowerOp:[{label:"最后跟进人1",value:1},{label:"最后跟进人2",value:2}],callIsReadOp:[{label:"是否已读1",value:1},{label:"是否已读2",value:2}],callClientOp:[{value:1,label:"A级(有明确意向)"},{value:2,label:"B级(可能有意向)"},{value:3,label:"C级(明确拒绝)"},{value:4,label:"D级(用户忙)"},{value:5,label:"E级(拨打失败)"},{value:6,label:"F级(无效客户)"}],callRecordSearch:"",callRecordFilter:{callTime:1,callDate:null,type:"",talking:"",task:"",state:"",level:"",time:"",follower:"",isRead:""},multipleSelection:[],checkId:[],callRecordTableData:[{id:"1543482866",type:1,date:"2018-09-30 11:30",company:"北京海硅信息技术有限公司1",phone:"18211103898",callState:1,takingName:"网易企业邮箱",AITask:"/",follower:"刘欣雨1",contact:"shay",level:1,readStage:1},{id:"1543482867",type:2,date:"2018-09-30 11:30",company:"北京海硅信息技术有限公司2",phone:"18211103898",callState:2,takingName:"网易企业邮箱",AITask:"/",follower:"刘欣雨2",contact:"shay",level:2,readStage:2},{id:"1543482868",type:1,date:"2018-09-30 11:30",company:"北京海硅信息技术有限公司3",phone:"18211103898",callState:3,takingName:"网易企业邮箱",AITask:"/",follower:"刘欣雨3",contact:"shay",level:3,readStage:1}],callRecordData:[{time:"11:11:11",description:"开始呼入，等待接通"},{time:"11:12:11",description:"开始接听"},{time:"11:13:11",description:"开场白"},{time:"11:14:11",description:"业务介绍"},{time:"11:15:11",description:"邀约"},{time:"11:16:11",description:"结束邀约"}],callRecordTotal:1500,callRecordCurrentPage:2,callRecordPageSize:100}},watch:{"callRecordFilter.callDate":function(l){l?this.callRecordFilter.callTime="":l||""!==this.callRecordFilter.callTime||(this.callRecordFilter.callTime=1)},callRecordFilter:{handler:function(l,e){l.callTime&&null!==l.callDate||this.callRecordFilterAxios()},immediate:!1,deep:!0},multipleSelection:function(l){var e=this;this.checkId=[],this.multipleSelection.forEach(function(l,a){e.checkId.push(l.id)})}},computed:{callRecordPage:function(){return Math.ceil(this.callRecordTotal/this.callRecordPageSize)},callPhone:{get:function(){return this.$store.getters.callPhone},set:function(l){this.$store.getters.callPhone=l}}},methods:{handleCallRecord:function(l,e){this.clickCallRecordClearSearch()},clickCallRecordSearch:function(){},clickCallRecordClearSearch:function(){this.callRecordSearch="",this.callRecordFilter={callTime:"1",callDate:null,type:"",talking:"",task:"",state:"",level:"",time:"",follower:"",isRead:""}},handleFilterCallTime:function(l){this.callRecordFilter.callDate=null},callRecordFilterAxios:function(){this.$message.success("send...")},clickExportRecord:function(){var l=document.createElement("a");l.download="到处记录",l.style.display="none",l.href="../../../static/image/批量导入模板.xlsx",document.body.appendChild(l),l.click(),document.body.removeChild(l)},callRecordChangeCurrent:function(l){"next"===l?++this.callRecordCurrentPage:--this.callRecordCurrentPage},handleSelectCustomer:function(l){this.multipleSelection=l},clickCallPhone:function(l){if(!this.callPhone.visible){var e={visible:!0,phone:l.phone,contact:l.contact,company:l.company};this.$store.dispatch("setCallPhoneVuex",e)}},clickShowRecord:function(l){1!==l.readStage&&(l.readStage=1)},clickDownloadRecord:function(l){var e=document.createElement("a");e.download="到处记录",e.style.display="none",e.href="../../../static/image/批量导入模板.xlsx",document.body.appendChild(e),e.click(),document.body.removeChild(e)},clickTableItem:function(l){this.showSlider=!0,this.clickSliderObj={id:l.id,index:this.getRowData("callRecordTableData",l.id)}},getRowData:function(l,e){for(var a=0;a<this[l].length;a++){if(this[l][a].id===e)return a}},delIndexChild:function(l){this.callRecordTableData.splice(l,1)},callRecordHandleSizeChange:function(l){},callRecordHandleCurrentChange:function(l){this.callRecordCurrentPage=l}},filters:{filtersLevel:function(l,e){for(var a="",t=0;t<e.length;t++)l===e[t].value&&(a=e[t].label);return a}},components:{"v-CRMSlider":a("DyVN").a}},c={render:function(){var l=this,e=l.$createElement,a=l._self._c||e;return a("div",{staticClass:"haigui-section reportCallRecord scrollbar"},[a("el-tabs",{on:{"tab-click":l.handleCallRecord},model:{value:l.activeCallRecordTab,callback:function(e){l.activeCallRecordTab=e},expression:"activeCallRecordTab"}},[a("el-tab-pane",{attrs:{label:"AI通话记录",name:"first"}}),l._v(" "),a("el-tab-pane",{attrs:{label:"人工通话记录",name:"second"}})],1),l._v(" "),a("div",{staticClass:"callRecord-filter"},[a("div",{staticClass:"callRecord-search"},[a("el-input",{attrs:{placeholder:"通话ID、公司、手机回车搜索"},model:{value:l.callRecordSearch,callback:function(e){l.callRecordSearch=e},expression:"callRecordSearch"}}),l._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:l.clickCallRecordSearch}},[l._v("搜索")]),l._v(" "),a("el-button",{staticStyle:{"margin-bottom":"15px"},on:{click:l.clickCallRecordClearSearch}},[l._v("清空搜索")]),l._v(" "),a("div",{staticClass:"callRecord-search_right"},[a("el-button",{attrs:{icon:"el-icon-download"},on:{click:l.clickExportRecord}},[l._v("导出记录")])],1)],1),l._v(" "),a("div",{staticClass:"callRecord-filter-item"},[a("div",{},[a("h6",[l._v("拨打时间")]),l._v(" "),a("el-radio-group",{staticStyle:{"margin-right":"10px"},on:{change:l.handleFilterCallTime},model:{value:l.callRecordFilter.callTime,callback:function(e){l.$set(l.callRecordFilter,"callTime",e)},expression:"callRecordFilter.callTime"}},[a("el-radio-button",{attrs:{label:"1"}},[l._v("不限")]),l._v(" "),a("el-radio-button",{attrs:{label:"2"}},[l._v("今天")]),l._v(" "),a("el-radio-button",{attrs:{label:"3"}},[l._v("昨天")]),l._v(" "),a("el-radio-button",{attrs:{label:"4"}},[l._v("近7日")])],1),l._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:l.callRecordFilter.callDate,callback:function(e){l.$set(l.callRecordFilter,"callDate",e)},expression:"callRecordFilter.callDate"}})],1),l._v(" "),"first"===l.activeCallRecordTab?a("el-select",{attrs:{clearable:"",placeholder:"通话类型"},model:{value:l.callRecordFilter.type,callback:function(e){l.$set(l.callRecordFilter,"type",e)},expression:"callRecordFilter.type"}},l._l(l.callTypeOp,function(l){return a("el-option",{key:l.value,attrs:{label:l.label,value:l.value}})})):l._e(),l._v(" "),"first"===l.activeCallRecordTab?a("el-select",{attrs:{clearable:"",placeholder:"选择AI话术"},model:{value:l.callRecordFilter.talking,callback:function(e){l.$set(l.callRecordFilter,"talking",e)},expression:"callRecordFilter.talking"}},l._l(l.callTalkingOp,function(l){return a("el-option",{key:l.value,attrs:{label:l.label,value:l.value}})})):l._e(),l._v(" "),"first"===l.activeCallRecordTab?a("el-select",{attrs:{clearable:"",placeholder:"选择AI外呼任务"},model:{value:l.callRecordFilter.task,callback:function(e){l.$set(l.callRecordFilter,"task",e)},expression:"callRecordFilter.task"}},l._l(l.callTaskOp,function(l){return a("el-option",{key:l.value,attrs:{label:l.label,value:l.value}})})):l._e(),l._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"选择通话状态"},model:{value:l.callRecordFilter.state,callback:function(e){l.$set(l.callRecordFilter,"state",e)},expression:"callRecordFilter.state"}},l._l(l.callStateOp,function(l){return a("el-option",{key:l.value,attrs:{label:l.label,value:l.value}})})),l._v(" "),"first"===l.activeCallRecordTab?a("el-select",{attrs:{clearable:"",placeholder:"选择意向等级"},model:{value:l.callRecordFilter.level,callback:function(e){l.$set(l.callRecordFilter,"level",e)},expression:"callRecordFilter.level"}},l._l(l.callLevelOp,function(l){return a("el-option",{key:l.value,attrs:{label:l.label,value:l.value}})})):l._e(),l._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"选择通话时长"},model:{value:l.callRecordFilter.time,callback:function(e){l.$set(l.callRecordFilter,"time",e)},expression:"callRecordFilter.time"}},l._l(l.callTimeOp,function(l){return a("el-option",{key:l.value,attrs:{label:l.label,value:l.value}})})),l._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"最后跟进人"},model:{value:l.callRecordFilter.follower,callback:function(e){l.$set(l.callRecordFilter,"follower",e)},expression:"callRecordFilter.follower"}},l._l(l.callFollowerOp,function(l){return a("el-option",{key:l.value,attrs:{label:l.label,value:l.value}})})),l._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"是否已读"},model:{value:l.callRecordFilter.isRead,callback:function(e){l.$set(l.callRecordFilter,"isRead",e)},expression:"callRecordFilter.isRead"}},l._l(l.callIsReadOp,function(l){return a("el-option",{key:l.value,attrs:{label:l.label,value:l.value}})}))],1)]),l._v(" "),a("div",{staticClass:"callRecord-body"},[a("div",{staticClass:"callRecord-page"},[a("el-button",{attrs:{icon:"el-icon-arrow-right",disabled:l.callRecordCurrentPage===l.callRecordPage},on:{click:function(e){l.callRecordChangeCurrent("next")}}}),l._v(" "),a("el-button",{staticStyle:{"margin-right":"5px"},attrs:{icon:"el-icon-arrow-left",disabled:1===l.callRecordCurrentPage},on:{click:function(e){l.callRecordChangeCurrent("prev")}}}),l._v(" "),a("span",[l._v(l._s(l.callRecordCurrentPage)+"/"+l._s(l.callRecordPage))])],1),l._v(" "),a("div",{staticClass:"callRecord-table"},[a("el-table",{ref:"callRecordTable",staticStyle:{width:"100%"},attrs:{data:l.callRecordTableData},on:{"selection-change":l.handleSelectCustomer}},[a("el-table-column",{attrs:{width:"20"}}),l._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),l._v(" "),a("el-table-column",{attrs:{prop:"id",label:"通话记录ID","min-width":"100"}}),l._v(" "),a("el-table-column",{attrs:{label:"通话时间","min-width":"160"},scopedSlots:l._u([{key:"default",fn:function(e){return[a("i",{class:[1===e.row.type?"icon-dial":"icon-answer","fas fa-long-arrow-alt-up"]}),a("span",[l._v(l._s(e.row.date))])]}}])}),l._v(" "),a("el-table-column",{attrs:{label:"客户名称","show-overflow-tooltip":"","min-width":"200"},scopedSlots:l._u([{key:"default",fn:function(e){return[a("p",{staticClass:"clickCell",on:{click:function(a){l.clickTableItem(e.row)}}},[l._v(l._s(e.row.company))])]}}])}),l._v(" "),a("el-table-column",{attrs:{label:"电话号码","min-width":"150"},scopedSlots:l._u([{key:"default",fn:function(e){return[a("span",[l._v(l._s(e.row.phone))]),a("i",{staticClass:"fa fa-phone",on:{click:function(a){l.clickCallPhone(e.row)}}})]}}])}),l._v(" "),a("el-table-column",{attrs:{label:"通话状态","min-width":"80"},scopedSlots:l._u([{key:"default",fn:function(e){return[a("span",{domProps:{textContent:l._s(1===e.row.callState?"已接通":2===e.row.callState?"已挂断":"无法接通")}})]}}])}),l._v(" "),a("el-table-column",{attrs:{prop:"takingName","show-overflow-tooltip":"",label:"话术名称","min-width":"120"}}),l._v(" "),a("el-table-column",{attrs:{prop:"AITask",label:"AI任务名称","show-overflow-tooltip":"","min-width":"120"}}),l._v(" "),a("el-table-column",{attrs:{prop:"follower",label:"最后跟进人","min-width":"100"}}),l._v(" "),a("el-table-column",{attrs:{label:"意向标签","min-width":"150"},scopedSlots:l._u([{key:"default",fn:function(e){return[a("span",[l._v(l._s(l._f("filtersLevel")(e.row.level,l.callClientOp)))])]}}])}),l._v(" "),a("el-table-column",{attrs:{fixed:"right","min-width":"120"},scopedSlots:l._u([{key:"default",fn:function(e){return[a("span",{style:1===e.row.readStage?"color:#67C23A":"color:#F56C6C",domProps:{textContent:l._s(1===e.row.readStage?"已读":"未读")}}),l._v(" "),a("el-popover",{attrs:{"popper-class":"callRecord-popper",placement:"right",width:"270",trigger:"click"}},[a("div",{staticClass:"callRecord-info scrollbar"},[a("h6",[l._v("通话进程记录")]),l._v(" "),a("el-steps",{attrs:{direction:"vertical",space:50}},l._l(l.callRecordData,function(l,e){return a("el-step",{key:e,attrs:{title:l.time,description:l.description,icon:"fa fa-circle-notch"}})}))],1),l._v(" "),a("i",{staticClass:"far fa-file-alt",staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{slot:"reference"},on:{click:function(a){l.clickShowRecord(e.row)}},slot:"reference"})]),l._v(" "),a("i",{staticClass:"el-icon-download",staticStyle:{"font-size":"18px",cursor:"pointer"},on:{click:function(a){l.clickDownloadRecord(e.row)}}})]}}])})],1),l._v(" "),a("el-pagination",{attrs:{"current-page":l.callRecordCurrentPage,"page-sizes":[100,200,300,400],"page-size":l.callRecordPageSize,layout:"total, sizes, prev, pager, next, jumper",total:l.callRecordTotal},on:{"size-change":l.callRecordHandleSizeChange,"current-change":l.callRecordHandleCurrentChange}})],1)]),l._v(" "),a("v-CRMSlider",{attrs:{visible:l.showSlider,sliderObj:l.clickSliderObj,pageType:"edit"},on:{"update:visible":function(e){l.showSlider=e},sendIndex:l.delIndexChild}})],1)},staticRenderFns:[]};var r=a("VU/8")(t,c,!1,function(l){a("nGjj")},null,null);e.default=r.exports},nGjj:function(l,e){}});