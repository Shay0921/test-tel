webpackJsonp([40],{"0xMY":function(e,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=i("mvHQ"),l=i.n(t),a=i("NZyr"),n={data:function(){return{activeSalesRemindTab:"first",showSlider:!1,clickSliderObj:{id:"",index:""},activeClassId:0,remindClassSystem:[{id:1,color:"#EB5050",className:"重要且紧急"},{id:2,color:"#FFA700",className:"重要但不紧急"},{id:3,color:"#409EFF",className:"紧急但不重要"},{id:4,color:"#13C65F",className:"不重要不紧急"}],remindClassCustom:[{id:11,color:"#EB5050",className:"今日需致电客户"},{id:22,color:"#FFA700",className:"发方案给客户"},{id:33,color:"#409EFF",className:"拜访客户"}],showAddRemindClass:!1,remindClassModalTitle:"新建分组",predefineColors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"],addRemindClassForm:{className:"",color:"rgba(255, 69, 0, 0.68)"},remindClassAddRules:{className:[{required:!0,message:"请输入提醒分组名称",trigger:"blur"}]},delVisible:!1,remindFilter:{date:"",search:""},showRemindModal:!1,setCustomerRemind:{},multipleSelection:[],checkId:[],salesRemindTableData:[{id:1,remindDate:"2018-09-30 11:30:56",company:"北京海硅信息技术有限公司1",contact:"刘欣雨",stage:"1",remindRangeNode:[{label:"shay",id:11},{label:"刘欣雨",id:77}],remindRangeKey:[11,77],remindClass:{id:"1",className:"重要但不紧急",color:"#FFA700"},remindContent:"周一拜访客户"}],salesRemindTotal:1500,salesRemindCurrentPage:2,salesRemindPageSize:100}},watch:{multipleSelection:function(e){var s=this;this.checkId=[],this.multipleSelection.forEach(function(e,i){s.checkId.push(e.id)})}},computed:{salesRemindPage:function(){return Math.ceil(this.salesRemindTotal/this.salesRemindPageSize)}},methods:{handleSalesRemind:function(e,s){},clickRemindClass:function(e){this.activeClassId!==e&&(this.activeClassId=e)},clickAddClass:function(e,s){"add"===e?(this.remindClassModalTitle="新建分组",this.addRemindClassForm={className:"",color:"rgba(255, 69, 0, 0.68)"}):(this.remindClassModalTitle="编辑分组",this.addRemindClassForm=JSON.parse(l()(s))),this.showAddRemindClass=!0},submitRemindClassBtn:function(){var e=this;this.$refs.addRemindClassForm.validate(function(s){if(s){var i=JSON.parse(l()(e.addRemindClassForm));"新建分组"===e.remindClassModalTitle?(e.remindClassCustom.push(i),e.$message.success("新建成功")):"编辑分组"===e.remindClassModalTitle&&e.remindClassCustom.forEach(function(s,t){s.id===i.id&&(e.$set(e.remindClassCustom,t,i),e.$message.success("修改成功"))}),e.closeRemindModal("addRemindClassForm")}})},closeRemindModal:function(e){this.showAddRemindClass=!1,this.$refs[e].resetFields()},clickDelRemindClass:function(e){this.remindClassCustom.splice(e,1),this.$message.success("删除成功")},clickFinishBtn:function(){var e=this;if(this.multipleSelection.length>0){var s=[];this.multipleSelection.forEach(function(e,i){s.push(e.id)}),this.salesRemindTableData=this.salesRemindTableData.filter(function(s){return-1===e.multipleSelection.indexOf(s)}),this.$refs.salesRemindTable.clearSelection(),this.$message.success("设置成功")}else this.$message.error("请先选择需要完成的提醒")},clickDelCheckCustomer:function(){var e=this;if(this.multipleSelection.length>0){var s=[];this.multipleSelection.forEach(function(e,i){s.push(e.id)}),this.salesRemindTableData=this.salesRemindTableData.filter(function(s){return-1===e.multipleSelection.indexOf(s)}),this.$refs.salesRemindTable.clearSelection(),this.$message.success("删除成功")}else this.$message.error("请先选择需要删除的提醒")},clickRefreshBtn:function(){this.$message.success("刷新成功"),this.$refs.salesRemindTable.clearSelection(),this.remindFilter={date:"",search:""}},changeFilterDate:function(e){this.remindFilter.date=null===e?"":Object(a.e)(e)},changeFilterInput:function(e){},salesRemindChangeCurrent:function(e){"next"===e?++this.salesRemindCurrentPage:--this.salesRemindCurrentPage},handleSelectCustomer:function(e){this.multipleSelection=e},clickTableRemind:function(e){var s=JSON.parse(l()(e)),i=[s.id];s.remindDate&&(this.setCustomerRemind={type:"edit",companyId:i,companyText:s.company,remindDate:new Date(s.remindDate),remindContent:s.remindContent,remindClass:s.remindClass,remindRangeNode:s.remindRangeNode,remindRangeKey:s.remindRangeKey}),this.showRemindModal=!0},salesRemindHandleSizeChange:function(e){},salesRemindHandleCurrentChange:function(e){this.salesRemindCurrentPage=e}},components:{"v-CRMRemindModal":i("6daL").a}},o={render:function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"haigui-section salesRemind"},[i("el-tabs",{on:{"tab-click":e.handleSalesRemind},model:{value:e.activeSalesRemindTab,callback:function(s){e.activeSalesRemindTab=s},expression:"activeSalesRemindTab"}},[i("el-tab-pane",{attrs:{label:"未完成",name:"first"}}),e._v(" "),i("el-tab-pane",{attrs:{label:"已完成",name:"second"}})],1),e._v(" "),i("div",{staticClass:"salesRemind-body"},[i("div",{staticClass:"salesRemind-left scrollbar"},[i("div",{},[i("h6",[e._v("提醒分组")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"90px"},attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(s){e.clickAddClass("add")}}},[e._v("新建分组")])],1),e._v(" "),i("div",{staticClass:"salesRemind-calss calssSystem"},[i("ul",[i("li",{class:0===e.activeClassId?"active":"",on:{click:function(s){e.clickRemindClass(0)}}},[i("b"),i("span",[e._v("全部分组")])]),e._v(" "),e._l(e.remindClassSystem,function(s,t){return i("li",{class:e.activeClassId===s.id?"active":"",on:{click:function(i){e.clickRemindClass(s.id)}}},[i("b",{style:"background:"+s.color}),i("p",[e._v(e._s(s.className))])])})],2)]),e._v(" "),i("div",{staticClass:"salesRemind-calss calssCustom"},[i("ul",e._l(e.remindClassCustom,function(s,t){return i("li",{class:e.activeClassId===s.id?"active":"",on:{click:function(i){e.clickRemindClass(s.id)}}},[i("b",{style:"background:"+s.color}),i("p",[e._v(e._s(s.className))]),e._v(" "),i("u",[i("i",{staticClass:"iconfont icon-compile",on:{click:function(i){i.stopPropagation(),e.clickAddClass("edit",s)}}}),e._v(" "),i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:s.visible,callback:function(i){e.$set(s,"visible",i)},expression:"item.visible"}},[i("p",[e._v("确定删除提醒分组吗？")]),e._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){s.visible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){s.visible=!1,e.clickDelRemindClass(t)}}},[e._v("确定")])],1),e._v(" "),i("i",{staticClass:"iconfont icon-web-icon-",attrs:{slot:"reference"},on:{click:function(e){e.stopPropagation(),s.visible=!s.visible}},slot:"reference"})])],1)])}))])]),e._v(" "),i("div",{staticClass:"salesRemind-right scrollbar"},[i("div",{staticClass:"salesRemind-filter"},[i("p",[e._v("共"+e._s(e.salesRemindTotal)+"人，已选择"+e._s(e.multipleSelection.length)+"人")]),e._v(" "),i("div",{staticClass:"salesRemind-app-btn"},[i("div",{},["first"===e.activeSalesRemindTab?i("el-button",{staticClass:"finishBtn",attrs:{type:"primary",icon:"el-icon-circle-check-outline"},on:{click:e.clickFinishBtn}},[e._v("完成")]):e._e(),e._v(" "),i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.delVisible,callback:function(s){e.delVisible=s},expression:"delVisible"}},[i("p",[e._v("是否删除选中的提醒？")]),e._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(s){e.delVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(s){e.delVisible=!1,e.clickDelCheckCustomer()}}},[e._v("确定")])],1),e._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",icon:"el-icon-delete"},on:{click:function(s){e.delVisible=!e.delVisible}},slot:"reference"},[e._v("删除")])],1),e._v(" "),i("el-button",{staticClass:"refreshBtn",attrs:{icon:"el-icon-refresh"},on:{click:e.clickRefreshBtn}},[e._v("刷新")]),e._v(" "),i("el-date-picker",{attrs:{type:"date",placeholder:"请选择提醒时间",clearable:""},on:{change:e.changeFilterDate},model:{value:e.remindFilter.date,callback:function(s){e.$set(e.remindFilter,"date",s)},expression:"remindFilter.date"}}),e._v(" "),i("el-input",{attrs:{placeholder:"搜索客户名称","prefix-icon":"el-icon-search"},on:{change:e.changeFilterInput},model:{value:e.remindFilter.search,callback:function(s){e.$set(e.remindFilter,"search",s)},expression:"remindFilter.search"}})],1),e._v(" "),i("div",{staticClass:"salesRemind-app-btn-right"},[i("el-button",{attrs:{icon:"el-icon-arrow-right",disabled:e.salesRemindCurrentPage===e.salesRemindPage},on:{click:function(s){e.salesRemindChangeCurrent("next")}}}),e._v(" "),i("el-button",{attrs:{icon:"el-icon-arrow-left",disabled:1===e.salesRemindCurrentPage},on:{click:function(s){e.salesRemindChangeCurrent("prev")}}}),e._v(" "),i("span",[e._v(e._s(e.salesRemindCurrentPage)+"/"+e._s(e.salesRemindPage))])],1)])]),e._v(" "),i("div",{staticClass:"salesRemind-table"},[i("el-table",{ref:"salesRemindTable",staticStyle:{width:"100%"},attrs:{data:e.salesRemindTableData},on:{"selection-change":e.handleSelectCustomer}},[i("el-table-column",{attrs:{width:"20"}}),e._v(" "),i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{prop:"remindDate",label:"提醒时间","min-width":"150"}}),e._v(" "),i("el-table-column",{attrs:{label:"客户名称","show-overflow-tooltip":"","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(s){return[i("p",{staticClass:"clickCell",on:{click:function(e){}}},[e._v(e._s(s.row.company))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"contact",label:"联系人","min-width":"100"}}),e._v(" "),i("el-table-column",{attrs:{label:"跟进阶段","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(s){return[i("el-tag",{attrs:{type:"1"===s.row.stage?"success":"warning"},domProps:{textContent:e._s("1"===s.row.stage?"新入库":"有意向")}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"提醒成员","show-overflow-tooltip":"","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(s){return[i("span",[e._v(e._s(s.row.remindRangeNode[0].label))]),e._v("  "),i("span",[e._v(e._s(s.row.remindRangeNode[1].label))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"提醒分组","show-overflow-tooltip":"","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[i("span",{staticClass:"tableRemindClass"},[i("b",{style:"background:"+s.row.remindClass.color}),e._v(e._s(s.row.remindClass.className))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"remindContent","show-overflow-tooltip":"",label:"提醒内容","min-width":"150"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(s){return[i("el-button",{staticStyle:{color:"#606266"},attrs:{type:"text",icon:"far fa-clock el-tooltip"},on:{click:function(i){e.clickTableRemind(s.row)}}},[e._v("设置")])]}}])})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.salesRemindCurrentPage,"page-sizes":[100,200,300,400],"page-size":e.salesRemindPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.salesRemindTotal},on:{"size-change":e.salesRemindHandleSizeChange,"current-change":e.salesRemindHandleCurrentChange}})],1)])]),e._v(" "),i("el-dialog",{attrs:{width:"400px",title:e.remindClassModalTitle,visible:e.showAddRemindClass},on:{"update:visible":function(s){e.showAddRemindClass=s},close:function(s){e.closeRemindModal("addRemindClassForm")}}},[i("el-form",{ref:"addRemindClassForm",attrs:{model:e.addRemindClassForm,rules:e.remindClassAddRules,"label-width":"105px"}},[i("el-form-item",{attrs:{label:"分组名称",prop:"className"}},[i("el-input",{attrs:{maxlength:15,placeholder:"请输入提醒分组名称"},model:{value:e.addRemindClassForm.className,callback:function(s){e.$set(e.addRemindClassForm,"className",s)},expression:"addRemindClassForm.className"}})],1),e._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"分组颜色"}},[i("el-color-picker",{attrs:{predefine:e.predefineColors},model:{value:e.addRemindClassForm.color,callback:function(s){e.$set(e.addRemindClassForm,"color",s)},expression:"addRemindClassForm.color"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(s){e.closeRemindModal("addRemindClassForm")}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitRemindClassBtn}},[e._v("确 定")])],1)],1),e._v(" "),i("v-CRMRemindModal",{attrs:{visible:e.showRemindModal,remindData:e.setCustomerRemind,isFinish:"first"===e.activeSalesRemindTab?1:2},on:{"update:visible":function(s){e.showRemindModal=s},"update:remindData":function(s){e.setCustomerRemind=s}}})],1)},staticRenderFns:[]};var c=i("VU/8")(n,o,!1,function(e){i("hRv9")},null,null);s.default=c.exports},hRv9:function(e,s){}});