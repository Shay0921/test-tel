webpackJsonp([38],{"/isX":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),c=a.n(l),n=a("NZyr"),s={data:function(){return{activeName:"first",changeType:"1",isSpaceTest:1,surplusCount:0,searchRecord:{input:"",type:"",date:""},typeOp:[{value:"1",label:"天眼查"},{value:"2",label:"企查查"},{value:"3",label:"企信宝"}],uploadFile:[],recordTableData:[{id:1,title:"天眼查企业数据",type:"1",space:"1",state:"1",name:"刘欣雨",date:"2018-12-25 18:18:18"},{id:2,title:"天眼查企业数据",type:"2",space:"2",state:"2",name:"刘欣雨",date:"2018-12-25 18:18:18"},{id:3,title:"天眼查企业数据",type:"3",space:"2",state:"3",name:"刘欣雨",date:"2018-12-25 18:18:18"}],recordTotal:150,recordCurrentPage:2,recordPageSize:100}},methods:{handleClick:function(e,t){},submitDownloadMould:function(){if(0===this.$refs.xlsxUpload.uploadFiles.length)this.$message.warning("请上传文件");else if(1===this.isSpaceTest&&this.surplusCount>0||2===this.isSpaceTest){var e=new FormData,t=this.$refs.xlsxUpload.uploadFiles[0].raw;e.append("changeType",this.changeType),e.append("isSpaceTest",this.isSpaceTest),e.append("file",t),this.activeName="second",this.$message.success("数据转换中，稍后请到转换记录中查看转换状态。"),this.$refs.xlsxUpload.clearFiles(),this.changeType="1",this.isSpaceTest=1}else this.$message.warning("空号检测为0条，请先充值")},clickDownloadRecord:function(e){var t=document.createElement("a");t.download="批量导入模板",t.style.display="none",t.href="../../../static/image/download.txt",document.body.appendChild(t),t.click(),document.body.removeChild(t)},changeSearchRecord:function(){var e=JSON.parse(c()(this.searchRecord.input));this.searchRecord={input:e,type:"",date:""}},changeRecordType:function(e){this.searchRecord.input=""},changeRecordDate:function(e){this.searchRecord.input=""},handleComplexBefore:function(e,t){var a="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.raw.type||"application/vnd.ms-excel"===e.raw.type;return a?(t.length>1&&t.splice(0,1),a):(t.length>1?t.splice(1,1):t.splice(0,1),this.$message.warning("请上传csv或xlsx格式的文件"),!1)},clickRouterRecharge:function(){this.$store.dispatch("qiyeInfoTabName","recharge").then(function(){Object(n.c)("/setQiyeInfo","财务信息")})},recordHandleSizeChange:function(e){},recordHandleCurrentChange:function(e){}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"salesDataChange haigui-section scrollbar"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticClass:"changeData",attrs:{label:"数据转换",name:"first"}},[a("ul",[a("li",{class:"1"===e.changeType?"active":"",on:{click:function(t){e.changeType="1"}}}),e._v(" "),a("li",{class:"2"===e.changeType?"active":"",on:{click:function(t){e.changeType="2"}}}),e._v(" "),a("li",{class:"3"===e.changeType?"active":"",on:{click:function(t){e.changeType="3"}}})]),e._v(" "),a("span",{staticStyle:{"font-size":"14px",color:"#909399","margin-right":"10px"}},[e._v("是否开启空号检测")]),e._v(" "),a("el-radio-group",{model:{value:e.isSpaceTest,callback:function(t){e.isSpaceTest=t},expression:"isSpaceTest"}},[a("el-radio",{attrs:{label:1}},[e._v("开启")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("关闭")])],1),e._v(" "),1===e.isSpaceTest?a("div",{},[e.surplusCount>0?a("p",[e._v("目前帐户空号检测还有"),a("b",[e._v(e._s(e.surplusCount))]),e._v("条")]):a("p",[e._v("空号检测还有0条，请"),a("u",{staticStyle:{color:"#409eff",cursor:"pointer","text-decoration":"none"},on:{click:e.clickRouterRecharge}},[e._v("充值")])])]):e._e(),e._v(" "),a("el-upload",{ref:"xlsxUpload",staticClass:"upload-demo",attrs:{drag:"","file-list":e.uploadFile,"auto-upload":!1,"on-change":e.handleComplexBefore,action:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传.csv或.xlsx文件")])]),e._v(" "),a("el-button",{on:{click:e.submitDownloadMould}},[e._v("转换导出数据")])],1),e._v(" "),a("el-tab-pane",{staticClass:"changeRecord",attrs:{label:"转换记录",name:"second"}},[a("div",{staticClass:"changeRecord-btn"},[a("el-input",{attrs:{placeholder:"搜索名称","prefix-icon":"el-icon-search"},on:{input:e.changeSearchRecord},model:{value:e.searchRecord.input,callback:function(t){e.$set(e.searchRecord,"input",t)},expression:"searchRecord.input"}}),e._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"选择类型"},on:{change:e.changeRecordType},model:{value:e.searchRecord.type,callback:function(t){e.$set(e.searchRecord,"type",t)},expression:"searchRecord.type"}},e._l(e.typeOp,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeRecordDate},model:{value:e.searchRecord.date,callback:function(t){e.$set(e.searchRecord,"date",t)},expression:"searchRecord.date"}})],1),e._v(" "),a("el-table",{staticClass:"recordTable",staticStyle:{width:"100%"},attrs:{data:e.recordTableData}},[a("el-table-column",{attrs:{label:"",width:"20"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"名称","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s("1"===t.row.state?"天眼查":"2"===t.row.state?"企查查":"企信宝")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"空号检测","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s("1"===t.row.space?"是":"否")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:"1"===t.row.state?"color:#67C23A":"2"===t.row.state?"color:#F56C6C":"color:#409EFF",domProps:{textContent:e._s("1"===t.row.state?"转换成功":"2"===t.row.state?"转换失败":"转换中")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"操作人","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"时间","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.clickDownloadRecord(t.row)}}},[e._v("下载")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.recordCurrentPage,"page-sizes":[100,200,300,400],"page-size":e.recordPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.recordTotal},on:{"size-change":e.recordHandleSizeChange,"current-change":e.recordHandleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,o,!1,function(e){a("Xufv")},null,null);t.default=r.exports},Xufv:function(e,t){}});